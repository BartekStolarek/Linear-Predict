(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{3:function(e,t,n){e.exports=n("zUnb")},"Re/O":function(e,t,n){"use strict";n.d(t,"cc",function(){return bs}),n.d(t,"Za",function(){return Oa}),n.d(t,"Z",function(){return hs}),n.d(t,"rb",function(){return gs}),n.d(t,"ac",function(){return V}),n.d(t,"a",function(){return _s}),n.d(t,"b",function(){return G}),n.d(t,"bc",function(){return X}),n.d(t,"Y",function(){return wa}),n.d(t,"Ea",function(){return ga}),n.d(t,"r",function(){return uo}),n.d(t,"s",function(){return lo}),n.d(t,"t",function(){return co}),n.d(t,"q",function(){return fo}),n.d(t,"y",function(){return zn}),n.d(t,"z",function(){return Fn}),n.d(t,"A",function(){return Bn}),n.d(t,"B",function(){return Un}),n.d(t,"C",function(){return Wn}),n.d(t,"D",function(){return wo}),n.d(t,"E",function(){return xo}),n.d(t,"I",function(){return No}),n.d(t,"qb",function(){return Eo}),n.d(t,"F",function(){return Oo}),n.d(t,"Ma",function(){return Co}),n.d(t,"mb",function(){return To}),n.d(t,"Oa",function(){return Do}),n.d(t,"p",function(){return Ro}),n.d(t,"wb",function(){return jo}),n.d(t,"xb",function(){return Lo}),n.d(t,"yb",function(){return Vo}),n.d(t,"zb",function(){return zo}),n.d(t,"Ab",function(){return Fo}),n.d(t,"c",function(){return Tr}),n.d(t,"d",function(){return kr}),n.d(t,"e",function(){return Ar}),n.d(t,"l",function(){return Pr}),n.d(t,"m",function(){return Mr}),n.d(t,"n",function(){return Dr}),n.d(t,"o",function(){return Rr}),n.d(t,"w",function(){return jr}),n.d(t,"x",function(){return Lr}),n.d(t,"G",function(){return Vr}),n.d(t,"H",function(){return zr}),n.d(t,"N",function(){return Fr}),n.d(t,"O",function(){return Br}),n.d(t,"Q",function(){return Ur}),n.d(t,"T",function(){return Wr}),n.d(t,"Ha",function(){return $r}),n.d(t,"Ia",function(){return Hr}),n.d(t,"Ya",function(){return Gr}),n.d(t,"jb",function(){return Kr}),n.d(t,"nb",function(){return Xr}),n.d(t,"sb",function(){return Yr}),n.d(t,"tb",function(){return Qr}),n.d(t,"ub",function(){return Jr}),n.d(t,"vb",function(){return eo}),n.d(t,"Cb",function(){return to}),n.d(t,"Fb",function(){return no}),n.d(t,"Gb",function(){return ro}),n.d(t,"Kb",function(){return oo}),n.d(t,"Ob",function(){return io}),n.d(t,"Pb",function(){return ao}),n.d(t,"h",function(){return $o}),n.d(t,"i",function(){return Ho}),n.d(t,"j",function(){return qo}),n.d(t,"k",function(){return Go}),n.d(t,"Na",function(){return Xo}),n.d(t,"Qa",function(){return Zo}),n.d(t,"Ra",function(){return Yo}),n.d(t,"Ua",function(){return Qo}),n.d(t,"Nb",function(){return Jo}),n.d(t,"M",function(){return ei}),n.d(t,"W",function(){return ni}),n.d(t,"X",function(){return ri}),n.d(t,"Ca",function(){return ai}),n.d(t,"Da",function(){return si}),n.d(t,"ab",function(){return ci}),n.d(t,"f",function(){return pi}),n.d(t,"g",function(){return hi}),n.d(t,"K",function(){return gi}),n.d(t,"U",function(){return vi}),n.d(t,"Pa",function(){return bi}),n.d(t,"Sa",function(){return wi}),n.d(t,"Ta",function(){return Ni}),n.d(t,"Wa",function(){return Oi}),n.d(t,"Xa",function(){return Ci}),n.d(t,"fb",function(){return Ii}),n.d(t,"Hb",function(){return Ti}),n.d(t,"Mb",function(){return Ai}),n.d(t,"L",function(){return zi}),n.d(t,"Ba",function(){return Fi}),n.d(t,"kb",function(){return Ui}),n.d(t,"pb",function(){return Wi}),n.d(t,"Ja",function(){return Mi}),n.d(t,"Ka",function(){return Di}),n.d(t,"La",function(){return Ri}),n.d(t,"dc",function(){return Li}),n.d(t,"ec",function(){return Vi}),n.d(t,"v",function(){return tr}),n.d(t,"P",function(){return or}),n.d(t,"R",function(){return ir}),n.d(t,"bb",function(){return ur}),n.d(t,"eb",function(){return lr}),n.d(t,"gb",function(){return mr}),n.d(t,"hb",function(){return gr}),n.d(t,"lb",function(){return yr}),n.d(t,"Eb",function(){return vr}),n.d(t,"Ib",function(){return br}),n.d(t,"Jb",function(){return _r}),n.d(t,"Ub",function(){return wr}),n.d(t,"Yb",function(){return xr}),n.d(t,"Zb",function(){return Nr}),n.d(t,"u",function(){return Er}),n.d(t,"Db",function(){return Or}),n.d(t,"S",function(){return We}),n.d(t,"Fa",function(){return $e}),n.d(t,"cb",function(){return Be}),n.d(t,"ib",function(){return He}),n.d(t,"ob",function(){return je}),n.d(t,"Qb",function(){return Re}),n.d(t,"Rb",function(){return Le}),n.d(t,"Sb",function(){return Ve}),n.d(t,"fc",function(){return Ue}),n.d(t,"db",function(){return Ye}),n.d(t,"gc",function(){return Qe}),n.d(t,"Xb",function(){return $i}),n.d(t,"Bb",function(){return De}),n.d(t,"Ga",function(){return Hi}),n.d(t,"V",function(){return Zi}),n.d(t,"Va",function(){return ea}),n.d(t,"Lb",function(){return ta}),n.d(t,"Vb",function(){return na}),n.d(t,"Wb",function(){return Ps}),n.d(t,"Tb",function(){return Bo}),n.d(t,"Aa",function(){return Uo}),n.d(t,"J",function(){return Wo});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function a(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function s(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function u(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function l(e,t,n){return Math.max(e,Math.min(t,n))}function c(e,t){return Math.random()*(t-e)+e}function f(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function p(e,t,n){void 0===n&&(n=""),f(y(e,t),n+" Shapes "+e+" and "+t+" must match")}function h(e){f(null!=e,"The input to the tensor constructor must be a non-null value.")}function d(e,t){if(void 0===t&&(t=[]),Array.isArray(e))for(var n=0;n<e.length;++n)d(e[n],t);else t.push(e);return t}function m(e){var t=e;if(T(e))return[e.length];if(!Array.isArray(e))return[];for(var n=[];t instanceof Array;)n.push(t.length),t=t[0];return e instanceof Array&&function e(t,n,r){if(r=r||[],t instanceof Array){f(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"}),f(t.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"});for(var o=n.slice(1),i=0;i<t.length;++i)e(t[i],o,r.concat(i))}else f(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array of "+n[0]+" elements"})}(e,n,[]),n}function g(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function y(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function v(e){return e%1==0}function b(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function _(e){for(var t=Math.floor(Math.sqrt(e));t>1;--t)if(e%t==0)return[t,e/t];return[1,e]}function w(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function x(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise(function(r,o){var i=0,a=function(){if(e())r();else{var s=t(++i);null!=n&&i>=n?o():setTimeout(a,s)}};a()})}function N(e,t){for(var n=1,r=-1,o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found "+e[o]+" at dim "+o);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function E(e,t){for(var n=[],r=[],o=0,i=0;i<e.length;++i){if(null!=t){if(t[o]===i&&1!==e[i])throw new Error("Can't squeeze axis "+i+" since its dim '"+e[i]+"' is not 1");(null==t[o]||t[o]>i)&&1===e[i]&&(n.push(e[i]),r.push(i)),t[o]<=i&&o++}1!==e[i]&&(n.push(e[i]),r.push(i))}return{newShape:n,keptDims:r}}function O(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function C(e,t,n){if("float32"===t)for(var r=0;r<e.length;r++)if(isNaN(e[r]))throw Error("The result of the '"+n+"' has NaNs.")}function I(e,t){if("float32"!==t)for(var n=0;n<e.length;n++)if(isNaN(e[n]))throw Error("NaN is not a valid value for dtype: '"+t+"'.")}function S(e,t){return!("float32"===t||"int32"===t&&"float32"!==e||"bool"===t&&"bool"===e)}function T(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function k(e){if("float32"===e||"int32"===e)return 4;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function A(e){return!!(e&&e.constructor&&e.call&&e.apply)}function P(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function M(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function D(e,t,n){return function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t)?e:(Array.isArray(e)&&(e=d(e)),function(e,t,n){if(null==t||"float32"===t)return new Float32Array(e);if("int32"===t)return n&&I(e,t),new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),o=0;o<r.length;++o)0!==Math.round(e[o])&&(r[o]=1);return r}throw new Error("Unknown data type "+t)}(e,t,n))}function R(e,t){for(var n=j(e,t),r=0;r<n.length;r++)n[r]=1;return n}function j(e,t){if(null==t||"float32"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function L(){if("undefined"!=typeof performance)return performance.now();if("undefined"!=typeof process){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}throw new Error("Can not measure time in this environment. You should run tf.js in the browser or in Node.js")}var V=Object.freeze({shuffle:u,clamp:l,randUniform:c,distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var o=Number(e[r])-Number(t[r]);n+=o*o}return n},assert:f,assertShapesMatch:p,assertNonNull:h,flatten:d,inferShape:m,sizeFromShape:g,isScalarShape:function(e){return 0===e.length},arraysEqual:y,isInt:v,tanh:b,sizeToSquarishShape:_,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return u(t),t},rightPad:w,repeatedTry:x,inferFromImplicitShape:N,squeezeShape:E,getTypedArrayFromDType:O,checkComputationForNaN:C,checkConversionForNaN:I,hasEncodingLoss:S,isTypedArray:T,bytesPerElement:k,isFunction:A,nearestDivisor:P,computeStrides:M,toTypedArray:D,makeOnesTypedArray:R,makeZerosTypedArray:j,now:L}),z=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new F)}return e.prototype.profileKernel=function(e,t){var n,r=this,o=this.backendTimer.time(function(){n=t()});return(Array.isArray(n)?n:[n]).forEach(function(t){var n=t.dataSync();C(n,t.dtype,e),o.then(function(o){r.logger.logKernelProfile(e,t,n,o.kernelMs)})}),n},e}(),F=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r){var o=w(r+"ms",9),i=w(e,25),a=t.rank,s=t.size,u=w(t.shape.toString(),14);console.log("%c"+i+"\t%c"+o+"\t%c"+a+"D "+u+"\t%c"+s,"font-weight:bold","color:red","color:blue","color: orange")},e}(),B=7;function U(e,t){return w(parseFloat(e.toFixed(B)).toString(),t)}var W=function(){function e(e,t,n){if(this.dtype=t,null!=n){var r=n.length,o=g(e);f(r===o,"Length of values '"+r+"' does not match the size inferred by the shape '"+o+"'")}this.shape=e.slice(),this.values=n||O(t,g(e)),this.strides=M(e),this.size=g(e)}return e.prototype.set=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];0===t.length&&(t=[0]),f(t.length===this.rank,"The number of provided coordinates ("+t.length+") must match the rank ("+this.rank+")");var r=this.locToIndex(t);this.values[r]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return G.make(this.shape,{values:this.values},this.dtype)},e}(),$=null,H=null;function q(e){$=e}var G=function(){function e(t,n,r,o){this.isDisposedInternal=!1,this.size=g(t),null!=r&&f(this.size===r.length,"Based on the provided shape, ["+t+"], the tensor should have "+this.size+" values but has "+r.length),this.shape=t.slice(),this.dtype=n||"float32",this.strides=M(t),this.dataId=null!=o?o:{},this.id=e.nextId++,this.rankType=this.rank<5?this.rank.toString():"higher",$().registerTensor(this),null!=r&&$().write(this.dataId,r)}return e.make=function(t,n,r){return new e(t,r,n.values,n.dataId)},e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),f(1===this.size,"The array must have only 1 element."),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.asType=function(e){return this.throwIfDisposed(),H.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];f(e.length===this.rank,"Number of coordinates in get() must match the rank of the tensor"),this.throwIfDisposed(),0===e.length&&(e=[0]);for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.dataSync()[n]},e.prototype.buffer=function(){return H.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.data=function(){return a(this,void 0,void 0,function(){return s(this,function(e){return this.throwIfDisposed(),[2,$().read(this.dataId)]})})},e.prototype.dataSync=function(){return this.throwIfDisposed(),$().readSync(this.dataId)},e.prototype.dispose=function(){this.isDisposed||($().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),H.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),H.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),H.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),H.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),H.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),H.clone(this)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var o=M(t),i=function(e,t,n){var r=g(t),o=n[n.length-1],i=new Array(o).fill(0);if(t.length>1)for(var a=0;a<r/o;a++)for(var s=a*o,u=0;u<o;u++)i[u]=Math.max(i[u],U(e[s+u],0).length);return i}(e,t,o),a=t.length,s=function e(t,n,r,o,i){void 0===i&&(i=!0);var a=n[0],s=n.length;if(0===s)return[t[0].toString()];if(1===s){if(a>20){var u=Array.from(t.subarray(0,3)),l=Array.from(t.subarray(a-3,a));return["["+u.map(function(e,t){return U(e,o[t])}).join(", ")+", ..., "+l.map(function(e,t){return U(e,o[a-3+t])}).join(", ")+"]"]}return["["+Array.from(t).map(function(e,t){return U(e,o[t])}).join(", ")+"]"]}var c=n.slice(1),f=r.slice(1),p=r[0],h=[];if(a>20){for(var d=0;d<3;d++){var m=(g=d*p)+p;h.push.apply(h,e(t.subarray(g,m),c,f,o,!1))}for(h.push("..."),d=a-3;d<a;d++)m=(g=d*p)+p,h.push.apply(h,e(t.subarray(g,m),c,f,o,d===a-1))}else for(d=0;d<a;d++){var g;m=(g=d*p)+p,h.push.apply(h,e(t.subarray(g,m),c,f,o,d===a-1))}var y=2===s?",":"";for(h[0]="["+h[0]+y,d=1;d<h.length-1;d++)h[d]=" "+h[d]+y;var v=",\n";for(d=2;d<s;d++)v+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":v),h}(e,t,o,i),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map(function(e){return"    "+e}).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),H.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),H.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),H.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),H.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),H.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),H.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),H.reverse(this,e)},e.prototype.concat=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),H.concat([this,e],t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),H.stack([this,e],t)},e.prototype.unstack=function(e,t){return void 0===t&&(t=0),H.unstack(this,t)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),H.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,o){return void 0===n&&(n=.001),this.throwIfDisposed(),H.batchNormalization(this,e,t,n,r,o)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),H.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),H.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),H.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),H.sum(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),H.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),H.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),H.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),H.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),H.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),H.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),H.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),H.addStrict(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),H.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),H.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),H.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),H.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),H.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),H.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),H.div(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),H.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),H.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),H.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),H.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),H.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),H.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),H.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),H.modStrict(this,e)},e.prototype.squaredDifference=function(e){return this.throwIfDisposed(),H.squaredDifference(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),H.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),H.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),H.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),H.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),H.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),H.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),H.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),H.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),H.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),H.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),H.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),H.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),H.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),H.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),H.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),H.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),H.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),H.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),H.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),H.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),H.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),H.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),H.sign(this)},e.prototype.exp=function(){return this.throwIfDisposed(),H.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),H.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),H.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),H.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),H.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),H.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),H.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),H.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),H.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),H.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),H.relu(this)},e.prototype.elu=function(){return this.throwIfDisposed(),H.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),H.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),H.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),H.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),H.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),H.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),H.softplus(this)},e.prototype.sin=function(){return this.throwIfDisposed(),H.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),H.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),H.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),H.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),H.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),H.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),H.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),H.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),H.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),H.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),H.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),H.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),H.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),H.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),H.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),H.softmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),H.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),H.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,o,i){return void 0===r&&(r="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),H.conv1d(this,e,t,n,r,o,i)},e.prototype.conv2d=function(e,t,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),H.conv2d(this,e,t,n,r,o,i)},e.prototype.conv2dTranspose=function(e,t,n,r,o){return this.throwIfDisposed(),H.conv2dTranspose(this,e,t,n,r,o)},e.prototype.depthwiseConv2D=function(e,t,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),H.depthwiseConv2d(this,e,t,n,r,o,i)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),H.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),H.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),H.localResponseNormalization(this,e,t,n,r)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),K.variable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),H.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),H.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),H.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),H.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,o){return void 0===r&&(r=0),void 0===o&&(o=0),this.throwIfDisposed(),H.stridedSlice(this,e,t,n,r,o)},e.nextId=0,e}();Object.defineProperty(G,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.shape&&null!=e.dtype}});var K=function(e){function t(n,r,o){void 0===r&&(r=!0);var i=e.call(this,n.shape,n.dtype,null,n.dataId)||this;i.trainable=r,i.name=o,null==i.name&&(i.name=t.nextVarId.toString(),t.nextVarId++);try{$().registerVariable(i)}catch(e){throw $().disposeTensor(i),e}return i}return o(t,e),t.variable=function(e,n,r,o){return void 0===n&&(n=!0),null!=o&&o!==e.dtype&&(e=e.asType(o)),new t(e,n,r)},t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!y(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");$().disposeTensor(this),this.dataId=e.dataId,$().registerTensor(this)},t.nextVarId=0,t}(G);Object.defineProperty(K,Symbol.hasInstance,{value:function(e){return e instanceof G&&null!=e.assign&&e.assign instanceof Function}});var X=K.variable;function Z(e,t){f(e.dtype===t.dtype," The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match")}function Y(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof G)n.push(t);else if(function(e){return Array.isArray(e)||"object"==typeof e}(t)){var o=t;for(var i in o){var a=o[i];r.has(a)||(r.add(a),e(a,n,r))}}}(e,t,new Set),t}var Q,J,ee=function(){function e(e,t,n){this.backend=e,this.safeMode=t,this.debugMode=n,this.registeredVariables={},this.refCounter=new WeakMap,this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numDataBuffers=0,this.gradientScopeCount=0,this.customGradientDepth=0,this.keepTensors=new Set,this.activeScope={track:[],name:"default scope"},this.scopeStack=[this.activeScope],this.profiler=new z(e)}return e.prototype.tidy=function(e,t,n){var r=this;void 0===n&&(n=!1);var o,i=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun(function(){return r.startScope(i,n)},function(){return r.endScope(o,n)},function(){return(o=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o})},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.runKernel=function(e,t,n){var r,o=this,i=[],a=function(e){return i.push(e),e},s=this.activeScope.name;if(this.scopedRun(function(){return o.customGradientDepth++},function(){return o.customGradientDepth--},function(){r=o.debugMode()?o.profiler.profileKernel(s,function(){return e(o.backend,a)}):e(o.backend,a)}),this.shouldRecord()){var u={id:this.nextTapeNodeId++,name:s,inputs:t,output:Array.isArray(r)?r[0]:r};null!=n&&(u.gradient=function(e){return n(e,i)}),this.activeTape.push(u)}return r},e.prototype.registerTensor=function(e){var t=this.refCounter.has(e.dataId)?this.refCounter.get(e.dataId):0;this.numTensors++,0===t&&(this.numDataBuffers++,this.numBytes+=g(e.shape)*k(e.dtype),this.backend.register(e.dataId,e.shape,e.dtype)),this.refCounter.set(e.dataId,t+1),e instanceof K||this.track(e)},e.prototype.registerVariable=function(e){if(null!=this.registeredVariables[e.name])throw new Error("Variable with name "+e.name+" was already registered");this.registeredVariables[e.name]=e},e.prototype.disposeTensor=function(e){if(this.refCounter.has(e.dataId)){this.keepTensors.has(e.id)&&this.keepTensors.delete(e.id),this.numTensors--;var t=this.refCounter.get(e.dataId);t<=1?(this.refCounter.delete(e.dataId),this.backend.disposeData(e.dataId),this.numDataBuffers--,this.numBytes-=g(e.shape)*k(e.dtype)):this.refCounter.set(e.dataId,t-1)}},e.prototype.disposeVariables=function(){for(var e in this.registeredVariables)this.disposeTensor(this.registeredVariables[e]),delete this.registeredVariables[e]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.numTensors,e.numDataBuffers=this.numDataBuffers,e.numBytes=this.numBytes,e},e.prototype.shouldRecord=function(){return null!=this.activeTape&&0===this.customGradientDepth},e.prototype.addTapeNode=function(e,t,n){var r={};e.forEach(function(e,t){r[t]=e});var o={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:r,output:t,gradient:function(e){var t={};return n(e).forEach(function(e,n){t[n]=function(){return e}}),t}};this.activeTape.push(o)},e.prototype.keep=function(e){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {...}) to avoid memory leaks.");return this.keepTensors.add(e.id),e},e.prototype.startScope=function(e,t){void 0===t&&(t=!1),t&&0===this.gradientScopeCount&&(this.activeTape=[]),t&&this.gradientScopeCount++;var n={track:[],name:"unnamed scope"};e&&(n.name=e),this.scopeStack.push(n),this.activeScope=n},e.prototype.endScope=function(e,t){var n=this;void 0===t&&(t=!1),t&&(this.gradientScopeCount--,0===this.gradientScopeCount&&(this.activeTape=null));var r=new Set(this.keepTensors),o=Y(e);o.forEach(function(e){return r.add(e.id)});for(var i=0;i<this.activeScope.track.length;i++){var a=this.activeScope.track[i];r.has(a.id)||(null!=this.activeTape?o.push(a):a.dispose())}var s=this.scopeStack.pop();this.activeScope=0===this.scopeStack.length?{track:[],name:"default scope"}:this.scopeStack[this.scopeStack.length-1],o.forEach(function(e){!n.keepTensors.has(e.id)&&function(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return!0;return!1}(e,s.track)&&n.track(e)})},e.prototype.gradients=function(e,t,n,r){var o=this;return void 0===r&&(r=!1),f(t.length>0,"gradients() received an empty list of xs."),this.tidy("gradients",function(){var i=e();f(i instanceof G,"The result y returned by f() must be a tensor.");var a=function(e,t,n){for(var r={},o={},i=0;i<t.length;i++)r[t[i].id]=!0;for(i=0;i<e.length;i++){var a=(m=e[i]).inputs;for(var s in a){for(var u=a[s],l=!1,c=0;c<t.length;c++)if(r[u.id]){r[m.output.id]=!0,l=!0,o[m.id]=!0;break}if(l)break}}var f={};f[n.id]=!0;var p={};for(i=e.length-1;i>=0;i--){a=(m=e[i]).inputs;var h=[];for(h.push(m.output),c=0;c<h.length;c++)if(f[h[c].id]){for(var s in a)f[a[s].id]=!0,p[m.id]=!0;break}}var d=[];for(i=0;i<e.length;i++){var m;if(o[(m=e[i]).id]&&p[m.id]){var g={};for(var s in m.inputs){var y=m.inputs[s];r[y.id]&&(g[s]=y)}var v=Object.assign({},m);v.inputs=g,v.output=m.output,d.push(v)}}return d}(o.activeTape,t,i);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");var s={};return s[i.id]=null==n?function(e){var t=R(g(e),"float32");return G.make(e,{values:t})}(i.shape):n,function(e,t){for(var n=t.length-1;n>=0;n--){var r=t[n],o=e[r.output.id];if(null==r.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+r.name+".");var i=r.gradient(o);for(var a in r.inputs){if(!(a in i))throw new Error("Cannot backprop through input "+a+". Available gradients found: "+Object.keys(i)+".");var s=i[a](),u=r.inputs[a];if(!y(s.shape,u.shape))throw new Error("Error in gradient for op "+r.name+". The gradient of input '"+a+"' has shape '"+s.shape+"', which does not match the shape of the input '"+u.shape+"'");if(null==e[u.id])e[u.id]=s;else{var l=e[u.id];e[u.id]=l.add(s),l.dispose()}}}}(s,a),{value:i,grads:t.map(function(e){return s[e.id]})}},!0)},e.prototype.customGrad=function(e){var t=this;return f(A(e),"The f passed in customGrad(f) must be a function."),function(){for(var n,r,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return f(o.every(function(e){return e instanceof G}),"The args passed in customGrad(f)(x1, x2,...) must all be tensors"),t.scopedRun(function(){return t.customGradientDepth++},function(){return t.customGradientDepth--},function(){r=t.tidy(e.name,function(){var t=e.apply(void 0,o),r=t.value,i=t.gradFunc;return f(r instanceof G,"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),f(A(i),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n=i,r},!0)}),t.shouldRecord()&&t.addTapeNode(o,r,function(e){var t=n(e),r=Array.isArray(t)?t:[t];return f(r.length===o.length,"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),f(r.every(function(e){return e instanceof G}),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."),r}),r}},e.prototype.write=function(e,t){this.backend.write(e,t)},e.prototype.readSync=function(e){return this.backend.readSync(e)},e.prototype.read=function(e){return this.backend.read(e)},e.prototype.fromPixels=function(e,t){return this.backend.fromPixels(e,t)},e.prototype.time=function(e){return a(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return t=L(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=L()-t,[2,n]}})})},e.prototype.track=function(e){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {op();...}); to avoid memory leaks.");return this.activeScope.track.push(e),e},e}();(J=Q||(Q={}))[J.NUMBER=0]="NUMBER",J[J.BOOLEAN=1]="BOOLEAN",J[J.STRING=2]="STRING";var te=[{name:"DEBUG",type:Q.BOOLEAN},{name:"IS_BROWSER",type:Q.BOOLEAN},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:Q.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:Q.BOOLEAN},{name:"WEBGL_VERSION",type:Q.NUMBER},{name:"WEBGL_RENDER_FLOAT32_ENABLED",type:Q.BOOLEAN},{name:"WEBGL_DOWNLOAD_FLOAT_ENABLED",type:Q.BOOLEAN},{name:"WEBGL_FENCE_API_ENABLED",type:Q.BOOLEAN},{name:"BACKEND",type:Q.STRING}];function ne(e,t){var n;try{n=ae(e,t)}catch(e){return!1}return null!=n&&(se(n),!0)}var re="tfjsflags";function oe(){var e={};if("undefined"==typeof window||void 0===window.location)return e;var t=function(e){var t={};return window.location.search.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")}),t}();if(re in t){var n={};t[re].split(",").forEach(function(e){var t=e.split(":");n[t[0]]=t[1]}),te.forEach(function(t){t.name in n&&(console.log("Setting feature override from URL "+t.name+": "+n[t.name]),t.type===Q.NUMBER?e[t.name]=+n[t.name]:t.type===Q.BOOLEAN?e[t.name]="true"===n[t.name]:t.type===Q.STRING?e[t.name]=n[t.name]:console.warn("Unknown URL param: "+t.name+"."))})}return e}function ie(e,t){return null!=e.getExtension(t)}function ae(e,t){if(0===e||!t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=document.createElement("canvas");return 1===e?n.getContext("webgl")||n.getContext("experimental-webgl"):n.getContext("webgl2")}function se(e){if(null!=e){var t=e.getExtension("WEBGL_lose_context");if(null==t)throw new Error("Extension WEBGL_lose_context not supported on this browser.");t.loseContext()}}function ue(e,t){var n=e.createFramebuffer(),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,2===t?e.RGBA32F:e.RGBA,1,1,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)}var le=function(){function e(e){this.features={},this.registry={},null!=e&&(this.features=e),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return e.setBackend=function(e,t){if(void 0===t&&(t=!1),!(e in ce.registry))throw new Error("Backend name '"+e+"' not found in registry");ce.initBackend(e,t)},e.getBackend=function(){return ce.initDefaultBackend(),ce.backendName},e.disposeVariables=function(){ce.engine.disposeVariables()},e.memory=function(){return ce.engine.memory()},e.tidy=function(e,t,n){return void 0===n&&(n=!1),ce.engine.tidy(e,t,n)},e.dispose=function(e){Y(e).forEach(function(e){return e.dispose()})},e.keep=function(e){return ce.engine.keep(e)},e.time=function(e){return ce.engine.time(e)},e.prototype.get=function(e){return e in this.features?this.features[e]:(this.features[e]=this.evaluateFeature(e),this.features[e])},e.prototype.getFeatures=function(){return this.features},e.prototype.set=function(e,t){this.features[e]=t},e.prototype.getBestBackendName=function(){var e=this;if(0===Object.keys(this.registry).length)throw new Error("No backend found in registry.");return Object.keys(this.registry).map(function(t){return{name:t,entry:e.registry[t]}}).sort(function(e,t){return t.entry.priority-e.entry.priority})[0].name},e.prototype.evaluateFeature=function(e){if("DEBUG"===e)return!1;if("IS_BROWSER"===e)return"undefined"!=typeof window;if("IS_NODE"===e)return"undefined"!=typeof process&&void 0!==process.versions.node;if("IS_CHROME"===e)return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);if("IS_TEST"===e)return!1;if("BACKEND"===e)return this.getBestBackendName();if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"===e){var t=this.get("WEBGL_VERSION");return 0===t?0:t>0?0:function(e,t){if(0===e)return 0;var n,r=ae(e,t);return n=ie(r,"EXT_disjoint_timer_query_webgl2")&&2===e?2:ie(r,"EXT_disjoint_timer_query")?1:0,null!=r&&se(r),n}(t,this.get("IS_BROWSER"))}if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE"===e)return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}();if("HAS_WEBGL"===e)return this.get("WEBGL_VERSION")>0;if("WEBGL_VERSION"===e)return ne(2,this.get("IS_BROWSER"))?2:ne(1,this.get("IS_BROWSER"))?1:0;if("WEBGL_RENDER_FLOAT32_ENABLED"===e)return function(e,t){if(0===e)return!1;var n=ae(e,t);if(1===e){if(!ie(n,"OES_texture_float"))return!1}else if(!ie(n,"EXT_color_buffer_float"))return!1;ue(n,e);var r=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return se(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("WEBGL_DOWNLOAD_FLOAT_ENABLED"===e)return function(e,t){if(0===e)return!1;var n=ae(e,t);if(1===e){if(!ie(n,"OES_texture_float"))return!1}else if(!ie(n,"EXT_color_buffer_float"))return!1;ue(n,e),n.readPixels(0,0,1,1,n.RGBA,n.FLOAT,new Float32Array(4));var r=n.getError()===n.NO_ERROR;return se(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("WEBGL_FENCE_API_ENABLED"===e)return function(e,t){if(2!==e)return!1;var n=ae(e,t),r=null!=n.fenceSync;return se(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("TEST_EPSILON"===e)return this.get("WEBGL_RENDER_FLOAT32_ENABLED")?.001:.1;throw new Error("Unknown feature "+e+".")},e.prototype.setFeatures=function(e){this.features=Object.assign({},e)},e.prototype.reset=function(){this.features=oe(),null!=this.globalEngine&&(this.globalEngine=null)},e.prototype.initBackend=function(e,t){var n=this;void 0===t&&(t=!1),this.backendName=e,this.backend=this.findBackend(e),this.globalEngine=new ee(this.backend,t,function(){return n.get("DEBUG")})},e.prototype.findBackend=function(e){return e in this.registry?this.registry[e].backend:null},e.prototype.registerBackend=function(e,t,n,r){var o=this;if(void 0===n&&(n=1),e in this.registry)return console.warn(e+" backend was already registered. Reusing existing backend"),null!=r&&r(function(){return o.engine}),!1;try{var i=t();return this.registry[e]={backend:i,priority:n},!0}catch(t){return console.warn("Registration of backend "+e+" failed"),console.warn(t.stack||t.message),!1}},e.prototype.removeBackend=function(e){if(!(e in this.registry))throw new Error(e+" backend not found in registry");this.registry[e].backend.dispose(),delete this.registry[e]},Object.defineProperty(e.prototype,"engine",{get:function(){return this.initDefaultBackend(),this.globalEngine},enumerable:!0,configurable:!0}),e.prototype.initDefaultBackend=function(){null==this.globalEngine&&this.initBackend(this.get("BACKEND"),!1)},e}(),ce=function(){var e=function(){var e;if("undefined"!=typeof window)e=window;else{if("undefined"==typeof process)throw new Error("Could not find a global object");e=process}return e}();return null==e.ENV&&(e.ENV=new le(oe()),q(function(){return e.ENV.engine})),e.ENV}();function fe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ce.get("IS_TEST")||console.warn.apply(console,e)}function pe(e,t,n,r){void 0===r&&(r=!0);var o=[];if(r)(o=o.concat(t.slice(0))).push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);for(var i=t.length,a=0;a<i;++a)o=o.concat([e[a+1]/t[a],t[a]]);o=o.concat(e.slice(i+1))}return o}function he(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{var i=[],a=[];for(o=1;o<e;++o)o>=2*t+1||o%2==1?a.push(o):i.push(o);r.push.apply(r,i),r.push(0),r.push.apply(r,a)}return r}function de(e,t,n,r){void 0===r&&(r=!0);var o=[];o.push(r?e[0]/n:e[0]*n);for(var i=1;i<e.length;++i)o.push(i<=t.length?r?t[i-1]*e[i]:e[i]/t[i-1]:e[i]);return o}function me(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function ge(e,t,n){for(var r=e.slice(0,1),o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function ye(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function ve(e,t){for(var n=[],r=e.length,o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map(function(t){return e[t]})]}function be(e,t){return function(e,t,n){for(var r=e.length+t.length,o=[],i=0,a=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(e[i++]):o.push(t[a++]);return o}(e,t.map(function(e){return 1}),t)}function _e(e,t){var n=t.length;return f((e=null==e?t.map(function(e,t){return t}):[].concat(e)).every(function(e){return e>=-n&&e<n}),"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e),f(e.every(function(e){return v(e)}),"All values in axis param must be integers but got axis "+e),e.map(function(e){return e<0?n+e:e})}function we(e,t,n){f(ye(t,n),e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input.")}function xe(e,t){if(ye(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(function(e){return n.push(e)}),n}function Ne(e){return e.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function Ee(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}Object.freeze({Environment:le,ENV:ce});var Oe=30;function Ce(e){return e<=Oe?e:P(e,Math.floor(Math.sqrt(e)))}function Ie(e,t,n,r,o,i,a,s,u){if(void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),0!==a)throw new Error("ellipsis mask is not yet supported");if(0!==s)throw new Error("new axis mask is not yet supported");for(var l=[],c=[],f=[],p=0;p<e.length;p++)l[p]=Se(o,t,r,e,p),c[p]=Te(i,n,r,e,p),u&1<<p&&(c[p]=l[p]+1,f.push(p));var h=new Array(e.length).fill(0);return h=h.map(function(e,t){for(var n=0,o=l[t];!(r[t]>0?o>=c[t]:o<=c[t]);o+=r[t])n+=1;return n}),[l,h,f]}function Se(e,t,n,r,o){var i=t[o];e&1<<o&&(i=n[o]>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[o];return i<0&&(i+=a),l(0,i,a-1)}function Te(e,t,n,r,o){var i=t[o];e&1<<o&&(i=n[o]>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[o];return i<0&&(i+=a),n[o]>0?l(0,i,a):l(-1,i,a-1)}function ke(e){return ce.engine.customGrad(e)}function Ae(e,t,n,r){if(void 0===r&&(r="float32"),r=r||"float32",e instanceof G)return e;if(!T(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e)throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got "+e.constructor.name);var o=m(e);return T(e)||Array.isArray(e)||(e=[e]),G.make(o,{values:D(e,r,ce.get("DEBUG"))},r)}function Pe(e,t,n){if(!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(e,r){return Ae(e,t+"["+r+"]",n)})}function Me(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ce.engine.startScope(n);try{var o=r.apply(void 0,e);return o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ce.engine.endScope(o),o}catch(e){throw ce.engine.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}var De=Me({softmax_:function(e,t){void 0===t&&(t=-1);var n=Ae(e,"logits","softmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return ke(function(e){var n=e.logSumExp([t],!0),r=e.toFloat().sub(n).exp();return{value:r,gradFunc:function(e){var n=e.mul(r);return n.sub(n.sum([t],!0).mul(r))}}})(n)}});function Re(e,t,n){if(void 0===n&&(n="float32"),!T(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e)throw new Error("values passed to tensor(values) must be an array of numbers or booleans, or a TypedArray");var r=m(e);return null!=t&&1!==r.length&&p(t,r,"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+t+"). "),T(e)||Array.isArray(e)||(e=[e]),G.make(t=t||r,{values:D(e,n,ce.get("DEBUG"))},n)}function je(e,t){if(void 0===t&&(t="float32"),T(e)||Array.isArray(e))throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean)");return Re(e,[],t)}function Le(e,t){void 0===t&&(t="float32"),h(e);var n=m(e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Re(e,n,t)}function Ve(e,t,n){if(void 0===n&&(n="float32"),h(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=m(e);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Re(e,t=t||r,n)}function ze(e,t,n){if(void 0===n&&(n="float32"),h(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=m(e);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Re(e,t=t||r,n)}function Fe(e,t,n){if(void 0===n&&(n="float32"),h(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=m(e);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Re(e,t=t||r,n)}function Be(e,t){void 0===t&&(t="float32");var n=R(g(e),t);return G.make(e,{values:n},t)}function Ue(e,t){void 0===t&&(t="float32");var n=j(g(e),t);return G.make(e,{values:n},t)}function We(e,t,n){void 0===n&&(n="float32");var r=O(n,g(e));return r.fill(t),G.make(e,{values:r},n)}function $e(e,t,n){if(0===n)throw new Error("Cannot request zero samples");var r=(t-e)/(n-1),o=j(n,"float32");o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+r;return Le(o,"float32")}function He(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Ue([0],r);var o=j(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+n;return Le(o,r)}var qe,Ge,Ke,Xe,Ze,Ye=Me({onesLike_:function(e){var t=Ae(e,"x","onesLike");return Be(t.shape,t.dtype)}}),Qe=Me({zerosLike_:function(e){var t=Ae(e,"x","zerosLike");return Ue(t.shape,t.dtype)}});!function(e){e.float32="float32",e.int32="int32",e.bool="bool"}(qe||(qe={})),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Ge||(Ge={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32"}(Ke||(Ke={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool"}(Xe||(Xe={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32"}(Ze||(Ze={}));var Je={float32:Ze,int32:Ke,bool:Xe};function et(e,t){return Je[e][t]}function tt(e){return et(e,"int32")}function nt(e,t,n){if(!S(e.dtype,t))return G.make(e.shape,{dataId:e.dataId},t);if("int32"===t)return n.int(e);if("bool"===t)return n.notEqual(e,je(0,e.dtype));throw new Error("Error in Cast: unknown dtype argument ("+t+")")}function rt(e,t){return G.make(t,{dataId:e.dataId},e.dtype)}function ot(e,t,n,r,o){for(var i=Array.from(t).map(function(e,t){return{score:e,boxIndex:t}}).filter(function(e){return e.score>o}).sort(function(e,t){return t.score-e.score}),a=[],s=0;s<i.length;s++){var u=i[s],l=u.boxIndex;if(u.score<o)break;for(var c=!1,f=a.length-1;f>=0;--f)if(it(e,l,a[f])>=r){c=!0;break}if(!c&&(a.push(l),a.length>=n))break}return Le(a,"int32")}function it(e,t,n){var r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),h=(s-i)*(u-a),d=(f-l)*(p-c);if(h<=0||d<=0)return 0;var m=Math.max(i,l),g=Math.max(a,c),y=Math.min(s,f),v=Math.min(u,p),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(h+d-b)}function at(e,t,n,r,o){for(var i=t[t.length-1],a=[e.length/i,i],s=a[0],u=a[1],l=O(n,s*r),c=O("int32",s*r),f=0;f<s;f++){for(var p=f*u,h=e.subarray(p,p+u),d=[],m=0;m<h.length;m++)d.push({value:h[m],index:m});d.sort(function(e,t){return t.value-e.value});var g=f*r,y=l.subarray(g,g+r),v=c.subarray(g,g+r);for(m=0;m<r;m++)y[m]=d[m].value,v[m]=d[m].index}var b=t.slice();return b[b.length-1]=r,[Re(l,b,n),Re(c,b,"int32")]}function st(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var i=n-1-o;(t[t.length-1-o]||1)>1&&1===(e[i]||1)&&r.unshift(i)}return r}function ut(e,t){for(var n=[],r=0;r<t.length;r++){var o=e[e.length-r-1],i=t.length-r-1;(null==o||1===o&&t[i]>1)&&n.unshift(i)}return n}function lt(e,t){for(var n=[],r=Math.max(e.length,t.length),o=0;o<r;o++){var i=e[e.length-o-1];null==i&&(i=1);var a=t[t.length-o-1];if(null==a&&(a=1),1===i)n.unshift(a);else if(1===a)n.unshift(i);else{if(i!==a)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}var ct=function(){function e(e,t,n){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.outputShape=lt(t,n),this.userCode="\n      uniform float NAN;\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(){var e=this;return function(t,n){null==e.startLoc&&(e.startLoc=t.getUniformLocationNoThrow(n,"NAN"),null==e.startLoc)||t.gl.uniform1f(e.startLoc,NaN)}},e}();function ft(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var pt,ht,dt="\n  float sampleTexture(sampler2D textureSampler, vec2 uv) {\n    return texture2D(textureSampler, uv).r;\n  }\n",mt="\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n",gt="\n  precision highp float;\n  precision highp int;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  struct ivec5\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n  };\n\n  struct ivec6\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n    int v;\n  };\n\n  bool isNaN(float val) {\n    return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;\n  }\n\n  bool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n  }\n\n  float getNaN(vec4 values) {\n    return dot(vec4(1), values);\n  }\n\n  int round(float value) {\n    return int(floor(value + 0.5));\n  }\n\n  int imod(int x, int y) {\n    return x - y * (x / y);\n  }\n\n  //Based on the work of Dave Hoskins\n  //https://www.shadertoy.com/view/4djSRW\n  #define HASHSCALE1 443.8975\n  float random(float seed){\n    vec2 p = resultUV * seed;\n    vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n  }\n\n  \nvec2 UVfrom1D(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom2D(int texNumR, int texNumC, int numC, int row, int col) {\n  int index = row * numC + col;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom3D(int texNumR, int texNumC, int stride0,\n    int stride1, int row, int col, int depth) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom4D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom5D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int row, int col, int depth,\n    int depth2, int depth3) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 +\n              depth * stride2 + depth2 * stride3 + depth3;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom6D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int stride4,\n    int row, int col, int depth, int depth2, int depth3, int depth4) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2 *\n    stride3 + depth3 * stride4 + depth4;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n";function yt(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function vt(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function bt(e,t){return t.map(function(t){return e[t]}).join(", ")}function _t(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}function wt(e,t){return[t,e]}function xt(e,t){return e*t}function Nt(e,t,n){var r=function(e,t){if(e%t!=0)throw new Error("unpackedSize ("+e+") must be a multiple of "+t);return e/t}(e.length,n);if(t.length<r)throw new Error("matrix length ("+t.length+") must be >= "+r);for(var o=0,i=0;i<e.length;i+=n)t[o++]=e[i]}function Et(e,t){return[Math.ceil(t/2),Math.ceil(e/2)]}function Ot(e,t){var n=Et(e,t);return n[0]*n[1]*4}!function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(pt||(pt={})),function(e){e[e.FLOAT16=0]="FLOAT16",e[e.FLOAT32=1]="FLOAT32",e[e.UNSIGNED_BYTE=2]="UNSIGNED_BYTE"}(ht||(ht={}));var Ct=null;function It(e){var t=document.createElement("canvas");return t.width=1,t.height=1,St(t,e)}function St(e,t){var n,r=ce.get("WEBGL_VERSION");if(2===r?n=e.getContext("webgl2",t):1===r&&(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)),0===r||null==n)throw new Error("This browser does not support WebGL.");return n}function Tt(e,t){var n=t();return Pt(e),n}var kt=!1;function At(e){kt=e}function Pt(e){if(kt){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+Mt(e,t))}}function Mt(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Dt(e,t){return rn(e,function(){return e.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function Rt(e,t){var n=rn(e,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Tt(e,function(){return e.shaderSource(n,t)}),Tt(e,function(){return e.compileShader(n)}),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function jt(e,t){var n=rn(e,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Tt(e,function(){return e.shaderSource(n,t)}),Tt(e,function(){return e.compileShader(n)}),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=Lt.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],o=e.split("\n"),i=o.length.toString().length+2,a=o.map(function(e,t){return w((t+1).toString(),i)+e}),s=0,u=0;u<a.length;u++)s=Math.max(a[u].length,s);var l=a.slice(0,r-1),c=a.slice(r-1,r),f=a.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+w(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var Lt=/ERROR: [0-9]+:([0-9]+):/g;function Vt(e){return rn(e,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function zt(e,t){if(Tt(e,function(){return e.linkProgram(t)}),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function Ft(e,t){if(Tt(e,function(){return e.validateProgram(t)}),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Bt(e,t){var n=rn(e,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Tt(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)}),Tt(e,function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)}),n}function Ut(e,t){var n=rn(e,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Tt(e,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)}),Tt(e,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)}),n}function Wt(e){return null!=Ct?Ct:Ct=Tt(e,function(){return e.getParameter(e.MAX_TEXTURE_SIZE)})}function $t(){return 2===ce.get("WEBGL_VERSION")?1:4}function Ht(e){return rn(e,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function qt(e,t,n){var r=Wt(e);if(t<=0||n<=0){var o="["+t+"x"+n+"]";throw new Error("Requested texture size "+o+" is invalid.")}if(t>r||n>r)throw o="["+t+"x"+n+"]",new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU ["+r+"x"+r+"].")}function Gt(e){return rn(e,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Kt(e,t,n,r,o,i,a){var s=e.getAttribLocation(t,n);return-1!==s&&(Tt(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Tt(e,function(){return e.vertexAttribPointer(s,o,e.FLOAT,!1,i,a)}),Tt(e,function(){return e.enableVertexAttribArray(s)}),!0)}function Xt(e,t,n){on(e,n),Tt(e,function(){return e.activeTexture(e.TEXTURE0+n)}),Tt(e,function(){return e.bindTexture(e.TEXTURE_2D,t)})}function Zt(e,t,n){return rn(e,function(){return e.getUniformLocation(t,n)},'uniform "'+n+'" not present in program.')}function Yt(e,t,n){return e.getUniformLocation(t,n)}function Qt(e,t,n,r,o){Tt(e,function(){return Xt(e,n,o)}),Tt(e,function(){return e.uniform1i(r,o)})}function Jt(e,t,n){Tt(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),Tt(e,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)})}function en(e,t){Tt(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)}),Tt(e,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function tn(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+nn(e,t))}function nn(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function rn(e,t,n){var r=Tt(e,function(){return t()});if(null==r)throw new Error(n);return r}function on(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function an(e,t){2!==t.length&&(t=E(t).newShape);var n=Wt(e),r=g(t);return t.length<=1&&r<=n?[r,1]:2===t.length&&t[0]<=n&&t[1]<=n?t:3===t.length&&t[0]<=n&&t[1]*t[2]<=n?[t[0],t[1]*t[2]]:4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n?[t[0],t[1]*t[2]*t[3]]:_(r)}var sn=Object.freeze({createWebGLRenderingContext:It,createWebGLRenderingContextFromCanvas:St,callAndCheck:Tt,enableDebugWebGLErrorChecking:At,checkWebGLError:Pt,getWebGLErrorMessage:Mt,getExtensionOrThrow:Dt,createVertexShader:Rt,createFragmentShader:jt,createProgram:Vt,linkProgram:zt,validateProgram:Ft,createStaticVertexBuffer:Bt,createStaticIndexBuffer:Ut,queryMaxTextureSize:Wt,getNumChannels:$t,createTexture:Ht,validateTextureSize:qt,createFramebuffer:Gt,bindVertexBufferToProgramAttribute:Kt,bindTextureUnit:Xt,unbindTextureUnit:function(e,t){on(e,t),Tt(e,function(){return e.activeTexture(e.TEXTURE0+t)}),Tt(e,function(){return e.bindTexture(e.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:Zt,getProgramUniformLocation:Yt,bindTextureToProgramUniformSampler:Qt,bindCanvasToFramebuffer:function(e){Tt(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Tt(e,function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)}),Tt(e,function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)})},bindColorTextureToFramebuffer:Jt,unbindColorTextureFromFramebuffer:en,validateFramebuffer:tn,getFramebufferErrorMessage:nn,getTextureShapeFromLogicalShape:an});function un(e){var t,n={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};return Tt(t=null!=e?St(e,n):It(n),function(){return t.disable(t.DEPTH_TEST)}),Tt(t,function(){return t.disable(t.STENCIL_TEST)}),Tt(t,function(){return t.disable(t.BLEND)}),Tt(t,function(){return t.disable(t.DITHER)}),Tt(t,function(){return t.disable(t.POLYGON_OFFSET_FILL)}),Tt(t,function(){return t.disable(t.SAMPLE_COVERAGE)}),Tt(t,function(){return t.enable(t.SCISSOR_TEST)}),Tt(t,function(){return t.enable(t.CULL_FACE)}),Tt(t,function(){return t.cullFace(t.BACK)}),t}function ln(e){return Rt(e,"\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function cn(e){return Bt(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function fn(e){return Ut(e,new Uint16Array([0,1,2,2,1,3]))}function pn(e,t){var n,r,o,i,a,s,u,l=e;return 2===ce.get("WEBGL_VERSION")?(n=l.R32F,r=l.R16F,o=l.RGBA32F,i=l.RED,a=4,s=1,u=l.HALF_FLOAT):(n=e.RGBA,r=e.RGBA,o=l.RGBA,i=e.RGBA,a=4,s=4,u=null!=t?t.HALF_FLOAT_OES:null),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:s,textureTypeHalfFloat:u}}function hn(e,t,n,r,o,i){qt(e,t,n);var a=Ht(e),s=e.TEXTURE_2D;return Tt(e,function(){return e.bindTexture(s,a)}),Tt(e,function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Tt(e,function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Tt(e,function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Tt(e,function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Tt(e,function(){return e.texImage2D(s,0,r,t,n,0,o,i,null)}),Tt(e,function(){return e.bindTexture(e.TEXTURE_2D,null)}),a}function dn(e,t,n,r){var o=wt(t,n);return hn(e,o[0],o[1],r.internalFormatFloat,r.textureFormatFloat,e.FLOAT)}function mn(e,t,n,r){var o=wt(t,n);return hn(e,o[0],o[1],r.internalFormatFloat,r.textureFormatFloat,r.textureTypeHalfFloat)}function gn(e,t,n,r){var o=wt(t,n);return hn(e,o[0],o[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function yn(e,t,n,r){var o=Et(t,n);return hn(e,o[0],o[1],r.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function vn(e,t,n){return Tt(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)}),Kt(e,t,"clipSpacePos",n,3,20,0)&&Kt(e,t,"uv",n,2,20,12)}function bn(e,t,n){Tt(e,function(){return e.bindTexture(e.TEXTURE_2D,t)}),Tt(e,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)}),Tt(e,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function _n(e,t,n,r,o,i){qt(e,n,r),Tt(e,function(){return e.bindTexture(e.TEXTURE_2D,t)}),Tt(e,function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,i,e.FLOAT,o)}),Tt(e,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function wn(e,t,n,r,o,i,a){var s,u=wt(n,r),l=u[0],c=u[1];1===a.defaultNumChannels?s=o:function(e,t,n){var r=xt(e.length,n);if(t.length<r)throw new Error("unpackedArray length ("+t.length+") must be >= "+r);for(var o=0,i=0;i<e.length;++i)t[o]=e[i],o+=n}(o,s=new Float32Array(xt(o.length,i)),i),_n(e,t,l,c,s,a.textureFormatFloat)}function xn(e,t,n,r,o,i){var a=Et(n,r),s=a[0],u=a[1],l=new Float32Array(Ot(n,r));(function(e,t,n,r){var o=Ot(t,n);if(r.length<o)throw new Error("packedRGBA length ("+r.length+") must be >= "+o);for(var i=Et(t,n),a=i[0],s=i[1],u=n%2==1,l=t%2==1,c=Math.floor(n/2),f=Math.floor(t/2),p=u?4:0,h=n,d=0,m=0;m<f;++m){for(var g=2*m*n,y=0;y<c;++y){var v=g+2*y;r[d]=e[v],r[d+1]=e[v+1],r[d+2]=e[v+h],r[d+3]=e[v+h+1],d+=4}d+=p}if(u){v=n-1,d=4*(a-1);var b=2*n;for(p=4*a,m=0;m<f;++m)r[d]=e[v],r[d+2]=e[v+n],v+=b,d+=p}if(l)for(v=(t-1)*n,d=(s-1)*a*4,y=0;y<c;++y)r[d++]=e[v++],r[d++]=e[v++],d+=2;u&&l&&(r[r.length-4]=e[e.length-1])})(o,n,r,l),_n(e,t,s,u,l,e.RGBA)}function Nn(e,t,n,r,o){var i=t;if(2===ce.get("WEBGL_VERSION")){var a=e,s=a.createBuffer();Tt(e,function(){return e.bindBuffer(a.PIXEL_PACK_BUFFER,s)});var u=4*xt(n*r,o.downloadUnpackNumChannels);Tt(e,function(){return e.bufferData(a.PIXEL_PACK_BUFFER,u,e.STATIC_DRAW)}),Tt(e,function(){return a.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),Tt(e,function(){return e.bindBuffer(a.PIXEL_PACK_BUFFER,null)}),i=s}return i}function En(e,t,n,r,o){var i=e,a=new Float32Array(xt(n*r,o.downloadUnpackNumChannels));i.bindBuffer(e.ARRAY_BUFFER,t),i.getBufferSubData(e.ARRAY_BUFFER,0,a),i.bindBuffer(e.ARRAY_BUFFER,null);var s=new Float32Array(n*r);return Nt(a,s,o.downloadUnpackNumChannels),s}function On(e,t,n,r){var o=wt(t,n),i=o[0],a=o[1],s=new Float32Array(xt(t*n,r.downloadUnpackNumChannels));Tt(e,function(){return e.readPixels(0,0,i,a,r.downloadTextureFormat,e.FLOAT,s)});var u=new Float32Array(t*n);return Nt(s,u,r.downloadUnpackNumChannels),u}function Cn(e,t,n,r){var o=wt(t,n),i=o[0],a=o[1],s=new Uint8Array(xt(t*n,4));return Tt(e,function(){return e.readPixels(0,0,i,a,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)}),new Float32Array(s.buffer)}function In(e,t,n,r){var o=Et(t,n),i=o[0],a=o[1],s=new Float32Array(Ot(t,n));Tt(e,function(){return e.readPixels(0,0,i,a,e.RGBA,e.FLOAT,s)});var u=new Float32Array(t*n);return function(e,t,n,r){var o=t*n;if(o<r.length)throw new Error("matrix length ("+r.length+") must be >= "+o);for(var i=n%2==1,a=t%2==1,s=Math.floor(n/2),u=Math.floor(t/2),l=Et(t,n),c=l[0],f=l[1],p=i?4:0,h=n+(i?1:0),d=0,m=0,g=n,y=0;y<u;++y){for(var v=0;v<s;++v)r[m++]=e[d++],r[m++]=e[d++],r[g++]=e[d++],r[g++]=e[d++];d+=p,m+=h,g+=h}if(i){d=4*(c-1);var b=n-1;for(p=4*c,h=2*n,y=0;y<u;++y)r[b]=e[d],r[b+n]=e[d+2],d+=p,b+=h}if(a)for(d=(f-1)*c*4,b=(t-1)*n,v=0;v<s;++v)r[b++]=e[d++],r[b++]=e[d++],d+=2;return i&&a&&(r[r.length-1]=e[e.length-4]),r}(s,t,n,u)}var Sn=Object.freeze({getWebGLContextAttributes:function(){return{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0}},createWebGLContext:un,createVertexShader:ln,createVertexBuffer:cn,createIndexBuffer:fn,getTextureConfig:pn,createFloat32MatrixTexture:dn,createFloat16MatrixTexture:mn,createUnsignedBytesMatrixTexture:gn,createPackedMatrixTexture:yn,bindVertexProgramAttributeStreams:vn,uploadPixelDataToTexture:bn,uploadMatrixToTexture:wn,uploadMatrixToPackedTexture:xn,maybeCreateBufferFromOutputTexture:Nn,downloadFloat32MatrixFromBuffer:En,downloadFloat32MatrixFromOutputTexture:On,downloadByteEncodedFloatMatrixFromOutputTexture:Cn,downloadMatrixFromPackedOutputTexture:In}),Tn=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.autoDebugValidate=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[],this.gl=null!=e?e:un(),1===ce.get("WEBGL_VERSION")?(this.textureFloatExtension=Dt(this.gl,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),ce.get("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=Dt(this.gl,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=Dt(this.gl,"EXT_color_buffer_float"),this.loseContextExtension=Dt(this.gl,"WEBGL_lose_context"),this.vertexBuffer=cn(this.gl),this.indexBuffer=fn(this.gl),this.framebuffer=Gt(this.gl),this.textureConfig=pn(this.gl,this.textureHalfFloatExtension)}return e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Tt(t,function(){return t.finish()}),Tt(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Tt(t,function(){return t.deleteFramebuffer(e.framebuffer)}),Tt(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Tt(t,function(){return t.deleteBuffer(e.vertexBuffer)}),Tt(t,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Tt(t,function(){return t.deleteBuffer(e.indexBuffer)}),this.loseContextExtension.loseContext(),this.disposed=!0}},e.prototype.enableAutomaticDebugValidation=function(e){this.autoDebugValidate=e,At(e)},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),dn(this.gl,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),mn(this.gl,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),gn(this.gl,e,t)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),bn(this.gl,e,t)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),yn(this.gl,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(en(this.gl,this.framebuffer),this.outputTexture=null),Tt(this.gl,function(){return t.gl.deleteTexture(e)})},e.prototype.uploadMatrixToTexture=function(e,t,n,r){this.throwIfDisposed();var o=$t();return wn(this.gl,e,t,n,r,o,this.textureConfig)},e.prototype.uploadMatrixToPackedTexture=function(e,t,n,r){return this.throwIfDisposed(),xn(this.gl,e,t,n,r)},e.prototype.downloadFloat32MatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return On(r.gl,t,n,r.textureConfig)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return Cn(r.gl,t,n,r.textureConfig)})},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t,n){return En(this.gl,e,t,n,this.textureConfig)},e.prototype.maybeCreateBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=Nn(this.gl,e,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(ce.get("WEBGL_FENCE_API_ENABLED")){var o=e,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=o.clientWaitSync(i,0,0);return e===o.ALREADY_SIGNALED||e===o.CONDITION_SATISFIED},t=i}else ce.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,ce.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return In(r.gl,t,n)})},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=jt(t,e),r=ln(t),o=Vt(t);return Tt(t,function(){return t.attachShader(o,r)}),Tt(t,function(){return t.attachShader(o,n)}),zt(t,o),this.autoDebugValidate&&Ft(t,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=vn(t,this.program,this.vertexBuffer)),o},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Tt(this.gl,function(){return t.gl.deleteProgram(e)})},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.autoDebugValidate&&Ft(this.gl,this.program),Tt(this.gl,function(){return t.gl.useProgram(e)})},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Zt(this.gl,e,t):Yt(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),Tt(this.gl,function(){return n.gl.getAttribLocation(e,t)})},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Qt(this.gl,0,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=Et(t,n);this.setOutputMatrixTextureDriver(e,r[0],r[1])},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&Ft(this.gl,this.program),tn(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.autoDebugValidate&&this.debugValidate(),Tt(e,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Tt(this.gl,function(){return e.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Dt(this.gl,2===ce.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===ce.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},e.prototype.endQuery=function(){if(2!==ce.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return a(this,void 0,void 0,function(){var t=this;return s(this,function(n){switch(n.label){case 0:return[4,x(function(){return t.isQueryAvailable(e,ce.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(e,ce.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise(function(n){t.addItemToPoll(function(){return e.isFencePassed()},function(){return n()})})},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0,n=e.length-1,r=-1;t<=n;){var o=t+n>>1;e[o]()?(r=o,t=o+1):n=o-1}return r}(this.itemsToPoll.map(function(e){return e.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||x(function(){return n.pollItems(),0===n.itemsToPoll.length})},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Jt(this.gl,e,this.framebuffer),this.autoDebugValidate&&tn(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Jt(this.gl,this.outputTexture,this.framebuffer),this.autoDebugValidate&&tn(this.gl)):en(this.gl,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;Jt(r,e,this.framebuffer),this.autoDebugValidate&&tn(r),this.outputTexture=e,Tt(r,function(){return r.viewport(0,0,t,n)}),Tt(r,function(){return r.scissor(0,0,t,n)})},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var o=this;this.throwIfDisposed(),Tt(this.gl,function(){return o.gl.scissor(e,t,n,r)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function kn(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(e,n){var r=e.logicalShape,o=t[n],i=o.tensor.shape;if(!y(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!e.isUniform||!o.isUniform){var a=e.texShape,s=o.isUniform?null:o.texData.texShape;if(!y(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")}})}var An=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),Pn=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterHeight,o=e.filterWidth,i=e.strideHeight,a=e.strideWidth,s=e.padInfo.top,u=e.padInfo.left;this.outputShape=e.outShape;var l="avg"===t,c="0.0";if(l||(c="-1.0 / 0.0"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+a+");\n        const ivec2 pads = ivec2("+s+", "+u+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+r+"; wR++) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+o+"; wC++) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+o+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var f=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(f="avgValue / count");var p=4*Math.floor(o/4),h=o%4,d="\n      if ("+l+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+a+");\n      const ivec2 pads = ivec2("+s+", "+u+");\n      const float initializationValue = "+c+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+c+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+r+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+p+"; wC += 4) {\n            int xC = xCCorner + wC;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              getValue(batch, xR, xC + 3, d)\n            );\n\n            "+d+"\n          }\n\n          int xC = xCCorner + "+p+";\n          if ("+(1===h)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+d+"\n          } else if ("+(2===h)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+d+"\n          } else if ("+(3===h)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              initializationValue\n            );\n\n            "+d+"\n          }\n        }\n        setOutput("+f+");\n      }\n    "}},Mn=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t=yt(this.rank),n=function(e){if(1===e)return"sourceLoc";if(2===e)return"sourceLoc.x, sourceLoc.y";if(3===e)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===e)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);this.userCode="\n      uniform "+t+" start;\n\n      void main() {\n        "+t+" sourceLoc = start + getOutputCoords();\n        setOutput(getSource("+n+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){if(null!=t.startLoc||(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null!=t.startLoc))if(1===t.rank)n.gl.uniform1i(t.startLoc,e[0]);else if(2===t.rank)n.gl.uniform2i(t.startLoc,e[0],e[1]);else if(3===t.rank)n.gl.uniform3i(t.startLoc,e[0],e[1],e[2]);else{if(4!==t.rank)throw Error("Slicing for rank "+t.rank+" is not yet supported");n.gl.uniform4i(t.startLoc,e[0],e[1],e[2],e[3])}}},e}(),Dn=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t){var n,r=Rn(t),o=jn(e,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[o].shift();return this.usedTextures[o].push(i),i}return this.numUsedTextures++,this.log(),r===ht.FLOAT32?n=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===ht.FLOAT16?n=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===ht.UNSIGNED_BYTE&&(n=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(n),n},e.prototype.releaseTexture=function(e,t,n){var r=jn(t,Rn(n));r in this.freeTextures||(this.freeTextures[r]=[]),this.freeTextures[r].push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[r],i=o.indexOf(e);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(i,1),this.log()},e.prototype.log=function(){this.logEnabled&&console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+(this.numFreeTextures+this.numUsedTextures)+")")},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Rn(e){if(e===pt.DOWNLOAD||e===pt.PIXELS)return ht.UNSIGNED_BYTE;if(e===pt.UPLOAD)return ht.FLOAT32;if(e===pt.RENDER)return ce.get("WEBGL_RENDER_FLOAT32_ENABLED")?ht.FLOAT32:ht.FLOAT16;throw new Error("Unknown logical texture type "+e)}function jn(e,t){return e[0]+"_"+e[1]+"_"+t}var Ln=function(){function e(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float NAN;\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(){var e=this;return function(t,n){null==e.startLoc&&(e.startLoc=t.getUniformLocationNoThrow(n,"NAN"),null==e.startLoc)||t.gl.uniform1f(e.startLoc,NaN)}},e}();function Vn(e,t,n){!function(e,t,n){var r=e.length;f(e.length===t.length,"Error in concat"+r+"D: rank of x1 ("+r+") and x2 ("+t.length+") must be the same."),f(n>=0&&n<r,"Error in concat"+r+"D: axis must be between 0 and "+(r-1)+".");for(var o=0;o<r;o++)f(o===n||e[o]===t[o],"Error in concat"+r+"D: Shape ("+e+") does not match ("+t+") along the non-concatenated axis "+o+".")}(e.shape,t.shape,n);var r=ft([e.shape,t.shape],n),o=e.as2D(-1,g(e.shape.slice(n))),i=t.as2D(-1,g(t.shape.slice(n))),a=function(e,t){return{aBegin:[0,0],aSize:e,bBegin:[0,e[1]],bSize:i.shape}}(o.shape),s=a.aBegin,u=a.aSize,l=a.bBegin,c=a.bSize;return ce.engine.runKernel(function(e){return e.concat(o,i)},{a:o,b:i},function(e){return{a:function(){return e.slice(s,u)},b:function(){return e.slice(l,c)}}}).reshape(r)}var zn=Me({concat_:function(e,t){void 0===t&&(t=0),f(e.length>=1,"Pass at least one tensor to concat");var n=Pe(e,"tensors","concat"),r=ft(n.map(function(e){return e.shape}),t);if(0===g(r))return Re([],r);var o=(n=n.filter(function(e){return e.size>0}))[0];if(1===n.length)return o;for(var i=_e(t,o.shape),a=1;a<n.length;++a)o=Vn(o,n[a],i[0]);return o}}),Fn=Me({concat1d_:function(e){return zn(e,0)}}),Bn=Me({concat2d_:function(e,t){return zn(e,t)}}),Un=Me({concat3d_:function(e,t){return zn(e,t)}}),Wn=Me({concat4d_:function(e,t){return zn(e,t)}});function $n(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Hn=$n(function(e){!function(e,t,n){function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new function(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}(e),o=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+1.1102230246251565e-16*(2097152*i()|0)},i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}t&&t.exports?t.exports=o:this.alea=o}(0,e)}),qn=$n(function(e){!function(e,t,n){function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new function(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}t&&t.exports?t.exports=o:this.xor128=o}(0,e)}),Gn=$n(function(e){!function(e,t,n){function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new function(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}t&&t.exports?t.exports=o:this.xorwow=o}(0,e)}),Kn=$n(function(e){!function(e,t,n){function r(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new function(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&(o.x&&r(o,n),i.state=function(){return r(n,{})}),i}t&&t.exports?t.exports=o:this.xorshift7=o}(0,e)}),Xn=$n(function(e){!function(e,t,n){function r(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new function(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n=o[i]=(n^=n>>>15)^(e^=e>>>12),t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,a,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),o=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=0==(n=s[127&i]^=r+(a=a+1640531527|0))?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,s[o]=(r^=r>>>15)^(n^=n>>>12);e.w=a,e.X=s,e.i=o}(t,e)}(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&(o.X&&r(o,n),i.state=function(){return r(n,{})}),i}t&&t.exports?t.exports=o:this.xor4096=o}(0,e)}),Zn=$n(function(e){!function(e,t,n){function r(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new function(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==typeof o&&r(o,n),i.state=function(){return r(n,{})}),i}t&&t.exports?t.exports=o:this.tychei=o}(0,e)}),Yn=$n(function(e){!function(t,r){var o,i=this,a=256,s=6,u="random",l=r.pow(a,s),c=r.pow(2,52),f=2*c,p=a-1;function h(e,n,h){var y=[],v=m(function e(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,g(t)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(a):(e=new Uint8Array(a),(i.crypto||i.msCrypto).getRandomValues(e)),g(e)}catch(e){var n=i.navigator,r=n&&n.plugins;return[+new Date,i,r,i.screen,g(t)]}}():e,3),y),b=new function(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);o<a;)s[o]=o++;for(o=0;o<a;o++)s[o]=s[i=p&i+e[o%n]+(t=s[o])],s[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,s=r.S;e--;)t=s[o=p&o+1],n=n*a+s[p&(s[o]=s[i=p&i+t])+(s[i]=t)];return r.i=o,r.j=i,n})(a)}(y),_=function(){for(var e=b.g(s),t=l,n=0;e<c;)e=(e+n)*a,t*=a,n=b.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return _.int32=function(){return 0|b.g(4)},_.quick=function(){return b.g(4)/4294967296},_.double=_,m(g(b.S),t),(n.pass||h||function(e,t,n,o){return o&&(o.S&&d(o,b),e.state=function(){return d(b,{})}),n?(r[u]=e,t):e})(_,v,"global"in n?n.global:this==r,n.state)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",o=0;o<r.length;)t[p&o]=p&(n^=19*t[p&o])+r.charCodeAt(o++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(r["seed"+u]=h,m(r.random(),t),e.exports){e.exports=h;try{o=n(!function(){var e=new Error("Cannot find module 'crypto'");throw e.code="MODULE_NOT_FOUND",e}())}catch(e){}}}([],Math)});Yn.alea=Hn,Yn.xor128=qn,Yn.xorwow=Gn,Yn.xorshift7=Kn,Yn.xor4096=Xn,Yn.tychei=Zn;var Qn=Yn.alea,Jn=function(){function e(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=Qn(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var o=void 0,i=void 0,a=void 0;do{a=(o=2*this.random()-1)*o+(i=2*this.random()-1)*i}while(a>=1||0===a);var s=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}();function er(e,t,n){return void 0===t&&(t="float32"),new W(e,t,n)}var tr=Me({cast_:function(e,t){var n=Ae(e,"x","cast");return ce.engine.runKernel(function(e){return e.cast(n,t)},{$x:n},function(e){return{$x:function(){return e.clone()}}})}}),nr=Me({clone_:function(e){var t=Ae(e,"x","clone");return ce.engine.runKernel(function(e){return G.make(t.shape,{dataId:t.dataId},t.dtype)},{$x:t},function(e){return{$x:function(){return e.toFloat()}}})}}),rr=Me({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=Ae(e,"x","cumsum"),i=xe([t|=0],o.rank),a=o;null!=i&&(a=o.transpose(i));var s=Ee(1,o.rank)[0],u=ce.engine.runKernel(function(e){return e.cumsum(a,s,n,r)},{permutedX:a},function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}});return null!=i&&(u=u.transpose(i)),u}}),or=Me({expandDims_:function(e,t){void 0===t&&(t=0);var n=Ae(e,"x","expandDims");f(t<=n.rank,"Axis must be <= rank of the tensor");var r=n.shape.slice();return t<0&&(f(-(n.rank+1)<=t,"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"),t=n.rank+t+1),r.splice(t,0,1),yr(n,r)}}),ir=Me({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var o=er([e,t],r),i=e<=t?e:t,a=0;a<i;++a)o.set(1,a,a);var s=o.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return wr(or(s,0),[n[0],1,1]);if(2===n.length)return wr(or(or(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return wr(or(or(or(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),ar=Me({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return ce.engine.fromPixels(e,t)}}),sr=Me({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var o=Ae(e,"logits","multinomial"),i=o.size,a=o.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=1===a?o.as2D(1,-1):o,u=ce.engine.runKernel(function(e){return e.multinomial(s,r,t,n)},{logits2D:s});return 1===a?u.as1D():u}}),ur=Me({oneHot_:function(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=0);var o=Ae(e,"indices","oneHot","int32");if(f("int32"===o.dtype,"Indices must be of dtype `int32`"),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);return ce.engine.runKernel(function(e){return e.oneHot(o,t,n,r)},{$indices:o})}}),lr=Me({pad_:function(e,t,n){void 0===n&&(n=0);var r=Ae(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o=t.map(function(e){return e[0]});return ce.engine.runKernel(function(e){return e.pad(r,t,n)},{$x:r},function(e){return{$x:function(){return e.slice(o,r.shape)}}})}}),cr=Me({pad1d_:function(e,t,n){return void 0===n&&(n=0),f(2===t.length,"Invalid number of paddings. Must be length of 2."),lr(e,[t],n)}}),fr=Me({pad2d_:function(e,t,n){return void 0===n&&(n=0),f(2===t.length&&2===t[0].length&&2===t[1].length,"Invalid number of paddings. Must be length of 2 each."),lr(e,t,n)}}),pr=Me({pad3d_:function(e,t,n){return void 0===n&&(n=0),f(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,"Invalid number of paddings. Must be length of 2 each."),lr(e,t,n)}}),hr=Me({pad4d_:function(e,t,n){return void 0===n&&(n=0),f(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,"Invalid number of paddings. Must be length of 2 each."),lr(e,t,n)}}),dr=Me({rand_:function(e,t,n){var r=g(e),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var i=0;i<r;i++)o[i]=t();return G.make(e,{values:o},n)}}),mr=Me({randomNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new Jn(t,n,r,!1,o),a=er(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),gr=Me({randomUniform_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var o=er(e,r),i=0;i<o.values.length;i++)o.values[i]=c(t,n);return o.toTensor()}}),yr=Me({reshape_:function(e,t){var n=Ae(e,"x","reshape");return t=N(t,n.size),f(n.size===g(t),"new shape and old shape must have the same number of elements."),ce.engine.runKernel(function(e){return e.reshape(n,t)},{$x:n},function(e){return{$x:function(){return e.reshape(n.shape)}}})}}),vr=Me({split_:function(e,t,n){void 0===n&&(n=0);var r,o=Ae(e,"x","split");n=_e(n,o.shape)[0],"number"==typeof t?(f(o.shape[n]%t==0,"Number of splits must evenly divide the axis."),r=Array(t).fill(o.shape[n]/t)):(f(o.shape[n]===t.reduce(function(e,t){return e+t}),"The sum of sizes must match the size of the axis dimension."),r=t);var i=Array(o.rank).fill(0),a=o.shape.slice();return r.map(function(e){a[n]=e;var t=o.slice(i,a);return i[n]+=e,t})}}),br=Me({squeeze_:function(e,t){var n=Ae(e,"x","squeeze");return yr(n,E(n.shape,t).newShape)}}),_r=Me({stack_:function(e,t){void 0===t&&(t=0);var n=Pe(e,"tensors","stack");if(f(n.length>=1,"Pass at least one tensor to tf.stack"),1===n.length)return n[0].expandDims(t);var r=n[0].shape,o=n[0].dtype;f(t<=n[0].rank,"Axis must be <= rank of the tensor"),n.forEach(function(e){p(r,e.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(e){f(o===e.dtype,"All tensors passed to stack must have matching dtypes")});var i=n.map(function(e){return e.expandDims(t)});return zn(i,t)}}),wr=Me({tile_:function(e,t){var n=Ae(e,"x","tile");return f(n.rank===t.length,"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."),ce.engine.runKernel(function(e){return e.tile(n,t)},{$x:n},function(e){return{$x:function(){var r=Qe(n);if(1===n.rank)for(var o=0;o<t[0];++o)r=r.add(e.slice([o*n.shape[0]],[n.shape[0]]));else if(2===n.rank)for(o=0;o<t[0];++o)for(var i=0;i<t[1];++i)r=r.add(e.slice([o*n.shape[0],i*n.shape[1]],[n.shape[0],n.shape[1]]));else if(3===n.rank)for(o=0;o<t[0];++o)for(i=0;i<t[1];++i)for(var a=0;a<t[2];++a)r=r.add(e.slice([o*n.shape[0],i*n.shape[1],a*n.shape[2]],[n.shape[0],n.shape[1],n.shape[2]]));else{if(4!==n.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+n.rank+" tensors yet.");for(o=0;o<t[0];++o)for(i=0;i<t[1];++i)for(a=0;a<t[2];++a)for(var s=0;s<t[3];++s)r=r.add(e.slice([o*n.shape[0],i*n.shape[1],a*n.shape[2],s*n.shape[3]],[n.shape[0],n.shape[1],n.shape[2],n.shape[3]]))}return r}}})}}),xr=Me({truncatedNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new Jn(t,n,r,!0,o),a=er(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),Nr=Me({unstack_:function(e,t){void 0===t&&(t=0);for(var n,r=Ae(e,"x","unstack"),o=r.shape[t],i=Array(r.rank-1).fill(0),a=0,s=0;s<r.rank;s++)s!==t&&(i[a]=r.shape[s],a++);n=Array(o).fill(1);var u=Array(r.rank).fill(0),l=r.shape.slice();return n.map(function(e){l[t]=e;var n=r.slice(u,l);return u[t]+=e,n.reshape(i)})}}),Er=Me({batchToSpaceND_:function(e,t,n){var r=Ae(e,"x","batchToSpaceND"),o=t.reduce(function(e,t){return e*t});return f(r.rank>=1+t.length,"input rank should be > than [blockShape] but got "+r.rank),f(n.length===t.length,"crops.shape[0] must be equal to [blockShape] but got "+n.length),f(r.shape[0]%o==0,"input tensor batch must be divisible by prod( blockShape )"),ce.engine.runKernel(function(e){return e.batchToSpaceND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}})}}),Or=Me({spaceToBatchND_:function(e,t,n){var r=Ae(e,"x","spaceToBatchND");return f(r.rank>=1+t.length,"input rank should be > than [blockShape] but got "+r.rank),f(n.length===t.length,"paddings.shape[0] must be equal to [blockShape], got "+n.length),f(r.shape.reduce(function(e,n,r){return r>0&&r<=t.length?e&&n%t[r-1]==0:e},!0),"input spatial dimensions must be divisible by blockShapes"),ce.engine.runKernel(function(e){return e.spaceToBatchND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}})}});function Cr(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var o=er(e,"int32"),i=er([n.length,e.length],"int32");for(r=0;r<n.length;r++){var a=o.indexToLoc(n[r]);i.values.set(a,r*e.length)}return i.toTensor()}var Ir=300,Sr=function(){function e(e,t){if(void 0===t&&(t=!0),this.gpgpu=e,this.delayedStorage=t,this.texData=new WeakMap,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.lruDataGPU=[],this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.binaryCache={},this.disposed=!1,ce.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");ce.get("IS_BROWSER")&&(this.canvas=document.createElement("canvas")),null==e?(this.gpgpu=new Tn(un(this.canvas)),this.gpgpuCreatedLocally=!0):this.gpgpuCreatedLocally=!1,this.NUM_BYTES_BEFORE_PAGING=window.screen.height*window.screen.width*window.devicePixelRatio*Ir,this.textureManager=new Dn(this.gpgpu)}return e.prototype.register=function(e,t,n){if(this.texData.has(e))throw new Error("Data buffer is already registered");this.texData.set(e,{shape:t,dtype:n,values:null,texture:null,texShape:null,usage:pt.RENDER})},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.fromPixels() can not be null");var n=[e.height,e.width],r=[e.height,e.width,t];if(!(e instanceof HTMLVideoElement||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageData))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+e.constructor.name);if(e instanceof HTMLVideoElement){if(null==this.fromPixelsCanvas){if(!ce.get("IS_BROWSER"))throw new Error("Can't read pixels from HTMLImageElement outside the browser.");if("complete"!==document.readyState)throw new Error("The DOM is not ready yet. Please call tf.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixelsCanvas=document.createElement("canvas")}this.fromPixelsCanvas.width=e.width,this.fromPixelsCanvas.height=e.height,this.fromPixelsCanvas.getContext("2d").drawImage(e,0,0,e.width,e.height),e=this.fromPixelsCanvas}var o=G.make(n,{},"int32");this.texData.get(o.dataId).usage=pt.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(o.dataId),e);var i=new function(e){this.variableNames=["A"];var t=e[0],n=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+n+".0, "+t+".0);\n\n        vec4 values = texture2D(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "}(r),a=this.compileAndRun(i,[o]);return o.dispose(),a},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendWebGL.write(): values can not be null");this.throwIfNoData(e);var n=this.texData.get(e),r=n.texture;null!=r&&(this.releaseTexture(e,r,n.texShape,n.usage),n.texture=null,n.texShape=null),n.usage=pt.UPLOAD,n.values=t,this.delayedStorage||this.uploadToGPU(e)},e.prototype.readSync=function(e){this.throwIfNoData(e);var t=this.texData.get(e),n=t.shape,r=t.texture,o=t.values,i=t.texShape,a=t.dtype;if(null!=o)return this.cacheOnCPU(e),o;var s,u=null!=this.activeTimers;u&&(s=performance.now());var l=this.getValuesFromTexture(r,e,a,i,n);return u&&(this.downloadWaitMs+=performance.now()-s),this.cacheOnCPU(e,l),t.values},e.prototype.read=function(e){return a(this,void 0,void 0,function(){var t,n,r,o,i,a,u,l,c,f;return s(this,function(s){switch(s.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise(function(e){return t.push(e)})];if(this.throwIfNoData(e),n=this.texData.get(e),r=n.shape,o=n.texture,a=n.texShape,u=n.dtype,null!=(i=n.values))return this.cacheOnCPU(e),[2,i];if(this.pendingRead.set(e,[]),!ce.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===ce.get("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return l=this.gpgpu.maybeCreateBufferFromTexture(o,a[0],a[1]),[4,this.gpgpu.createAndWaitForFence()];case 1:return s.sent(),c=l instanceof WebGLTexture?this.getValuesFromTexture(o,e,u,a,r):this.gpgpu.downloadFloat32MatrixFromBuffer(l,a[0],a[1]),this.cacheOnCPU(e,c),f=this.pendingRead.get(e),this.pendingRead.delete(e),f.forEach(function(e){return e(c)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)),[2,c]}})})},e.prototype.getValuesFromTexture=function(e,t,n,r,o){if(ce.get("WEBGL_DOWNLOAD_FLOAT_ENABLED"))return this.gpgpu.downloadFloat32MatrixFromOutputTexture(e,r[0],r[1]);var i=G.make(o,{});this.texData.get(i.dataId).usage=pt.DOWNLOAD;var a=G.make(o,{dataId:t},n),s=new function(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      const float FLOAT_MAX = 1.70141184e38;\n      const float FLOAT_MIN = 1.17549435e-38;\n\n      lowp vec4 encode_float(highp float v) {\n        if (isNaN(v)) {\n          return vec4(255, 255, 255, 255);\n        }\n\n        highp float av = abs(v);\n\n        if(av < FLOAT_MIN) {\n          return vec4(0.0, 0.0, 0.0, 0.0);\n        } else if(v > FLOAT_MAX) {\n          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n        } else if(v < -FLOAT_MAX) {\n          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n        }\n\n        highp vec4 c = vec4(0,0,0,0);\n\n        highp float e = floor(log2(av));\n        highp float m = exp2(fract(log2(av))) - 1.0;\n\n        c[2] = floor(128.0 * m);\n        m -= c[2] / 128.0;\n        c[1] = floor(32768.0 * m);\n        m -= c[1] / 32768.0;\n        c[0] = floor(8388608.0 * m);\n\n        highp float ebias = e + 127.0;\n        c[3] = floor(ebias / 2.0);\n        ebias -= c[3] * 2.0;\n        c[2] += floor(ebias) * 128.0;\n\n        c[3] += 128.0 * step(0.0, -v);\n\n        return c / 255.0;\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        gl_FragColor = encode_float(x);\n      }\n    "}(o);this.compileAndRun(s,[a],i,null,!1);var u=this.texData.get(i.dataId),l=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture,u.texShape[0],u.texShape[1]);return a.dispose(),i.dispose(),l},e.prototype.time=function(e){return a(this,void 0,void 0,function(){var t,n,r,o,i,a;return s(this,function(s){switch(s.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),o=d(this.activeTimers),this.activeTimers=t,r&&(this.programTimersStack=null),[4,Promise.all(o).then(function(e){var t=0;return e.forEach(function(e){return t+=e}),t})];case 1:return i=s.sent(),a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:i,wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,a]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return ce.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},e.prototype.endTimer=function(e){return ce.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=performance.now(),e)},e.prototype.getQueryTime=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){return ce.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]})})},e.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e))if(this.pendingRead.has(e))this.pendingDisposal.add(e);else if(this.texData.has(e)){var t=this.texData.get(e),n=t.texture;null!=n&&this.releaseTexture(e,n,t.texShape,t.usage),this.texData.delete(e)}},e.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.getCanvas=function(){return this.canvas},e.prototype.slice=function(e,t,n){var r=new Mn(n),o=r.getCustomSetupFunc(t);return this.compileAndRun(r,[e],null,o)},e.prototype.stridedSlice=function(e,t,n,r,o,i,a,s,u){var l=Ie(e.shape,t,n,r,o,i,a,s,u),c=l[0],f=l[1],p=l[2],h=f.filter(function(e,t){return-1===p.indexOf(t)});if(h.some(function(e){return 0===e}))return Re([],h);var d=new function(e,t,n,r){this.variableNames=["x"];var o=n.filter(function(e,t){return-1===r.indexOf(t)});this.outputShape=o;var i=n.length,a=yt(n.length),s=yt(o.length),u="";if(1===i)u="coords * strides + begin";else{var l=0;u=n.map(function(e,t){return-1===r.indexOf(t)?1===o.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(++l-1)+"] * strides["+t+"] + begin["+t+"]":"begin["+t+"]"}).join(",")}this.userCode="\n      "+a+" begin = "+a+"("+e+");\n      "+a+" strides = "+a+"("+t+");\n\n      void main() {\n        "+s+" coords = getOutputCoords();\n        setOutput(getX("+u+"));\n      }\n    "}(c,r,f,p);return this.compileAndRun(d,[e])},e.prototype.reverse=function(e,t){var n=new function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map(function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),o=yt(n);this.userCode="\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "}(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.concat=function(e,t){var n=new function(e,t){this.variableNames=["A","B"],this.outputShape=[],this.outputShape=ft([e,t],1),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        float value = 0.0;\n        if (yC < "+e[1]+") {\n          value = getA(yR, yC);\n        } else {\n          yC -= "+e[1]+";\n          value = getB(yR, yC);\n        }\n\n        setOutput(value);\n      }\n    "}(e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.neg=function(e){var t=new Ln(e.shape,"return -x;");return this.compileAndRun(t,[e])},e.prototype.matMul=function(e,t,n,r){var o=new function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),this.variableNames=["matrixA","matrixB"];var o=n?e[0]:e[1];this.outputShape=[n?e[1]:e[0],r?t[0]:t[1]];var i=function(e,t){return n?t+" + "+e+", aRow":"aRow, "+t+" + "+e},a=function(e,t){return r?"bCol, "+t+" + "+e:t+" + "+e+", bCol"},s=4*Math.floor(o/4),u=o%4;this.userCode=" float dotARowBCol(int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < "+s+"; i += 4) {\n        vec4 a = vec4(\n          getMatrixA("+i(0,"i")+"),\n          getMatrixA("+i(1,"i")+"),\n          getMatrixA("+i(2,"i")+"),\n          getMatrixA("+i(3,"i")+")\n        );\n        vec4 b = vec4(\n          getMatrixB("+a(0,"i")+"),\n          getMatrixB("+a(1,"i")+"),\n          getMatrixB("+a(2,"i")+"),\n          getMatrixB("+a(3,"i")+")\n        );\n\n        result += dot(a, b);\n      }\n\n      if ("+(1===u)+") {\n        result += getMatrixA("+i(0,s)+") *\n          getMatrixB("+a(0,s)+");\n      } else if ("+(2===u)+") {\n        vec2 a = vec2(\n          getMatrixA("+i(0,s)+"),\n          getMatrixA("+i(1,s)+")\n        );\n        vec2 b = vec2(\n          getMatrixB("+a(0,s)+"),\n          getMatrixB("+a(1,s)+")\n        );\n        result += dot(a, b);\n      } else if ("+(3===u)+") {\n        vec3 a = vec3(\n          getMatrixA("+i(0,s)+"),\n          getMatrixA("+i(1,s)+"),\n          getMatrixA("+i(2,s)+")\n        );\n        vec3 b = vec3(\n          getMatrixB("+a(0,s)+"),\n          getMatrixB("+a(1,s)+"),\n          getMatrixB("+a(2,s)+")\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec2 resRC = getOutputCoords();\n      setOutput(dotARowBCol(resRC.x, resRC.y));\n    }\n    "}(e.shape,t.shape,n,r);return this.compileAndRun(o,[e,t])},e.prototype.multiply=function(e,t){var n=new ct("return a * b;",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,et(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],r)},e.prototype.batchNormalization=function(e,t,n,r,o,i){var a=[e,t,n],s=null;null!=i&&(s=i.shape,a.push(i));var u=null;null!=o&&(u=o.shape,a.push(o));var l=new function(e,t,n,r,o,i){this.outputShape=[],this.supportsBroadcasting=!0,this.variableNames=["x","mean","variance"],lt(e,t),lt(e,n);var a="0.0";null!=r&&(lt(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";null!=o&&(lt(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+a+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput((x - mean) * inv + offset);\n      }\n    "}(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(l,a)},e.prototype.localResponseNormalization4D=function(e,t,n,r,o){var i=new function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];var i=t,a=e[3]-1;this.outputShape=e;var s="float("+n+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+a+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+(.5===o?"inversesqrt("+s+")":1===o?"1.0/("+s+")":"exp(log("+s+") * float(-"+o+"));")+";\n        setOutput(val);\n      }\n    "}(e.shape,t,n,r,o);return this.compileAndRun(i,[e])},e.prototype.LRNGrad=function(e,t,n,r,o,i,a){var s=new function(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+o+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+o+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "}(t.shape,r,o,i,a);return this.compileAndRun(s,[t,n,e])},e.prototype.tile=function(e,t){var n=new function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var o=yt(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<e.length;o++)r.push("imod("+n[o]+", "+e[o]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "}(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.pad=function(e,t,n){var r=new function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]});var r=e.length,o=yt(r),i=t.map(function(e){return e[0]}).join(","),a=t.map(function(t,n){return t[0]+e[n]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+o+" start = "+o+"("+i+");\n      "+o+" end = "+o+"("+a+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+a+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "}(e.shape,t,n);return this.compileAndRun(r,[e])},e.prototype.transpose=function(e,t){var n=new function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var o=yt(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}(t);this.userCode="\n    void main() {\n      "+o+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "}(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.gather=function(e,t,n){var r=new function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var o=yt(this.rank),i=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],i=0;i<e.length;i++)o.push(i===t?"int(getIndices("+r[i]+"))":""+r[i]);return o.join()}(e,n);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "}(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},e.prototype.batchToSpaceND=function(e,t,n){f(e.rank<=4,"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");var r=t.reduce(function(e,t){return e*t}),o=pe(e.shape,t,r),i=he(o.length,t.length),a=de(e.shape,t,r),s=me(n,t.length),u=ge(a,n,t.length);return e.reshape(o).transpose(i).reshape(a).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){f(e.rank<=4,"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");var r=t.reduce(function(e,t){return e*t}),o=[[0,0]];o.push.apply(o,n);for(var i=1+t.length;i<e.shape.length;++i)o.push([0,0]);var a=e.pad(o),s=pe(a.shape,t,r,!1),u=he(s.length,t.length,!1),l=de(a.shape,t,r,!1);return a.reshape(s).transpose(u).reshape(l)},e.prototype.reduce=function(e,t,n){var r=e.shape[0],o=e.shape[1],i=new function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a="0.0",s="";"min"===t?(a="1.0 / 0.0",s="min"):"max"===t&&(a="-1.0 / 0.0",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,f="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",p="vec4";"all"===t?(a="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===t&&(a="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var h="";o%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+a+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+h+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+a+");\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+f+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(2===c)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(3===c)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+f+"\n        }\n        setOutput("+u+");\n      }\n    "}({windowSize:Ce(o),inSize:o,batchSize:r},t),a=i.outputShape,s=this.makeOutputArray([a[0],a[1]],n);return this.compileAndRun(i,[e],s),1===s.shape[1]?s:this.reduce(s,t,n)},e.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],o=e.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var i=new function(e,t,n){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,i=Math.ceil(e.inSize/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = 0;\n        float bestValue = getA(batch, inOffset);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+(n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));")+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+("max"===t?">":"<")+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "}({windowSize:Ce(o),inSize:o,batchSize:r},t,null==n),a=i.outputShape,s=this.makeOutputArray([a[0],a[1]],"int32"),u=[e];return null!=n&&u.push(n),this.compileAndRun(i,u,s),1===s.shape[1]?s:this.argReduce(e,t,s)},e.prototype.sum=function(e,t){we("sum",t,e.rank);var n=ve(e.shape,t),r=n[0],o=g(n[1]),i=e.as2D(-1,o),a=tt(e.dtype);return this.reduce(i,"sum",a).reshape(r)},e.prototype.unsortedSegmentSum=function(e,t,n){var r=0,o=xe([r],e.rank),i=e;null!=o&&(i=e.transpose(o),r=Ee(1,e.rank)[0]);var a=function(e,t,n){for(var r=[],o=e.length,i=0;i<o;i++)r.push(i!==t?e[i]:n);return r}(i.shape,r,n),s=g([i.shape[r]]),u=i.as2D(-1,s),l=tt(e.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",t,l,n).reshape(a);return null!=o&&(c=c.transpose(Ne(o))),c},e.prototype.segOpCompute=function(e,t,n,r,o){var i=e.shape[0],a=e.shape[1],s=function(e,t){var n,r=!1;for(e<=Oe?(n=e,r=!0):n=P(e,Math.floor(Math.sqrt(e)));!r;){if(n>t||n===e){r=!0;break}n=P(e,n+1)}return n}(a,o),u=new function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=e.numSegments,a=i*Math.ceil(o/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, filter);\n    ",c="";o%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      ");var f="";o%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+f+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+i+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+i+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "}({windowSize:s,inSize:a,batchSize:i,numSegments:o},t),l=u.outputShape,c=this.makeOutputArray([l[0],l[1]],r);return this.compileAndRun(u,[e,n],c),c.shape[1]===o?c:(n=He(0,o).tile([a/s]),this.segOpCompute(c,t,n,r,o))},e.prototype.argMin=function(e,t){var n=[t];we("argMin",n,e.rank);var r=ve(e.shape,n),o=r[0],i=g(r[1]),a=e.as2D(-1,i);return this.argReduce(a,"min").reshape(o)},e.prototype.argMax=function(e,t){var n=[t];we("argMax",n,e.rank);var r=ve(e.shape,n),o=r[0],i=g(r[1]),a=e.as2D(-1,i);return this.argReduce(a,"max").reshape(o)},e.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var o=new function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,o=e[e.length-1],i=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+o+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+yt(r)+" coords = getOutputCoords();\n        int end = "+_t(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+o+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+i+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+_t(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "}(e.shape,n,r);return this.compileAndRun(o,[e])},e.prototype.equal=function(e,t){var n=new ct("return float(a == b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.notEqual=function(e,t){var n=new ct("return float(a != b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.less=function(e,t){var n=new ct("return float(a < b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.lessEqual=function(e,t){var n=new ct("return float(a <= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greater=function(e,t){var n=new ct("return float(a > b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greaterEqual=function(e,t){var n=new ct("return float(a >= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalNot=function(e){var t=new Ln(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},e.prototype.logicalAnd=function(e,t){var n=new ct("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalOr=function(e,t){var n=new ct("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.select=function(e,t,n){var r=new function(e,t,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<t.length;u++)s.push(""+i[u]),u<e&&a.push(""+i[u]);r=a.join(),o=s.join()}var l=yt(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "}(e.rank,t.shape,t.rank),o=this.makeOutputArray(r.outputShape,et(t.dtype,n.dtype));return this.compileAndRun(r,[e,t,n],o)},e.prototype.where=function(e){fe("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Cr(e.shape,t)},e.prototype.topk=function(e,t,n){return at(e.dataSync(),e.shape,e.dtype,t)},e.prototype.min=function(e,t){we("min",t,e.rank);var n=ve(e.shape,t),r=n[0],o=g(n[1]),i=e.as2D(-1,o);return this.reduce(i,"min",i.dtype).reshape(r)},e.prototype.minimum=function(e,t){var n=new ct("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.mod=function(e,t){var n=new ct("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape),r=n.getCustomSetupFunc();return this.compileAndRun(n,[e,t],null,r)},e.prototype.max=function(e,t){we("max",t,e.rank);var n=ve(e.shape,t),r=n[0],o=g(n[1]),i=e.as2D(-1,o);return this.reduce(i,"max",i.dtype).reshape(r)},e.prototype.maximum=function(e,t){var n=new ct("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.all=function(e,t){we("all",t,e.rank);var n=ve(e.shape,t),r=n[0],o=g(n[1]),i=e.as2D(-1,o);return this.reduce(i,"all",i.dtype).reshape(r)},e.prototype.any=function(e,t){we("any",t,e.rank);var n=ve(e.shape,t),r=n[0],o=g(n[1]),i=e.as2D(-1,o);return this.reduce(i,"any",i.dtype).reshape(r)},e.prototype.squaredDifference=function(e,t){var n=new ct("return (a - b) * (a - b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.realDivide=function(e,t){var n=new ct("if (a == b) return 1.0;\n  return a / b;",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e,t],r)},e.prototype.floorDiv=function(e,t){var n=new ct("\n  float resultSign = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  int result = ia / ib;\n  int amodb = ia - ib * result;\n\n  if (resultSign < 0.0 && amodb != 0) {\n    result -= 1;\n  }\n  return float(result);\n",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"int32");return this.compileAndRun(n,[e,t],r)},e.prototype.add=function(e,t){var n=new ct("return a + b;",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,et(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],r)},e.prototype.addN=function(e){for(var t=e[0],n=1;n<e.length;n++)t=this.add(t,e[n]);return t},e.prototype.subtract=function(e,t){var n=new ct("return a - b;",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,et(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],r)},e.prototype.pow=function(e,t){var n=new ct("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nreturn (round(mod(b, 2.0)) == 0 || round(mod(b, 2.0)) == 2) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=n.getCustomSetupFunc(),o=this.makeOutputArray(n.outputShape,et(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],o,r)},e.prototype.ceil=function(e){var t=new Ln(e.shape,"return ceil(x);");return this.compileAndRun(t,[e])},e.prototype.floor=function(e){var t=new Ln(e.shape,"return floor(x);");return this.compileAndRun(t,[e])},e.prototype.sign=function(e){var t=new Ln(e.shape,"\n  if (isNaN(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},e.prototype.round=function(e){var t=new Ln(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},e.prototype.exp=function(e){var t=new Ln(e.shape,"return exp(x);");return this.compileAndRun(t,[e])},e.prototype.expm1=function(e){var t=new Ln(e.shape,"return exp(x) - 1.0;");return this.compileAndRun(t,[e])},e.prototype.log=function(e){var t=new Ln(e.shape,"if (x < 0.0) return NAN;\n  return log(x);"),n=t.getCustomSetupFunc();return this.compileAndRun(t,[e],null,n)},e.prototype.log1p=function(e){var t=new Ln(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},e.prototype.sqrt=function(e){var t=new Ln(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},e.prototype.rsqrt=function(e){var t=new Ln(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},e.prototype.square=function(e){var t=new Ln(e.shape,"return x * x;");return this.compileAndRun(t,[e])},e.prototype.reciprocal=function(e){var t=new Ln(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},e.prototype.relu=function(e){var t=new Ln(e.shape,"if (isNaN(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n");return this.compileAndRun(t,[e])},e.prototype.elu=function(e){var t=new Ln(e.shape,"return (x >= 0.0) ? x : (exp(x) - 1.0);");return this.compileAndRun(t,[e])},e.prototype.eluDer=function(e,t){var n=new ct("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.selu=function(e){var t=new Ln(e.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(t,[e])},e.prototype.int=function(e){var t=new Ln(e.shape,"return float(int(x));"),n=this.makeOutputArray(t.outputShape,"int32");return this.compileAndRun(t,[e],n)},e.prototype.clip=function(e,t,n){var r=new function(e,t,n){this.variableNames=["A"],this.outputShape=e;var r=t.toFixed(20),o=n.toFixed(20);this.userCode="\n      void main() {\n        float value = getAAtOutCoords();\n        if (isNaN(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, "+r+", "+o+"));\n      }\n    "}(e.shape,t,n);return this.compileAndRun(r,[e])},e.prototype.abs=function(e){var t=new Ln(e.shape,"return abs(x);");return this.compileAndRun(t,[e])},e.prototype.sigmoid=function(e){var t=new Ln(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},e.prototype.softplus=function(e){var t=new Ln(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},e.prototype.sin=function(e){var t=new Ln(e.shape,"if (isNaN(x)) return x;\n  return sin(x);\n");return this.compileAndRun(t,[e])},e.prototype.cos=function(e){var t=new Ln(e.shape,"if (isNaN(x)) return x;\n  return cos(x);\n");return this.compileAndRun(t,[e])},e.prototype.tan=function(e){var t=new Ln(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},e.prototype.asin=function(e){var t=new Ln(e.shape,"return asin(x);");return this.compileAndRun(t,[e])},e.prototype.acos=function(e){var t=new Ln(e.shape,"return acos(x);");return this.compileAndRun(t,[e])},e.prototype.atan=function(e){var t=new Ln(e.shape,"if (isNaN(x)) return x;\n  return atan(x);\n");return this.compileAndRun(t,[e])},e.prototype.atan2=function(e,t){var n=new ct("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.sinh=function(e){var t=new Ln(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},e.prototype.cosh=function(e){var t=new Ln(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},e.prototype.tanh=function(e){var t=new Ln(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},e.prototype.asinh=function(e){var t=new Ln(e.shape,"return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(t,[e])},e.prototype.acosh=function(e){var t=new Ln(e.shape,"if (isNaN(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));"),n=t.getCustomSetupFunc();return this.compileAndRun(t,[e],null,n)},e.prototype.atanh=function(e){var t=new Ln(e.shape,"if (isNaN(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;"),n=t.getCustomSetupFunc();return this.compileAndRun(t,[e],null,n)},e.prototype.erf=function(e){var t=new Ln(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n');return this.compileAndRun(t,[e])},e.prototype.step=function(e,t){var n=new Ln(e.shape,function(e){return void 0===e&&(e=0),"if (isNaN(x)) return x;\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},e.prototype.conv2d=function(e,t,n){var r=new function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.top,n=e.padInfo.left,r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,s=e.filterHeight,u=e.filterWidth,l=4*Math.floor(e.inChannels/4),c=e.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+r+", "+o+");\n      const ivec2 pads = ivec2("+t+", "+n+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR * "+i+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC * "+a+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+l+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===c)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+l+") *\n                getW(wR, wC, "+l+", d2);\n            } else if ("+(2===c)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===c)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1),\n                getX(batch, xR, xC, "+l+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2),\n                getW(wR, wC, "+l+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerInput=function(e,t,n){var r=new function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(t-1-e.padInfo.top)+", "+(n-1-e.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+e.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+e.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerFilter=function(e,t,n){var r=new function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+e.strideHeight+" - "+e.padInfo.top+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+e.strideWidth+" - "+e.padInfo.left+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2D=function(e,t,n){var r=new function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+e.strideHeight+", "+e.strideWidth+");\n      const ivec2 pads = ivec2("+e.padInfo.top+", "+e.padInfo.left+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+t+";\n        int q = d2 - d1 * "+t+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+e.filterHeight+"; wR++) {\n          int xR = xRCorner + wR * "+e.dilationHeight+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+e.filterWidth+"; wC++) {\n            int xC = xCCorner + wC * "+e.dilationWidth+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+(t-1-e.padInfo.top)+", "+(n-1-e.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+e.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+e.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TODO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+r+"; dm++) {\n              int d2 = d1 * "+r+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+e.outChannels/e.inChannels+" + dm;\n\n        float dotProd = 0.0;\n\n        // TODO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+e.strideHeight+" - "+e.padInfo.top+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+e.strideWidth+" - "+e.padInfo.left+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n);return this.compileAndRun(r,[e,t])},e.prototype.maxPool=function(e,t){var n=new Pn(t,"max",!1),r=this.makeOutputArray(n.outputShape,e.dtype);return this.compileAndRun(n,[e],r)},e.prototype.avgPool=function(e,t){var n=new Pn(t,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e],r)},e.prototype.maxPoolBackprop=function(e,t,n,r){var o=new Pn(r,"max",!0),i=this.compileAndRun(o,[t]),a=new function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(t-1-e.padInfo.top)+", "+(n-1-e.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+e.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+e.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+(t*n-1)+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+n+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(r),s=this.makeOutputArray(a.outputShape,t.dtype),u=this.compileAndRun(a,[e,i],s);return i.dispose(),u},e.prototype.avgPoolBackprop=function(e,t,n){var r=new function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(t-1-e.padInfo.top)+", "+(n-1-e.padInfo.left)+");\n      const float avgMultiplier = float("+1/(t*n)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+e.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+e.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}(n),o=this.makeOutputArray(r.outputShape,t.dtype);return this.compileAndRun(r,[e],o)},e.prototype.cast=function(e,t){return nt(e,t,this)},e.prototype.reshape=function(e,t){return rt(e,t)},e.prototype.resizeBilinear=function(e,t,n,r){var o=new function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[1],i=e[2];this.outputShape=[e[0],t,n,e[3]];var a=[r&&t>1?o-1:o,r&&n>1?i-1:i],s=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+a[0]/s[0]+",\n          "+a[1]/s[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "}(e.shape,t,n,r);return this.compileAndRun(o,[e])},e.prototype.resizeBilinearBackprop=function(e,t,n){var r=new function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,s=a[1],u=a[2],l=[n&&s>1?o-1:o,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],p=l[1]/c[1],h=1/f,d=1/p,m=2*Math.ceil(h)+2,g=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+d+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(o-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(i-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "}(e,t,n);return this.compileAndRun(r,[e])},e.prototype.resizeNearestNeighbor=function(e,t,n,r){var o=new function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[1],i=e[2];this.outputShape=[e[0],t,n,e[3]];var a=[r&&t>1?o-1:o,r&&n>1?i-1:i],s=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+a[0]/s[0]+",\n          "+a[1]/s[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+(r?"0.5":"0.0")+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "}(e.shape,t,n,r);return this.compileAndRun(o,[e])},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,s=a[1],u=a[2],l=[n&&s>1?o-1:o,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],p=l[1]/c[1],h=1/f,d=1/p,m=2*Math.ceil(h)+2,g=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+d+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "}(e,t,n);return this.compileAndRun(r,[e])},e.prototype.multinomial=function(e,t,n,r){var o=t?e:De(e),i=new An(o.shape[0],o.shape[1],n),a=this.makeOutputArray(i.outputShape,"int32"),s=i.getCustomSetupFunc(r);return this.compileAndRun(i,[o],a,s)},e.prototype.oneHot=function(e,t,n,r){var o=new function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "}(e.size,t,n,r);return this.compileAndRun(o,[e])},e.prototype.nonMaxSuppression=function(e,t,n,r,o){return fe("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),ot(e.dataSync(),t.dataSync(),n,r,o)},e.prototype.makeOutputArray=function(e,t){return G.make(e,{},t)},e.prototype.compileAndRun=function(e,t,n,r,o){var i=this;if(void 0===o&&(o=!0),null==n&&(n=this.makeOutputArray(e.outputShape,t[0].dtype)),0===n.size)return this.texData.get(n.dataId).values=O(n.dtype,0),n;var a=t.map(function(e){var t=i.texData.get(e.dataId);return null==t.texture&&e.size<=32?{tensor:e,texData:null,isUniform:!0}:(i.uploadToGPU(e.dataId),{tensor:e,texData:t,isUniform:!1})});this.uploadToGPU(n.dataId);var s,u={tensor:n,texData:this.texData.get(n.dataId),isUniform:!1},l=function(e,t,n){var r="";a.concat(u).forEach(function(e){r+=e.tensor.shape+"_"+(e.isUniform?"uniform":e.texData.texShape)});var o=e.userCode,i=(!0===e.supportsBroadcasting).toString();return e.constructor.name+"_"+i+"_"+r+"_"+o}(e),c=this.getAndSaveBinary(l,function(){return function(e,t,n,r){for(var o=t.userCode,i=n.map(function(e,n){return{name:t.variableNames[n],shapeInfo:{logicalShape:e.tensor.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform}}}),a=i.map(function(e){return e.shapeInfo}),s={logicalShape:r.tensor.shape,texShape:r.texData.texShape,isUniform:!1},u=function(e,t,n,r){var o=e.map(function(e){var t=g(e.shapeInfo.logicalShape);return e.shapeInfo.isUniform?"uniform float "+e.name+(t>1?"["+t+"]":"")+";":"uniform sampler2D "+e.name+";"});o=o.join("\n");var i=e.map(function(e){return function(e,t,n){var r=function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1)+"Flat",r=g(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform)return 1===r?"float "+n+"(int index) {return "+t+";}":"\n      float "+n+"(int index) {\n        for (int i = 0; i < "+r+"; i++) {\n          if (i == index) {\n            return "+t+"[i];\n          }\n        }\n      }\n    ";var o=e.shapeInfo.texShape,i=o[0],a=o[1];return 1===a&&1===i?"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ":1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index) + 0.5) / "+i+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index) + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = UVfrom1D("+i+", "+a+", index);\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);return r+=function e(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);return e.shapeInfo.isUniform?"float "+n+"() {return "+t+";}":"\n    float "+n+"() {\n      return sampleTexture("+t+", halfCR);\n    }\n  "}(t);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);return"\n    float "+n+"(int index) {\n      return "+n+"Flat(index);\n    }\n  "}(t);case 2:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(null!=i&&y(n,i))return"\n    float "+o+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+i[1]+".0, "+i[0]+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ";var a=E(n),s=a.newShape,u=a.keptDims;if(s.length<n.length)return"\n      "+e(vt(t,s))+"\n      float "+o+"(int row, int col) {\n        return "+o+"("+bt(["row","col"],u)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col) {\n        int index = row * "+n[1]+" + col;\n        return "+o+"Flat(index);\n      }\n    ";var l=i[0],c=i[1];return 1===c?"\n    float "+o+"(int row, int col) {\n      int index = row * "+n[1]+" + col;\n      vec2 uv = vec2(0.5, (float(index) + 0.5) / "+l+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":1===l?"\n    float "+o+"(int row, int col) {\n      int index = row * "+n[1]+" + col;\n      vec2 uv = vec2((float(index) + 0.5) / "+c+".0, 0.5);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n  float "+o+"(int row, int col) {\n    vec2 uv = UVfrom2D("+l+", "+c+", "+n[1]+", row, col);\n    return sampleTexture("+r+", uv);\n  }\n"}(t);case 3:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],a=n[2],s=E(n),u=s.newShape,l=s.keptDims;if(u.length<n.length)return"\n        "+e(vt(t,u))+"\n        float "+o+"(int row, int col, int depth) {\n          return "+o+"("+bt(["row","col","depth"],l)+");\n        }\n      ";if(t.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth) {\n        int index = row * "+i+" + col * "+a+" + depth;\n        return "+o+"Flat(index);\n      }\n    ";var c=t.shapeInfo.texShape,f=c[0],p=c[1];return p===i?"\n        float "+o+"(int row, int col, int depth) {\n          int texR = row;\n          int texC = col * "+a+" + depth;\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+p+".0, "+f+".0);\n          return sampleTexture("+r+", uv);\n        }\n      ":p===a?"\n    float "+o+"(int row, int col, int depth) {\n      int texR = row * "+n[1]+" + col;\n      int texC = depth;\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+p+".0, "+f+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n      float "+o+"(int row, int col, int depth) {\n        vec2 uv = UVfrom3D(\n            "+f+", "+p+", "+i+", "+a+", row, col, depth);\n        return sampleTexture("+r+", uv);\n      }\n  "}(t);case 4:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],a=n[2]*i,s=n[1]*a,u=E(n),l=u.newShape,c=u.keptDims;if(l.length<n.length)return"\n      "+e(vt(t,l))+"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        return "+o+"("+bt(["row","col","depth","depth2"],c)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int index = row * "+s+" + col * "+a+" +\n            depth * "+i+" + depth2;\n        return "+o+"Flat(index);\n      }\n    ";var f=t.shapeInfo.texShape,p=f[0],h=f[1];return h===s?"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int texR = row;\n        int texC = col * "+a+" + depth * "+i+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+h+".0, "+p+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":h===i?"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int texR = row * "+n[1]*n[2]+" + col * "+n[2]+" + depth;\n        int texC = depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+h+".0, "+p+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth, int depth2) {\n      vec2 uv = UVfrom4D("+p+", "+h+", "+s+", "+a+",\n          "+i+", row, col, depth, depth2);\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);case 5:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[4],a=n[3]*i,s=n[2]*a,u=n[1]*s,l=E(n),c=l.newShape,f=l.keptDims;if(c.length<n.length)return"\n      "+e(vt(t,c))+"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+o+"("+bt(["row","col","depth","depth2","depth3"],f)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int index = row * "+u+" + col * "+s+" +\n            depth * "+a+" + depth2 * "+i+" + depth3;\n        return "+o+"Flat(index);\n      }\n    ";var p=t.shapeInfo.texShape,h=p[0],d=p[1];return d===u?"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        int texC = col * "+s+" + depth * "+a+" +\n                   depth2 * "+i+" + depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+d+".0, "+h+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":d===i?"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row * "+n[1]*n[2]+" + col * "+n[2]+" +\n                   depth * "+n[3]+" + depth2;\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+d+".0, "+h+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n      vec2 uv = UVfrom5D("+h+", "+d+", "+u+", "+s+",\n          "+a+", "+i+", row, col, depth, depth2, depth3);\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);case 6:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[5],a=n[4]*i,s=n[3]*a,u=n[2]*s,l=n[1]*u,c=E(n),f=c.newShape,p=c.keptDims;if(f.length<n.length)return"\n      "+e(vt(t,f))+"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+o+"("+bt(["row","col","depth","depth2","depth3","depth4"],p)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = row * "+l+" + col * "+u+" +\n            depth * "+s+" + depth2 * "+a+" + depth3 * "+a+"\n            + depth4\n        return "+o+"Flat(index);\n      }\n    ";var h=t.shapeInfo.texShape,d=h[0],m=h[1];return m===l?"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        int texC = col * "+u+" + depth * "+s+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+d+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":m===i?"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row * "+n[1]*n[2]+" + col * "+n[2]+" + depth;\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+d+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      vec2 uv = UVfrom6D("+d+", "+m+", "+l+", "+u+",\n          "+s+", "+a+", "+i+"\n          ,row, col, depth, depth2, depth3, depth4);\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}(e),(n||y(e.shapeInfo.logicalShape,t.logicalShape))&&(r+=function(e,t,n){var r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),i="get"+o+"AtOutCoords",a=st(e.shapeInfo.logicalShape,t.logicalShape),s=n&&(t.logicalShape.length>e.shapeInfo.logicalShape.length||a.length>0),u=function(e){for(var t=0;t<e.length;t++)if(e[t]!==t)return!1;return!0}(a),l=e.shapeInfo.isUniform;if(s&&!u)return function(e,t,n,r){var o=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,a="int";2===i?a="ivec2":3===i?a="ivec3":4===i&&(a="ivec4");var s=st(e.shapeInfo.logicalShape,t.logicalShape),u=i-o;return"\n    float "+r+"() {\n      "+a+" coords = getOutputCoords();\n      "+(0===o?"":i<2&&s.length>=1?"coords = 0;":s.map(function(e){return"coords["+(e+u)+"] = 0;"}).join("\n"))+"\n      return get"+n+"("+(i<2&&o>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords["+(t+u)+"]"}).join(", "))+");\n    }\n  "}(e,t,o,i);var c=g(e.shapeInfo.logicalShape),f="";s&&u&&(f="\n        int mainPart = index / "+c+";\n        index -= mainPart * "+c+";\n      ");var p=t.texShape;if(l)return 1===c?"float "+i+"() {return "+r+";}":"\n      float "+i+"() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                              vec2("+p[0]+", "+p[1]+"));\n        int index = resTexRC.x * "+p[1]+" + resTexRC.y;\n        "+f+"\n        return get"+o+"Flat(index);\n      }\n    ";var h=e.shapeInfo.texShape;return y(h,p)?"\n      float "+i+"() {\n        return sampleTexture("+r+", resultUV);\n      }\n    ":"\n    float "+i+"() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+p[0]+", "+p[1]+"));\n      int index = resTexRC.x * "+p[1]+" + resTexRC.y;\n      "+f+"\n      int texR = index / "+h[1]+";\n      int texC = index - texR * "+h[1]+";\n      vec2 uv = (vec2(texC, texR) + halfCR) /\n                 vec2("+h[1]+".0, "+h[0]+".0);\n\n      return sampleTexture("+r+", uv);\n    }\n  "}(e,t,n)),r}(e,t,r)}).join("\n"),a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return y(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return function(e,t){var n=e[1]*e[2],r=e[2];return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+n+";\n      index -= r * "+n+";\n      int c = index / "+r+";\n      int d = index - c * "+r+";\n      return ivec3(r, c, d);\n    }\n  "}(e,t);case 4:return function(e,t){var n=e[3],r=e[2]*n,o=e[1]*r;return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      int r = index / "+o+";\n      index -= r * "+o+";\n\n      int c = index / "+r+";\n      index -= c * "+r+";\n\n      int d = index / "+n+";\n      int d2 = index - d * "+n+";\n\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=e[4],r=e[3]*n,o=e[2]*r,i=e[1]*o;return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      int r = index / "+i+";\n      index -= r * "+i+";\n\n      int c = index / "+o+";\n      index -= c * "+o+";\n\n      int d = index / "+r+";\n      index -= d * "+r+";\n\n      int d2 = index  / "+n+";\n      int d3 = index - d2 * "+n+";\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=e[5],r=e[4]*n,o=e[3]*r,i=e[2]*o,a=e[1]*i;return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      int r = index / "+a+";\n      index -= r * "+a+";\n\n      int c = index / "+i+";\n      index -= c * "+i+";\n\n      int d = index / "+o+";\n      index -= d * "+o+";\n\n      int d2 = index / "+r+";\n      index -= d2 * "+r+";\n\n      int d3 = index / "+n+";\n      int d4 = index - d3 * "+n+";\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}}(t.logicalShape,t.texShape);return[gt,dt,mt,o,a,i,n].join("\n")}(i,s,o,!0===t.supportsBroadcasting),l=e.createProgram(u),c={},f=0;f<t.variableNames.length;f++){var p=t.variableNames[f];c[p]=e.getUniformLocation(l,p,!1)}return{program:t,source:u,webGLProgram:l,uniformLocations:c,gpgpu:e,inShapeInfos:a,outShapeInfo:s}}(i.gpgpu,e,a,u)}),f=null!=this.activeTimers;if(f&&(s=this.startTimer()),function(e,t,n,r){kn(e.inShapeInfos,t),kn([e.outShapeInfo],[n]);var o=n.texData.texShape,i=e.gpgpu;i.setOutputMatrixTexture(n.texData.texture,o[0],o[1]),i.setProgram(e.webGLProgram),t.forEach(function(t,n){var r=e.uniformLocations[e.program.variableNames[n]];if(null!=r){if(t.isUniform){if(1===t.tensor.size)i.gl.uniform1f(r,t.tensor.dataSync()[0]);else{var o=t.tensor.dataSync();o instanceof Float32Array||(o=new Float32Array(o)),i.gl.uniform1fv(r,o)}return}i.setInputMatrixTexture(t.texData.texture,r,n)}}),null!=r&&r(i,e.webGLProgram),i.executeProgram()}(c,a,u,r),o&&this.numBytesInGPU>this.NUM_BYTES_BEFORE_PAGING)for(var p=this.numBytesInGPU-this.NUM_BYTES_BEFORE_PAGING;p>0&&this.lruDataGPU.length>0;){var h=this.lruDataGPU.shift(),d=this.texData.get(h);p-=this.computeBytes(d.shape,d.dtype),this.read(h)}return f&&(s=this.endTimer(s),this.activeTimers.push(this.getQueryTime(s))),n},e.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){if(!this.disposed){for(var e in this.binaryCache)this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram);this.textureManager.dispose(),this.canvas.remove(),null!=this.fromPixelsCanvas&&this.fromPixelsCanvas.remove(),this.gpgpuCreatedLocally&&this.gpgpu.dispose(),this.disposed=!0}},e.prototype.throwIfNoData=function(e){if(!this.texData.has(e))throw new Error("WebGL backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},e.prototype.uploadToGPU=function(e){this.throwIfNoData(e);var t=this.texData.get(e),n=t.shape,r=t.values,o=t.usage;if(null==t.texture){var i,a=null!=this.activeTimers;a&&(i=performance.now());var s=an(this.gpgpu.gl,n);t.texShape=s;var u=this.acquireTexture(e,s,o);t.texture=u,null!=r&&(this.gpgpu.uploadMatrixToTexture(u,s[0],s[1],r instanceof Float32Array?r:new Float32Array(r)),t.values=null,a&&(this.uploadWaitMs+=performance.now()-i))}else this.lruDataGPU.indexOf(e)>=0&&(this.lruDataGPU.splice(this.lruDataGPU.indexOf(e),1),this.lruDataGPU.push(e))},e.prototype.cacheOnCPU=function(e,t){var n=this.delayedStorage,r=this.texData.get(e),o=r.texture,i=r.dtype;n&&null!=o&&(this.releaseTexture(e,o,r.texShape,r.usage),r.texture=null,r.texShape=null),null!=t&&(r.values=function(e,t){if("float32"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,i))},e.prototype.releaseTexture=function(e,t,n,r){var o=this.texData.get(e),i=o.shape,a=o.dtype,s=this.lruDataGPU.indexOf(e);s>=0&&this.lruDataGPU.splice(s,1),this.numBytesInGPU-=this.computeBytes(i,a),this.textureManager.releaseTexture(t,n,r)},e.prototype.acquireTexture=function(e,t,n){var r=this.texData.get(e),o=r.shape,i=r.dtype;return this.lruDataGPU.push(e),this.numBytesInGPU+=this.computeBytes(o,i),this.textureManager.acquireTexture(t,n)},e.prototype.computeBytes=function(e,t){return g(e)*k(t)},e}();ce.get("IS_BROWSER")&&ce.registerBackend("webgl",function(){return new Sr},2,q);var Tr=Me({abs_:function(e){var t=Ae(e,"x","abs");return ce.engine.runKernel(function(e){return e.abs(t)},{$x:t},function(e){return{$x:function(){return e.mulStrict(t.toFloat().step(-1))}}})}}),kr=Me({acos_:function(e){var t=Ae(e,"x","acos");return ce.engine.runKernel(function(e){return e.acos(t)},{$x:t},function(e){return{$x:function(){return e.divStrict(je(1).sub(t.toFloat().square()).sqrt()).neg()}}})}}),Ar=Me({acosh_:function(e){var t=Ae(e,"x","acosh");return ce.engine.runKernel(function(e){return e.acosh(t)},{$x:t},function(e){return{$x:function(){return e.divStrict(t.toFloat().square().sub(je(1)).sqrt())}}})}}),Pr=Me({asin_:function(e){var t=Ae(e,"x","asin");return ce.engine.runKernel(function(e){return e.asin(t)},{$x:t},function(e){return{$x:function(){return e.divStrict(je(1).sub(t.toFloat().square()).sqrt())}}})}}),Mr=Me({asinh_:function(e){var t=Ae(e,"x","asinh");return ce.engine.runKernel(function(e){return e.asinh(t)},{$x:t},function(e){return{$x:function(){return e.divStrict(je(1).add(t.toFloat().square()).sqrt())}}})}}),Dr=Me({atan_:function(e){var t=Ae(e,"x","atan");return ce.engine.runKernel(function(e){return e.atan(t)},{$x:t},function(e){return{$x:function(){return e.divStrict(je(1).add(t.toFloat().square()))}}})}}),Rr=Me({atanh_:function(e){var t=Ae(e,"x","atanh");return ce.engine.runKernel(function(e){return e.atanh(t)},{$x:t},function(e){return{$x:function(){return e.divStrict(je(1).sub(t.toFloat().square()))}}})}}),jr=Me({ceil_:function(e){var t=Ae(e,"x","ceil");return ce.engine.runKernel(function(e){return e.ceil(t)},{$x:t},function(e){return{$x:function(){return Qe(e)}}})}}),Lr=Me({clipByValue_:function(e,t,n){var r=Ae(e,"x","clipByValue");return f(t<=n,"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."),ce.engine.runKernel(function(e){return e.clip(r,t,n)},{$x:r},function(e){return{$x:function(){return e.where(r.greaterEqual(je(t)).logicalAnd(r.lessEqual(je(n))),Qe(e))}}})}}),Vr=Me({cos_:function(e){var t=Ae(e,"x","cos");return ce.engine.runKernel(function(e){return e.cos(t)},{$x:t},function(e){return{$x:function(){return t.toFloat().sin().neg().mulStrict(e)}}})}}),zr=Me({cosh_:function(e){var t=Ae(e,"x","cosh");return ce.engine.runKernel(function(e){return e.cosh(t)},{$x:t},function(e){return{$x:function(){return t.toFloat().sinh().mulStrict(e)}}})}}),Fr=Me({erf_:function(e){var t=Ae(e,"x","erf");return f("int32"===t.dtype||"float32"===t.dtype,"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=t.toFloat()),ce.engine.runKernel(function(e){return e.erf(t)},{$x:t},function(e){return{$x:function(){return e.mulStrict(je(2/Math.sqrt(Math.PI)).mul(t.square().neg().exp()))}}})}}),Br=Me({exp_:function(e){var t=Ae(e,"x","exp");return ce.engine.runKernel(function(e,n){return n(e.exp(t))},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mulStrict(n)}}})}}),Ur=Me({expm1_:function(e){var t=Ae(e,"x","expm1");return ce.engine.runKernel(function(e){return e.expm1(t)},{$x:t},function(e){return{$x:function(){return e.mulStrict(t.exp())}}})}}),Wr=Me({floor_:function(e){var t=Ae(e,"x","floor");return ce.engine.runKernel(function(e){return e.floor(t)},{$x:t},function(e){return{$x:function(){return Qe(e)}}})}}),$r=Me({log_:function(e){var t=Ae(e,"x","log");return ce.engine.runKernel(function(e){return e.log(t)},{$x:t},function(e){return{$x:function(){return e.divStrict(t.toFloat())}}})}}),Hr=Me({log1p_:function(e){var t=Ae(e,"x","log1p");return ce.engine.runKernel(function(e){return e.log1p(t)},{$x:t},function(e){return{$x:function(){return e.divStrict(t.add(je(1)))}}})}}),qr=Me({logSigmoid_:function(e){var t=Ae(e,"x","logSigmoid");return ce.engine.runKernel(function(e){return e.softplus(t.neg()).neg()},{$x:t},function(e){return{$x:function(){return e.mulStrict(t.neg().sigmoid())}}})}}),Gr=Me({neg_:function(e){var t=Ae(e,"x","neg");return ce.engine.runKernel(function(e){return e.neg(t)},{$x:t},function(e){return{$x:function(){return e.neg()}}})}}),Kr=Me({reciprocal_:function(e){var t=Ae(e,"x","reciprocal");return ce.engine.runKernel(function(e){return e.reciprocal(t)},{$x:t},function(e){return{$x:function(){return e.divStrict(t.square().neg())}}})}}),Xr=Me({round_:function(e){var t=Ae(e,"x","round");return ce.engine.runKernel(function(e){return e.round(t)},{$x:t},function(e){return{$x:function(){return Qe(e)}}})}}),Zr=Me({rsqrt_:function(e){var t=Ae(e,"x","rsqrt");return ce.engine.runKernel(function(e){return e.rsqrt(t)},{$x:t},function(e){return{$x:function(){return e.divStrict(t.pow(je(1.5)).mul(je(2))).neg()}}})}}),Yr=Me({sigmoid_:function(e){var t=Ae(e,"x","sigmoid");return ce.engine.runKernel(function(e,n){return n(e.sigmoid(t))},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mulStrict(n.mul(je(1).sub(n)))}}})}}),Qr=Me({sign_:function(e){var t=Ae(e,"x","sign");return ce.engine.runKernel(function(e){return e.sign(t)},{$x:t},function(e){return{$x:function(){return Qe(e)}}})}}),Jr=Me({sin_:function(e){var t=Ae(e,"x","sin");return ce.engine.runKernel(function(e){return e.sin(t)},{$x:t},function(e){return{$x:function(){return t.toFloat().cos().mulStrict(e)}}})}}),eo=Me({sinh_:function(e){var t=Ae(e,"x","sinh");return ce.engine.runKernel(function(e){return e.sinh(t)},{$x:t},function(e){return{$x:function(){return t.toFloat().cosh().mulStrict(e)}}})}}),to=Me({softplus_:function(e){var t=Ae(e,"x","softplus");return ce.engine.runKernel(function(e){return e.softplus(t)},{$x:t},function(e){return{$x:function(){return e.mulStrict(t.sigmoid())}}})}}),no=Me({sqrt_:function(e){var t=Ae(e,"x","sqrt");return ce.engine.runKernel(function(e){return e.sqrt(t)},{$x:t},function(e){return{$x:function(){return e.divStrict(t.toFloat().sqrt().mul(je(2)))}}})}}),ro=Me({square_:function(e){var t=Ae(e,"x","square");return ce.engine.runKernel(function(e){return e.square(t)},{$x:t},function(e){return{$x:function(){return e.mulStrict(t.toFloat().mul(je(2)))}}})}}),oo=Me({step_:function(e,t){void 0===t&&(t=0);var n=Ae(e,"x","step");return ce.engine.runKernel(function(e){return e.step(n,t)},{$x:n},function(e){return{$x:function(){return Qe(e)}}})}}),io=Me({tan_:function(e){var t=Ae(e,"x","tan");return ce.engine.runKernel(function(e){return e.tan(t)},{$x:t},function(e){return{$x:function(){return e.divStrict(t.cos().square())}}})}}),ao=Me({tanh_:function(e){var t=Ae(e,"x","tanh");return ce.engine.runKernel(function(e,n){return n(e.tanh(t))},{$x:t},function(e,t){var n=t[0];return{$x:function(){return je(1).sub(n.square()).mulStrict(e)}}})}});function so(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}var uo=Me({batchNormalization2d_:function(e,t,n,r,o,i){void 0===r&&(r=.001);var a,s,u=Ae(e,"x","batchNormalization"),l=Ae(t,"mean","batchNormalization"),c=Ae(n,"variance","batchNormalization");return null!=o&&(a=Ae(o,"scale","batchNormalization")),null!=i&&(s=Ae(i,"offset","batchNormalization")),f(2===u.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+u.rank+"."),f(2===l.rank||1===l.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."),f(2===c.rank||1===c.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."),null!=a&&f(2===a.rank||1===a.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."),null!=s&&f(2===s.rank||1===s.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."),fo(u,l,c,r,a,s)}}),lo=Me({batchNormalization3d_:function(e,t,n,r,o,i){void 0===r&&(r=.001);var a,s,u=Ae(e,"x","batchNormalization"),l=Ae(t,"mean","batchNormalization"),c=Ae(n,"variance","batchNormalization");return null!=o&&(a=Ae(o,"scale","batchNormalization")),null!=i&&(s=Ae(i,"offset","batchNormalization")),f(3===u.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+u.rank+"."),f(3===l.rank||1===l.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."),f(3===c.rank||1===c.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."),null!=a&&f(3===a.rank||1===a.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."),null!=s&&f(3===s.rank||1===s.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."),fo(u,l,c,r,a,s)}}),co=Me({batchNormalization4d_:function(e,t,n,r,o,i){void 0===r&&(r=.001);var a,s,u=Ae(e,"x","batchNormalization"),l=Ae(t,"mean","batchNormalization"),c=Ae(n,"variance","batchNormalization");return null!=o&&(a=Ae(o,"scale","batchNormalization")),null!=i&&(s=Ae(i,"offset","batchNormalization")),f(4===u.rank,"Error in batchNormalization4D: x must be rank 4 but got rank "+u.rank+"."),f(4===l.rank||1===l.rank,"Error in batchNormalization4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."),f(4===c.rank||1===c.rank,"Error in batchNormalization4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."),null!=a&&f(4===a.rank||1===a.rank,"Error in batchNormalization4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."),null!=s&&f(4===s.rank||1===s.rank,"Error in batchNormalization4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."),fo(u,l,c,r,a,s)}}),fo=Me({batchNormalization_:function(e,t,n,r,o,i){void 0===r&&(r=.001);var a,s,u,l=Ae(e,"x","batchNormalization"),c=Ae(t,"mean","batchNormalization"),p=Ae(n,"variance","batchNormalization");return null!=o&&(a=Ae(o,"scale","batchNormalization")),null!=i&&(s=Ae(i,"offset","batchNormalization")),f(c.rank===p.rank,"Batch normalization gradient requires mean and variance to have equal ranks."),f(null==s||c.rank===s.rank,"Batch normalization gradient requires mean and offset to have equal ranks."),f(null==a||c.rank===a.rank,"Batch normalization gradient requires mean and scale to have equal ranks."),u=0===l.rank||1===l.rank?l.as4D(1,1,1,l.size):2===l.rank?l.as4D(1,1,l.shape[0],l.shape[1]):3===l.rank?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l,ce.engine.runKernel(function(e){return e.batchNormalization(u,so(c),so(p),r,so(a),so(s))},{$x:l,$mean:c,$variance:p,$scale:a,$offset:s},function(e){var t=null==a?je(1):a,n=ut(c.shape,u.shape),o=[];if(1===c.rank){for(var i=0;i<u.shape.length-1;++i)o.push(u.shape[i]);o.push(1)}var s=l.sub(c),f=e.mul(t),h=Zr(p.add(je(r))),d=h.mul(h).mul(h).mul(je(-.5));return{$x:function(){return 1===c.rank?e.mul(wr(h.as4D(1,1,1,c.shape[0]),o)).mul(t).reshape(l.shape):e.mul(h).mul(t).reshape(l.shape)},$mean:function(){var e=h.mul(je(-1)).mul(f);return 1===c.rank&&(e=e.sum(n)),e.reshape(c.shape)},$variance:function(){var e=d.mul(s).mul(f);return 1===c.rank&&(e=e.sum(n)),e.reshape(c.shape)},$scale:function(){var t=s.mul(h),r=e.mul(t);return 1===c.rank&&(r=r.sum(n)),r.reshape(c.shape)},$offset:function(){var t=e;return 1===c.rank&&(t=t.sum(n)),t.reshape(c.shape)}}}).reshape(l.shape)}});function po(e,t,n,r,o,i){void 0===i&&(i="channelsLast");var a,s=mo(t),u=s[0],l=s[1];if("channelsLast"===i)a=[u,l,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);a=[u,l,e[1],e[1]]}return ho(e,a,n,1,r,o,!1,i)}function ho(e,t,n,r,o,i,a,s){void 0===a&&(a=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],p=u[2],h=u[3];if("channelsLast"===s)l=e[0],c=e[1],p=e[2],h=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=e[0],h=e[1],c=e[2],p=e[3]}var d,m=t[0],g=t[1],y=t[3],b=mo(n),_=b[0],w=b[1],x=mo(r),N=x[0],E=x[1],O=function(e,t,n,r,o,i,a,s){var u,l,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var p=function(e,t,n,r,o,i){null==o&&(o=function(e,t,n,r){void 0===r&&(r=1);var o=go(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}(e,t,r));var a=e[1],s=yo((e[0]-t+2*o)/r+1,i);f(v(s),"The output # of rows ("+s+") must be an integer. Change the stride and/or zero pad parameters");var u=yo((a-t+2*o)/r+1,i);return f(v(u),"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"),[s,u,1]}([t,n,1],i,0,r,e,s);l=p[0],c=p[1]}else if("same"===e){var h=((l=Math.ceil(t/r))-1)*r+i-t,d=((c=Math.ceil(n/o))-1)*o+a-n,m=Math.floor(h/2),g=h-m,y=Math.floor(d/2);u={top:m,bottom:g,left:y,right:d-y,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),c=Math.ceil((n-a+1)/o)}return{padInfo:u,outHeight:l,outWidth:c}}(o,c,p,_,w,go(m,N),go(g,E),i),C=O.outHeight,I=O.outWidth,S=a?y*h:y;return"channelsFirst"===s?d=[l,S,C,I]:"channelsLast"===s&&(d=[l,C,I,S]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:p,inChannels:h,outHeight:C,outWidth:I,outChannels:S,padInfo:O.padInfo,strideHeight:_,strideWidth:w,filterHeight:m,filterWidth:g,dilationHeight:N,dilationWidth:E,inShape:e,outShape:d,filterShape:t}}function mo(e){return"number"==typeof e?[e,e]:e}function go(e,t){return t<=1?e:e+(e-1)*(t-1)}function yo(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function vo(e,t,n,r,o,i){f(e.length===t.rank,"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match");var a=e,s=t,u=!1;3===t.rank&&(u=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),a=[1,e[0],e[1],e[2]]);var l=a[3],c=s.shape[3];f(4===a.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."),f(4===s.rank,"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank),f(4===n.rank,"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank),f(l===n.shape[2],"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."),f(c===n.shape[3],"Error in conv2dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[3]+"."),null!=i&&f(v(o),"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+".");var p=ho(a,n.shape,r,1,o,i),h=ce.engine.runKernel(function(e){return e.conv2dDerInput(s,n,p)},{dy4D:s});return u?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function bo(e){var t=function(e){return"number"==typeof e?[e,e]:e}(e);return 1===t[0]&&1===t[1]}function _o(e,t){return bo(e)||bo(t)}var wo=Me({conv1d_:function(e,t,n,r,o,i,a){void 0===o&&(o="NWC"),void 0===i&&(i=1);var s=Ae(e,"x","conv1d"),u=Ae(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),f(3===l.rank,"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."),f(3===u.rank,"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."),null!=a&&f(v(r),"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."),f(l.shape[2]===u.shape[1],"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."),f(_o(n,i),"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"),f("NWC"===o,"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported.");var p=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),d=xo(h,p,[1,n],r,"NHWC",[1,i],a);return c?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),xo=Me({conv2d_:function(e,t,n,r,o,i,a){void 0===o&&(o="NHWC"),void 0===i&&(i=[1,1]);var s=Ae(e,"x","conv2d"),u=Ae(t,"filter","conv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),f(4===l.rank,"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."),f(4===u.rank,"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."),null!=a&&f(v(r),"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."),f(l.shape[3]===u.shape[2],"Error in conv2d: depth of input ("+l.shape[3]+") must match input depth for filter "+u.shape[2]+"."),f(_o(n,i),"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"),f("NHWC"===o,"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported.");var p=ho(l.shape,u.shape,n,i,r,a),h=ce.engine.runKernel(function(e){return e.conv2d(l,u,p)},{x:l,$filter:u},function(e){return f(bo(i),"Error in gradient of conv2D: dilation rates greater than 1 are notyet supported in gradients. Got dilations '"+i+"'"),{x:function(){return vo(l.shape,e,u,n,r)},$filter:function(){return function(e,t,n,r,o,i){var a=l;3===l.rank&&(a=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]));var s=t;3===s.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),f(4===a.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."),f(4===s.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."),f(4===n.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."),f(a.shape[3]===n[2],"Error in conv2dDerFilter: depth of input "+a.shape[3]+") must match input depth in filter ("+n[2]+"."),f(s.shape[3]===n[3],"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must match output depth for filter ("+n[3]+").");var u=ho(a.shape,n,r,1,o,void 0);return ce.engine.runKernel(function(e){return e.conv2dDerFilter(a,s,u)},{x4D:a,dy4D:s})}(0,e,u.shape,n,r)}}});return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),No=Me({depthwiseConv2d_:function(e,t,n,r,o,i,a){void 0===o&&(o="NHWC"),void 0===i&&(i=[1,1]);var s=Ae(e,"x","depthwiseConv2d"),u=Ae(t,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),f(4===l.rank,"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."),f(4===u.rank,"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."),f(l.shape[3]===u.shape[2],"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."),null==i&&(i=[1,1]),f(_o(n,i),"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"),null!=a&&f(v(r),"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+".");var p=ho(l.shape,u.shape,n,i,r,a,!0),h=ce.engine.runKernel(function(e){return e.depthwiseConv2D(l,u,p)},{x:l,$filter:u},function(e){return f(bo(i),"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"),{x:function(){return function(e,t,n,r){var o=t,i=!1;3===t.rank&&(i=!0,o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=ce.engine.runKernel(function(e){return e.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return i?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}(0,e,u,p)},$filter:function(){return function(e,t,n,r){var o=l;3===l.rank&&(o=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]));var i=t;return 3===i.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ce.engine.runKernel(function(e){return e.depthwiseConv2DDerFilter(o,i,r)},{x4D:o,dy4D:i})}(0,e,0,p)}}});return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),Eo=Me({separableConv2d_:function(e,t,n,r,o,i,a){void 0===i&&(i=[1,1]),void 0===a&&(a="NHWC");var s=Ae(e,"x","separableConv2d"),u=Ae(t,"depthwiseFilter","separableConv2d"),l=Ae(n,"pointwiseFilter","separableConv2d"),c=s,p=!1;if(3===s.rank&&(p=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");f(4===c.rank,"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."),f(4===u.rank,"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."),f(4===l.rank,"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."),f(1===l.shape[0],"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."),f(1===l.shape[1],"Error in separableConv2d: the second dimension of pointwise filter  must be 1, but got "+l.shape[1]+".");var h=u.shape[2],d=u.shape[3];f(l.shape[2]===h*d,"Error in separableConv2d: the third dimension of pointwise filter must be "+h*d+", but got "+l.shape[2]+".");var m=No(c,u,r,o,a,i),g=xo(m,l,1,"valid",a);return p?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),Oo=Me({conv2dTranspose_:function(e,t,n,r,o,i){return vo(n,Ae(e,"x","conv2dTranspose"),Ae(t,"filter","conv2dTranspose"),r,o,i)}}),Co=Me({matMul_:function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var o=Ae(e,"a","matMul"),i=Ae(t,"b","matMul"),a=n?o.shape[0]:o.shape[1],s=r?i.shape[1]:i.shape[0];return f(2===o.rank&&2===i.rank,"Error in matMul: inputs must be rank 2, got ranks "+o.rank+" and "+i.rank+"."),f(a===s,"Error in matMul: inner shapes ("+a+") and ("+s+") of Tensors with shapes "+o.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."),ce.engine.runKernel(function(e){return e.matMul(o,i,n,r)},{$a:o,$b:i},function(e){return n||r?!n&&r?{$a:function(){return e.matMul(i.toFloat(),!1,!1)},$b:function(){return e.matMul(o.toFloat(),!0,!1)}}:n&&!r?{$a:function(){return i.toFloat().matMul(e,!1,!0)},$b:function(){return o.toFloat().matMul(e,!1,!1)}}:{$a:function(){return i.toFloat().matMul(e,!0,!0)},$b:function(){return e.matMul(o.toFloat(),!0,!0)}}:{$a:function(){return e.matMul(i.toFloat(),!1,!0)},$b:function(){return o.toFloat().matMul(e,!0,!1)}}})}}),Io=Me({dot_:function(e,t){var n=Ae(e,"t1","dot"),r=Ae(t,"t2","dot");f(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+".");var o=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];return f(o===i,"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+i+"."),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),So=Me({outerProduct_:function(e,t){var n=Ae(e,"v1","outerProduct"),r=Ae(t,"v2","outerProduct");return f(1===n.rank&&1===r.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),To=Me({reverse_:function(e,t){var n=Ae(e,"x","reverse");if(0===n.rank)return n.clone();var r=_e(t,n.shape);return ce.engine.runKernel(function(e){return e.reverse(n,r)},{$x:n},function(e){return{$x:function(){return e.reverse(r)}}}).reshapeAs(n)}}),ko=Me({reverse1d_:function(e){var t=Ae(e,"x","reverse");return f(1===t.rank,"Error in reverse1D: x must be rank 1 but got\n             rank "+t.rank+"."),To(t,0)}}),Ao=Me({reverse2d_:function(e,t){var n=Ae(e,"x","reverse");return f(2===n.rank,"Error in reverse2D: x must be rank 2 but got\n             rank "+n.rank+"."),To(n,t)}}),Po=Me({reverse3d_:function(e,t){var n=Ae(e,"x","reverse");return f(3===n.rank,"Error in reverse3D: x must be rank 3 but got\n             rank "+n.rank+"."),To(n,t)}}),Mo=Me({reverse4d_:function(e,t){var n=Ae(e,"x","reverse");return f(4===n.rank,"Error in reverse4D: x must be rank 4 but got\n             rank "+n.rank+"."),To(n,t)}}),Do=Me({maxPool_:function(e,t,n,r,o){var i=Ae(e,"x","maxPool"),a=i,s=!1;3===i.rank&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),f(4===a.rank,"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."),null!=o&&f(v(r),"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+".");var u=po(a.shape,t,n,r,o),l=ce.engine.runKernel(function(e,t){return t(e.maxPool(a,u))},{x:a},function(e,o){var i=o[0];return{x:function(){return function(e,t,n,r,o,i,a){var s=Ae(e,"dy","maxPoolBackprop"),u=Ae(t,"input","maxPoolBackprop"),l=Ae(n,"output","maxPoolBackprop");f(u.rank===s.rank,"Rank of input ("+u.rank+") does not match rank of dy ("+s.rank+")"),f(4===s.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+s.rank+"."),f(4===u.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+u.rank+".");var c=po(u.shape,r,o,i,void 0);return ce.engine.runKernel(function(e){return e.maxPoolBackprop(s,u,l,c)},{$dy:s,$input:u})}(e,a,i,t,n,r)}}});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Ro=Me({avgPool_:function(e,t,n,r,o){var i=Ae(e,"x","avgPool");f("float32"===i.dtype,"The input dtype to avgPool must be float32");var a=i,s=!1;3===i.rank&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),f(4===a.rank,"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."),null!=o&&f(v(r),"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+".");var u=po(a.shape,t,n,r),l=ce.engine.runKernel(function(e){return e.avgPool(a,u)},{x:a},function(e){return{x:function(){return function(e,t,n,r,o){var i=Ae(e,"dy","avgPoolBackprop"),a=Ae(t,"input","avgPoolBackprop");f(a.rank===i.rank,"Rank of input ("+a.rank+") does not match rank of dy ("+i.rank+")");var s=a,u=i,l=!1;3===a.rank&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]),u=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),f(4===u.rank,"Error in avgPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."),f(4===s.rank,"Error in avgPoolBackprop: input must be rank 4 but got rank "+s.rank+".");var c=po(s.shape,n,r,o),p=ce.engine.runKernel(function(e){return e.avgPoolBackprop(u,s,c)},{dy4D:u,input4D:s});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}(e,a,t,n,r)}}});return l=l.cast(i.dtype),s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),jo=Me({slice_:function(e,t,n){var r,o,i=Ae(e,"x","slice");if(0===i.rank)throw new Error("Slicing scalar is not possible");r="number"==typeof t?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t,o=(o=null==n?new Array(i.rank).fill(-1):"number"==typeof n?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map(function(e,t){return e>=0?e:(f(-1===e,"Bad value in size"),i.shape[t]-r[t])}),function(e,t,n){f(e.rank===t.length,"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."),f(e.rank===n.length,"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+").");for(var r=0;r<e.rank;++r)f(t[r]+n[r]<=e.shape[r],"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")")}(i,r,o);var a=i.shape;return ce.engine.runKernel(function(e){return e.slice(i,r,o)},{$x:i},function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],a[n]-r[n]-o[n]]);return{$x:function(){return e.pad(t)}}})}}),Lo=Me({slice1d_:function(e,t,n){var r=Ae(e,"x","slice1d");return f(1===r.rank,"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"),jo(r,[t],[n])}}),Vo=Me({slice2d_:function(e,t,n){var r=Ae(e,"x","slice2d");return f(2===r.rank,"slice1d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"),jo(r,t,n)}}),zo=Me({slice3d_:function(e,t,n){var r=Ae(e,"x","slice3d");return f(3===r.rank,"slice1d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"),jo(r,t,n)}}),Fo=Me({slice4d_:function(e,t,n){var r=Ae(e,"x","slice4d");return f(4===r.rank,"slice1d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"),jo(r,t,n)}}),Bo=le.tidy,Uo=le.keep,Wo=le.dispose,$o=Me({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ae(e,"x","all","bool");f("bool"===r.dtype,"Error Tensor must be of type bool. Got: "+r.dtype);var o=_e(t,r.shape),i=o,a=xe(i,r.rank);null!=a&&(r=r.transpose(a),i=Ee(i.length,r.rank));var s=ce.engine.runKernel(function(e){return e.all(r,i)},{$x:r});if(n){var u=be(s.shape,o);return s.reshape(u)}return s}}),Ho=Me({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ae(e,"x","any","bool");f("bool"===r.dtype,"Error Tensor must be of type bool. Got: "+r.dtype);var o=_e(t,r.shape),i=o,a=xe(i,r.rank);null!=a&&(r=r.transpose(a),i=Ee(i.length,r.rank));var s=ce.engine.runKernel(function(e){return e.any(r,i)},{$x:r});if(n){var u=be(s.shape,o);return s.reshape(u)}return s}}),qo=Me({argMax_:function(e,t){void 0===t&&(t=0);var n=Ae(e,"x","argMax");null==t&&(t=0);var r=_e(t,n.shape),o=xe(r,n.rank);return null!=o&&(n=n.transpose(o),r=Ee(r.length,n.rank)),ce.engine.runKernel(function(e){return e.argMax(n,r[0])},{$x:n})}}),Go=Me({argMin_:function(e,t){void 0===t&&(t=0);var n=Ae(e,"x","argMin");null==t&&(t=0);var r=_e(t,n.shape),o=xe(r,n.rank);return null!=o&&(n=n.transpose(o),r=Ee(r.length,n.rank)),ce.engine.runKernel(function(e){return e.argMin(n,r[0])},{$x:n})}}),Ko=Me({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ae(e,"x","logSumExp"),o=_e(t,r.shape),i=r.max(o,!0),a=r.sub(i).exp().sum(o).log(),s=i.reshape(a.shape).add(a);if(n){var u=be(s.shape,o);return s.reshape(u)}return s}}),Xo=Me({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ae(e,"x","max"),o=_e(t,r.shape),i=o,a=xe(i,r.rank);null!=a&&(r=r.transpose(a),i=Ee(i.length,r.rank));var s=ce.engine.runKernel(function(e){return e.max(r,i)},{$x:r});if(n){var u=be(s.shape,o);return s.reshape(u)}return s}}),Zo=Me({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ae(e,"x","mean"),o=_e(t,r.shape),i=g(ve(r.shape,o)[1]);return ke(function(e){var r=je(i);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return o.forEach(function(e){n[e]=1}),t.reshape(n).mul(Be(e.shape,"float32")).div(r)}}})(r)}}),Yo=Me({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ae(e,"x","min"),o=_e(t,r.shape),i=o,a=xe(i,r.rank);null!=a&&(r=r.transpose(a),i=Ee(i.length,r.rank));var s=ce.engine.runKernel(function(e){return e.min(r,i)},{$x:r});if(n){var u=be(s.shape,o);return s.reshape(u)}return s}}),Qo=Me({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=_e(t,(e=Ae(e,"x","moments")).shape),o=e.mean(r,n),i=o.shape;return n||(i=be(o.shape,r)),{mean:o,variance:e.toFloat().sub(o.reshape(i)).square().mean(r,n)}}}),Jo=Me({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ae(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var o=_e(t,r.shape);return ke(function(e){var t=xe(o,e.rank),r=o,i=e;null!=t&&(i=e.transpose(t),r=Ee(r.length,e.rank));var a=ce.engine.runKernel(function(e){return e.sum(i,r)},{permutedX:i});if(n){var s=be(a.shape,o);a=a.reshape(s)}return{value:a,gradFunc:function(t){var n=e.shape.slice();return o.forEach(function(e){n[e]=1}),t.reshape(n).mul(Be(e.shape,"float32"))}}})(r)}}),ei=Me({equal_:function(e,t){var n=Ae(e,"a","equal"),r=Ae(t,"b","equal");return Z(n,r),lt(n.shape,r.shape),ce.engine.runKernel(function(e){return e.equal(n,r)},{$a:n,$b:r})}}),ti=Me({equalStrict_:function(e,t){var n=Ae(e,"a","equalStrict"),r=Ae(t,"b","equalStrict");return p(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),ni=Me({greater_:function(e,t){var n=Ae(e,"a","greater"),r=Ae(t,"b","greater");return Z(n,r),lt(n.shape,r.shape),ce.engine.runKernel(function(e){return e.greater(n,r)},{$a:n,$b:r})}}),ri=Me({greaterEqual_:function(e,t){var n=Ae(e,"a","greaterEqual"),r=Ae(t,"b","greaterEqual");return Z(n,r),lt(n.shape,r.shape),ce.engine.runKernel(function(e){return e.greaterEqual(n,r)},{$a:n,$b:r})}}),oi=Me({greaterEqualStrict_:function(e,t){var n=Ae(e,"a","greaterEqualStrict"),r=Ae(t,"b","greaterEqualStrict");return p(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),ii=Me({greaterStrict_:function(e,t){var n=Ae(e,"a","greaterStrict"),r=Ae(t,"b","greaterStrict");return p(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),ai=Me({less_:function(e,t){var n=Ae(e,"a","less"),r=Ae(t,"b","less");return Z(n,r),lt(n.shape,r.shape),ce.engine.runKernel(function(e){return e.less(n,r)},{$a:n,$b:r})}}),si=Me({lessEqual_:function(e,t){var n=Ae(e,"a","lessEqual"),r=Ae(t,"b","lessEqual");return Z(n,r),lt(n.shape,r.shape),ce.engine.runKernel(function(e){return e.lessEqual(n,r)},{$a:n,$b:r})}}),ui=Me({lessEqualStrict_:function(e,t){var n=Ae(e,"a","lessEqualStrict"),r=Ae(t,"b","lessEqualStrict");return p(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),li=Me({lessStrict_:function(e,t){var n=Ae(e,"a","lessStrict"),r=Ae(t,"b","lessStrict");return p(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),ci=Me({notEqual_:function(e,t){var n=Ae(e,"a","notEqual"),r=Ae(t,"b","notEqual");return Z(n,r),lt(n.shape,r.shape),ce.engine.runKernel(function(e){return e.notEqual(n,r)},{$a:n,$b:r})}}),fi=Me({notEqualStrict_:function(e,t){var n=Ae(e,"a","notEqualStrict"),r=Ae(t,"b","notEqualStrict");return p(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}}),pi=Me({add_:function(e,t){var n=Ae(e,"a","add"),r=Ae(t,"b","add");Z(n,r);var o=lt(n.shape,r.shape);return ce.engine.runKernel(function(e){return e.add(n,r)},{$a:n,$b:r},function(e){return{$a:function(){var t=e,r=ut(n.shape,o);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},$b:function(){var t=e,n=ut(r.shape,o);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)}}})}}),hi=Me({addN_:function(e){f(Array.isArray(e),function(){return"The param passed to tf.addN() must be a list of tensors"}),f(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(e,t){return Ae(e,"tensors"+t,"addN")}),n=t[0];return t.forEach(function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(e){if(!y(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),ce.engine.runKernel(function(e){return e.addN(t)},t,function(e){var n={};return t.forEach(function(t,r){n[r]=function(){return e.clone()}}),n})}}),di=Me({addStrict_:function(e,t){return p(e.shape,t.shape,"Error in addStrict: "),e.add(t)}}),mi=Me({atan2_:function(e,t){var n=Ae(e,"a","atan2"),r=Ae(t,"b","atan2");Z(n,r);var o=lt(n.shape,r.shape);return ce.engine.runKernel(function(e){return e.atan2(n,r)},{$a:n,$b:r},function(e){return{$a:function(){var t=pi(n.square(),r.square()),i=e.mul(r.div(t)),a=ut(n.shape,o);return a.length>0&&(i=i.sum(a)),i.reshape(n.shape)},$b:function(){var t=pi(n.square(),r.square()),i=Gr(e.mul(n.div(t))),a=ut(r.shape,o);return a.length>0&&(i=i.sum(a)),i.reshape(r.shape)}}})}}),gi=Me({div_:function(e,t){var n,r=Ae(e,"a","div"),o=Ae(t,"b","div");if(Z(r,o),"int32"===r.dtype&&"int32"===o.dtype)return vi(r,o);n=function(e){return e.realDivide(r,o)};var i=lt(r.shape,o.shape);return ce.engine.runKernel(n,{$a:r,$b:o},function(e){return{$a:function(){var t=e.div(o.toFloat()),n=ut(r.shape,i);return n.length>0?t.sum(n).reshape(r.shape):t},$b:function(){var t=e.mul(r.toFloat()),n=ut(o.shape,i);n.length>0&&(t=t.sum(n).reshape(o.shape));var a=o.square();return t.div(a.toFloat()).neg()}}})}}),yi=Me({divStrict_:function(e,t){return p(e.shape,t.shape,"Error in divideStrict: "),e.div(t)}}),vi=Me({floorDiv_:function(e,t){var n=Ae(e,"a","floorDiv"),r=Ae(t,"b","floorDiv");Z(n,r);var o=lt(n.shape,r.shape);return ce.engine.runKernel(function(e){return e.floorDiv(n,r)},{$a:n,$b:r},function(e){return{$a:function(){var t=e.div(r.toFloat()),i=ut(n.shape,o);return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=ut(r.shape,o);i.length>0&&(t=t.sum(i).reshape(r.shape));var a=r.square();return t.div(a.toFloat()).neg()}}})}}),bi=Me({maximum_:function(e,t){var n=Ae(e,"a","maximum"),r=Ae(t,"b","maximum");return Z(n,r),"bool"===n.dtype&&(n=n.toInt()),"bool"===r.dtype&&(r=r.toInt()),lt(n.shape,r.shape),ce.engine.runKernel(function(e){return e.maximum(n,r)},{$a:n,$b:r},function(e){return{$a:function(){return e.mul(n.greaterEqual(r).toFloat())},$b:function(){return e.mul(n.less(r).toFloat())}}})}}),_i=Me({maximumStrict_:function(e,t){return p(e.shape,t.shape,"Error in minimumStrict: "),e.maximum(t)}}),wi=Me({minimum_:function(e,t){var n=Ae(e,"a","minimum"),r=Ae(t,"b","minimum");return Z(n,r),"bool"===n.dtype&&(n=n.toInt()),"bool"===r.dtype&&(r=r.toInt()),lt(n.shape,r.shape),ce.engine.runKernel(function(e){return e.minimum(n,r)},{$a:n,$b:r},function(e){return{$a:function(){return e.mul(n.lessEqual(r).toFloat())},$b:function(){return e.mul(n.greater(r).toFloat())}}})}}),xi=Me({minimumStrict_:function(e,t){return p(e.shape,t.shape,"Error in minimumStrict: "),e.minimum(t)}}),Ni=Me({mod_:function(e,t){var n=Ae(e,"a","mod"),r=Ae(t,"b","mod");Z(n,r);var o=lt(n.shape,r.shape);return ce.engine.runKernel(function(e){return e.mod(n,r)},{$a:n,$b:r},function(e){return{$a:function(){var t=ut(n.shape,o);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),i=ut(r.shape,o);return i.length>0?t.sum(i).reshape(r.shape):t}}})}}),Ei=Me({modStrict_:function(e,t){return p(e.shape,t.shape,"Error in modStrict: "),e.mod(t)}}),Oi=Me({mul_:function(e,t){var n=Ae(e,"a","mul"),r=Ae(t,"b","mul");Z(n,r);var o=lt(n.shape,r.shape);return ce.engine.runKernel(function(e){return e.multiply(n,r)},{$a:n,$b:r},function(e){return{$a:function(){var t=e.mul(r.toFloat()),i=ut(n.shape,o);return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=ut(r.shape,o);return i.length>0?t.sum(i).reshape(r.shape):t}}})}}),Ci=Me({mulStrict_:function(e,t){return p(e.shape,t.shape,"Error in multiplyStrict: "),e.mul(t)}}),Ii=Me({pow_:function(e,t){var n=Ae(e,"base","pow"),r=Ae(t,"exp","pow"),o=lt(n.shape,r.shape);return e=n.cast(et(n.dtype,r.dtype)),t=r.cast(et(n.dtype,r.dtype)),ce.engine.runKernel(function(e,t){return t(e.pow(n,r))},{$base:n,$exp:r},function(e,t){var i=t[0];return{$base:function(){var t=e.mul(r.toFloat().mul(i.div(n))),a=ut(n.shape,o);return a.length>0&&(t=t.sum(a)),t.reshape(n.shape)},$exp:function(){var t=e.mul(i.mul(n.log()).toFloat()),a=ut(r.shape,o);return a.length>0&&(t=t.sum(a)),t.reshape(r.shape)}}})}}),Si=Me({powStrict_:function(e,t){return p(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Ti=Me({squaredDifference_:function(e,t){var n=Ae(e,"a","squaredDifference"),r=Ae(t,"b","squaredDifference");return Z(n,r),lt(n.shape,r.shape),ce.engine.runKernel(function(e){return e.squaredDifference(n,r)},{$a:n,$b:r},function(e){var t=je(2);return{$a:function(){return e.mul(n.sub(r).mul(t))},$b:function(){return e.mul(r.sub(n).mul(t))}}})}}),ki=Me({squaredDifferenceStrict_:function(e,t){return p(e.shape,t.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(t)}}),Ai=Me({sub_:function(e,t){var n=Ae(e,"a","sub"),r=Ae(t,"b","sub");Z(n,r);var o=lt(n.shape,r.shape);return ce.engine.runKernel(function(e){return e.subtract(n,r)},{$a:n,$b:r},function(e){return{$a:function(){var t=e,r=ut(n.shape,o);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},$b:function(){var t=e,n=ut(r.shape,o);return n.length>0&&(t=t.sum(n)),t.neg().reshape(r.shape)}}})}}),Pi=Me({subStrict_:function(e,t){return p(e.shape,t.shape,"Error in subStrict: "),e.sub(t)}}),Mi=Me({logicalAnd_:function(e,t){var n=Ae(e,"a","logicalAnd","bool"),r=Ae(t,"b","logicalAnd","bool");return f("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),lt(n.shape,r.shape),ce.engine.runKernel(function(e){return e.logicalAnd(n,r)},{$a:n,$b:r})}}),Di=Me({logicalNot_:function(e){var t=Ae(e,"x","logicalNot","bool");return f("bool"===t.dtype,"Error Array must be of type bool."),ce.engine.runKernel(function(e){return e.logicalNot(t)},{$x:t})}}),Ri=Me({logicalOr_:function(e,t){var n=Ae(e,"a","logicalOr","bool"),r=Ae(t,"b","logicalOr","bool");return f("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),lt(n.shape,r.shape),ce.engine.runKernel(function(e){return e.logicalOr(n,r)},{$a:n,$b:r})}}),ji=Me({logicalXor_:function(e,t){var n=Ae(e,"a","logicalXor","bool"),r=Ae(t,"b","logicalXor","bool");return f("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),lt(n.shape,r.shape),Ri(e,t).logicalAnd(Mi(e,t).logicalNot())}}),Li=Me({where_:function(e,t,n){var r=Ae(t,"a","where"),o=Ae(n,"b","where"),i=Ae(e,"condition","where","bool");return f("bool"===i.dtype,"Error Condition must be of type bool."),p(r.shape,o.shape,"Error in where: "),1===i.rank?f(i.shape[0]===r.shape[0],"The first dimension of `a` must match the size of `condition`."):p(i.shape,o.shape,"Error in where: "),ce.engine.runKernel(function(e){return e.select(i,r,o)},{$condition:i,$a:r,$b:o},function(e){return{$condition:function(){return Qe(i)},$a:function(){return e.mul(i.cast(r.dtype))},$b:function(){return e.mul(i.logicalNot().cast(o.dtype))}}})}}),Vi=function(e){return a(this,void 0,void 0,function(){var t,n,r;return s(this,function(o){switch(o.label){case 0:return f("bool"===(t=Ae(e,"condition","where","bool")).dtype,"Condition must be of type bool."),[4,t.data()];case 1:return n=o.sent(),r=Cr(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},zi=Me({elu_:function(e){var t=Ae(e,"x","elu");return ce.engine.runKernel(function(e,n){return n(e.elu(t))},{$x:t},function(e,t){var n=t[0];return{$x:function(){return ce.engine.runKernel(function(t){return t.eluDer(e,n)},{dy:e,y:n})}}})}}),Fi=Me({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=Ae(e,"x","leakyRelu");return bi(je(t).mul(n),n)}}),Bi=Me({prelu_:function(e,t){var n=Ae(e,"x","prelu"),r=Ae(t,"alpha","prelu"),o=je(0);return bi(o,n).add(r.mul(wi(o,n)))}}),Ui=Me({relu_:function(e){var t=Ae(e,"x","relu");return"bool"===t.dtype?t.toInt():ce.engine.runKernel(function(e){return e.relu(t)},{$x:t},function(e){var n=t.step();return{$x:function(){return e.mulStrict(n.toFloat())}}})}}),Wi=Me({selu_:function(e){var t=Ae(e,"x","selu");return ce.engine.runKernel(function(e){return e.selu(t)},{$x:t},function(e){return{$x:function(){var n=t.greater(je(0)),r=je(1.7580993408473768),o=je(1.0507009873554805),i=e.mul(o),a=e.mul(r).mul(t.toFloat().exp());return Li(n,i,a)}}})}}),$i=Me({transpose_:function(e,t){var n=Ae(e,"x","transpose");return null==t&&(t=n.shape.map(function(e,t){return t}).reverse()),f(n.rank===t.length,"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."),t.forEach(function(e){f(e>=0&&e<n.rank,"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t)}),n.rank<=1?n.clone():ce.engine.runKernel(function(e){return e.transpose(n,t)},{$x:n},function(e){var n=Ne(t);return{$x:function(){return e.transpose(n)}}})}}),Hi=Me({localResponseNormalization_:function(e,t,n,r,o){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5);var i=Ae(e,"x","localResponseNormalization");f(4===i.rank||3===i.rank,"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+i.rank+"."),f(v(t),"Error in localResponseNormalization: depthRadius must be an integer\n                     but got depthRadius "+t+".");var a=i,s=!1;3===i.rank&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var u=ce.engine.runKernel(function(e,i){return i(e.localResponseNormalization4D(a,t,n,r,o))},{x4D:a},function(e,i){var s=i[0];return{x4D:function(){return ce.engine.runKernel(function(i){return i.LRNGrad(e,a,s,t,n,r,o)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),qi=Me({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||r instanceof Array&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(je(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(r instanceof Array&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=Ae(e,"x","norm"),t,n),i=o.shape;if(r){var a=_e(n,e.shape);i=be(o.shape,a)}return o.reshape(i)}});function Gi(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Ki(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Xi,Zi=Me({gather_:function(e,t,n){void 0===n&&(n=0);var r=Ae(e,"x","gather"),o=Ae(t,"indices","gather","int32");return f("int32"===o.dtype,"Indices must be of dtype `int32`"),n=_e(n,r.shape)[0],ce.engine.runKernel(function(e){return e.gather(r,o,n)},{$x:r},function(e){return{$x:function(){if(0===n)return Yi(e,o,r.shape[n]);var t=r.shape,i=o.size,a=t.slice(0,n),s=a.length,u=t.slice(n,t.length).slice(1),l=u.length,c=Gi(0,s),f=Gi(s+1,s+1+l),p=Ki([a,[i],u]),h=e.reshape(p),d=o.reshape([i]),m=Ki([[s],c,f]),g=h.transpose(m),y=Yi(g,d,r.shape[n]),v=Ne(m);return y.transpose(v)}}})}}),Yi=Me({unsortedSegmentSum_:function(e,t,n){var r=Ae(e,"x","unsortedSegmentSum"),o=Ae(t,"segmentIds","unsortedSegmentSum","int32");return f("int32"===o.dtype,"segmentIds must be of dtype `int32`"),f(v(n),"numSegments must be of dtype int"),ce.engine.runKernel(function(e){return e.unsortedSegmentSum(r,o,n)},{$x:r},function(e){return{$x:function(){return function(e,t){for(var n=bi(t,Qe(t)),r=Zi(e,n),o=ri(t,je(0,"int32")),i=r.rank-o.rank,a=0;a<i;++a)o=or(o,a+1);o=Mi(o,Be(r.shape,"bool"));var s=Qe(r);return Li(o,r,s)}(e,o)}}})}}),Qi=Me({basicLSTMCell_:function(e,t,n,r,o,i){var a=Ae(e,"forgetBias","basicLSTMCell"),s=Ae(t,"lstmKernel","basicLSTMCell"),u=Ae(n,"lstmBias","basicLSTMCell"),l=Ae(r,"data","basicLSTMCell"),c=Ae(o,"c","basicLSTMCell"),f=Ae(i,"h","basicLSTMCell"),p=l.concat(f,1).matMul(s).add(u),h=p.shape[1]/4,d=[p.shape[0],h],m=p.slice([0,0],d),g=p.slice([0,h],d),y=p.slice([0,2*h],d),v=p.slice([0,3*h],d),b=m.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(a.add(y).sigmoid()));return[b,b.tanh().mulStrict(v.sigmoid())]}}),Ji=Me({multiRNNCell_:function(e,t,n,r){for(var o=Ae(t,"data","multiRNNCell"),i=Pe(n,"c","multiRNNCell"),a=Pe(r,"h","multiRNNCell"),s=o,u=[],l=0;l<e.length;l++){var c=e[l](s,i[l],a[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var f=[],p=[];for(l=0;l<u.length;l+=2)f.push(u[l]),p.push(u[l+1]);return[f,p]}}),ea=Me({movingAverage_:function(e,t,n,r,o){void 0===o&&(o=!0);var i=Ae(e,"v","movingAverage"),a=Ae(t,"x","movingAverage"),s=Ae(n,"decay","movingAverage");Z(i,a),f(y(i.shape,a.shape),"Shape mismatch in v and x");var u=je(1),l=u.sub(s),c=a.sub(i).mul(l);if(o){f(null!=r,"When using zeroDebias: true, step is required.");var p=Ae(r,"step","movingAverage");c=c.div(u.sub(Ii(s,p)))}return i.add(c)}}),ta=Me({stridedSlice_:function(e,t,n,r,o,i,a,s,u){if(void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),0!==a)throw new Error("ellipsis mask is not yet supported");if(0!==s)throw new Error("new axis mask is not yet supported");var l=Ae(e,"x","stridedSlice");return ce.engine.runKernel(function(e){return e.stridedSlice(l,t,n,r,o,i,a,s,u)},{$x:l})}}),na=Me({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=Ae(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+t);var i=ce.engine.runKernel(function(e){return e.topk(r,t,n)},{$x:r});return{values:i[0],indices:i[1]}}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Xi||(Xi={}));var ra=Me({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=Xi.SUM_BY_NONZERO_WEIGHTS);var o=Ae(e,"labels","absoluteDifference"),i=Ae(t,"predictions","absoluteDifference"),a=null;null!=n&&(a=Ae(n,"weights","absoluteDifference")),p(o.shape,i.shape,"Error in absoluteDifference: ");var s=o.sub(i).abs();return oa(s,a,r)}}),oa=Me({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=Xi.SUM_BY_NONZERO_WEIGHTS);var r=Ae(e,"losses","computeWeightedLoss"),o=null;null!=t&&(o=Ae(t,"weights","computeWeightedLoss"));var i=null==o?r:r.mul(o);if(n===Xi.NONE)return i;if(n===Xi.SUM)return i.sum();if(n===Xi.MEAN){if(null==o)return i.mean();var a=g(r.shape)/g(o.shape),s=i.sum().div(o.sum());return a>1?s.div(je(a)):s}if(n===Xi.SUM_BY_NONZERO_WEIGHTS){if(null==o)return i.sum().div(je(r.size));var u=o.mul(Be(r.shape)).notEqual(je(0)).sum().toFloat();return i.sum().div(u)}throw Error("Unknown reduction: "+n)}}),ia=Me({cosineDistance_:function(e,t,n,r,o){void 0===o&&(o=Xi.SUM_BY_NONZERO_WEIGHTS);var i=Ae(e,"labels","cosineDistance"),a=Ae(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Ae(r,"weights","cosineDistance")),p(i.shape,a.shape,"Error in cosineDistance: ");var u=je(1).sub(i.mul(a).sum(n,!0));return oa(u,s,o)}}),aa=Me({hingeLoss_:function(e,t,n,r){void 0===r&&(r=Xi.SUM_BY_NONZERO_WEIGHTS);var o=Ae(e,"labels","hingeLoss"),i=Ae(t,"predictions","hingeLoss"),a=null;null!=n&&(a=Ae(n,"weights","hingeLoss")),p(o.shape,i.shape,"Error in hingeLoss: ");var s=je(1);o=je(2).mul(o).sub(s);var u=s.sub(o.mul(i)).relu();return oa(u,a,r)}}),sa=Me({huberLoss_:function(e,t,n,r,o){void 0===r&&(r=1),void 0===o&&(o=Xi.SUM_BY_NONZERO_WEIGHTS);var i=Ae(e,"labels","huberLoss"),a=Ae(t,"predictions","huberLoss"),s=null;null!=n&&(s=Ae(n,"weights","huberLoss")),p(i.shape,a.shape,"Error in huberLoss: ");var u=je(r),l=a.sub(i).abs(),c=wi(l,u),f=l.sub(c),h=je(.5).mul(c.square()).add(u.mul(f));return oa(h,s,o)}}),ua=Me({logLoss_:function(e,t,n,r,o){void 0===r&&(r=1e-7),void 0===o&&(o=Xi.SUM_BY_NONZERO_WEIGHTS);var i=Ae(e,"labels","logLoss"),a=Ae(t,"predictions","logLoss"),s=null;null!=n&&(s=Ae(n,"weights","logLoss")),p(i.shape,a.shape,"Error in logLoss: ");var u=je(1),l=je(r),c=i.mul(a.add(l).log()).neg().sub(u.sub(i).mul(u.sub(a).add(l).log()));return oa(c,s,o)}}),la=Me({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=Xi.SUM_BY_NONZERO_WEIGHTS);var o=Ae(e,"labels","meanSquaredError"),i=Ae(t,"predictions","meanSquaredError"),a=null;null!=n&&(a=Ae(n,"weights","meanSquaredError")),p(o.shape,i.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(i);return oa(s,a,r)}}),ca=Me({sigmoidCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=Xi.SUM_BY_NONZERO_WEIGHTS);var i=Ae(e,"multiClassLabels","sigmoidCrossEntropy"),a=Ae(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Ae(n,"weights","sigmoidCrossEntropy")),p(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=je(r),l=je(1),c=je(.5);i=i.mul(l.sub(u)).add(c.mul(u))}var f=function(e,t){var n=Ae(e,"labels","sigmoidCrossEntropyWithLogits"),r=Ae(t,"logits","sigmoidCrossEntropyWithLogits");p(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),i=r.mul(n),a=r.abs().neg().exp().log1p();return o.sub(i).add(a)}(i,a);return oa(f,s,o)}}),fa=Me({softmaxCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=Xi.SUM_BY_NONZERO_WEIGHTS);var i=Ae(e,"onehotLabels","softmaxCrossEntropy"),a=Ae(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Ae(n,"weights","softmaxCrossEntropy")),p(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=je(r),l=je(1),c=je(i.shape[1]);i=i.mul(l.sub(u)).add(u.div(c))}var f=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return ke(function(e,t){var r=t.logSumExp([n],!0),o=t.toFloat().sub(r);return{value:o.mul(e).neg().sum([n]),gradFunc:function(t){var r=be(t.shape,[n]);return[t.reshape(r).mul(e.toFloat().sub(o.exp())),t.reshape(r).mul(o.exp().sub(e.toFloat()))]}}})(e,t)}(i,a);return oa(f,s,o)}}),pa=Object.freeze({get Reduction(){return Xi},absoluteDifference:ra,computeWeightedLoss:oa,cosineDistance:ia,hingeLoss:aa,huberLoss:sa,logLoss:ua,meanSquaredError:la,sigmoidCrossEntropy:ca,softmaxCrossEntropy:fa});function ha(e,t){return void 0===t&&(t=!1),ce.engine.tidy(function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],o=ir(n),i=e.clone(),a=Ve([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,l=function(e){var t,u=i,l=s,c=o;t=ce.engine.tidy(function(){var t=i.slice([e,e],[n-e,1]),u=t.norm(),l=i.slice([e,e],[1,1]),c=l.sign().neg(),f=l.sub(c.mul(u)),p=t.div(f);s=1===p.shape[0]?a.clone():a.concat(p.slice([1,0],[p.shape[0]-1,p.shape[1]]),0);var h=c.matMul(f).div(u).neg(),d=i.slice([e,0],[n-e,r]),m=h.mul(s);i=0===e?d.sub(m.matMul(s.transpose().matMul(d))):i.slice([0,0],[e,r]).concat(d.sub(m.matMul(s.transpose().matMul(d))),0);var g=o.slice([0,e],[n,o.shape[1]-e]);return o=0===e?g.sub(g.matMul(s).matMul(m.transpose())):o.slice([0,0],[n,e]).concat(g.sub(g.matMul(s).matMul(m.transpose())),1),[s,i,o]}),s=t[0],i=t[1],o=t[2],Wo([u,l,c])},c=0;c<u;++c)l(c);return!t&&n>r&&(o=o.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[o,i]})}var da=Me({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,f(null!=e&&e.length>0,"Gram-Schmidt process: input must not be null, undefined, or empty");for(var n=e[0].shape[0],r=1;r<e.length;++r)f(e[r].shape[0]===n,"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[r].shape[0]+" vs. "+n+")")}else t=!0,e=vr(e,e.shape[0],0).map(function(e){return br(e,[0])});f(e.length<=e[0].shape[0],"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+").");var o=[],i=e,a=function(e){o.push(ce.engine.tidy(function(){var t=i[e];if(e>0)for(var n=0;n<e;++n){var r=Jo(o[n].mulStrict(t)).mul(o[n]);t=t.sub(r)}return t.div(qi(t,"euclidean"))}))};for(r=0;r<e.length;++r)a(r);return t?_r(o,0):o}}),ma=Me({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return ha(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(e,t){return e*t}),r=[],o=[];return Nr(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0).forEach(function(e){var n=ha(e,t),i=n[1];r.push(n[0]),o.push(i)}),[_r(r,0).reshape(e.shape),_r(o,0).reshape(e.shape)]}}),ga=Object.freeze({gramSchmidt:da,qr:ma});function ya(e,t,n,r,o){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY);var i=e.shape[0];return n=Math.min(n,i),f(0<=r&&r<=1,"iouThreshold must be in [0, 1], but was '"+r+"'"),f(2===e.rank,"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"),f(4===e.shape[1],"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]),f(1===t.rank,"scores must be a 1D tensor"),f(t.shape[0]===i,"scores has incompatible shape with boxes. Expected "+i+", but was "+t.shape[0]),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o}}var va=Me({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=Ae(e,"images","resizeBilinear");f(3===r.rank||4===r.rank,"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."),f(2===t.length,"Error in resizeBilinear: new shape must 2D, but got shape "+t+".");var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],u=ce.engine.runKernel(function(e,t){return e.resizeBilinear(o,a,s,n)},{batchImages:o},function(e,t){return{batchImages:function(){return ce.engine.runKernel(function(t){return t.resizeBilinearBackprop(e,o,n)},{})}}});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),ba=Me({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=Ae(e,"images","resizeNearestNeighbor");f(3===r.rank||4===r.rank,"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."),f(2===t.length,"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."),f("float32"===r.dtype||"int32"===r.dtype,"`images` must have `int32` or `float32` as dtype");var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],u=ce.engine.runKernel(function(e,t){return e.resizeNearestNeighbor(o,a,s,n)},{batchImages:o},function(e,t){return{batchImages:function(){return ce.engine.runKernel(function(t){return t.resizeNearestNeighborBackprop(e,o,n)},{})}}});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),_a=Me({nonMaxSuppression_:function(e,t,n,r,o){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY);var i=Ae(e,"boxes","nonMaxSuppression"),a=Ae(t,"scores","nonMaxSuppression"),s=ya(i,a,n,r,o);return n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,ce.engine.runKernel(function(e){return e.nonMaxSuppression(i,a,n,r,o)},{$boxes:i})}}),wa=Object.freeze({resizeBilinear:va,resizeNearestNeighbor:ba,nonMaxSuppression:_a,nonMaxSuppressionAsync:function(e,t,n,r,o){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),a(this,void 0,void 0,function(){var i,a,u,l,c,f;return s(this,function(s){switch(s.label){case 0:return i=Ae(e,"boxes","nonMaxSuppressionAsync"),a=Ae(t,"scores","nonMaxSuppressionAsync"),u=ya(i,a,n,r,o),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,[4,i.data()];case 1:return l=s.sent(),[4,a.data()];case 2:return c=s.sent(),f=ot(l,c,n,r,o),i!==e&&i.dispose(),a!==t&&a.dispose(),[2,f]}})})}}),xa=Object.freeze({image:wa,linalg:ga,losses:pa,op:Me,batchNormalization2d:uo,batchNormalization3d:lo,batchNormalization4d:co,batchNormalization:fo,concat:zn,concat1d:Fn,concat2d:Bn,concat3d:Un,concat4d:Wn,conv1d:wo,conv2d:xo,depthwiseConv2d:No,separableConv2d:Eo,conv2dTranspose:Oo,matMul:Co,dot:Io,outerProduct:So,reverse:To,reverse1d:ko,reverse2d:Ao,reverse3d:Po,reverse4d:Mo,maxPool:Do,avgPool:Ro,slice:jo,slice1d:Lo,slice2d:Vo,slice3d:zo,slice4d:Fo,abs:Tr,acos:kr,acosh:Ar,asin:Pr,asinh:Mr,atan:Dr,atanh:Rr,ceil:jr,clipByValue:Lr,cos:Vr,cosh:zr,erf:Fr,exp:Br,expm1:Ur,floor:Wr,log:$r,log1p:Hr,logSigmoid:qr,neg:Gr,reciprocal:Kr,round:Xr,rsqrt:Zr,sigmoid:Yr,sign:Qr,sin:Jr,sinh:eo,softplus:to,sqrt:no,square:ro,step:oo,tan:io,tanh:ao,all:$o,any:Ho,argMax:qo,argMin:Go,logSumExp:Ko,max:Xo,mean:Zo,min:Yo,moments:Qo,sum:Jo,equal:ei,equalStrict:ti,greater:ni,greaterEqual:ri,greaterEqualStrict:oi,greaterStrict:ii,less:ai,lessEqual:si,lessEqualStrict:ui,lessStrict:li,notEqual:ci,notEqualStrict:fi,add:pi,addN:hi,addStrict:di,atan2:mi,div:gi,divStrict:yi,floorDiv:vi,maximum:bi,maximumStrict:_i,minimum:wi,minimumStrict:xi,mod:Ni,modStrict:Ei,mul:Oi,mulStrict:Ci,pow:Ii,powStrict:Si,squaredDifference:Ti,squaredDifferenceStrict:ki,sub:Ai,subStrict:Pi,elu:zi,leakyRelu:Fi,prelu:Bi,relu:Ui,selu:Wi,logicalAnd:Mi,logicalNot:Di,logicalOr:Ri,logicalXor:ji,where:Li,whereAsync:Vi,buffer:er,toPixels:function(e,t){return a(this,void 0,void 0,function(){var n,r,o,i,a,u,l,c,f,p,h,d,m,g,y,v,b,_,w,x;return s(this,function(s){switch(s.label){case 0:if(2!==(n=Ae(e,"img","toPixels","int32")).rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],i=r[1],(a=2===n.rank?1:n.shape[2])>4||2===a)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return u=n.min(),l=n.max(),[4,u.data()];case 1:return c=s.sent()[0],[4,l.data()];case 2:if(f=s.sent()[0],u.dispose(),l.dispose(),"float32"===n.dtype){if(c<0||f>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+c+" - "+f+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(c<0||f>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+c+" - "+f+"].")}return[4,n.data()];case 3:for(p=s.sent(),h="float32"===n.dtype?255:1,d=new Uint8ClampedArray(i*o*4),m=0;m<o*i;++m)g=void 0,y=void 0,v=void 0,b=void 0,1===a?(g=p[m]*h,y=p[m]*h,v=p[m]*h,b=255):3===a?(g=p[3*m]*h,y=p[3*m+1]*h,v=p[3*m+2]*h,b=255):4===a&&(g=p[4*m]*h,y=p[4*m+1]*h,v=p[4*m+2]*h,b=p[4*m+3]*h),d[0+(_=4*m)]=Math.round(g),d[_+1]=Math.round(y),d[_+2]=Math.round(v),d[_+3]=Math.round(b);return null!=t&&(t.width=i,t.height=o,w=t.getContext("2d"),x=new ImageData(d,i,o),w.putImageData(x,0,0)),n!==e&&n.dispose(),[2,d]}})})},print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},cast:tr,clone:nr,cumsum:rr,expandDims:or,eye:ir,fromPixels:ar,multinomial:sr,oneHot:ur,pad:lr,pad1d:cr,pad2d:fr,pad3d:pr,pad4d:hr,rand:dr,randomNormal:mr,randomUniform:gr,reshape:yr,split:vr,squeeze:br,stack:_r,tile:wr,truncatedNormal:xr,unstack:Nr,batchToSpaceND:Er,spaceToBatchND:Or,fill:We,linspace:$e,ones:Be,range:He,scalar:je,tensor:Re,tensor1d:Le,tensor2d:Ve,tensor3d:ze,tensor4d:Fe,tensor5d:function(e,t,n){if(void 0===n&&(n="float32"),h(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=m(e);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Re(e,t=t||r,n)},tensor6d:function(e,t,n){if(void 0===n&&(n="float32"),h(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=m(e);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Re(e,t=t||r,n)},zeros:Ue,onesLike:Ye,zerosLike:Qe,transpose:$i,softmax:De,localResponseNormalization:Hi,norm:qi,gather:Zi,unsortedSegmentSum:Yi,basicLSTMCell:Qi,multiRNNCell:Ji,movingAverage:ea,stridedSlice:ta,topk:na}),Na=function(){function e(){this.blockSize=48,this.data=new WeakMap,this.firstUse=!0,ce.get("IS_BROWSER")&&(this.canvas=document.createElement("canvas"))}return e.prototype.register=function(e,t,n){if(this.firstUse&&(this.firstUse=!1,ce.get("IS_NODE")&&fe("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(e))throw new Error("Data buffer is already registered");this.data.set(e,null)},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendCPU.write(): values can not be null");this.throwIfNoData(e),this.data.set(e,t)},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.fromPixels() can not be null");var n,r;if(ce.get("IS_NODE")&&null==e.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(null!=e.getContext)n=e.getContext("2d").getImageData(0,0,e.width,e.height).data;else if(e instanceof ImageData)n=e.data;else{if(!(e instanceof HTMLImageElement||e instanceof HTMLVideoElement))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+e.constructor.name);if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=e.width,this.canvas.height=e.height,this.canvas.getContext("2d").drawImage(e,0,0,e.width,e.height),n=this.canvas.getContext("2d").getImageData(0,0,e.width,e.height).data}if(4===t)r=new Int32Array(n);else{var o=e.width*e.height;r=new Int32Array(o*t);for(var i=0;i<o;i++)for(var a=0;a<t;++a)r[i*t+a]=n[4*i+a]}return ze(r,[e.height,e.width,t],"int32")},e.prototype.read=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){return[2,this.readSync(e)]})})},e.prototype.readSync=function(e){return this.throwIfNoData(e),this.data.get(e)},e.prototype.disposeData=function(e){this.data.has(e)&&this.data.delete(e)},e.prototype.time=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){return t=L(),e(),[2,{kernelMs:L()-t}]})})},e.prototype.memory=function(){return{unreliable:!0}},e.prototype.throwIfNoData=function(e){if(!this.data.has(e))throw new Error("CPU backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},e.prototype.slice=function(e,t,n){for(var r=er(n,e.dtype),o=0;o<r.size;++o){var i=r.indexToLoc(o),a=i.map(function(e,n){return e+t[n]});r.set.apply(r,[e.get.apply(e,a)].concat(i))}return r.toTensor()},e.prototype.stridedSlice=function(e,t,n,r,o,i,a,s,u){var l=Ie(e.shape,t,n,r,o,i,a,s,u),c=l[0],f=l[1],p=l[2],h=f.filter(function(e,t){return-1===p.indexOf(t)});if(h.some(function(e){return 0===e}))return Re([],h);for(var d=er(f,e.dtype),m=0;m<d.size;m++){for(var g=d.indexToLoc(m),y=new Array(g.length),v=0;v<y.length;v++)y[v]=g[v]*r[v]+c[v];d.set.apply(d,[e.get.apply(e,y)].concat(g))}return d.toTensor().reshape(h)},e.prototype.reverse=function(e,t){for(var n=er(e.shape,e.dtype),r=e.buffer(),o=function(o){var i=n.indexToLoc(o),a=i.slice();t.forEach(function(t){return a[t]=e.shape[t]-1-a[t]}),n.set.apply(n,[r.get.apply(r,a)].concat(i))},i=0;i<n.size;i++)o(i);return n.toTensor()},e.prototype.concat=function(e,t){var n=ft([e.shape,t.shape],1),r=er(n,e.dtype);if(1===e.shape[0]&&1===t.shape[0]){var o=e.dataSync(),i=t.dataSync(),a=r.values;return a.set(o,0),a.set(i,e.size),r.toTensor()}for(var s=0;s<n[0];++s){for(var u=0;u<e.shape[1];++u)r.set(e.get(s,u),s,u);for(u=0;u<t.shape[1];++u)r.set(t.get(s,u),s,u+e.shape[1])}return r.toTensor()},e.prototype.neg=function(e){return this.multiply(je(-1),e)},e.prototype.add=function(e,t){return this.broadcastedBinaryOp(e,t,et(e.dtype,t.dtype),function(e,t){return e+t})},e.prototype.addN=function(e){for(var t=e.map(function(e){return e.dataSync()}),n=er(e[0].shape,e[0].dtype),r=n.values,o=0;o<e.length;o++)for(var i=t[o],a=0;a<r.length;a++)r[a]+=i[a];return n.toTensor()},e.prototype.subtract=function(e,t){return this.broadcastedBinaryOp(e,t,et(e.dtype,t.dtype),function(e,t){return e-t})},e.prototype.pow=function(e,t){return this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.pow(e,t)})},e.prototype.matMul=function(e,t,n,r){for(var o=n?e.shape[0]:e.shape[1],i=n?e.shape[1]:e.shape[0],a=r?t.shape[0]:t.shape[1],s=e.dataSync(),u=t.dataSync(),l=n?[1,e.strides[0]]:[e.strides[0],1],c=l[0],f=l[1],p=r?[t.strides[0],1]:[1,t.strides[0]],h=p[0],d=p[1],m=new Float32Array(i*a),g=this.blockSize,y=0;y<i;y+=g)for(var v=0;v<a;v+=g)for(var b=0;b<o;b+=g)for(var _=Math.min(y+g,i),w=Math.min(v+g,a),x=Math.min(b+g,o),N=y;N<_;N++)for(var E=v;E<w;E++){for(var O=0,C=b;C<x;C++)O+=s[N*c+C*f]*u[C*d+E*h];m[N*a+E]+=O}return Ve(m,[i,a])},e.prototype.multiply=function(e,t){return this.broadcastedBinaryOp(e,t,et(e.dtype,t.dtype),function(e,t){return e*t})},e.prototype.realDivide=function(e,t){return this.broadcastedBinaryOp(e,t,"float32",function(e,t){return e/t})},e.prototype.floorDiv=function(e,t){return this.broadcastedBinaryOp(e,t,"int32",function(e,t){return Math.floor(e/t)})},e.prototype.sum=function(e,t){we("sum",t,e.rank);for(var n=ve(e.shape,t),r=n[1],o=Ue(n[0],et(e.dtype,"int32")),i=g(r),a=o.dataSync(),s=e.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=0,f=0;f<i;++f)c+=s[l+f];a[u]=c}return o},e.prototype.unsortedSegmentSum=function(e,t,n){for(var r=[],o=e.rank-t.rank,i=0;i<o;++i)t=t.expandDims(i+1);for(i=0;i<n;++i){var a=je(i,"int32"),s=ei(a,t).asType("float32").mul(e).sum(0);r.push(s)}return _r(r)},e.prototype.argMin=function(e,t){var n=[t];we("argMin",n,e.rank);for(var r=ve(e.shape,n),o=r[1],i=Ue(r[0],"int32"),a=g(o),s=i.dataSync(),u=e.dataSync(),l=0;l<s.length;++l){for(var c=l*a,f=u[c],p=0,h=0;h<a;++h){var d=u[c+h];d<f&&(f=d,p=h)}s[l]=p}return i},e.prototype.argMax=function(e,t){var n=[t];we("argMax",n,e.rank);for(var r=ve(e.shape,n),o=r[1],i=Ue(r[0],"int32"),a=g(o),s=i.dataSync(),u=e.dataSync(),l=0;l<s.length;++l){for(var c=l*a,f=u[c],p=0,h=0;h<a;++h){var d=u[c+h];d>f&&(f=d,p=h)}s[l]=p}return i},e.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var o=et(e.dtype,"int32"),i=Ue(e.shape,o),a=i.dataSync(),s=e.dataSync(),u=e.shape[e.rank-1],l=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=u)for(var f=0;f<u;f++){var p=l(c,f);if(0===f)a[p]=n?0:s[p];else{var h=l(c,f-1);a[p]=n?s[h]+a[h]:s[p]+a[h]}}return i},e.prototype.equal=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e===t?1:0})},e.prototype.notEqual=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e!==t?1:0})},e.prototype.less=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<t?1:0})},e.prototype.lessEqual=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<=t?1:0})},e.prototype.greater=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>t?1:0})},e.prototype.greaterEqual=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>=t?1:0})},e.prototype.logicalNot=function(e){for(var t=e.dataSync(),n=new Int32Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return G.make(e.shape,{values:n},"bool")},e.prototype.logicalAnd=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e&&t})},e.prototype.logicalOr=function(e,t){return this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e||t})},e.prototype.select=function(e,t,n){for(var r=e.dataSync(),o=t.dataSync(),i=n.dataSync(),a=Ue(t.shape,et(t.dtype,n.dtype)),s=a.dataSync(),u=0,l=0===e.rank||e.rank>1||1===t.rank?1:t.shape[1],c=0;c<r.length;c++)for(var f=0;f<l;f++)s[u++]=1===r[c]?o[c]:i[c];return a},e.prototype.where=function(e){var t=e.dataSync();return Cr(e.shape,t)},e.prototype.topk=function(e,t,n){return at(e.dataSync(),e.shape,e.dtype,t)},e.prototype.min=function(e,t){we("min",t,e.rank);for(var n=ve(e.shape,t),r=n[1],o=Ue(n[0],e.dtype),i=g(r),a=o.dataSync(),s=e.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=s[l],f=0;f<i;++f){var p=s[l+f];p<c&&(c=p)}a[u]=c}return o},e.prototype.minimum=function(e,t){return this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.min(e,t)})},e.prototype.mod=function(e,t){return this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})},e.prototype.max=function(e,t){we("max",t,e.rank);for(var n=ve(e.shape,t),r=n[1],o=Ue(n[0],e.dtype),i=g(r),a=o.dataSync(),s=e.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=s[l],f=0;f<i;++f){var p=s[l+f];p>c&&(c=p)}a[u]=c}return o},e.prototype.maximum=function(e,t){return this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.max(e,t)})},e.prototype.all=function(e,t){we("all",t,e.rank);for(var n=ve(e.shape,t),r=n[1],o=Ue(n[0],e.dtype),i=g(r),a=o.dataSync(),s=e.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=s[l],f=0;f<i;++f)c=c&&s[l+f];a[u]=c}return o},e.prototype.any=function(e,t){we("any",t,e.rank);for(var n=ve(e.shape,t),r=n[1],o=Ue(n[0],e.dtype),i=g(r),a=o.dataSync(),s=e.dataSync(),u=0;u<a.length;++u){for(var l=u*i,c=s[l],f=0;f<i;++f)c=c||s[l+f];a[u]=c}return o},e.prototype.squaredDifference=function(e,t){return this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e-t;return n*n})},e.prototype.ceil=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return G.make(e.shape,{values:n})},e.prototype.floor=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return G.make(e.shape,{values:n})},e.prototype.sign=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=t[r]<0?-1:t[r]>0?1:0;return G.make(e.shape,{values:n})},e.prototype.round=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=Math.floor(t[r]);n[r]=t[r]-o<.5?Math.floor(t[r]):t[r]-o>.5?Math.ceil(t[r]):o%2==0?o:o+1}return G.make(e.shape,{values:n})},e.prototype.exp=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return G.make(e.shape,{values:n})},e.prototype.expm1=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return G.make(e.shape,{values:n})},e.prototype.log=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.log(t[r]);return G.make(e.shape,{values:n})},e.prototype.log1p=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.log1p(t[r]);return G.make(e.shape,{values:n})},e.prototype.sqrt=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.sqrt(t[r]);return G.make(e.shape,{values:n})},e.prototype.rsqrt=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/Math.sqrt(t[r]);return G.make(e.shape,{values:n})},e.prototype.square=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=o*o}return G.make(e.shape,{values:n})},e.prototype.reciprocal=function(e){for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return G.make(e.shape,{values:n})},e.prototype.relu=function(e){for(var t=Ue(e.shape,e.dtype),n=t.dataSync(),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.max(0,r[o]);return t},e.prototype.elu=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?o:Math.exp(o)-1}return G.make(e.shape,{values:t})},e.prototype.eluDer=function(e,t){for(var n=new Float32Array(t.size),r=t.dataSync(),o=e.dataSync(),i=0;i<r.length;++i){var a=r[i];n[i]=a>=1?o[i]:o[i]*(a+1)}return G.make(t.shape,{values:n})},e.prototype.selu=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?1.0507009873554805*o:1.7580993408473768*(Math.exp(o)-1)}return G.make(e.shape,{values:t})},e.prototype.clip=function(e,t,n){for(var r=new Float32Array(e.size),o=e.dataSync(),i=0;i<o.length;++i){var a=o[i];r[i]=a>n?n:a<t?t:a}return G.make(e.shape,{values:r})},e.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return G.make(e.shape,{values:t})},e.prototype.int=function(e){for(var t=new Int32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=n[r];return G.make(e.shape,{values:t},"int32")},e.prototype.sigmoid=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return G.make(e.shape,{values:t})},e.prototype.softplus=function(e){for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o){var i,a=r[o]>-t,s=r[o]<t,u=Math.exp(r[o]);i=s?u:a?r[o]:Math.log(1+u),n[o]=i}return G.make(e.shape,{values:n})},e.prototype.sin=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return G.make(e.shape,{values:t})},e.prototype.cos=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return G.make(e.shape,{values:t})},e.prototype.tan=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return G.make(e.shape,{values:t})},e.prototype.asin=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return G.make(e.shape,{values:t})},e.prototype.acos=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return G.make(e.shape,{values:t})},e.prototype.atan=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return G.make(e.shape,{values:t})},e.prototype.atan2=function(e,t){return this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.atan2(e,t)})},e.prototype.sinh=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return G.make(e.shape,{values:t})},e.prototype.cosh=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return G.make(e.shape,{values:t})},e.prototype.tanh=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=b(n[r]);return G.make(e.shape,{values:t})},e.prototype.asinh=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return G.make(e.shape,{values:t})},e.prototype.acosh=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return G.make(e.shape,{values:t})},e.prototype.atanh=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return G.make(e.shape,{values:t})},e.prototype.erf=function(e){for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r){var o=n[r],i=1/(1+.3275911*o);t[r]=1-((((1.061405429*i-1.453152027)*i+1.421413741)*i-.284496736)*i+.254829592)*i*Math.exp(-o*o)}return G.make(e.shape,{values:t})},e.prototype.step=function(e,t){void 0===t&&(t=0);for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o){var i=r[o];n[o]=isNaN(i)?NaN:i>0?1:t}return G.make(e.shape,{values:n})},e.prototype.conv2d=function(e,t,n){for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=er(n.outShape,e.dtype),c=e.dataSync(),f=t.dataSync(),p=l.values,h=0;h<n.batchSize;++h)for(var d=h*e.strides[0],m=h*l.strides[0],g=0;g<n.outHeight;++g)for(var y=m+g*l.strides[1],v=g*n.strideHeight-s,b=0;b<r;b++){var _=v+b*i;if(!(_<0||_>=n.inHeight))for(var w=b*t.strides[0],x=d+_*e.strides[1],N=0;N<n.outWidth;++N)for(var E=y+N*n.outChannels,O=N*n.strideWidth-u,C=0;C<o;C++){var I=O+C*a;if(!(I<0||I>=n.inWidth))for(var S=x+I*n.inChannels,T=w+C*t.strides[1],k=0;k<n.inChannels;++k){for(var A=c[S+k],P=0;P<n.outChannels;++P)p[E+P]+=A*f[T+P];T+=n.outChannels}}}return l.toTensor()},e.prototype.conv2dDerInput=function(e,t,n){for(var r=er(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],l=e.dataSync(),c=e.strides,f=c[0],p=c[1],h=c[2],d=t.dataSync(),m=t.strides,g=m[0],y=m[1],v=m[2],b=n.batchSize,_=n.filterHeight,w=n.filterWidth,x=n.inChannels,N=n.inHeight,E=n.inWidth,O=n.outChannels,C=n.outHeight,I=n.outWidth,S=n.strideHeight,T=n.strideWidth,k=_-1-n.padInfo.top,A=w-1-n.padInfo.left,P=0;P<b;++P)for(var M=0;M<x;++M)for(var D=0;D<N;++D)for(var R=D-k,j=Math.max(0,Math.ceil(R/S)),L=Math.min(C,(_+R)/S),V=0;V<E;++V){for(var z=V-A,F=Math.max(0,Math.ceil(z/T)),B=Math.min(I,(w+z)/T),U=0,W=j;W<L;++W)for(var $=W*S-R,H=F;H<B;++H)for(var q=f*P+p*W+h*H,G=g*(_-1-$)+y*(w-1-(H*T-z))+v*M,K=0;K<O;++K)U+=l[q+K]*d[G+K];o[a*P+s*D+u*V+M]=U}return r.toTensor()},e.prototype.conv2dDerFilter=function(e,t,n){for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=er(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=0;c<i;++c)for(var f=Math.max(0,Math.ceil((l-c)/r)),p=Math.min(n.outHeight,(n.inHeight+l-c)/r),h=0;h<a;++h)for(var d=Math.max(0,Math.ceil((u-h)/o)),m=Math.min(n.outWidth,(n.inWidth+u-h)/o),g=0;g<n.inChannels;++g)for(var y=0;y<n.outChannels;++y){for(var v=0,b=0;b<n.batchSize;++b)for(var _=f;_<p;++_)for(var w=c+_*r-l,x=d;x<m;++x)v+=e.get(b,w,h+x*o-u,g)*t.get(b,_,x,y);s.set(v,c,h,g,y)}return s.toTensor()},e.prototype.depthwiseConv2D=function(e,t,n){for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=er(n.outShape,e.dtype),f=e.dataSync(),p=t.dataSync(),h=c.values,d=0;d<n.batchSize;++d)for(var m=d*e.strides[0],g=d*c.strides[0],y=0;y<n.outHeight;++y)for(var v=g+y*c.strides[1],b=y*n.strideHeight-s,_=0;_<r;++_){var w=b+_*i;if(!(w<0||w>=n.inHeight))for(var x=_*t.strides[0],N=m+w*e.strides[1],E=0;E<n.outWidth;++E)for(var O=v+E*c.strides[2],C=E*n.strideWidth-u,I=0;I<o;++I){var S=C+I*a;if(!(S<0||S>=n.inWidth))for(var T=N+S*n.inChannels,k=O,A=x+I*t.strides[1],P=0;P<n.inChannels;++P){for(var M=f[T+P],D=0;D<l;++D)h[k+D]+=M*p[A+D];k+=l,A+=l}}}return c.toTensor()},e.prototype.depthwiseConv2DDerInput=function(e,t,n){for(var r=er(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],s=i[1],u=i[2],l=e.dataSync(),c=e.strides,f=c[0],p=c[1],h=c[2],d=t.dataSync(),m=t.strides,g=m[0],y=m[1],v=m[2],b=n.batchSize,_=n.filterHeight,w=n.filterWidth,x=n.inChannels,N=n.inHeight,E=n.inWidth,O=n.outHeight,C=n.outWidth,I=n.strideHeight,S=n.strideWidth,T=_-1-n.padInfo.top,k=w-1-n.padInfo.left,A=n.outChannels/x,P=0;P<b;++P)for(var M=0;M<x;++M)for(var D=0;D<N;++D)for(var R=D-T,j=Math.max(0,Math.ceil(R/I)),L=Math.min(O,(_+R)/I),V=0;V<E;++V){for(var z=V-k,F=Math.max(0,Math.ceil(z/S)),B=Math.min(C,(w+z)/S),U=0,W=j;W<L;++W)for(var $=W*I-R,H=F;H<B;++H)for(var q=f*P+p*W+h*H,G=g*(_-1-$)+y*(w-1-(H*S-z))+v*M,K=0;K<A;++K)U+=l[q+(M*A+K)]*d[G+K];o[a*P+s*D+u*V+M]=U}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=er(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,f=0;f<i;++f)for(var p=Math.max(0,Math.ceil((l-f)/r)),h=Math.min(n.outHeight,(n.inHeight+l-f)/r),d=0;d<a;++d)for(var m=Math.max(0,Math.ceil((u-d)/o)),g=Math.min(n.outWidth,(n.inWidth+u-d)/o),y=0;y<n.outChannels;++y){for(var v=Math.trunc(y/c),b=y%c,_=0,w=0;w<n.batchSize;++w)for(var x=p;x<h;++x)for(var N=f+x*r-l,E=m;E<g;++E)_+=e.get(w,N,d+E*o-u,v)*t.get(w,x,E,y);s.set(_,f,d,v,b)}return s.toTensor()},e.prototype.tile=function(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var o=er(n,e.dtype),i=e.buffer();for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=a[u]%e.shape[u];var l=i.locToIndex(s);o.values[r]=i.values[l]}return o.toTensor()},e.prototype.pad=function(e,t,n){var r=t.map(function(t,n){return t[0]+e.shape[n]+t[1]}),o=t.map(function(e){return e[0]}),i=e.buffer(),a=er(r,e.dtype);0!==n&&a.values.fill(n);for(var s=0;s<e.size;s++){var u=i.indexToLoc(s),l=u.map(function(e,t){return e+o[t]});a.set.apply(a,[e.get.apply(e,u)].concat(l))}return a.toTensor()},e.prototype.transpose=function(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var o=e.dataSync(),i=er(n,e.dtype),a=e.buffer();for(r=0;r<e.size;++r){for(var s=a.indexToLoc(r),u=new Array(s.length),l=0;l<u.length;l++)u[l]=s[t[l]];var c=i.locToIndex(u);i.values[c]=o[r]}return i.toTensor()},e.prototype.gather=function(e,t,n){var r=e.shape.slice(),o=t.dataSync();r[n]=o.length;for(var i=er(r,e.dtype),a=e.buffer(),s=0;s<i.size;++s){var u=i.indexToLoc(s),l=u.slice();l[n]=o[u[n]];var c=a.locToIndex(l);i.values[s]=a.values[c]}return i.toTensor()},e.prototype.batchToSpaceND=function(e,t,n){var r=t.reduce(function(e,t){return e*t}),o=pe(e.shape,t,r),i=he(o.length,t.length),a=de(e.shape,t,r),s=me(n,t.length),u=ge(a,n,t.length);return e.reshape(o).transpose(i).reshape(a).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){var r=t.reduce(function(e,t){return e*t}),o=[[0,0]];o.push.apply(o,n);for(var i=1+t.length;i<e.shape.length;++i)o.push([0,0]);var a=e.pad(o),s=pe(a.shape,t,r,!1),u=he(s.length,t.length,!1),l=de(a.shape,t,r,!1);return a.reshape(s).transpose(u).reshape(l)},e.prototype.pool=function(e,t,n){for(var r=t.strideHeight,o=t.strideWidth,i=t.filterHeight,a=t.filterWidth,s=er(t.outShape,"float32"),u=t.padInfo.top,l=t.padInfo.left,c="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=0;f<t.batchSize;++f)for(var p=0;p<t.inChannels;++p)for(var h=0;h<t.outHeight;++h)for(var d=h*r-u,m=Math.max(0,d),g=Math.min(t.inHeight,i+d),y=0;y<t.outWidth;++y){for(var v=y*o-l,b=Math.max(0,v),_=Math.min(t.inWidth,a+v),w=c,x=0,N=0,E=m;E<g;++E){for(var O=b;O<_;++O){var C=e.get(f,E,O,p);"max"===n&&C>w?w=C:"avg"===n&&(x+=C,N++)}if(isNaN(w))break}s.set("avg"===n?x/N:w,f,h,y,p)}return s.toTensor()},e.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},e.prototype.maxPoolPositions=function(e,t){for(var n=er(t.outShape,"int32"),r=t.strideHeight,o=t.strideWidth,i=t.filterHeight,a=t.filterWidth,s=t.padInfo.top,u=t.padInfo.left,l=0;l<t.batchSize;++l)for(var c=0;c<t.inChannels;++c)for(var f=0;f<t.outHeight;++f)for(var p=f*r-s,h=Math.max(0,p),d=Math.min(t.inHeight,i+p),m=0;m<t.outWidth;++m){for(var g=m*o-u,y=Math.max(0,g),v=Math.min(t.inWidth,a+g),b=Number.NEGATIVE_INFINITY,_=-1,w=h;w<d;++w)for(var x=w-p,N=y;N<v;++N){var E=N-g,O=e.get(l,w,N,c);O>b&&(b=O,_=x*a+E)}n.set(_,l,f,m,c)}return n.toTensor()},e.prototype.maxPoolBackprop=function(e,t,n,r){for(var o=this.maxPoolPositions(t,r),i=r.strideHeight,a=r.strideWidth,s=r.filterHeight,u=r.filterWidth,l=u-1-r.padInfo.left,c=s-1-r.padInfo.top,f=er(t.shape,"float32"),p=0;p<r.batchSize;++p)for(var h=0;h<r.inChannels;++h)for(var d=0;d<r.inHeight;++d)for(var m=0;m<r.inWidth;++m){for(var g=d-c,y=m-l,v=0,b=0;b<s;++b){var _=(g+b)/i;if(!(_<0||_>=r.outHeight||Math.floor(_)!==_))for(var w=0;w<u;++w){var x=(y+w)/a;if(!(x<0||x>=r.outWidth||Math.floor(x)!==x)){var N=s*u-1-o.get(p,_,x,h)===b*u+w?1:0;0!==N&&(v+=e.get(p,_,x,h)*N)}}}f.set(v,p,d,m,h)}return f.toTensor()},e.prototype.avgPoolBackprop=function(e,t,n){for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,s=a-1-n.padInfo.left,u=i-1-n.padInfo.top,l=er(t.shape,"float32"),c=1/(i*a),f=0;f<n.batchSize;++f)for(var p=0;p<n.inChannels;++p)for(var h=0;h<n.inHeight;++h)for(var d=0;d<n.inWidth;++d){for(var m=h-u,g=d-s,y=0,v=0;v<i;++v){var b=(m+v)/r;if(!(b<0||b>=n.outHeight||Math.floor(b)!==b))for(var _=0;_<a;++_){var w=(g+_)/o;w<0||w>=n.outWidth||Math.floor(w)!==w||(y+=e.get(f,b,w,p))}}l.set(y*c,f,h,d,p)}return l.toTensor()},e.prototype.cast=function(e,t){return nt(e,t,this)},e.prototype.reshape=function(e,t){return rt(e,t)},e.prototype.avgPool=function(e,t){return this.pool(e,t,"avg").toFloat()},e.prototype.resizeBilinear=function(e,t,n,r){for(var o=e.shape,i=o[0],a=o[1],s=o[2],u=o[3],l=er([i,t,n,u],e.dtype),c=[r&&t>1?a-1:a,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=0;p<i;p++)for(var h=0;h<t;h++)for(var d=0;d<n;d++)for(var m=0;m<u;m++){var g=c[0]*h/f[0],y=c[1]*d/f[1],v=Math.floor(g),b=Math.min(a-1,Math.ceil(g)),_=Math.floor(y),w=Math.min(s-1,Math.ceil(y)),x=e.get(p,v,_,m),N=e.get(p,b,_,m),E=y-_,O=x+(e.get(p,v,w,m)-x)*E,C=O+(N+(e.get(p,b,w,m)-N)*E-O)*(g-v);l.set(C,p,h,d,m)}return l.toTensor()},e.prototype.resizeBilinearBackprop=function(e,t,n){for(var r=t.shape,o=r[0],i=r[1],a=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],f=er([o,i,a,s],t.dtype),p=[n&&l>1?i-1:i,n&&c>1?a-1:a],h=[n&&l>1?l-1:l,n&&c>1?c-1:c],d=p[0]/h[0],m=p[1]/h[1],g=0;g<o;g++)for(var y=0;y<l;y++)for(var v=y*d,b=Math.floor(v),_=Math.min(Math.ceil(v),i-1),w=v-b,x=1-w,N=0;N<c;N++)for(var E=N*m,O=Math.floor(E),C=Math.min(Math.ceil(E),a-1),I=E-O,S=1-I,T=0;T<s;T++){var k=e.get(g,y,N,T),A=f.get(g,b,O,T);f.set(A+=k*x*S,g,b,O,T);var P=f.get(g,b,C,T);f.set(P+=k*x*I,g,b,C,T);var M=f.get(g,_,O,T);f.set(M+=k*w*S,g,_,O,T);var D=f.get(g,_,C,T);f.set(D+=k*w*I,g,_,C,T)}return f.toTensor()},e.prototype.resizeNearestNeighbor=function(e,t,n,r){for(var o=e.shape,i=o[0],a=o[1],s=o[2],u=o[3],l=er([i,t,n,u],e.dtype),c=[r&&t>1?a-1:a,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=0;p<i;p++)for(var h=0;h<t;h++)for(var d=0;d<n;d++)for(var m=0;m<u;m++){var g=c[0]*h/f[0],y=c[1]*d/f[1],v=Math.min(a-1,r?Math.round(g):Math.floor(g)),b=Math.min(s-1,r?Math.round(y):Math.floor(y)),_=e.get(p,v,b,m);l.set(_,p,h,d,m)}return l.toTensor()},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){for(var r=t.shape,o=r[0],i=r[1],a=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],f=er([o,i,a,s],t.dtype),p=[n&&l>1?i-1:i,n&&c>1?a-1:a],h=[n&&l>1?l-1:l,n&&c>1?c-1:c],d=1/(p[0]/h[0]),m=1/(p[1]/h[1]),g=2*Math.ceil(d)+2,y=2*Math.ceil(m)+2,v=0;v<o;v++)for(var b=0;b<i;b++)for(var _=0;_<a;_++)for(var w=Math.floor(b*d),x=Math.floor(w-g/2),N=Math.floor(_*m),E=Math.floor(N-y/2),O=0;O<s;O++){for(var C=0,I=0;I<g;I++){var S=I+x;if(!(S<0||S>=l))for(var T=0;T<y;T++){var k=T+E;if(!(k<0||k>=c)){var A=p[0]*(S/h[0]),P=p[1]*(k/h[1]),M=Math.min(i-1,n?Math.round(A):Math.floor(A)),D=Math.min(a-1,n?Math.round(P):Math.floor(P));b===M&&_===D&&(C+=e.get(v,S,k,O))}}}f.set(C,v,b,_,O)}return f.toTensor()},e.prototype.batchNormalization=function(e,t,n,r,o,i){for(var a=e.dataSync(),s=t.dataSync(),u=n.dataSync(),l=o?o.dataSync():new Float32Array([1]),c=i?i.dataSync():new Float32Array([0]),f=new Float32Array(a.length),p=c.length,h=l.length,d=u.length,m=s.length,g=0,y=0,v=0,b=0,_=0;_<a.length;++_)f[_]=c[g++]+(a[_]-s[y++])*l[v++]/Math.sqrt(u[b++]+r),g>=p&&(g=0),y>=m&&(y=0),v>=h&&(v=0),b>=d&&(b=0);return Fe(f,e.shape)},e.prototype.localResponseNormalization4D=function(e,t,n,r,o){var i=er(e.shape,"float32"),a=t,s=i.shape[3]-1;function u(t,n,r,o){for(var i=0,u=Math.max(0,o-a);u<=Math.min(o+a,s);u++){var l=e.get(t,n,r,u);i+=l*l}return i}for(var l=0;l<i.shape[0];l++)for(var c=0;c<=i.shape[1];c++)for(var f=0;f<i.shape[2];f++)for(var p=0;p<i.shape[3];p++){var h=u(l,c,f,p),d=e.get(l,c,f,p)*Math.pow(n+r*h,-o);i.set(d,l,c,f,p)}return i.toTensor()},e.prototype.LRNGrad=function(e,t,n,r,o,i,a){for(var s=e.shape[0],u=e.shape[1],l=e.shape[2],c=e.shape[3],f=er([s,u,l,c],"float32"),p=0;p<s;++p)for(var h=0;h<u;++h)for(var d=0;d<l;++d)for(var m=0;m<c;++m){for(var g=Math.max(0,m-r),y=Math.min(c,m+r+1),v=0,b=g;b<y;++b)v+=t.get(p,h,d,b)*t.get(p,h,d,b);for(v=i*v+o,b=g;b<y;++b){var _=-2*i*a*t.get(p,h,d,b)*n.get(p,h,d,m)/v;m===b&&(_+=Math.pow(v,-a)),_*=e.get(p,h,d,m),f.set(_+f.get(p,h,d,b),p,h,d,b)}}return f.toTensor()},e.prototype.multinomial=function(e,t,n,r){for(var o=t?e:De(e),i=o.shape[0],a=o.shape[1],s=Ue([i,n],"int32"),u=s.dataSync(),l=o.dataSync(),c=0;c<i;++c){var f=c*a,p=new Float32Array(a-1);p[0]=l[f];for(var h=1;h<p.length;++h)p[h]=p[h-1]+l[f+h];for(var d=Qn(r.toString()),m=c*n,g=0;g<n;++g){var y=d();u[m+g]=p.length;for(var v=0;v<p.length;v++)if(y<p[v]){u[m+g]=v;break}}}return s},e.prototype.oneHot=function(e,t,n,r){var o=new Float32Array(e.size*t);o.fill(r);for(var i=0;i<e.size;++i)e.get(i)>=0&&e.get(i)<t&&(o[i*t+e.get(i)]=n);return Ve(o,[e.size,t],"int32")},e.prototype.nonMaxSuppression=function(e,t,n,r,o){return ot(e.dataSync(),t.dataSync(),n,r,o)},e.prototype.broadcastedBinaryOp=function(e,t,n,r){var o=lt(e.shape,t.shape),i=er(o,n),a=e.dataSync(),s=t.dataSync(),u=st(e.shape,o),l=st(t.shape,o),c=i.values;if(u.length+l.length===0)for(var f=0;f<c.length;++f)c[f]=r(a[f%a.length],s[f%s.length]);else{var p=e.buffer(),h=t.buffer(),d=function(n){var o=i.indexToLoc(n),f=o.slice(-e.rank);u.forEach(function(e){return f[e]=0});var d=p.locToIndex(f),m=o.slice(-t.rank);l.forEach(function(e){return m[e]=0});var g=h.locToIndex(m);c[n]=r(a[d],s[g])};for(f=0;f<c.length;++f)d(f)}return i.toTensor()},e.prototype.dispose=function(){},e}();ce.registerBackend("cpu",function(){return new Na},1,q);var Ea="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setImmediate;function Oa(){return new Promise(function(e){return Ea(function(){return e()})})}var Ca={float32:4,int32:4,uint16:2,uint8:1,bool:1},Ia="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Sa(e){return Ia?Buffer.byteLength(e):new Blob([e]).size}function Ta(e){var t=0;e.forEach(function(e){t+=e.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function ka(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Aa(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Sa(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Sa(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var Pa=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t){return e.getHandlers(t,"load")},e.getHandlers=function(e,t){var n=[];return("load"===t?this.getInstance().loadRouters:this.getInstance().saveRouters).forEach(function(t){var r=t(e);null!==r&&n.push(r)}),n},e}(),Ma="://",Da=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){f(null!=t,"scheme must not be undefined or null."),t.endsWith(Ma)&&(t=t.slice(0,t.indexOf(Ma))),f(t.length>0,"scheme must not be an empty string.");var r=e.getInstance();f(null==r.managers[t],"A model store manager is already registered for scheme '"+t+"'."),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function Ra(e){if(-1===e.indexOf(Ma))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Da.getSchemes().join(","));return{scheme:e.split(Ma)[0],path:e.split(Ma)[1]}}function ja(e,t,n){return void 0===n&&(n=!1),a(this,void 0,void 0,function(){var r,o,i,a,u,l,c,p,h;return s(this,function(s){switch(s.label){case 0:return f(e!==t,"Old path and new path are the same: '"+e+"'"),f((r=Pa.getLoadHandlers(e)).length>0,"Copying failed because no load handler is found for source URL "+e+"."),f(r.length<2,"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."),o=r[0],f((i=Pa.getSaveHandlers(t)).length>0,"Copying failed because no save handler is found for destination URL "+t+"."),f(i.length<2,"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."),a=i[0],u=Ra(e).scheme,l=Ra(e).path,c=u===Ra(e).scheme,[4,o.load()];case 1:return p=s.sent(),n&&c?[4,Da.getManager(u).removeModel(l)]:[3,3];case 2:s.sent(),s.label=3;case 3:return[4,a.save(p)];case 4:return h=s.sent(),!n||c?[3,6]:[4,Da.getManager(u).removeModel(l)];case 5:s.sent(),s.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var La="models_store",Va="model_info_store";function za(){if(!ce.get("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Fa(e){var t=e.result;t.createObjectStore(La,{keyPath:"modelPath"}),t.createObjectStore(Va,{keyPath:"modelPath"})}var Ba=function(){function e(e){if(this.indexedDB=za(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},e.prototype.load=function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(e,t){var n=this;return new Promise(function(e,r){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Fa(o)},o.onsuccess=function(){var i=o.result;if(null==t){var a=i.transaction(La,"readonly"),s=a.objectStore(La).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},a.oncomplete=function(){return i.close()}}else{var u,l=Aa(t),c=i.transaction(Va,"readwrite"),f=c.objectStore(Va),p=f.put({modelPath:n.modelPath,modelArtifactsInfo:l});p.onsuccess=function(){var o=(u=i.transaction(La,"readwrite")).objectStore(La).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});o.onsuccess=function(){return e({modelArtifactsInfo:l})},o.onerror=function(e){var t=(f=c.objectStore(Va)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(o.error)},t.onerror=function(e){return i.close(),r(o.error)}}},p.onerror=function(e){return i.close(),r(p.error)},c.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},o.onerror=function(e){return r(o.error)}})},e.URL_SCHEME="indexeddb://",e}(),Ua=function(e){return ce.get("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ba.URL_SCHEME)?function(e){return new Ba(e)}(e.slice(Ba.URL_SCHEME.length)):null};Pa.registerSaveRouter(Ua),Pa.registerLoadRouter(Ua);var Wa=function(){function e(){this.indexedDB=za()}return e.prototype.listModels=function(){return a(this,void 0,void 0,function(){var e=this;return s(this,function(t){return[2,new Promise(function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Fa(r)},r.onsuccess=function(){var e=r.result,o=e.transaction(Va,"readonly"),i=o.objectStore(Va).getAll();i.onsuccess=function(){for(var e={},n=0,r=i.result;n<r.length;n++){var o=r[n];e[o.modelPath]=o.modelArtifactsInfo}t(e)},i.onerror=function(t){return e.close(),n(i.error)},o.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}})]})})},e.prototype.removeModel=function(e){return a(this,void 0,void 0,function(){var t=this;return s(this,function(n){return e=function(e){return e.startsWith(Ba.URL_SCHEME)?e.slice(Ba.URL_SCHEME.length):e}(e),[2,new Promise(function(n,r){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Fa(o)},o.onsuccess=function(){var t,i=o.result,a=i.transaction(Va,"readwrite"),s=a.objectStore(Va),u=s.get(e);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var o=s.delete(e),a=function(){var o=(t=i.transaction(La,"readwrite")).objectStore(La).delete(e);o.onsuccess=function(){return n(u.result.modelArtifactsInfo)},o.onerror=function(e){return r(u.error)}};o.onsuccess=a,o.onerror=function(e){return a(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},a.oncomplete=function(){null==t?i.close():t.oncomplete=function(){return i.close()}}},o.onerror=function(e){return r(o.error)}})]})})},e}();if(ce.get("IS_BROWSER"))try{Da.registerManager(Ba.URL_SCHEME,new Wa)}catch(J){}var $a="/",Ha="tensorflowjs_models",qa="info",Ga="model_topology",Ka="weight_specs",Xa="weight_data";function Za(e){return{info:[Ha,e,qa].join($a),topology:[Ha,e,Ga].join($a),weightSpecs:[Ha,e,Ka].join($a),weightData:[Ha,e,Xa].join($a)}}function Ya(e){var t=e.split($a);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join($a)}var Qa=function(){function e(e){if(!ce.get("IS_BROWSER")||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Za(this.modelPath)}return e.prototype.save=function(e){return a(this,void 0,void 0,function(){var t,n,r,o;return s(this,function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Aa(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){return Ia?Buffer.from(e).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(e)))}(e.weightData)),[2,{modelArtifactsInfo:r}]}catch(e){for(o in this.keys)this.LS.removeItem(this.keys[o]);throw new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return a(this,void 0,void 0,function(){var e,t,n,r,o;return s(this,function(i){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null==(o=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(Ia){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),o=0;o<n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}(o),[2,t]})})},e.URL_SCHEME="localstorage://",e}(),Ja=function(e){return ce.get("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Qa.URL_SCHEME)?function(e){return new Qa(e)}(e.slice(Qa.URL_SCHEME.length)):null};Pa.registerSaveRouter(Ja),Pa.registerLoadRouter(Ja);var es=function(){function e(){f(ce.get("IS_BROWSER"),"Current environment is not a web browser"),f(void 0!==window.localStorage,"Current browser does not appear to support localStorage"),this.LS=window.localStorage}return e.prototype.listModels=function(){return a(this,void 0,void 0,function(){var e,t,n,r,o,i;return s(this,function(a){for(e={},t=Ha+$a,n=$a+qa,r=0;r<this.LS.length;++r)(o=this.LS.key(r)).startsWith(t)&&o.endsWith(n)&&(i=Ya(o),e[i]=JSON.parse(this.LS.getItem(o)));return[2,e]})})},e.prototype.removeModel=function(e){return a(this,void 0,void 0,function(){var t,n;return s(this,function(r){if(e=function(e){return e.startsWith(Qa.URL_SCHEME)?e.slice(Qa.URL_SCHEME.length):e}(e),t=Za(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]})})},e}();if(ce.get("IS_BROWSER"))try{Da.registerManager(Qa.URL_SCHEME,new es)}catch(J){}var ts="model",ns=".json",rs=".weights.bin",os=function(){function e(t){if(!ce.get("IS_BROWSER"))throw new Error("triggerDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t=ts),this.modelTopologyFileName=t+ns,this.weightDataFileName=t+rs}return e.prototype.save=function(e){return a(this,void 0,void 0,function(){var t,n,r,o;return s(this,function(i){if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),e.modelTopology instanceof ArrayBuffer)throw new Error("DownloadTrigger.save() does not support saving model topology in binary formats yet.");return n=window.URL.createObjectURL(new Blob([JSON.stringify({modelTopology:e.modelTopology,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]})],{type:"application/json"})),(r=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,r.href=n,r.click(),null!=e.weightData&&((o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=t,o.click()),[2,{modelArtifactsInfo:Aa(e)}]})})},e.URL_SCHEME="downloads://",e}(),is=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return a(this,void 0,void 0,function(){var e,t,n=this;return s(this,function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(r,o){var i=new FileReader;i.onload=function(i){var a=JSON.parse(i.target.result),s=a.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var u=a.weightsManifest;if(null!=u){var l;try{l=n.checkManifestAndWeightFiles(u,t)}catch(e){return void o(e)}var c=[],f=[],p=[];u.forEach(function(e){e.paths.forEach(function(e){f.push(e),p.push(null)}),c.push.apply(c,e.weights)}),u.forEach(function(e){e.paths.forEach(function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,o=f.indexOf(e);p[o]=n,-1===p.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:Ta(p)})},t.onerror=function(t){o("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(l[e])})})}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},i.onerror=function(t){o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},i.readAsText(e)})]})})},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map(function(e){return ka(e.name)}),o={},i=0,a=e;i<a.length;i++)a[i].paths.forEach(function(e){var i=ka(e);if(-1!==n.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: '"+i+"'");if(n.push(i),-1===r.indexOf(i))throw new Error("Weight file with basename '"+i+"' is not provided.");o[e]=t[r.indexOf(i)]});if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return o},e}();function as(e,t){return a(this,void 0,void 0,function(){var n,r;return s(this,function(o){switch(o.label){case 0:return n=e.map(function(e){return fetch(e,t)}),[4,Promise.all(n)];case 1:return r=o.sent(),[4,Promise.all(r.map(function(e){return e.arrayBuffer()}))];case 2:return[2,o.sent()]}})})}Pa.registerSaveRouter(function(e){return ce.get("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(os.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new os(e)}(e.slice(os.URL_SCHEME.length)):null});var ss=function(){function e(e,t){if(this.DEFAULT_METHOD="POST","undefined"==typeof fetch)throw new Error("browserHTTPRequest is not supported outside the web browser without a fetch polyfill.");if(f(null!=e&&e.length>0,"URL path for browserHTTPRequest must not be null, undefined or empty."),Array.isArray(e)&&f(2===e.length,"URL paths for browserHTTPRequest must have a length of 2, (actual length is "+e.length+")."),this.path=e,null!=t&&null!=t.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t||{}}return e.prototype.save=function(e){return a(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,t.body.append("model.json",new Blob([JSON.stringify({modelTopology:e.modelTopology,weightsManifest:[{paths:["./model.weights.bin"],weights:e.weightSpecs}]})],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,fetch(this.path,t)];case 1:if(200===(n=r.sent()).status)return[2,{modelArtifactsInfo:Aa(e),responses:[n]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+n.status+".")}})})},e.prototype.load=function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Array.isArray(this.path)?this.loadBinaryModel():this.loadJSONModel()]})})},e.prototype.loadBinaryTopology=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,fetch(this.path[0],this.requestInit)];case 1:return[4,t.sent().arrayBuffer()];case 2:return[2,t.sent()];case 3:throw e=t.sent(),new Error(this.path[0]+" not found. "+e);case 4:return[2]}})})},e.prototype.loadBinaryModel=function(){return a(this,void 0,void 0,function(){var e,t,n,r,o,i,a,u;return s(this,function(s){switch(s.label){case 0:return t=this.loadBinaryTopology(),[4,fetch(this.path[1],this.requestInit)];case 1:return n=s.sent(),[4,Promise.all([t,n])];case 2:return r=s.sent(),o=r[0],[4,r[1].json()];case 3:return null==(i=s.sent())?[3,5]:[4,this.loadWeights(i)];case 4:e=s.sent(),a=e[0],u=e[1],s.label=5;case 5:return[2,{modelTopology:o,weightSpecs:a,weightData:u}]}})})},e.prototype.loadJSONModel=function(){return a(this,void 0,void 0,function(){var e,t,n,r,o,i;return s(this,function(a){switch(a.label){case 0:return[4,fetch(this.path,this.requestInit)];case 1:return[4,a.sent().json()];case 2:if(t=a.sent(),r=t.weightsManifest,null==(n=t.modelTopology)&&null==r)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==r?[3,4]:[4,this.loadWeights(t.weightsManifest)];case 3:e=a.sent(),o=e[0],i=e[1],a.label=4;case 4:return[2,{modelTopology:n,weightSpecs:o,weightData:i}]}})})},e.prototype.loadWeights=function(e){return a(this,void 0,void 0,function(){var t,n,r,o,i,a,u,l;return s(this,function(s){switch(s.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=[],r=0,o=e;r<o.length;r++)n.push.apply(n,o[r].weights);return(i=t.substring(0,t.lastIndexOf("/"))).endsWith("/")||(i+="/"),a=[],e.forEach(function(e){e.paths.forEach(function(e){a.push(i+e)})}),u=[n],l=Ta,[4,as(a,this.requestInit)];case 1:return[2,u.concat([l.apply(void 0,[s.sent()])])]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function us(e){return null!=e.match(ss.URL_SCHEME_REGEX)}var ls=function(e){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every(function(e){return us(e)}):us(e))?cs(e):null};function cs(e,t){return new ss(e,t)}Pa.registerSaveRouter(ls),Pa.registerLoadRouter(ls);var fs=function(){function e(e,t,n){this.modelTopology=e,this.weightSpecs=t,this.weightData=n}return e.prototype.load=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){return e={},null!=this.modelTopology&&(e=i({modelTopology:this.modelTopology},e)),null!=this.weightSpecs&&this.weightSpecs.length>0&&(e=i({weightSpecs:this.weightSpecs},e)),null!=this.weightData&&this.weightData.byteLength>0&&(e=i({weightData:this.weightData},e)),[2,e]})})},e}(),ps=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){return[2,this.saveHandler(e)]})})},e}(),hs=Object.freeze({browserFiles:function(e){return new is(e)},browserHTTPRequest:cs,concatenateArrayBuffers:Ta,decodeWeights:function(e,t){for(var n={},r=0,o=function(t){var o=t.name,i=t.dtype,a=t.shape,s=g(a),u=void 0;if("quantization"in t){var l=t.quantization;if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+l.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=Ca[l.dtype],f=e.slice(r,r+s*c),p="uint8"===l.dtype?new Uint8Array(f):new Uint16Array(f);if("float32"===i)u=Float32Array.from(p,function(e){return e*l.scale+l.min});else{if("int32"!==i)throw new Error("Unsupported dtype in weight '"+o+"': "+i);u=Int32Array.from(p,function(e){return Math.round(e*l.scale+l.min)})}r+=s*c}else{var h=Ca[i];if(f=e.slice(r,r+s*h),"float32"===i)u=new Float32Array(f);else if("int32"===i)u=new Int32Array(f);else{if("bool"!==i)throw new Error("Unsupported dtype in weight '"+o+"': "+i);u=new Uint8Array(f)}r+=s*h}var d=void 0;if("float32"===i)d=Re(u,a,"float32");else if("int32"===i)d=Re(u,a,"int32");else{if("bool"!==i)throw new Error("Unsupported dtype in weight '"+o+"': "+i);d=Re(u,a,"bool")}n[o]=d},i=0,a=t;i<a.length;i++)o(a[i]);return n},encodeWeights:function(e){return a(this,void 0,void 0,function(){var t,n,r,o;return s(this,function(i){switch(i.label){case 0:for(r in t=[],n=[],e){if("float32"!==(o=e[r]).dtype&&"int32"!==o.dtype&&"bool"!==o.dtype)throw new Error("Unsupported dtype in weight '"+r+"': "+o.dtype);t.push({name:r,shape:o.shape,dtype:o.dtype}),n.push(o.data())}return[4,Promise.all(n)];case 1:return[2,{data:function(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)});var r=new Uint8Array(t),o=0;return n.forEach(function(e){r.set(new Uint8Array(e.buffer),o),o+=e.byteLength}),r.buffer}(i.sent()),specs:t}]}})})},fromMemory:function(e,t,n){return new fs(e,t,n)},getLoadHandlers:Pa.getLoadHandlers,getModelArtifactsInfoForJSON:Aa,getSaveHandlers:Pa.getSaveHandlers,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),a(this,void 0,void 0,function(){var o,i,a,u,l,c,f,p,h,d;return s(this,function(s){switch(s.label){case 0:if(o=e.map(function(){return!1}),i={},a=null!=n?n.map(function(){return!1}):[],u=[],e.forEach(function(e,t){var r=0;e.weights.forEach(function(e){var s=Ca["quantization"in e?e.quantization.dtype:e.dtype]*g(e.shape),l=function(){o[t]=!0,null==i[t]&&(i[t]=[]),i[t].push({manifestEntry:e,groupOffset:r,sizeBytes:s})};null!=n?n.forEach(function(t,n){t===e.name&&(l(),a[n]=!0)}):l(),u.push(e.name),r+=s})}),!a.every(function(e){return e}))throw l=n.filter(function(e,t){return!a[t]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");return c=o.reduce(function(e,t,n){return t&&e.push(n),e},[]),f=[],c.forEach(function(n){e[n].paths.forEach(function(e){var n=t+(t.endsWith("/")?"":"/")+e;f.push(n)})}),[4,as(f,r)];case 1:return p=s.sent(),h={},d=0,c.forEach(function(t){for(var n=e[t].paths.length,r=0,o=0;o<n;o++)r+=p[d+o].byteLength;for(var a=new ArrayBuffer(r),s=new Uint8Array(a),u=0,l=0;l<n;l++){var c=new Uint8Array(p[d+l]);s.set(c,u),u+=c.byteLength}i[t].forEach(function(e){var t,n=a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),r=e.manifestEntry.dtype;if("quantization"in e.manifestEntry){var o=e.manifestEntry.quantization;if("uint8"!==o.dtype&&"uint16"!==o.dtype)throw new Error("Weight "+e.manifestEntry.name+" has unknown quantization dtype "+o.dtype+".");var i="uint8"===o.dtype?new Uint8Array(n):new Uint16Array(n);if("float32"===r)t=Float32Array.from(i,function(e){return e*o.scale+o.min});else{if("int32"!==r)throw new Error("Weight "+e.manifestEntry.name+" has a dtype not supported by quantization: "+r);t=Int32Array.from(i,function(e){return Math.round(e*o.scale+o.min)})}}else if("float32"===r)t=new Float32Array(n);else if("int32"===r)t=new Int32Array(n);else{if("bool"!==r)throw new Error("Weight "+e.manifestEntry.name+" has unknown dtype "+r+".");t=new Uint8Array(n)}var s=e.manifestEntry.name;if(null!=h[s])throw new Error("Duplicate weight with name "+s+". Please make sure weights names are unique in the manifest JSON.");h[s]=Re(t,e.manifestEntry.shape,e.manifestEntry.dtype)}),d+=n}),[2,h]}})})},registerLoadRouter:Pa.registerLoadRouter,registerSaveRouter:Pa.registerSaveRouter,withSaveHandler:function(e){return new ps(e)},copyModel:function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,ja(e,t,!1)];case 1:return[2,n.sent()]}})})},listModels:function(){return a(this,void 0,void 0,function(){var e,t,n,r,o,i,a;return s(this,function(s){switch(s.label){case 0:e=Da.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?[4,Da.getManager(o=r[n]).listModels()]:[3,4];case 2:for(a in i=s.sent())t[o+Ma+a]=i[a];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,ja(e,t,!0)];case 1:return[2,n.sent()]}})})},removeModel:function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return t=Ra(e),[4,Da.getManager(t.scheme).removeModel(t.path)];case 1:return[2,n.sent()]}})})}}),ds=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),ms=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}(),gs=Object.freeze({Serializable:ds,SerializationMap:ms});function ys(e,t,n){if(null==n&&(n=ce.get("TEST_EPSILON")),e instanceof G||t instanceof G){if(e instanceof G&&t instanceof G){if(e.dtype!==t.dtype)throw new Error("Arrays are of different type actual: "+e.dtype+" vs expected: "+t.dtype+".");if(!y(e.shape,t.shape))throw new Error("Arrays are of different shape actual: "+e.shape+" vs expected: "+t.shape+".")}}else{var r=e.constructor.name,o=t.constructor.name;if(r!==o)throw new Error("Arrays are of different type actual: "+r+" vs expected: "+o)}var i,a;if(i=e instanceof G?e.dataSync():e,a=t instanceof G?t.dataSync():t,i.length!==a.length)throw new Error("Arrays have different lengths actual: "+i.length+" vs expected: "+a.length+".\nActual:   "+i+".\nExpected: "+a+".");for(var s=0;s<a.length;++s){var u=i[s],l=a[s];if(!vs(u,Number(l),n))throw new Error("Arrays differ: actual["+s+"] = "+u+", expected["+s+"] = "+l+".\nActual:   "+i+".\nExpected: "+a+".")}}function vs(e,t,n){return!(!isNaN(e)||!isNaN(t))||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({WEBGL_ENVS:{HAS_WEBGL:!0},NODE_ENVS:{IS_NODE:!0},CHROME_ENVS:{IS_CHROME:!0},BROWSER_ENVS:{IS_BROWSER:!0},CPU_ENVS:{HAS_WEBGL:!1},ALL_ENVS:{},expectArraysClose:ys,expectPromiseToFail:function(e,t){e().then(function(){return t.fail()},function(){return t()})},expectArraysEqual:function(e,t){return ys(e,t,0)},expectNumbersClose:function(e,t,n){if(null==n&&(n=ce.get("TEST_EPSILON")),!vs(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){var r;r=e instanceof G?e.dataSync():e;for(var o=0;o<r.length;o++)if(r[o]<t||r[o]>n)throw new Error("Value out of range:"+r[o]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}});var bs="0.12.11",_s=(Object.freeze({gpgpu_util:Sn,webgl_util:sn,MathBackendWebGL:Sr,GPGPUContext:Tn}),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),o=r.value,i=r.grads;return this.applyGradients(i),Object.keys(i).forEach(function(e){return i[e].dispose()}),t?o:(o.dispose(),null)},t.prototype.computeGradients=function(e,t){return function(e,t){if(f(A(e),"The f passed in variableGrads(f) must be a function"),f(null==t||Array.isArray(t)&&t.every(function(e){return e instanceof K}),"The varList passed in variableGrads(f, varList) must be an array of variables"),null==t)for(var n in t=[],ce.engine.registeredVariables)t.push(ce.engine.registeredVariables[n]);var r=t.length;f((t=t.filter(function(e){return e.trainable})).length>0,"variableGrads() expects at least one of the input variables to be trainable, but none of the "+r+" variables is trainable.");var o=ce.engine.gradients(e,t,null,!0),i=o.value,a=o.grads;f(a.some(function(e){return null!=e}),"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),f(0===i.rank,"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+i.rank+" tensor");var s={};return t.forEach(function(e,t){null!=a[t]&&(s[e.name]=a[t])}),{value:i,grads:s}}(e,t)},t}(ds)),ws=1e-8,xs=1e-4;function Ns(){return ce.get("WEBGL_RENDER_FLOAT32_ENABLED")?ws:xs}var Es=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this)||this;return o.learningRate=t,o.rho=n,o.epsilon=r,o.accumulatedGrads={},o.accumulatedUpdates={},o.c=Uo(je(-t)),o.rhoScalar=Uo(je(n)),o.oneMinusRho=Uo(je(1-n)),null===r&&(r=Ns()),o.epsilonScalar=Uo(je(r)),o}return o(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var o=ce.engine.registeredVariables[n];null==r.accumulatedGrads[n]&&Bo(function(){t.accumulatedGrads[n]=Qe(o).variable(!1)}),null==r.accumulatedUpdates[n]&&Bo(function(){t.accumulatedUpdates[n]=Qe(o).variable(!1)});var i=e[n],a=r.accumulatedGrads[n],s=r.accumulatedUpdates[n];Bo(function(){var e=t.rhoScalar.mul(a).add(t.oneMinusRho.mul(i.square())),r=s.add(t.epsilonScalar).sqrt().div(a.add(t.epsilonScalar).sqrt()).mul(i),u=t.rhoScalar.mul(s).add(t.oneMinusRho.mul(r.square()));t.accumulatedGrads[n].assign(e),t.accumulatedUpdates[n].assign(u);var l=t.c.mul(r).add(o);o.assign(l)})},r=this;for(var o in e)n(o)},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsilonScalar.dispose(),this.rhoScalar.dispose(),this.oneMinusRho.dispose(),null!=this.accumulatedUpdates&&(Object.keys(this.accumulatedUpdates).forEach(function(t){return e.accumulatedUpdates[t].dispose()}),Object.keys(this.accumulatedGrads).forEach(function(t){return e.accumulatedGrads[t].dispose()}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="AdadeltaOptimizer",t}(_s);ms.register(Es);var Os=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads={},r.c=Uo(je(-t));var o=Ns();return r.epsilon=Uo(je(o)),r}return o(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var o=ce.engine.registeredVariables[n];null==r.accumulatedGrads[n]&&Bo(function(){t.accumulatedGrads[n]=We(o.shape,t.initialAccumulatorValue).variable(!1)});var i=e[n],a=r.accumulatedGrads[n];Bo(function(){var e=a.add(i.square());t.accumulatedGrads[n].assign(e);var r=t.c.mul(i.div(e.add(t.epsilon).sqrt())).add(o);o.assign(r)})},r=this;for(var o in e)n(o)},t.prototype.dispose=function(){var e=this;this.epsilon.dispose(),this.c.dispose(),null!=this.accumulatedGrads&&Object.keys(this.accumulatedGrads).forEach(function(t){return e.accumulatedGrads[t].dispose()})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="AdagradOptimizer",t}(_s);ms.register(Os);var Cs=function(e){function t(t,n,r,o){void 0===o&&(o=null);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=o,i.accumulatedFirstMoment={},i.accumulatedSecondMoment={},i.c=Uo(je(-t)),i.beta1Scalar=Uo(je(n)),i.beta2Scalar=Uo(je(r)),Bo(function(){i.accBeta1=je(n).variable(),i.accBeta2=je(r).variable()}),i.oneMinusBeta1=Uo(je(1-n)),i.oneMinusBeta2=Uo(je(1-r)),i.one=Uo(je(1)),null===o&&(o=Ns()),i.epsScalar=Uo(je(o)),i}return o(t,e),t.prototype.applyGradients=function(e){var t=this;Bo(function(){var n=t.one.sub(t.accBeta1),r=t.one.sub(t.accBeta2);for(var o in e){var i=ce.engine.registeredVariables[o];if(null==t.accumulatedFirstMoment[o]){var a=!1;t.accumulatedFirstMoment[o]=Qe(i).variable(a)}null==t.accumulatedSecondMoment[o]&&(a=!1,t.accumulatedSecondMoment[o]=Qe(i).variable(a));var s=e[o],u=t.accumulatedSecondMoment[o],l=t.beta1Scalar.mul(t.accumulatedFirstMoment[o]).add(t.oneMinusBeta1.mul(s)),c=t.beta2Scalar.mul(u).add(t.oneMinusBeta2.mul(s.square())),f=l.div(n),p=c.div(r);t.accumulatedFirstMoment[o].assign(l),t.accumulatedSecondMoment[o].assign(c);var h=t.c.mul(f.div(t.epsScalar.add(p.sqrt()))).add(i);i.assign(h)}t.accBeta1.assign(t.accBeta1.mul(t.beta1Scalar)),t.accBeta2.assign(t.accBeta2.mul(t.beta2Scalar))})},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsScalar.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(t){return e.accumulatedFirstMoment[t].dispose()}),null!=this.accumulatedSecondMoment&&Object.keys(this.accumulatedSecondMoment).forEach(function(t){return e.accumulatedSecondMoment[t].dispose()})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="AdamOptimizer",t}(_s);ms.register(Cs);var Is=function(e){function t(t,n,r,o,i){void 0===o&&(o=null),void 0===i&&(i=0);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=o,a.decay=i,a.accumulatedFirstMoment={},a.accumulatedWeightedInfNorm={},a.c=Uo(je(-t)),a.beta1Scalar=Uo(je(n)),a.beta2Scalar=Uo(je(r)),a.decayScalar=Uo(je(i)),Bo(function(){a.iteration=je(0).variable(),a.accBeta1=je(n).variable()}),a.oneMinusBeta1=Uo(je(1-n)),a.one=Uo(je(1)),null===o&&(o=Ns()),a.epsScalar=Uo(je(o)),a}return o(t,e),t.prototype.applyGradients=function(e){var t=this;Bo(function(){var n=t.one.sub(t.accBeta1),r=t.c.div(t.one.add(t.decayScalar.mul(t.iteration)));for(var o in e){var i=ce.engine.registeredVariables[o];if(null==t.accumulatedFirstMoment[o]){var a=!1;t.accumulatedFirstMoment[o]=Qe(i).variable(a)}null==t.accumulatedWeightedInfNorm[o]&&(a=!1,t.accumulatedWeightedInfNorm[o]=Qe(i).variable(a));var s=e[o],u=t.accumulatedWeightedInfNorm[o],l=t.beta1Scalar.mul(t.accumulatedFirstMoment[o]).add(t.oneMinusBeta1.mul(s)),c=t.beta2Scalar.mul(u),f=s.abs(),p=c.maximum(f);t.accumulatedFirstMoment[o].assign(l),t.accumulatedWeightedInfNorm[o].assign(p);var h=r.div(n).mul(l.div(t.epsScalar.add(p))).add(i);i.assign(h)}t.iteration.assign(t.iteration.add(t.one)),t.accBeta1.assign(t.accBeta1.mul(t.beta1Scalar))})},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsScalar.dispose(),this.accBeta1.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.oneMinusBeta1.dispose(),this.decayScalar.dispose(),this.iteration.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(t){return e.accumulatedFirstMoment[t].dispose()}),null!=this.accumulatedWeightedInfNorm&&Object.keys(this.accumulatedWeightedInfNorm).forEach(function(t){return e.accumulatedWeightedInfNorm[t].dispose()})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="AdamaxOptimizer",t}(_s);ms.register(Is);var Ss=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return o(t,e),t.prototype.applyGradients=function(e){var t=this;Object.keys(e).forEach(function(n){var r=e[n],o=ce.engine.registeredVariables[n];Bo(function(){var e=t.c.mul(r).add(o);o.assign(e)})})},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Uo(je(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGDOptimizer",t}(_s);ms.register(Ss);var Ts=function(e){function t(t,n,r){void 0===r&&(r=!1);var o=e.call(this,t)||this;return o.learningRate=t,o.momentum=n,o.useNesterov=r,o.m=je(o.momentum),o.accumulations={},o}return o(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var o=ce.engine.registeredVariables[n];null==r.accumulations[n]&&Bo(function(){t.accumulations[n]=Qe(o).variable(!1)});var i=r.accumulations[n],a=e[n];Bo(function(){var e,r=t.m.mul(i).add(a);e=t.useNesterov?t.c.mul(a.add(r.mul(t.m))).add(o):t.c.mul(r).add(o),t.accumulations[n].assign(r),o.assign(e)})},r=this;for(var o in e)n(o)},t.prototype.dispose=function(){if(e.prototype.dispose.call(this),this.m.dispose(),null!=this.accumulations)for(var t in this.accumulations)this.accumulations[t].dispose()},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="MomentumOptimizer",t}(Ss);ms.register(Ts);var ks=function(e){function t(t,n,r,o,i){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===o&&(o=null),void 0===i&&(i=!1);var a=e.call(this)||this;return a.learningRate=t,a.decay=n,a.momentum=r,a.epsilon=o,a.accumulatedMeanSquares={},a.accumulatedMeanGrads={},a.accumulatedMoments={},a.c=Uo(je(t)),a.decayScalar=Uo(je(n)),a.momentumScalar=Uo(je(r)),a.oneMinusDecay=Uo(je(1-n)),a.centered=i,null===o&&(o=Ns()),a.epsilonScalar=Uo(je(o)),a}return o(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var o=ce.engine.registeredVariables[n];null==r.accumulatedMeanSquares[n]&&Bo(function(){t.accumulatedMeanSquares[n]=Qe(o).variable(!1)}),null==r.accumulatedMeanGrads[n]&&r.centered&&Bo(function(){t.accumulatedMeanGrads[n]=Qe(o).variable(!1)}),null==r.accumulatedMoments[n]&&Bo(function(){t.accumulatedMoments[n]=Qe(o).variable(!1)});var i=r.accumulatedMeanSquares[n],a=r.accumulatedMeanGrads[n],s=r.accumulatedMoments[n],u=e[n];Bo(function(){var e=t.decayScalar.mul(i).add(t.oneMinusDecay.mul(u.square()));if(t.centered){var r=t.decayScalar.mul(a).add(t.oneMinusDecay.mul(u)),l=t.momentumScalar.mul(s).add(t.c.mul(u).div(e.sub(r.square().add(t.epsilonScalar)).sqrt()));t.accumulatedMeanSquares[n].assign(e),t.accumulatedMeanGrads[n].assign(r),t.accumulatedMoments[n].assign(l);var c=o.sub(l);o.assign(c)}else{var f=t.decayScalar.mul(i).add(t.oneMinusDecay.mul(u.square()));l=t.momentumScalar.mul(s).add(t.c.mul(u).div(f.add(t.epsilonScalar).sqrt())),t.accumulatedMeanSquares[n].assign(f),t.accumulatedMoments[n].assign(l),c=o.sub(l),o.assign(c)}})},r=this;for(var o in e)n(o)},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsilonScalar.dispose(),this.decayScalar.dispose(),this.momentumScalar.dispose(),this.oneMinusDecay.dispose(),null!=this.accumulatedMeanSquares&&Object.keys(this.accumulatedMeanSquares).forEach(function(t){return e.accumulatedMeanSquares[t].dispose()}),null!=this.accumulatedMeanGrads&&this.centered&&Object.keys(this.accumulatedMeanGrads).forEach(function(t){return e.accumulatedMeanGrads[t].dispose()}),null!=this.accumulatedMoments&&Object.keys(this.accumulatedMoments).forEach(function(t){return e.accumulatedMoments[t].dispose()})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSPropOptimizer",t}(_s);ms.register(ks);var As=function(){function e(){}return e.sgd=function(e){return new Ss(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new Ts(e,t,n)},e.rmsprop=function(e,t,n,r,o){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),new ks(e,t,n,r,o)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Cs(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new Es(e,t,n)},e.adamax=function(e,t,n,r,o){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===o&&(o=0),new Is(e,t,n,r,o)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new Os(e,t)},e}(),Ps={sgd:As.sgd,momentum:As.momentum,adadelta:As.adadelta,adagrad:As.adagrad,rmsprop:As.rmsprop,adamax:As.adamax,adam:As.adam};H=xa},crnd:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},tgWb:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return version});var _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("Re/O"),__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function __awaiter(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function __generator(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var aspromise=asPromise;function asPromise(e,t){for(var n=new Array(arguments.length-1),r=0,o=2,i=!0;o<arguments.length;)n[r++]=arguments[o++];return new Promise(function(o,a){n[r]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];o.apply(null,t)}};try{e.apply(t||null,n)}catch(e){i&&(i=!1,a(e))}})}var base64_1=createCommonjsModule(function(e,t){var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),o=new Array(123),i=0;i<64;)o[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;n.encode=function(e,t,n){for(var o,i=null,a=[],s=0,u=0;t<n;){var l=e[t++];switch(u){case 0:a[s++]=r[l>>2],o=(3&l)<<4,u=1;break;case 1:a[s++]=r[o|l>>4],o=(15&l)<<2,u=2;break;case 2:a[s++]=r[o|l>>6],a[s++]=r[63&l],u=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=r[o],a[s++]=61,1===u&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))},n.decode=function(e,t,n){for(var r,i=n,a=0,s=0;s<e.length;){var u=e.charCodeAt(s++);if(61===u&&a>1)break;if(void 0===(u=o[u]))throw Error("invalid encoding");switch(a){case 0:r=u,a=1;break;case 1:t[n++]=r<<2|(48&u)>>4,r=u,a=2;break;case 2:t[n++]=(15&r)<<4|(60&u)>>2,r=u,a=3;break;case 3:t[n++]=(3&r)<<6|u,a=0}}if(1===a)throw Error("invalid encoding");return n-i},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this};var float_1=factory(factory);function factory(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]}function i(e,r,o){t[0]=e,r[o]=n[3],r[o+1]=n[2],r[o+2]=n[1],r[o+3]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function s(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?o:i,e.writeFloatBE=r?i:o,e.readFloatLE=r?a:s,e.readFloatBE=r?s:a}():function(){function t(e,t,n,r){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>3.4028234663852886e38)e((o<<31|2139095040)>>>0,n,r);else if(t<1.1754943508222875e-38)e((o<<31|Math.round(t/1.401298464324817e-45))>>>0,n,r);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),o=2*(r>>31)+1,i=r>>>23&255,a=8388607&r;return 255===i?a?NaN:o*(1/0):0===i?1.401298464324817e-45*o*a:o*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=n.bind(null,readUintLE),e.readFloatBE=n.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3],r[o+4]=n[4],r[o+5]=n[5],r[o+6]=n[6],r[o+7]=n[7]}function i(e,r,o){t[0]=e,r[o]=n[7],r[o+1]=n[6],r[o+2]=n[5],r[o+3]=n[4],r[o+4]=n[3],r[o+5]=n[2],r[o+6]=n[1],r[o+7]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function s(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?o:i,e.writeDoubleBE=r?i:o,e.readDoubleLE=r?a:s,e.readDoubleBE=r?s:a}():function(){function t(e,t,n,r,o,i){var a=r<0?1:0;if(a&&(r=-r),0===r)e(0,o,i+t),e(1/r>0?0:2147483648,o,i+n);else if(isNaN(r))e(0,o,i+t),e(2146959360,o,i+n);else if(r>1.7976931348623157e308)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+n);else{var s;if(r<2.2250738585072014e-308)e((s=r/5e-324)>>>0,o,i+t),e((a<<31|s/4294967296)>>>0,o,i+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(s=r*Math.pow(2,-u))>>>0,o,i+t),e((a<<31|u+1023<<20|1048576*s&1048575)>>>0,o,i+n)}}}function n(e,t,n,r,o){var i=e(r,o+t),a=e(r,o+n),s=2*(a>>31)+1,u=a>>>20&2047,l=4294967296*(1048575&a)+i;return 2047===u?l?NaN:s*(1/0):0===u?5e-324*s*l:s*Math.pow(2,u-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0),e.readDoubleLE=n.bind(null,readUintLE,0,4),e.readDoubleBE=n.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function writeUintBE(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod$$1=eval("quire".replace(/^/,"re"))(moduleName);if(mod$$1&&(mod$$1.length||Object.keys(mod$$1).length))return mod$$1}catch(e){}return null}var utf8_1=createCommonjsModule(function(e,t){var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var r,o=null,i=[],a=0;t<n;)(r=e[t++])<128?i[a++]=r:r>191&&r<224?i[a++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(r>>10),i[a++]=56320+(1023&r)):i[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},n.write=function(e,t,n){for(var r,o,i=n,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(o=e.charCodeAt(a+1)))?(++a,t[n++]=(r=65536+((1023&r)<<10)+(1023&o))>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-i}}),pool_1=pool;function pool(e,t,n){var r=n||8192,o=r>>>1,i=null,a=r;return function(n){if(n<1||n>o)return e(n);a+n>r&&(i=e(r),a=0);var s=t.call(i,a,a+=n);return 7&a&&(a=1+(7|a)),s}}var longbits=LongBits;function LongBits(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new LongBits(n,r)},LongBits.from=function(e){if("number"==typeof e)return LongBits.fromNumber(e);if(minimal.isString(e)){if(!minimal.Long)return LongBits.fromNumber(parseInt(e,10));e=minimal.Long.fromString(e)}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):zero},LongBits.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(e){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(e){return e===zeroHash?zero:new LongBits((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10};var minimal=createCommonjsModule(function(e,t){var n=t;function r(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;++o)void 0!==e[r[o]]&&n||(e[r[o]]=t[r[o]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=aspromise,n.base64=base64_1,n.EventEmitter=eventemitter,n.float=float_1,n.inquire=inquire_1,n.utf8=utf8_1,n.pool=pool_1,n.LongBits=longbits,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isNode=Boolean(commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=commonjsGlobal.dcodeIO&&commonjsGlobal.dcodeIO.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=r,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},n.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}function writeByte(e,t,n){t[n]=255&e}function writeVarint32(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function writeFixed32(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}Writer.create=minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer},Writer.alloc=function(e){return new minimal.Array(e)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Op(e,t,n),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(e){return this._push(minimal.float.writeFloatLE,4,e)},Writer.prototype.double=function(e){return this._push(minimal.float.writeDoubleLE,8,e)};var writeBytes=minimal.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};Writer.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(minimal.isString(e)){var n=Writer.alloc(t=base64.length(e));base64.decode(e,n,0),e=n}return this.uint32(t)._push(writeBytes,t,e)},Writer.prototype.string=function(e){var t=utf8.length(e);return t?this.uint32(t)._push(utf8.write,t,e):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},Writer.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},Writer._configure=function(e){BufferWriter=e};var writer_buffer=BufferWriter$1;(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1;var Buffer=minimal.Buffer;function BufferWriter$1(){writer.call(this)}BufferWriter$1.alloc=function(e){return(BufferWriter$1.alloc=minimal._Buffer_allocUnsafe)(e)};var writeBytesBuffer=Buffer&&Buffer.prototype instanceof Uint8Array&&"set"===Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]};function writeStringBuffer(e,t,n){e.length<40?minimal.utf8.write(e,t,n):t.utf8Write(e,n)}BufferWriter$1.prototype.bytes=function(e){minimal.isString(e)&&(e=minimal._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(writeBytesBuffer,t,e),this},BufferWriter$1.prototype.string=function(e){var t=Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this};var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")},e;function readLongVarint(){var e=new LongBits$2(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=minimal.Buffer?function(e){return(Reader.create=function(e){return minimal.Buffer.isBuffer(e)?new BufferReader(e):create_array(e)})(e)}:create_array,Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(e=4294967295,function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},Reader.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader._configure=function(e){BufferReader=e;var t=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(e){reader.call(this,e)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice),BufferReader$1.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))};var service=Service;function Service(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,n,r,o,i){if(!o)throw TypeError("request must be specified");var a=this;if(!i)return minimal.asPromise(e,a,t,n,r,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,n){if(e)return a.emit("error",e,t),i(e);if(null!==n){if(!(n instanceof r))try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),i(e)}return a.emit("data",n,t),i(null,n)}a.end(!0)})}catch(e){return a.emit("error",e,t),void setTimeout(function(){i(e)},0)}else setTimeout(function(){i(Error("already ended"))},0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule(function(e,t){t.Service=service}),roots={},indexMinimal=createCommonjsModule(function(e,t){var n=t;function r(){n.Reader._configure(n.BufferReader),n.util._configure()}n.build="minimal",n.Writer=writer,n.BufferWriter=writer_buffer,n.Reader=reader,n.BufferReader=reader_buffer,n.util=minimal,n.rpc=rpc_1,n.roots=roots,n.configure=r,n.Writer._configure(n.BufferWriter),r()}),minimal$1=indexMinimal,minimal_1=minimal$1.roots,minimal_2=minimal$1.Reader,minimal_3=minimal$1.util,$Reader=minimal$1.Reader,$util=minimal$1.util,$root=minimal$1.roots.default||(minimal$1.roots.default={});$root.tensorflow=function(){var e,t,n={};return n.Any=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.typeUrl="",e.prototype.value=$util.newBuffer([]),e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.Any;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.typeUrl=e.string();break;case 2:r.value=e.bytes();break;default:e.skipType(7&o)}}return r},e}(),n.DataType=(e={},(t=Object.create(e))[e[0]="DT_INVALID"]=0,t[e[1]="DT_FLOAT"]=1,t[e[2]="DT_DOUBLE"]=2,t[e[3]="DT_INT32"]=3,t[e[4]="DT_UINT8"]=4,t[e[5]="DT_INT16"]=5,t[e[6]="DT_INT8"]=6,t[e[7]="DT_STRING"]=7,t[e[8]="DT_COMPLEX64"]=8,t[e[9]="DT_INT64"]=9,t[e[10]="DT_BOOL"]=10,t[e[11]="DT_QINT8"]=11,t[e[12]="DT_QUINT8"]=12,t[e[13]="DT_QINT32"]=13,t[e[14]="DT_BFLOAT16"]=14,t[e[101]="DT_FLOAT_REF"]=101,t[e[102]="DT_DOUBLE_REF"]=102,t[e[103]="DT_INT32_REF"]=103,t[e[104]="DT_UINT8_REF"]=104,t[e[105]="DT_INT16_REF"]=105,t[e[106]="DT_INT8_REF"]=106,t[e[107]="DT_STRING_REF"]=107,t[e[108]="DT_COMPLEX64_REF"]=108,t[e[109]="DT_INT64_REF"]=109,t[e[110]="DT_BOOL_REF"]=110,t[e[111]="DT_QINT8_REF"]=111,t[e[112]="DT_QUINT8_REF"]=112,t[e[113]="DT_QINT32_REF"]=113,t[e[114]="DT_BFLOAT16_REF"]=114,t),n.TensorShape=function(){function e(e){if(this.dim=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.dim=$util.emptyArray,e.prototype.unknownRank=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.TensorShape;e.pos<n;){var o=e.uint32();switch(o>>>3){case 2:r.dim&&r.dim.length||(r.dim=[]),r.dim.push($root.tensorflow.TensorShape.Dim.decode(e,e.uint32()));break;case 3:r.unknownRank=e.bool();break;default:e.skipType(7&o)}}return r},e.Dim=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.size=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.name="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.TensorShape.Dim;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.size=e.int64();break;case 2:r.name=e.string();break;default:e.skipType(7&o)}}return r},e}(),e}(),n.Tensor=function(){function e(e){if(this.floatVal=[],this.doubleVal=[],this.intVal=[],this.stringVal=[],this.scomplexVal=[],this.int64Val=[],this.boolVal=[],this.uint32Val=[],this.uint64Val=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.dtype=0,e.prototype.tensorShape=null,e.prototype.versionNumber=0,e.prototype.tensorContent=$util.newBuffer([]),e.prototype.floatVal=$util.emptyArray,e.prototype.doubleVal=$util.emptyArray,e.prototype.intVal=$util.emptyArray,e.prototype.stringVal=$util.emptyArray,e.prototype.scomplexVal=$util.emptyArray,e.prototype.int64Val=$util.emptyArray,e.prototype.boolVal=$util.emptyArray,e.prototype.uint32Val=$util.emptyArray,e.prototype.uint64Val=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.Tensor;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.dtype=e.int32();break;case 2:r.tensorShape=$root.tensorflow.TensorShape.decode(e,e.uint32());break;case 3:r.versionNumber=e.int32();break;case 4:r.tensorContent=e.bytes();break;case 5:if(r.floatVal&&r.floatVal.length||(r.floatVal=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.floatVal.push(e.float());else r.floatVal.push(e.float());break;case 6:if(r.doubleVal&&r.doubleVal.length||(r.doubleVal=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.doubleVal.push(e.double());else r.doubleVal.push(e.double());break;case 7:if(r.intVal&&r.intVal.length||(r.intVal=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.intVal.push(e.int32());else r.intVal.push(e.int32());break;case 8:r.stringVal&&r.stringVal.length||(r.stringVal=[]),r.stringVal.push(e.bytes());break;case 9:if(r.scomplexVal&&r.scomplexVal.length||(r.scomplexVal=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.scomplexVal.push(e.float());else r.scomplexVal.push(e.float());break;case 10:if(r.int64Val&&r.int64Val.length||(r.int64Val=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.int64Val.push(e.int64());else r.int64Val.push(e.int64());break;case 11:if(r.boolVal&&r.boolVal.length||(r.boolVal=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.boolVal.push(e.bool());else r.boolVal.push(e.bool());break;case 16:if(r.uint32Val&&r.uint32Val.length||(r.uint32Val=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.uint32Val.push(e.uint32());else r.uint32Val.push(e.uint32());break;case 17:if(r.uint64Val&&r.uint64Val.length||(r.uint64Val=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.uint64Val.push(e.uint64());else r.uint64Val.push(e.uint64());break;default:e.skipType(7&o)}}return r},e}(),n.AttrValue=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.list=null,e.prototype.s=$util.newBuffer([]),e.prototype.i=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.f=0,e.prototype.b=!1,e.prototype.type=0,e.prototype.shape=null,e.prototype.tensor=null,e.prototype.placeholder="",e.prototype.func=null,Object.defineProperty(e.prototype,"value",{get:$util.oneOfGetter(t=["list","s","i","f","b","type","shape","tensor","placeholder","func"]),set:$util.oneOfSetter(t)}),e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.AttrValue;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.list=$root.tensorflow.AttrValue.ListValue.decode(e,e.uint32());break;case 2:r.s=e.bytes();break;case 3:r.i=e.int64();break;case 4:r.f=e.float();break;case 5:r.b=e.bool();break;case 6:r.type=e.int32();break;case 7:r.shape=$root.tensorflow.TensorShape.decode(e,e.uint32());break;case 8:r.tensor=$root.tensorflow.Tensor.decode(e,e.uint32());break;case 9:r.placeholder=e.string();break;case 10:r.func=$root.tensorflow.NameAttrList.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.ListValue=function(){function e(e){if(this.s=[],this.i=[],this.f=[],this.b=[],this.type=[],this.shape=[],this.tensor=[],this.func=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.s=$util.emptyArray,e.prototype.i=$util.emptyArray,e.prototype.f=$util.emptyArray,e.prototype.b=$util.emptyArray,e.prototype.type=$util.emptyArray,e.prototype.shape=$util.emptyArray,e.prototype.tensor=$util.emptyArray,e.prototype.func=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.AttrValue.ListValue;e.pos<n;){var o=e.uint32();switch(o>>>3){case 2:r.s&&r.s.length||(r.s=[]),r.s.push(e.bytes());break;case 3:if(r.i&&r.i.length||(r.i=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.i.push(e.int64());else r.i.push(e.int64());break;case 4:if(r.f&&r.f.length||(r.f=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.f.push(e.float());else r.f.push(e.float());break;case 5:if(r.b&&r.b.length||(r.b=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.b.push(e.bool());else r.b.push(e.bool());break;case 6:if(r.type&&r.type.length||(r.type=[]),2==(7&o))for(i=e.uint32()+e.pos;e.pos<i;)r.type.push(e.int32());else r.type.push(e.int32());break;case 7:r.shape&&r.shape.length||(r.shape=[]),r.shape.push($root.tensorflow.TensorShape.decode(e,e.uint32()));break;case 8:r.tensor&&r.tensor.length||(r.tensor=[]),r.tensor.push($root.tensorflow.Tensor.decode(e,e.uint32()));break;case 9:r.func&&r.func.length||(r.func=[]),r.func.push($root.tensorflow.NameAttrList.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e}(),n.NameAttrList=function(){function e(e){if(this.attr={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.attr=$util.emptyObject,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n,r=void 0===t?e.len:e.pos+t,o=new $root.tensorflow.NameAttrList;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.name=e.string();break;case 2:e.skip().pos++,o.attr===$util.emptyObject&&(o.attr={}),n=e.string(),e.pos++,o.attr[n]=$root.tensorflow.AttrValue.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},e}(),n.NodeDef=function(){function e(e){if(this.input=[],this.attr={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.op="",e.prototype.input=$util.emptyArray,e.prototype.device="",e.prototype.attr=$util.emptyObject,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n,r=void 0===t?e.len:e.pos+t,o=new $root.tensorflow.NodeDef;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.name=e.string();break;case 2:o.op=e.string();break;case 3:o.input&&o.input.length||(o.input=[]),o.input.push(e.string());break;case 4:o.device=e.string();break;case 5:e.skip().pos++,o.attr===$util.emptyObject&&(o.attr={}),n=e.string(),e.pos++,o.attr[n]=$root.tensorflow.AttrValue.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},e}(),n.VersionDef=function(){function e(e){if(this.badConsumers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.producer=0,e.prototype.minConsumer=0,e.prototype.badConsumers=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.VersionDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.producer=e.int32();break;case 2:r.minConsumer=e.int32();break;case 3:if(r.badConsumers&&r.badConsumers.length||(r.badConsumers=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.badConsumers.push(e.int32());else r.badConsumers.push(e.int32());break;default:e.skipType(7&o)}}return r},e}(),n.GraphDef=function(){function e(e){if(this.node=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.node=$util.emptyArray,e.prototype.versions=null,e.prototype.library=null,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.GraphDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push($root.tensorflow.NodeDef.decode(e,e.uint32()));break;case 4:r.versions=$root.tensorflow.VersionDef.decode(e,e.uint32());break;case 2:r.library=$root.tensorflow.FunctionDefLibrary.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e}(),n.CollectionDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.nodeList=null,e.prototype.bytesList=null,e.prototype.int64List=null,e.prototype.floatList=null,e.prototype.anyList=null,Object.defineProperty(e.prototype,"kind",{get:$util.oneOfGetter(t=["nodeList","bytesList","int64List","floatList","anyList"]),set:$util.oneOfSetter(t)}),e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.CollectionDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.nodeList=$root.tensorflow.CollectionDef.NodeList.decode(e,e.uint32());break;case 2:r.bytesList=$root.tensorflow.CollectionDef.BytesList.decode(e,e.uint32());break;case 3:r.int64List=$root.tensorflow.CollectionDef.Int64List.decode(e,e.uint32());break;case 4:r.floatList=$root.tensorflow.CollectionDef.FloatList.decode(e,e.uint32());break;case 5:r.anyList=$root.tensorflow.CollectionDef.AnyList.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.NodeList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.CollectionDef.NodeList;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push(e.string());break;default:e.skipType(7&o)}}return r},e}(),e.BytesList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.CollectionDef.BytesList;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push(e.bytes());break;default:e.skipType(7&o)}}return r},e}(),e.Int64List=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.CollectionDef.Int64List;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:if(r.value&&r.value.length||(r.value=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.value.push(e.int64());else r.value.push(e.int64());break;default:e.skipType(7&o)}}return r},e}(),e.FloatList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.CollectionDef.FloatList;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:if(r.value&&r.value.length||(r.value=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)r.value.push(e.float());else r.value.push(e.float());break;default:e.skipType(7&o)}}return r},e}(),e.AnyList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.CollectionDef.AnyList;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push($root.tensorflow.Any.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e}(),n.SaverDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t,n;return e.prototype.filenameTensorName="",e.prototype.saveTensorName="",e.prototype.restoreOpName="",e.prototype.maxToKeep=0,e.prototype.sharded=!1,e.prototype.keepCheckpointEveryNHours=0,e.prototype.version=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.SaverDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.filenameTensorName=e.string();break;case 2:r.saveTensorName=e.string();break;case 3:r.restoreOpName=e.string();break;case 4:r.maxToKeep=e.int32();break;case 5:r.sharded=e.bool();break;case 6:r.keepCheckpointEveryNHours=e.float();break;case 7:r.version=e.int32();break;default:e.skipType(7&o)}}return r},e.CheckpointFormatVersion=(t={},(n=Object.create(t))[t[0]="LEGACY"]=0,n[t[1]="V1"]=1,n[t[2]="V2"]=2,n),e}(),n.TensorInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.name="",e.prototype.cooSparse=null,e.prototype.dtype=0,e.prototype.tensorShape=null,Object.defineProperty(e.prototype,"encoding",{get:$util.oneOfGetter(t=["name","cooSparse"]),set:$util.oneOfSetter(t)}),e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.TensorInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 4:r.cooSparse=$root.tensorflow.TensorInfo.CooSparse.decode(e,e.uint32());break;case 2:r.dtype=e.int32();break;case 3:r.tensorShape=$root.tensorflow.TensorShape.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.CooSparse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.valuesTensorName="",e.prototype.indicesTensorName="",e.prototype.denseShapeTensorName="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.TensorInfo.CooSparse;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.valuesTensorName=e.string();break;case 2:r.indicesTensorName=e.string();break;case 3:r.denseShapeTensorName=e.string();break;default:e.skipType(7&o)}}return r},e}(),e}(),n.SignatureDef=function(){function e(e){if(this.inputs={},this.outputs={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.inputs=$util.emptyObject,e.prototype.outputs=$util.emptyObject,e.prototype.methodName="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n,r=void 0===t?e.len:e.pos+t,o=new $root.tensorflow.SignatureDef;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:e.skip().pos++,o.inputs===$util.emptyObject&&(o.inputs={}),n=e.string(),e.pos++,o.inputs[n]=$root.tensorflow.TensorInfo.decode(e,e.uint32());break;case 2:e.skip().pos++,o.outputs===$util.emptyObject&&(o.outputs={}),n=e.string(),e.pos++,o.outputs[n]=$root.tensorflow.TensorInfo.decode(e,e.uint32());break;case 3:o.methodName=e.string();break;default:e.skipType(7&i)}}return o},e}(),n.AssetFileDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.tensorInfo=null,e.prototype.filename="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.AssetFileDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.tensorInfo=$root.tensorflow.TensorInfo.decode(e,e.uint32());break;case 2:r.filename=e.string();break;default:e.skipType(7&o)}}return r},e}(),n.OpDef=function(){function e(e){if(this.inputArg=[],this.outputArg=[],this.attr=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.inputArg=$util.emptyArray,e.prototype.outputArg=$util.emptyArray,e.prototype.attr=$util.emptyArray,e.prototype.deprecation=null,e.prototype.summary="",e.prototype.description="",e.prototype.isCommutative=!1,e.prototype.isAggregate=!1,e.prototype.isStateful=!1,e.prototype.allowsUninitializedInput=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.OpDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 2:r.inputArg&&r.inputArg.length||(r.inputArg=[]),r.inputArg.push($root.tensorflow.OpDef.ArgDef.decode(e,e.uint32()));break;case 3:r.outputArg&&r.outputArg.length||(r.outputArg=[]),r.outputArg.push($root.tensorflow.OpDef.ArgDef.decode(e,e.uint32()));break;case 4:r.attr&&r.attr.length||(r.attr=[]),r.attr.push($root.tensorflow.OpDef.AttrDef.decode(e,e.uint32()));break;case 8:r.deprecation=$root.tensorflow.OpDef.OpDeprecation.decode(e,e.uint32());break;case 5:r.summary=e.string();break;case 6:r.description=e.string();break;case 18:r.isCommutative=e.bool();break;case 16:r.isAggregate=e.bool();break;case 17:r.isStateful=e.bool();break;case 19:r.allowsUninitializedInput=e.bool();break;default:e.skipType(7&o)}}return r},e.ArgDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.description="",e.prototype.type=0,e.prototype.typeAttr="",e.prototype.numberAttr="",e.prototype.typeListAttr="",e.prototype.isRef=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.OpDef.ArgDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 2:r.description=e.string();break;case 3:r.type=e.int32();break;case 4:r.typeAttr=e.string();break;case 5:r.numberAttr=e.string();break;case 6:r.typeListAttr=e.string();break;case 16:r.isRef=e.bool();break;default:e.skipType(7&o)}}return r},e}(),e.AttrDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.type="",e.prototype.defaultValue=null,e.prototype.description="",e.prototype.hasMinimum=!1,e.prototype.minimum=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.allowedValues=null,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.OpDef.AttrDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 2:r.type=e.string();break;case 3:r.defaultValue=$root.tensorflow.AttrValue.decode(e,e.uint32());break;case 4:r.description=e.string();break;case 5:r.hasMinimum=e.bool();break;case 6:r.minimum=e.int64();break;case 7:r.allowedValues=$root.tensorflow.AttrValue.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e}(),e.OpDeprecation=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.explanation="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.OpDef.OpDeprecation;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.version=e.int32();break;case 2:r.explanation=e.string();break;default:e.skipType(7&o)}}return r},e}(),e}(),n.OpList=function(){function e(e){if(this.op=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.op=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.OpList;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.op&&r.op.length||(r.op=[]),r.op.push($root.tensorflow.OpDef.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),n.MetaGraphDef=function(){function e(e){if(this.collectionDef={},this.signatureDef={},this.assetFileDef=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.metaInfoDef=null,e.prototype.graphDef=null,e.prototype.saverDef=null,e.prototype.collectionDef=$util.emptyObject,e.prototype.signatureDef=$util.emptyObject,e.prototype.assetFileDef=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n,r=void 0===t?e.len:e.pos+t,o=new $root.tensorflow.MetaGraphDef;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.metaInfoDef=$root.tensorflow.MetaGraphDef.MetaInfoDef.decode(e,e.uint32());break;case 2:o.graphDef=$root.tensorflow.GraphDef.decode(e,e.uint32());break;case 3:o.saverDef=$root.tensorflow.SaverDef.decode(e,e.uint32());break;case 4:e.skip().pos++,o.collectionDef===$util.emptyObject&&(o.collectionDef={}),n=e.string(),e.pos++,o.collectionDef[n]=$root.tensorflow.CollectionDef.decode(e,e.uint32());break;case 5:e.skip().pos++,o.signatureDef===$util.emptyObject&&(o.signatureDef={}),n=e.string(),e.pos++,o.signatureDef[n]=$root.tensorflow.SignatureDef.decode(e,e.uint32());break;case 6:o.assetFileDef&&o.assetFileDef.length||(o.assetFileDef=[]),o.assetFileDef.push($root.tensorflow.AssetFileDef.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return o},e.MetaInfoDef=function(){function e(e){if(this.tags=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.metaGraphVersion="",e.prototype.strippedOpList=null,e.prototype.anyInfo=null,e.prototype.tags=$util.emptyArray,e.prototype.tensorflowVersion="",e.prototype.tensorflowGitVersion="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.MetaGraphDef.MetaInfoDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.metaGraphVersion=e.string();break;case 2:r.strippedOpList=$root.tensorflow.OpList.decode(e,e.uint32());break;case 3:r.anyInfo=$root.tensorflow.Any.decode(e,e.uint32());break;case 4:r.tags&&r.tags.length||(r.tags=[]),r.tags.push(e.string());break;case 5:r.tensorflowVersion=e.string();break;case 6:r.tensorflowGitVersion=e.string();break;default:e.skipType(7&o)}}return r},e}(),e}(),n.SavedModel=function(){function e(e){if(this.metaGraphs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.savedModelSchemaVersion=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.metaGraphs=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.SavedModel;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.savedModelSchemaVersion=e.int64();break;case 2:r.metaGraphs&&r.metaGraphs.length||(r.metaGraphs=[]),r.metaGraphs.push($root.tensorflow.MetaGraphDef.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),n.FunctionDefLibrary=function(){function e(e){if(this.function=[],this.gradient=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.function=$util.emptyArray,e.prototype.gradient=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.FunctionDefLibrary;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.function&&r.function.length||(r.function=[]),r.function.push($root.tensorflow.FunctionDef.decode(e,e.uint32()));break;case 2:r.gradient&&r.gradient.length||(r.gradient=[]),r.gradient.push($root.tensorflow.GradientDef.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),n.FunctionDef=function(){function e(e){if(this.attr={},this.nodeDef=[],this.ret={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.signature=null,e.prototype.attr=$util.emptyObject,e.prototype.nodeDef=$util.emptyArray,e.prototype.ret=$util.emptyObject,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n,r=void 0===t?e.len:e.pos+t,o=new $root.tensorflow.FunctionDef;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.signature=$root.tensorflow.OpDef.decode(e,e.uint32());break;case 5:e.skip().pos++,o.attr===$util.emptyObject&&(o.attr={}),n=e.string(),e.pos++,o.attr[n]=$root.tensorflow.AttrValue.decode(e,e.uint32());break;case 3:o.nodeDef&&o.nodeDef.length||(o.nodeDef=[]),o.nodeDef.push($root.tensorflow.NodeDef.decode(e,e.uint32()));break;case 4:e.skip().pos++,o.ret===$util.emptyObject&&(o.ret={}),n=e.string(),e.pos++,o.ret[n]=e.string();break;default:e.skipType(7&i)}}return o},e}(),n.GradientDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.functionName="",e.prototype.gradientFunc="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new $root.tensorflow.GradientDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.functionName=e.string();break;case 2:r.gradientFunc=e.string();break;default:e.skipType(7&o)}}return r},e}(),n}();var compiled_api=$root,compiled_api_1=compiled_api.tensorflow;function getParamValue(e,t,n,r){var o=t.params[e];if(o&&void 0!==o.inputIndex){if("tensor"===o.type)return getTensor(t.inputNames[o.inputIndex],n,r);if("tensors"===o.type)return(0===o.inputIndex?0===o.inputParamLength?t.inputNames:t.inputNames.slice(o.inputIndex,-o.inputParamLength):t.inputNames.splice(o.inputIndex)).map(function(e){return getTensor(e,n,r)});var i=Array.prototype.slice.call(getTensor(t.inputNames.slice(o.inputIndex)[0],n,r).dataSync());return"number"===o.type?i[0]:i}return o&&o.value}function getTensor(e,t,n){var r=parseNodeName(e),o=r[0],i=r[1],a=n.currentContextIds.find(function(e){return!!t[getNodeNameWithContextId(o,e)]});return void 0!==a?t[getNodeNameWithContextId(o,a)][i]:void 0}function getNodeNameAndIndex(e,t){var n=parseNodeName(e),r=n[1];return[getNodeNameWithContextId(n[0],t&&t.currentContextId),r]}function getNodeNameWithContextId(e,t){return t?e+"-"+t:e}function parseNodeName(e){var t=e.lastIndexOf(":");return-1===t?[e,0]:[e.substring(0,t),Number(e.substring(t+1))]}function split$1(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}var json=[{tfOpName:"Add",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",dlOpName:"addN",category:"arithmetic",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",dlOpName:"sub",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",dlOpName:"floorDiv",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",dlOpName:"mul",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",dlOpName:"maximum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Minimum",dlOpName:"minimum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Pow",dlOpName:"pow",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",dlOpName:"squaredDifference",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",dlOpName:"mod",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],arithmetic=Object.freeze({json:json}),json$1=[{tfOpName:"Abs",dlOpName:"abs",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",dlOpName:"acos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",dlOpName:"asin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"atan",dlOpName:"atan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",dlOpName:"ceil",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"clip_value_min",dlParamName:"clipValueMin",type:"number"},{tfParamName:"clip_value_max",dlParamName:"clipValueMax",type:"number"}]},{tfOpName:"Cos",dlOpName:"cos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",dlOpName:"cosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",dlOpName:"elu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",dlOpName:"exp",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",dlOpName:"floor",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",dlOpName:"log",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",dlOpName:"neg",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",dlOpName:"relu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{dlParamName:"clipValueMin",type:"number",defaultValue:0},{dlParamName:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",dlOpName:"selu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",dlOpName:"sigmoid",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",dlOpName:"sin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",dlOpName:"sinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",dlOpName:"sqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",dlOpName:"rsqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",dlOpName:"square",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",dlOpName:"tan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",dlOpName:"tanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",dlOpName:"sign",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",dlOpName:"round",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",dlOpName:"expm1",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",dlOpName:"log1p",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",dlOpName:"softplus",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",dlOpName:"asinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",dlOpName:"acosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",dlOpName:"atanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",dlOpName:"erf",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],basicMath=Object.freeze({json:json$1}),json$2=[{tfOpName:"LoopCond",dlOpName:"loopCond",category:"control",params:[{tfInputIndex:0,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Switch",dlOpName:"switch",category:"control",params:[{tfInputIndex:0,dlParamName:"data",type:"tensor"},{tfInputIndex:1,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Merge",dlOpName:"merge",category:"control",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"}]},{tfOpName:"Enter",dlOpName:"enter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"frame_name",dlParamName:"frameName",type:"string"},{tfParamName:"is_constant",dlParamName:"isConstant",type:"bool"}]},{tfOpName:"Exit",dlOpName:"exit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",dlOpName:"nextIteration",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",dlOpName:"tensorArray",category:"control",params:[{tfInputIndex:0,dlParamName:"size",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"},{tfParamName:"dynamic_size",dlParamName:"dynamicSize",type:"bool"},{tfParamName:"clear_after_read",dlParamName:"clearAfterRead",type:"bool"},{tfParamName:"identical_element_shapes",dlParamName:"identicalElementShapes",type:"bool"},{tfParamName:"tensor_array_name",dlParamName:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",dlOpName:"tensorArrayWrite",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"tensor",type:"tensor"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",dlOpName:"tensorArrayRead",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",dlOpName:"tensorArrayGather",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",dlOpName:"tensorArrayScatter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"tensor",type:"tensor"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",dlOpName:"tensorArrayConcat",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape_except0",dlParamName:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",dlOpName:"tensorArraySplit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"tensor",type:"tensor"},{tfInputIndex:2,dlParamName:"lengths",type:"number[]"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",dlOpName:"tensorArraySize",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",dlOpName:"tensorArrayClose",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"}]}],control=Object.freeze({json:json$2}),json$3=[{tfOpName:"AvgPool",dlOpName:"avgPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",dlOpName:"maxPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",dlOpName:"conv1d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"stride",dlParamName:"stride",type:"number"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NWC"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"dilation",dlParamName:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",dlOpName:"conv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"useCudnnOnGpu",dlParamName:"useCudnnOnGpu",type:"bool"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"Conv2DBackpropInput",dlOpName:"conv2dTranspose",category:"convolution",params:[{tfInputIndex:2,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfInputIndex:0,dlParamName:"outputShape",type:"number[]"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]}],convolution=Object.freeze({json:json$3}),json$4=[{tfOpName:"Fill",dlOpName:"fill",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfInputIndex:1,dlParamName:"value",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",dlOpName:"linspace",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"num",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",dlOpName:"oneHot",category:"creation",params:[{tfInputIndex:0,dlParamName:"indices",type:"tensor"},{tfInputIndex:1,dlParamName:"depth",type:"number"},{tfInputIndex:2,dlParamName:"onValue",type:"number",defaultValue:1},{tfInputIndex:3,dlParamName:"offValue",type:"number",defaultValue:0},{tfParamName:"axis",dlParamName:"axis",type:"number",notSupported:!0},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",dlOpName:"ones",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",dlOpName:"onesLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",dlOpName:"randomUniform",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"minval",dlParamName:"minval",type:"number",defaultValue:0},{tfParamName:"maxval",dlParamName:"maxval",type:"number",defaultValue:1},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"seed",dlParamName:"seed",type:"number",defaultValue:0},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",dlOpName:"range",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"step",type:"number",defaultValue:0},{tfParamName:"Tidx",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"truncatedNormal",dlOpName:"truncatedNormal",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"means",dlParamName:"mean",type:"number",defaultValue:0},{tfParamName:"stddev",dlParamName:"stdDev",type:"number",defaultValue:1},{tfParamName:"seed",dlParamName:"seed",type:"number"},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",dlOpName:"zeros",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",dlOpName:"zerosLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]}],creation=Object.freeze({json:json$4}),json$5=[{tfOpName:"NonMaxSuppressionV2",dlOpName:"nonMaxSuppression",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"boxes",type:"tensor"},{tfInputIndex:1,dlParamName:"scores",type:"tensor"},{tfInputIndex:2,dlParamName:"maxOutputSize",type:"number"},{tfInputIndex:3,dlParamName:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",dlOpName:"nonMaxSuppression",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"boxes",type:"tensor"},{tfInputIndex:1,dlParamName:"scores",type:"tensor"},{tfInputIndex:2,dlParamName:"maxOutputSize",type:"number"},{tfInputIndex:3,dlParamName:"iouThreshold",type:"number"},{tfInputIndex:4,dlParamName:"scoreThreshold",type:"number"}]},{tfOpName:"Where",dlOpName:"whereAsync",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"condition",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],dynamic=Object.freeze({json:json$5}),json$6=[{tfOpName:"TopKV2",dlOpName:"topK",category:"evaluation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"k",type:"number"},{tfParamName:"sorted",dlParamName:"sorted",type:"bool"}]}],evaluation=Object.freeze({json:json$6}),json$7=[{tfOpName:"PlaceholderWithDefault",dlOpName:"placeholder",category:"graph",params:[{tfInputIndex:0,dlParamName:"default",type:"tensor"},{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",dlOpName:"placeholder",category:"graph",params:[{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Const",dlOpName:"const",category:"graph"},{tfOpName:"Identity",dlOpName:"identity",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Snapshot",dlOpName:"snapshot",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Rank",dlOpName:"rank",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Size",dlOpName:"size",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Shape",dlOpName:"shape",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Print",dlOpName:"print",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfInputParamLength:1,dlParamName:"data",type:"tensors"},{tfParamName:"message",dlParamName:"message",type:"string"},{tfParamName:"first_n",dlParamName:"firstN",type:"number",notSupprted:!0},{tfParamName:"summarize",dlParamName:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",dlOpName:"noop",category:"graph",params:[]},{tfOpName:"StopGradient",dlOpName:"stopGradient",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",dlOpName:"fakeQuantWithMinMaxVars",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"min",dlParamName:"min",type:"number"},{tfParamName:"max",dlParamName:"max",type:"number"}]}],graph=Object.freeze({json:json$7}),json$8=[{tfOpName:"ResizeBilinear",dlOpName:"resizeBilinear",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",dlOpName:"resizeNearestNeighbor",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],image$1=Object.freeze({json:json$8}),json$9=[{tfOpName:"Equal",dlOpName:"equal",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",dlOpName:"notEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",dlOpName:"greater",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",dlOpName:"greaterEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",dlOpName:"less",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",dlOpName:"lessEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",dlOpName:"logicalAnd",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",dlOpName:"logicalNot",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",dlOpName:"logicalOr",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",dlOpName:"where",category:"logical",params:[{tfInputIndex:0,dlParamName:"condition",type:"tensor"},{tfInputIndex:1,dlParamName:"a",type:"tensor"},{tfInputIndex:2,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],logical=Object.freeze({json:json$9}),json$10=[{tfOpName:"MatMul",dlOpName:"matMul",category:"matrices",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"transpose_a",dlParamName:"transposeA",type:"bool",defaultValue:!1},{tfParamName:"transpose_b",dlParamName:"transposeB",type:"bool",defaultValue:!1},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",dlOpName:"transpose",category:"matrices",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"perm",dlParamName:"perm",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],matrices=Object.freeze({json:json$10}),json$11=[{tfOpName:"FusedBatchNorm",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",dlOpName:"localResponseNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"depth_radius",dlParamName:"radius",type:"number",defaultValue:5},{tfParamName:"bias",dlParamName:"bias",type:"number",defaultValue:1},{tfParamName:"alpha",dlParamName:"alpha",type:"number",defaultValue:1},{tfParamName:"beta",dlParamName:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",dlOpName:"softmax",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]}],normalization=Object.freeze({json:json$11}),json$12=[{tfOpName:"Max",dlOpName:"max",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Mean",dlOpName:"mean",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Min",dlOpName:"min",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Sum",dlOpName:"sum",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"All",dlOpName:"all",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Any",dlOpName:"any",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",dlOpName:"argMax",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ArgMin",dlOpName:"argMin",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]}],reduction=Object.freeze({json:json$12}),json$13=[{tfOpName:"ConcatV2",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:-1,dlParamName:"axis",type:"number"}]},{tfOpName:"Concat",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:1,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:0,dlParamName:"axis",type:"number"}]},{tfOpName:"GatherV2",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"validate_indices",dlParamName:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ReverseV2",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"Slice",dlOpName:"slice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"size",type:"number[]"}]},{tfOpName:"StridedSlice",dlOpName:"stridedSlice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"end",type:"number[]"},{tfInputIndex:3,dlParamName:"strides",type:"number[]"},{tfParamName:"begin_mask",dlParamName:"beginMask",type:"number",defaultValue:0},{tfParamName:"end_mask",dlParamName:"endMask",type:"number",defaultValue:0},{tfParamName:"new_axis_mask",dlParamName:"newAxisMask",type:"number",defaultValue:0},{tfParamName:"ellipsis_mask",dlParamName:"ellipsisMask",type:"number",defaultValue:0},{tfParamName:"shrink_axis_mask",dlParamName:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",dlOpName:"stack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",dlOpName:"unstack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"num",dlParamName:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",dlOpName:"tile",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"reps",type:"number[]"}]},{tfOpName:"Split",dlOpName:"split",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"axis",type:"number",defaultValue:0},{tfInputIndex:1,dlParamName:"x",type:"tensor"},{tfParamName:"num_split",dlParamName:"numOrSizeSplits",type:"number",defaultValue:1}]}],sliceJoin=Object.freeze({json:json$13}),json$14=[{tfOpName:"Cast",dlOpName:"cast",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"SrcT",dlParamName:"sdtype",type:"dtype",notSupported:!0},{tfParamName:"DstT",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",dlOpName:"expandDims",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfParamNameDeprecated:"dim",dlParamName:"axis",type:"number"}]},{tfOpName:"Pad",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfParamName:"constant_value",dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfInputIndex:2,dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",dlOpName:"reshape",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"shape",type:"number[]"}]},{tfOpName:"Squeeze",dlOpName:"squeeze",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"axis",tfParamNameDeprecated:"squeeze_dims",dlParamName:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",dlOpName:"spaceToBatchND",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"blockShape",type:"number[]"},{tfInputIndex:2,dlParamName:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",dlOpName:"batchToSpaceND",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"blockShape",type:"number[]"},{tfInputIndex:2,dlParamName:"crops",type:"number[]"}]}],transformation=Object.freeze({json:json$14}),CONTROL_FLOW_OPS=["Switch","Merge","Enter","Exit","NextIteration"],DYNAMIC_SHAPE_OPS=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"],OperationMapper=function(){function e(){var e=[].concat.apply([],[arithmetic,basicMath,control,convolution,creation,dynamic,evaluation,logical,image$1,graph,matrices,normalization,reduction,sliceJoin,transformation].map(function(e){return e.json}));this.opMappers=e.reduce(function(e,t){return e[t.tfOpName]=t,e},{})}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.isControlFlow=function(e){return CONTROL_FLOW_OPS.some(function(t){return t===e.op})},e.prototype.isDynamicShape=function(e){return DYNAMIC_SHAPE_OPS.some(function(t){return t===e.op})},e.prototype.transformGraph=function(e){var t=this,n=!1,r=!1,o=[],i=e.node.reduce(function(e,i){return e[i.name]=t.mapNode(i),t.isControlFlow(i)&&(n=!0),t.isDynamicShape(i)&&(r=!0),"Placeholder"===i.op&&o.push(e[i.name]),e},{}),a=[],s=[];return Object.keys(i).forEach(function(e){var t=i[e];t.inputNames.forEach(function(e){var n=getNodeNameAndIndex(e)[0];t.inputs.push(i[n]),i[n].children.push(t)}),0===t.inputs.length&&a.push(t)}),Object.keys(i).forEach(function(e){var t=i[e];0===t.children.length&&s.push(t)}),{nodes:i,inputs:a,outputs:s,placeholders:o,withControlFlow:n,withDynamicShape:r}},e.prototype.mapNode=function(e){var t=this,n=this.opMappers[e.op];if(void 0===n)throw new Error("Tensorflow Op is not supported: "+e.op);var r={name:e.name,op:n.dlOpName,category:n.category,inputNames:(e.input||[]).map(function(e){return e.startsWith("^")?e.substr(1):e}),inputs:[],children:[],params:{}};return n.params&&(r.params=n.params.reduce(function(n,r){var o=r.tfInputIndex,i=r.tfInputParamLength,a=r.type,s=void 0;if(void 0===o)switch(r.type){case"string":void 0===(s=t.getStringParam(e.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=t.getStringParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"number":void 0===(s=t.getNumberParam(e.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=t.getNumberParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"number[]":void 0===(s=t.getNumericArrayParam(e.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=t.getNumericArrayParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"bool":void 0===(s=t.getBoolParam(e.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=t.getBoolParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"shape":void 0===(s=t.getTensorShapeParam(e.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=t.getTensorShapeParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"dtype":void 0===(s=t.getDtypeParam(e.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=t.getDtypeParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+r.type+" for op: "+e.op)}return n[r.dlParamName]={value:s,inputIndex:o,type:a,inputParamLength:i},n},{})),r},e.prototype.getStringParam=function(e,t,n,r){void 0===r&&(r=!1);var o=e[t];if(void 0!==o){var i=String.fromCharCode.apply(null,o.s);return r?i:i.toLowerCase()}return n},e.prototype.getBoolParam=function(e,t,n){var r=e[t];return r?r.b:n},e.prototype.getNumberParam=function(e,t,n){var r=e[t],o=r?r[r.value]:n;return"number"==typeof o?o:o.toInt()},e.prototype.getDtypeParam=function(e,t,n){var r=e[t];if(r&&r.type)switch(r.type){case compiled_api_1.DataType.DT_FLOAT:return"float32";case compiled_api_1.DataType.DT_INT32:return"int32";case compiled_api_1.DataType.DT_BOOL:return"bool";default:return n}return n},e.prototype.getTensorShapeParam=function(e,t,n){var r=e[t];return r&&r.shape?r.shape.dim.map(function(e){return"number"==typeof e.size?e.size:e.size.toInt()}):n},e.prototype.getNumericArrayParam=function(e,t,n){var r=e[t];return r?(r.list.f&&r.list.f.length?r.list.f:r.list.i).map(function(e){return"number"==typeof e?e:e.toInt()}):n},e}(),executeOp=function(e,t,n){switch(e.op){case"add":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.f)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"addN":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.g)(getParamValue("tensors",e,t,n))];case"mod":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ta)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"mul":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Wa)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"div":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.K)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"floorDiv":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.U)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"sub":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Mb)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"minimum":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Sa)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"maximum":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Pa)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"pow":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.fb)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"squaredDifference":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Hb)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$1=function(e,t,n){switch(e.op){case"abs":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.c)(getParamValue("x",e,t,n))];case"acos":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.d)(getParamValue("x",e,t,n))];case"acosh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.e)(getParamValue("x",e,t,n))];case"asin":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.l)(getParamValue("x",e,t,n))];case"asinh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.m)(getParamValue("x",e,t,n))];case"atan":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.n)(getParamValue("x",e,t,n))];case"atanh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.o)(getParamValue("x",e,t,n))];case"ceil":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.w)(getParamValue("x",e,t,n))];case"cos":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.G)(getParamValue("x",e,t,n))];case"cosh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.H)(getParamValue("x",e,t,n))];case"elu":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.L)(getParamValue("x",e,t,n))];case"erf":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.N)(getParamValue("x",e,t,n))];case"exp":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.O)(getParamValue("x",e,t,n))];case"expm1":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Q)(getParamValue("x",e,t,n))];case"floor":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.T)(getParamValue("x",e,t,n))];case"log":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ha)(getParamValue("x",e,t,n))];case"log1p":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ia)(getParamValue("x",e,t,n))];case"neg":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ya)(getParamValue("x",e,t,n))];case"reciprocal":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.jb)(getParamValue("x",e,t,n))];case"relu":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.kb)(getParamValue("x",e,t,n))];case"round":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nb)(getParamValue("x",e,t,n))];case"selu":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.pb)(getParamValue("x",e,t,n))];case"sigmoid":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.sb)(getParamValue("x",e,t,n))];case"sin":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ub)(getParamValue("x",e,t,n))];case"sign":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.tb)(getParamValue("x",e,t,n))];case"sinh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vb)(getParamValue("x",e,t,n))];case"softplus":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Cb)(getParamValue("x",e,t,n))];case"sqrt":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Fb)(getParamValue("x",e,t,n))];case"square":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Gb)(getParamValue("x",e,t,n))];case"tanh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Pb)(getParamValue("x",e,t,n))];case"tan":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ob)(getParamValue("x",e,t,n))];case"clipByValue":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.x)(getParamValue("x",e,t,n),getParamValue("clipValueMin",e,t,n),getParamValue("clipValueMax",e,t,n))];case"rsqrt":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.K)(Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ob)(1,"float32"),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Fb)(getTensor(e.inputNames[0],t,n)))];default:throw TypeError("Node type "+e.op+" is not implemented")}},TensorArray=function(){function e(t,n,r,o,i,a,s){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=e.nextId++}return Object.defineProperty(e.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),e.prototype.clearAndClose=function(){this.tensors.forEach(function(e){return e.tensor.dispose()}),this.tensors=[],this.closed_=!0},e.prototype.size=function(){return this.tensors.length},e.prototype.read=function(e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||e>=this.tensors.length)throw new Error("Tried to read from index "+e+", but array size is: "+this.tensors.length);var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+e+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor},e.prototype.readMany=function(e){var t=this;return e.map(function(e){return t.read(e)})},e.prototype.write=function(e,t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index "+e+", but array is not resizeable and size is: "+this.maxSize);var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+",\n          because the value dtype is "+t.dtype+", but TensorArray dtype is "+this.dtype+".");if(0===this.size()&&0===this.elementShape.length&&(this.elementShape=t.shape),_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ac.assertShapesMatch(this.elementShape,t.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+e+"."),n&&n.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been read.");if(n&&n.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been written.");n.tensor=t,n.written=!0,this.tensors[e]=n},e.prototype.writeMany=function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+e.length+" is not the same as tensors size: "+t.length+".");e.forEach(function(e,r){return n.write(e,t[r])})},e.prototype.gather=function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+t);if(!e){e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)([],[0].concat(this.elementShape));var r=this.readMany(e);return _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ac.assertShapesMatch(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Jb)(r,0)},e.prototype.concat=function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+e);if(0===this.size())return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ac.assertShapesMatch(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+r[0].shape+")"),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.y)(r,0)},e.prototype.scatter=function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+e.length+" vs. "+t.shape[0]);var n=Math.max.apply(Math,e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size ("+n+"  vs. "+this.maxSize+")");this.writeMany(e,Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Zb)(t,0))},e.prototype.split=function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);var r=0,o=e.map(function(e){return r+=e});if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+r+", and tensor's shape is: "+t.shape);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+e.length+"), and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,a=[];Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Tb)(function(){t=t.reshape([1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:o[s-1],0],l=[1,e[s],i];a[s]=Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.wb)(t,u,l).reshape(n.elementShape)}return a});for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,a)},e.nextId=0,e}();function executeOp$2(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,f,p,h,d,m,g,y,v,b,_,w,x,N,E,O,C,I,S,T,k,A,P,M,D,R,j,L;return __generator(this,function(V){switch(V.label){case 0:switch(e.op){case"loopCond":return[3,1];case"switch":return[3,2];case"merge":return[3,4];case"enter":return[3,5];case"exit":return[3,6];case"nextIteration":return[3,7];case"tensorArray":return[3,8];case"tensorArrayWrite":return[3,9];case"tensorArrayRead":return[3,10];case"tensorArrayGather":return[3,11];case"tensorArrayScatter":return[3,12];case"tensorArrayConcat":return[3,13];case"tensorArraySplit":return[3,14];case"tensorArraySize":return[3,15];case"tensorArrayClose":return[3,16]}return[3,17];case 1:return[2,[getParamValue("pred",e,t,n)]];case 2:return r=getParamValue("pred",e,t,n),o=getParamValue("data",e,t,n),[4,r.data()];case 3:return[2,V.sent()[0]?[void 0,o]:[o,void 0]];case 4:return[2,(i=e.inputNames.find(function(e){return void 0!==getTensor(e,t,n)}))?[getTensor(i,t,n)]:void 0];case 5:return a=getParamValue("frameName",e,t,n),s=getParamValue("tensor",e,t,n),n.enterFrame(a),[2,[s]];case 6:return u=getParamValue("tensor",e,t,n),n.exitFrame(),[2,[u]];case 7:return l=getParamValue("tensor",e,t,n),n.nextIteration(),[2,[l]];case 8:return c=getParamValue("size",e,t,n),f=getParamValue("dtype",e,t,n),p=getParamValue("elementShape",e,t,n),h=getParamValue("dynamicSize",e,t,n),d=getParamValue("clearAfterRead",e,t,n),m=getParamValue("identicalElementShapes",e,t,n),g=getParamValue("name",e,t,n),y=new TensorArray(g,f,c,p,m,h,d),n.addTensorArray(y),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ob)(y.id),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ob)(1)]];case 9:return v=getParamValue("tensorArrayId",e,t,n),b=getParamValue("index",e,t,n),_=getParamValue("tensor",e,t,n),n.getTensorArray(v).write(b,_),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ob)(1)]];case 10:return w=getParamValue("tensorArrayId",e,t,n),x=getParamValue("index",e,t,n),[2,[n.getTensorArray(w).read(x)]];case 11:return N=getParamValue("tensorArrayId",e,t,n),E=getParamValue("indices",e,t,n),O=getParamValue("dtype",e,t,n),[2,[n.getTensorArray(N).gather(E,O)]];case 12:return C=getParamValue("tensorArrayId",e,t,n),I=getParamValue("indices",e,t,n),S=getParamValue("tensor",e,t,n),n.getTensorArray(C).scatter(I,S),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ob)(1)]];case 13:return T=getParamValue("tensorArrayId",e,t,n),k=n.getTensorArray(T),A=getParamValue("dtype",e,t,n),[2,[k.concat(A)]];case 14:return P=getParamValue("tensorArrayId",e,t,n),M=getParamValue("tensor",e,t,n),D=getParamValue("lengths",e,t,n),n.getTensorArray(P).split(D,M),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ob)(1)]];case 15:return R=getParamValue("tensorArrayId",e,t,n),j=n.getTensorArray(R),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ob)(j.size(),"int32")]];case 16:return L=getParamValue("tensorArrayId",e,t,n),n.getTensorArray(L).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+e.op+" is not implemented")}})})}var executeOp$3=function(e,t,n){switch(e.op){case"conv1d":var r=getParamValue("stride",e,t,n),o=getParamValue("pad",e,t,n),i=getParamValue("dataFormat",e,t,n).toUpperCase(),a=getParamValue("dilation",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D)(getParamValue("x",e,t,n),getParamValue("filter",e,t,n),r,o,i,a)];case"conv2d":r=getParamValue("strides",e,t,n),o=getParamValue("pad",e,t,n),i=getParamValue("dataFormat",e,t,n).toUpperCase();var s=getParamValue("dilations",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.E)(getParamValue("x",e,t,n),getParamValue("filter",e,t,n),[r[1],r[2]],o,i,[s[0],s[1]])];case"conv2dTranspose":var u=getParamValue("outputShape",e,t,n);return r=getParamValue("strides",e,t,n),o=getParamValue("pad",e,t,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.F)(getParamValue("x",e,t,n),getParamValue("filter",e,t,n),u,[r[1],r[2]],o)];case"depthwiseConv2d":return r=getParamValue("strides",e,t,n),o=getParamValue("pad",e,t,n),s=getParamValue("dilations",e,t,n),i=getParamValue("dataFormat",e,t,n).toUpperCase(),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.I)(getParamValue("input",e,t,n),getParamValue("filter",e,t,n),[r[1],r[2]],o,i,[s[0],s[1]])];case"avgPool":r=getParamValue("strides",e,t,n),o=getParamValue("pad",e,t,n);var l=getParamValue("kernelSize",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.p)(getParamValue("x",e,t,n),[l[1],l[2]],[r[1],r[2]],o)];case"maxPool":return r=getParamValue("strides",e,t,n),o=getParamValue("pad",e,t,n),l=getParamValue("kernelSize",e,t,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Oa)(getParamValue("x",e,t,n),[l[1],l[2]],[r[1],r[2]],o)];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$4=function(e,t,n){switch(e.op){case"fill":var r=getParamValue("shape",e,t,n),o=getParamValue("dtype",e,t,n),i=getParamValue("value",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.S)(r,i,o)];case"linspace":var a=getParamValue("start",e,t,n),s=getParamValue("stop",e,t,n),u=getParamValue("num",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Fa)(a,s,u)];case"oneHot":var l=getParamValue("indices",e,t,n),c=getParamValue("depth",e,t,n),f=getParamValue("onValue",e,t,n),p=getParamValue("offValue",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.bb)(l,c,f,p)];case"ones":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.cb)(getParamValue("shape",e,t,n),getParamValue("dtype",e,t,n))];case"onesLike":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.db)(getParamValue("x",e,t,n))];case"randomUniform":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hb)(getParamValue("shape",e,t,n),getParamValue("minval",e,t,n),getParamValue("maxval",e,t,n),getParamValue("dtype",e,t,n))];case"range":a=getParamValue("start",e,t,n);var h=getParamValue("stop",e,t,n),d=getParamValue("step",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ib)(a,h,d,getParamValue("dtype",e,t,n))];case"truncatedNormal":r=getParamValue("shape",e,t,n);var m=getParamValue("mean",e,t,n),g=getParamValue("stdDev",e,t,n),y=getParamValue("seed",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Yb)(r,m,g,getParamValue("dtype",e,t,n),y)];case"zeros":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.fc)(getParamValue("shape",e,t,n),getParamValue("dtype",e,t,n))];case"zerosLike":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.gc)(getParamValue("x",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}};function executeOp$5(e,t,n){return __awaiter(this,void 0,void 0,function(){var r,o,i,a,s;return __generator(this,function(u){switch(u.label){case 0:switch(e.op){case"nonMaxSuppression":return[3,1];case"whereAsync":return[3,3]}return[3,5];case 1:return r=getParamValue("boxes",e,t,n),o=getParamValue("scores",e,t,n),i=getParamValue("maxOutputSize",e,t,n),a=getParamValue("iouThreshold",e,t,n),s=getParamValue("scoreThreshold",e,t,n),[4,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Y.nonMaxSuppressionAsync(r,o,i,a,s)];case 2:return[2,[u.sent()]];case 3:return[4,Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ec)(getParamValue("condition",e,t,n))];case 4:return[2,[u.sent()]];case 5:throw TypeError("Node type "+e.op+" is not implemented")}})})}var executeOp$6=function(e,t,n){switch(e.op){case"topK":var r=getParamValue("x",e,t,n),o=getParamValue("k",e,t,n),i=getParamValue("sorted",e,t,n),a=Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Vb)(r,o,i);return[a.values,a.indices];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$7=function(e,t,n){switch(e.op){case"const":return t[e.name];case"placeholder":var r=getParamValue("default",e,t,n);return[getTensor(e.name,t,n)||r];case"identity":case"stopGradient":case"fakeQuantWithMinMaxVars":return[getParamValue("x",e,t,n)];case"snapshot":return[getParamValue("x",e,t,n).clone()];case"shape":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Rb)(getParamValue("x",e,t,n).shape,"int32")];case"size":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ob)(getParamValue("x",e,t,n).size,"int32")];case"rank":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ob)(getParamValue("x",e,t,n).rank,"int32")];case"noop":return[];case"print":var o=getParamValue("x",e,t,n),i=getParamValue("data",e,t,n),a=getParamValue("message",e,t,n),s=getParamValue("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(a);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[0].dataSync()).slice(0,s));return[o];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$8=function(e,t,n){switch(e.op){case"resizeBilinear":var r=getParamValue("images",e,t,n),o=getParamValue("size",e,t,n),i=getParamValue("alignCorners",e,t,n);return[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Y.resizeBilinear(r,[o[0],o[1]],i)];case"resizeNearestNeighbor":return r=getParamValue("images",e,t,n),o=getParamValue("size",e,t,n),i=getParamValue("alignCorners",e,t,n),[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Y.resizeNearestNeighbor(r,[o[0],o[1]],i)];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$9=function(e,t,n){switch(e.op){case"equal":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.M)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"notEqual":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ab)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"greater":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.W)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"greaterEqual":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.X)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"less":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ca)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"lessEqual":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Da)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"logicalAnd":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ja)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"logicalNot":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ka)(getParamValue("a",e,t,n))];case"logicalOr":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.La)(getParamValue("a",e,t,n),getParamValue("b",e,t,n))];case"where":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.dc)(getParamValue("condition",e,t,n),getParamValue("a",e,t,n),getParamValue("b",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$10=function(e,t,n){switch(e.op){case"matMul":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ma)(getParamValue("a",e,t,n),getParamValue("b",e,t,n),getParamValue("transposeA",e,t,n),getParamValue("transposeB",e,t,n))];case"transpose":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Xb)(getParamValue("x",e,t,n),getParamValue("perm",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$11=function(e,t,n){switch(e.op){case"batchNormalization":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.q)(getParamValue("x",e,t,n),getParamValue("mean",e,t,n),getParamValue("variance",e,t,n),getParamValue("epsilon",e,t,n),getParamValue("scale",e,t,n),getParamValue("offset",e,t,n))];case"localResponseNormalization":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ga)(getParamValue("x",e,t,n),getParamValue("radius",e,t,n),getParamValue("bias",e,t,n),getParamValue("alpha",e,t,n),getParamValue("beta",e,t,n))];case"softmax":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Bb)(getParamValue("x",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$12=function(e,t,n){switch(e.op){case"max":var r=getParamValue("axis",e,t,n),o=getParamValue("keepDims",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Na)(getParamValue("x",e,t,n),r,o)];case"mean":return r=getParamValue("axis",e,t,n),o=getParamValue("keepDims",e,t,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qa)(getParamValue("x",e,t,n),r,o)];case"min":return r=getParamValue("axis",e,t,n),o=getParamValue("keepDims",e,t,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ra)(getParamValue("x",e,t,n),r,o)];case"sum":return r=getParamValue("axis",e,t,n),o=getParamValue("keepDims",e,t,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Nb)(getParamValue("x",e,t,n),r,o)];case"all":return r=getParamValue("axis",e,t,n),o=getParamValue("keepDims",e,t,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.h)(getParamValue("x",e,t,n),r,o)];case"any":return r=getParamValue("axis",e,t,n),o=getParamValue("keepDims",e,t,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.i)(getParamValue("x",e,t,n),r,o)];case"argMax":return r=getParamValue("axis",e,t,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.j)(getParamValue("x",e,t,n),r)];case"argMin":return r=getParamValue("axis",e,t,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.k)(getParamValue("x",e,t,n),r)];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$13=function(e,t,n){switch(e.op){case"concat":var r=getParamValue("axis",e,t,n),o=getParamValue("tensors",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.y)(o,r)];case"gather":r=getParamValue("axis",e,t,n);var i=getParamValue("x",e,t,n),a=getParamValue("indices",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.V)(i,a,r)];case"reverse":return r=getParamValue("axis",e,t,n),i=getParamValue("x",e,t,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.mb)(i,r)];case"slice":var s=getParamValue("begin",e,t,n),u=getParamValue("size",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.wb)(getParamValue("x",e,t,n),s,u)];case"stridedSlice":s=getParamValue("begin",e,t,n);var l=getParamValue("end",e,t,n),c=getParamValue("strides",e,t,n),f=getParamValue("beginMask",e,t,n),p=getParamValue("endMask",e,t,n),h=getParamValue("ellipsisMask",e,t,n),d=getParamValue("newAxisMask",e,t,n),m=getParamValue("shrinkAxisMask",e,t,n),g=getParamValue("x",e,t,n);if(1===s.length&&g.shape.length>1)for(var y=1;y<g.shape.length;y++)s.push(0),l.push(g.shape[y]),c.push(c[0]);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Lb)(g,s,l,c,f,p,h,d,m)];case"stack":return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Tb)(function(){var r=getParamValue("axis",e,t,n),o=getParamValue("tensors",e,t,n),i=o[0].shape,a=o[0].squeeze().shape,s=o.map(function(e){var t=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ac.arraysEqual(e.shape,i);if(!t&&!_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ac.arraysEqual(e.squeeze().shape,a))throw new Error("the input tensors shape does not match");return t?e:e.reshape(i)});return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Jb)(s,r)]});case"unstack":return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Tb)(function(){var r=getParamValue("axis",e,t,n),o=getParamValue("tensor",e,t,n);return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Zb)(o,r)});case"tile":var v=getParamValue("reps",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ub)(getParamValue("x",e,t,n),v)];case"split":r=getParamValue("axis",e,t,n);var b=getParamValue("numOrSizeSplits",e,t,n);return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Eb)(getParamValue("x",e,t,n),b,r);default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$14=function(e,t,n){switch(e.op){case"cast":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.v)(getParamValue("x",e,t,n),getParamValue("dtype",e,t,n))];case"expandDims":var r=getParamValue("axis",e,t,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.P)(getParamValue("x",e,t,n),r)];case"squeeze":return r=getParamValue("axis",e,t,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ib)(getParamValue("x",e,t,n),r)];case"reshape":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lb)(getParamValue("x",e,t,n),getParamValue("shape",e,t,n))];case"pad":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.eb)(getParamValue("x",e,t,n),split$1(getParamValue("padding",e,t,n),2),getParamValue("constantValue",e,t,n))];case"spaceToBatchND":var o=getParamValue("blockShape",e,t,n),i=split$1(getParamValue("paddings",e,t,n),2);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Db)(getParamValue("x",e,t,n),o,i)];case"batchToSpaceND":o=getParamValue("blockShape",e,t,n);var a=split$1(getParamValue("crops",e,t,n),2);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.u)(getParamValue("x",e,t,n),o,a)];default:throw TypeError("Node type "+e.op+" is not implemented")}};function executeOp$15(e,t,n){switch(e.category){case"arithmetic":return executeOp(e,t,n);case"basic_math":return executeOp$1(e,t,n);case"control":return executeOp$2(e,t,n);case"convolution":return executeOp$3(e,t,n);case"creation":return executeOp$4(e,t,n);case"dynamic":return executeOp$5(e,t,n);case"evaluation":return executeOp$6(e,t,n);case"image":return executeOp$8(e,t,n);case"graph":return executeOp$7(e,t,n);case"logical":return executeOp$9(e,t,n);case"matrices":return executeOp$10(e,t,n);case"normalization":return executeOp$11(e,t,n);case"reduction":return executeOp$12(e,t,n);case"slice_join":return executeOp$13(e,t,n);case"transformation":return executeOp$14(e,t,n);default:throw TypeError("Node type "+e.op+" is not implemented")}}var ExecutionContext=function(){function e(e,t){this.weightMap=e,this.tensorArrayMap=t,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return e.prototype.newFrame=function(e,t){return{id:e,frameName:t,iterationId:0}},Object.defineProperty(e.prototype,"currentContext",{get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),e.prototype.generateCurrentContextIds=function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e},e.prototype.contextIdforContexts=function(e){return e?e.map(function(e){return 0===e.id&&0===e.iterationId?"":e.frameName+"-"+e.iterationId}).join("/"):""},e.prototype.enterFrame=function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},e.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},e.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},e.prototype.getWeight=function(e){return this.weightMap[e]},e.prototype.addTensorArray=function(e){this.tensorArrayMap[e.id]=e},e.prototype.getTensorArray=function(e){return this.tensorArrayMap[e]},e}(),GraphExecutor=function(){function e(e){this.graph=e,this.compiledOrder=[],this._weightMap={},this.placeholders=e.placeholders,this._outputs=e.outputs,this.compile()}return Object.defineProperty(e.prototype,"weightMap",{get:function(){return this._weightMap},set:function(e){var t=Object.keys(e).map(function(t){return e[t].map(function(e){return e.id})});this.weightIds=[].concat.apply([],t),this._weightMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.placeholders.map(function(e){return{name:e.name,shape:e.params.shape?e.params.shape.value:void 0,dtype:e.params.dtype?e.params.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this._outputs.map(function(e){return{name:e.name,shape:e.params.shape?e.params.shape.value:void 0,dtype:e.params.dtype?e.params.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.placeholders.map(function(e){return e.name})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.outputs.map(function(e){return e.name})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isControlFlowModel",{get:function(){return this.graph.withControlFlow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDynamicShapeModel",{get:function(){return this.graph.withDynamicShape},enumerable:!0,configurable:!0}),e.prototype.compile=function(){if(!this.graph.withControlFlow&&!this.graph.withDynamicShape)for(var e=this.graph.inputs.slice(),t={};e.length>0;){var n=e.pop();t[n.name]=!0,this.compiledOrder.push(n),n.children.forEach(function(n){!t[n.name]&&n.inputNames.every(function(e){var n=getNodeNameAndIndex(e)[0];return t[n]})&&e.push(n)})}},e.prototype.execute=function(e,t){var n=this;this.checkInput(e),this.checkInputShapeAndType(e);var r={};return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Tb)(function(){var o=new ExecutionContext(n._weightMap,r),i=n.compiledOrder.reduce(function(e,t){return e[t.name]=executeOp$15(t,e,o),e},__assign({},n.weightMap,e));return n.findOutputs(i,o,t)})},e.prototype.executeAsync=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,o,i,a,s,u=this;return __generator(this,function(l){switch(l.label){case 0:return this.checkInput(e),this.checkInputShapeAndType(e),n=new ExecutionContext(this._weightMap,{}),[4,this.executeWithControlFlow(e,n)];case 1:return r=l.sent(),o=this.findOutputs(r,n,t),i=Object.keys(o).map(function(e){return o[e].id}),a=Object.keys(e).map(function(t){return e[t].map(function(e){return e.id})}),s=[].concat.apply([],a),Object.keys(r).forEach(function(e){r[e].forEach(function(e){e&&-1===i.indexOf(e.id)&&-1===s.indexOf(e.id)&&-1===u.weightIds.indexOf(e.id)&&e.dispose()})}),[2,o]}})})},e.prototype.executeWithControlFlow=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l;return __generator(this,function(c){switch(c.label){case 0:n=this.graph.inputs.map(function(e){return{node:e,contexts:t.currentContext}}),r=__assign({},this.weightMap,e),o={},c.label=1;case 1:return n.length>0?(i=n.pop(),t.currentContext=i.contexts,a="","enter"===i.node.op&&getParamValue("isConstant",i.node,r,t)&&(a=getNodeNameAndIndex(i.node.name,t)[0]),s=executeOp$15(i.node,r,t),a||(a=getNodeNameAndIndex(i.node.name,t)[0]),u=r,l=a,[4,s]):[3,3];case 2:return u[l]=c.sent(),i.node.children.forEach(function(e){var i=getNodeNameAndIndex(e.name,t)[0];o[i]||("merge"===e.op?e.inputNames.some(function(e){return!!getTensor(e,r,t)})&&(o[i]=!0,n.push({contexts:t.currentContext,node:e})):e.inputNames.every(function(e){return!!getTensor(e,r,t)})&&(o[i]=!0,n.push({contexts:t.currentContext,node:e})))}),[3,1];case 3:return[2,r]}})})},e.prototype.findOutputs=function(e,t,n){return!n||n instanceof Array||(n=[n]),(n||this.graph.outputs.map(function(e){return e.name})).reduce(function(n,r){return n[r]=getTensor(r,e,t),n},{})},e.prototype.dispose=function(){var e=this;Object.keys(this.weightMap).forEach(function(t){return e.weightMap[t].forEach(function(e){return e.dispose()})})},e.prototype.checkInputShapeAndType=function(e){this.placeholders.forEach(function(t){var n=e[t.name][0];if(t.params.shape&&t.params.shape.value){var r=t.params.shape.value,o=r.length===n.shape.length&&n.shape.every(function(e,t){return-1===r[t]||r[t]===e});_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ac.assert(o,"The shape of dict['"+t.name+"'] provided in model.execute(dict) must be ["+r+"], but was ["+n.shape+"]")}t.params.dtype&&t.params.dtype.value&&_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ac.assert(n.dtype===t.params.dtype.value,"The dtype of dict['"+t.name+"'] provided in model.execute(dict) must be "+t.params.dtype.value+", but was "+n.dtype)})},e.prototype.checkInput=function(e){var t=this,n=Object.keys(e),r=[],o=[];if(this.inputNodes.forEach(function(e){-1===n.indexOf(e)&&r.push(e)}),n.forEach(function(e){-1===t.inputNodes.indexOf(e)&&o.push(e)}),r.length>0)throw new Error("The dict provided in model.execute(dict) has the keys ["+n+"], but is missing the required keys: ["+r+"].");if(o.length>0)throw new Error("The dict provided in model.execute(dict) has unused keys: ["+o+"]. Please provide only the following keys: ["+this.inputNodes+"].")},e}(),FrozenModel=function(){function e(e,t,n){this.modelUrl=e,this.weightManifestUrl=t,this.requestOption=n,this.version="n/a"}return Object.defineProperty(e.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),e.prototype.findIOHandler=function(){var e=[this.modelUrl,this.weightManifestUrl];if(this.requestOption)this.handler=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Z.browserHTTPRequest(e,this.requestOption);else{var t=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Z.getLoadHandlers(e);if(0===t.length)t.push(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Z.browserHTTPRequest(e,this.requestOption));else if(t.length>1)throw new Error("Found more than one ("+t.length+") load handlers for URL '"+[e]+"'");this.handler=t[0]}},e.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n;return __generator(this,function(r){switch(r.label){case 0:if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return e=r.sent(),t=compiled_api_1.GraphDef.decode(new Uint8Array(e.modelTopology)),this.version=t.versions.producer+"."+t.versions.minConsumer,n=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Z.decodeWeights(e.weightData,e.weightSpecs),this.executor=new GraphExecutor(OperationMapper.Instance.transformGraph(t)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),[2,!0]}})})},e.prototype.predict=function(e,t){return this.execute(e,this.outputNodes)},e.prototype.constructTensorMap=function(e){var t=e instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.b?[e]:e;if(t.length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the frozen model has "+this.inputNodes.length+" placeholders, while there are "+t.length+" input tensors.");return this.inputNodes.reduce(function(e,n,r){return e[n]=t[r],e},{})},e.prototype.execute=function(e,t){if(t=t||this.outputNodes,(e instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.b||Array.isArray(e))&&(e=this.constructTensorMap(e)),this.executor.isControlFlowModel||this.executor.isDynamicShapeModel)throw new Error("The model contains control flow or dynamic shape ops, please use executeAsync method");var n=this.executor.execute(this.convertTensorMapToTensorsMap(e),t),r=Object.keys(n);return Array.isArray(t)&&t.length>1?t.map(function(e){return n[e]}):n[r[0]]},e.prototype.executeAsync=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(o){switch(o.label){case 0:if(!this.executor.isControlFlowModel&&!this.executor.isDynamicShapeModel)throw new Error("The model does not contain control flow or dynamic shape ops, please use execute method for better performance.");return t=t||this.outputNodes,(e instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.b||Array.isArray(e))&&(e=this.constructTensorMap(e)),[4,this.executor.executeAsync(this.convertTensorMapToTensorsMap(e),t)];case 1:return n=o.sent(),r=Object.keys(n),[2,Array.isArray(t)&&t.length>1?t.map(function(e){return n[e]}):n[r[0]]]}})})},e.prototype.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce(function(t,n){return t[n]=[e[n]],t},{})},e.prototype.dispose=function(){this.executor.dispose()},e}();function loadFrozenModel(e,t,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(o){switch(o.label){case 0:return[4,(r=new FrozenModel(e,t,n)).load()];case 1:return o.sent(),[2,r]}})})}var version="0.5.7"},zUnb:function(e,t,n){"use strict";n.r(t);var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}function l(e){return"function"==typeof e}var c=!1,f={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){c=e},get useDeprecatedSynchronousErrorHandling(){return c}};function p(e){setTimeout(function(){throw e})}var h={closed:!0,next:function(e){},error:function(e){if(f.useDeprecatedSynchronousErrorHandling)throw e;p(e)},complete:function(){}},d=Array.isArray||function(e){return e&&"number"==typeof e.length};function m(e){return null!=e&&"object"==typeof e}var g,y={e:{}};function v(){try{return g.apply(this,arguments)}catch(e){return y.e=e,y}}function b(e){return g=e,v}var _=function(e){function t(n){var r=e.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,t.prototype),r}return o(t,e),t}(Error),w=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,s=r?r.length:0;n;)n.remove(this),n=++a<s&&r[a]||null;if(l(o)&&b(o).call(this)===y&&(t=!0,e=e||(y.e instanceof _?x(y.e.errors):[y.e])),d(i))for(a=-1,s=i.length;++a<s;){var u=i[a];if(m(u)&&b(u.unsubscribe).call(u)===y){t=!0,e=e||[];var c=y.e;c instanceof _?e=e.concat(x(c.errors)):e.push(c)}}if(t)throw new _(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e}();function x(e){return e.reduce(function(e,t){return e.concat(t instanceof _?t.errors:t)},[])}var N="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",E=function(e){function t(t,n,r){var o,i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=h;break;case 1:if(!t){i.destination=h;break}if("object"==typeof t){if((o=t)instanceof E||"syncErrorThrowable"in o&&o[N]){var a=t[N]();i.syncErrorThrowable=a.syncErrorThrowable,i.destination=a,a.add(i)}else i.syncErrorThrowable=!0,i.destination=new O(i,t);break}default:i.syncErrorThrowable=!0,i.destination=new O(i,t,n,r)}return i}return o(t,e),t.prototype[N]=function(){return this},t.create=function(e,n,r){var o=new t(e,n,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(w),O=function(e){function t(t,n,r,o){var i,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return l(n)?i=n:n&&(i=n.next,r=n.error,o=n.complete,n!==h&&(l((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=i,a._error=r,a._complete=o,a}return o(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;f.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=f.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):p(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;p(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};f.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),f.useDeprecatedSynchronousErrorHandling)throw e;p(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!f.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return f.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(p(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(E),C="function"==typeof Symbol&&Symbol.observable||"@@observable";var I=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(e instanceof E)return e;if(e[N])return e[N]()}return e||t||n?new E(e,t,n):new E(h)}(e,t,n);if(r?r.call(o,this.source):o.add(this.source||f.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),f.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){f.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=S(t))(function(t,r){var o;o=n.subscribe(function(t){try{e(t)}catch(e){r(e),o&&o.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[C]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:((n=e)?1===n.length?n[0]:function(e){return n.reduce(function(e,t){return t(e)},e)}:function(){})(this);var n},e.prototype.toPromise=function(e){var t=this;return new(e=S(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function S(e){if(e||(e=f.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var T=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parent=t,o.outerValue=n,o.outerIndex=r,o.index=0,o}return o(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(E),k=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}},A=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,p),t}},P=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),M=function(e){return function(t){for(var n=e[P]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}},D=function(e){return function(t){var n=e[C]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},R=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function j(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var L=function(e){if(e instanceof I)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[C])return D(e);if(R(e))return k(e);if(j(e))return A(e);if(e&&"function"==typeof e[P])return M(e);var t=m(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function V(e,t,n,r){var o=new T(e,n,r);return L(t)(o)}var z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(E);function F(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new B(e,t))}}var B=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new U(e,this.project,this.thisArg))},e}(),U=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return o(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(E);function W(e,t){return new I(t?function(n){var r=new w,o=0;return r.add(t.schedule(function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}:k(e))}function $(e,t){if(!t)return e instanceof I?e:new I(L(e));if(null!=e){if(function(e){return e&&"function"==typeof e[C]}(e))return function(e,t){return new I(t?function(n){var r=new w;return r.add(t.schedule(function(){var o=e[C]();r.add(o.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r}:D(e))}(e,t);if(j(e))return function(e,t){return new I(t?function(n){var r=new w;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r}:A(e))}(e,t);if(R(e))return W(e,t);if(function(e){return e&&"function"==typeof e[P]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new I(t?function(n){var r,o=new w;return o.add(function(){r&&"function"==typeof r.return&&r.return()}),o.add(t.schedule(function(){r=e[P](),o.add(t.schedule(function(){if(!n.closed){var e,t;try{var o=r.next();e=o.value,t=o.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}}))})),o}:M(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}var H=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new q(e,this.project,this.concurrent))},e}(),q=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=e.call(this,t)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return o(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){this.add(V(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,o){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(z);function G(e){return e}var K=function(e){function t(){var n=e.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,t.prototype),n}return o(t,e),t}(Error),X=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return o(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(w),Z=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return o(t,e),t}(E),Y=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return o(t,e),t.prototype[N]=function(){return new Z(this)},t.prototype.lift=function(e){var t=new Q(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new K;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new K;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new K;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new K;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new K;return this.hasError?(e.error(this.thrownError),w.EMPTY):this.isStopped?(e.complete(),w.EMPTY):(this.observers.push(e),new X(this,e))},t.prototype.asObservable=function(){var e=new I;return e.source=this,e},t.create=function(e,t){return new Q(e,t)},t}(I),Q=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return o(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):w.EMPTY},t}(Y);function J(){return function(e){return e.lift(new ee(e))}}var ee=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new te(e,n),o=t.subscribe(r);return r.closed||(r.connection=n.connect()),o},e}(),te=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return o(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(E),ne=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return o(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new w).add(this.source.subscribe(new oe(this.getSubject(),this))),e.closed?(this._connection=null,e=w.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return J()(this)},t}(I).prototype,re={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ne._subscribe},_isComplete:{value:ne._isComplete,writable:!0},getSubject:{value:ne.getSubject},connect:{value:ne.connect},refCount:{value:ne.refCount}},oe=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return o(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(Z);function ie(){return new Y}function ae(e){return{providedIn:e.providedIn||null,factory:e.factory,value:void 0}}var se=function(){function e(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==t?ae({providedIn:t.providedIn||"root",factory:t.factory}):void 0}return e.prototype.toString=function(){return"InjectionToken "+this._desc},e}(),ue="__parameters__";function le(e,t,n){var r=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e){var r=e.apply(void 0,u(t));for(var o in r)this[o]=r[o]}}}(t);function o(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this instanceof o)return r.apply(this,t),this;var i=new((e=o).bind.apply(e,u([void 0],t)));return a.annotation=i,a;function a(e,t,n){for(var r=e.hasOwnProperty(ue)?e[ue]:Object.defineProperty(e,ue,{value:[]})[ue];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(i),e}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o}Function;var ce="undefined"!=typeof window&&window,fe="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,pe="undefined"!=typeof global&&global||ce||fe,he=Promise.resolve(0),de=null;function me(){if(!de){var e=pe.Symbol;if(e&&e.iterator)de=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(de=r)}}return de}function ge(e){"undefined"==typeof Zone?he.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function ye(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function ve(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(ve).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function be(e){return e.__forward_ref__=be,e.toString=function(){return ve(this())},e}function _e(e){return"function"==typeof e&&e.hasOwnProperty("__forward_ref__")&&e.__forward_ref__===be?e():e}var we=le("Inject",function(e){return{token:e}}),xe=le("Optional"),Ne=le("Self"),Ee=le("SkipSelf"),Oe="__source",Ce=new Object,Ie=Ce,Se=new se("INJECTOR"),Te=function(){function e(){}return e.prototype.get=function(e,t){if(void 0===t&&(t=Ce),t===Ce)throw new Error("NullInjectorError: No provider for "+ve(e)+"!");return t},e}(),ke=function(){function e(){}return e.create=function(e,t){return Array.isArray(e)?new Fe(e,t):new Fe(e.providers,e.parent,e.name||null)},e.THROW_IF_NOT_FOUND=Ce,e.NULL=new Te,e.ngInjectableDef=ae({providedIn:"any",factory:function(){return qe(Se)}}),e}(),Ae=function(e){return e},Pe=[],Me=Ae,De=function(){return Array.prototype.slice.call(arguments)},Re={},je=function(e){for(var t in e)if(e[t]===Re)return t;throw Error("!prop")}({provide:String,useValue:Re}),Le=ke.NULL,Ve=/\n/gm,ze="\u0275",Fe=function(){function e(e,t,n){void 0===t&&(t=Le),void 0===n&&(n=null),this.parent=t,this.source=n;var r=this._records=new Map;r.set(ke,{token:ke,fn:Ae,deps:Pe,value:this,useNew:!1}),r.set(Se,{token:Se,fn:Ae,deps:Pe,value:this,useNew:!1}),function e(t,n){if(n)if((n=_e(n))instanceof Array)for(var r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw We("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw We("Unexpected provider",n);var o=_e(n.provide),i=function(e){var t=function(e){var t=Pe,n=e.deps;if(n&&n.length){t=[];for(var r=0;r<n.length;r++){var o=6;if((u=_e(n[r]))instanceof Array)for(var i=0,a=u;i<a.length;i++){var s=a[i];s instanceof xe||s==xe?o|=1:s instanceof Ee||s==Ee?o&=-3:s instanceof Ne||s==Ne?o&=-5:u=s instanceof we?s.token:_e(s)}t.push({token:u,options:o})}}else if(e.useExisting){var u;t=[{token:u=_e(e.useExisting),options:6}]}else if(!(n||je in e))throw We("'deps' required",e);return t}(e),n=Ae,r=Pe,o=!1,i=_e(e.provide);if(je in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)o=!0,n=_e(e.useClass);else{if("function"!=typeof i)throw We("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);o=!0,n=i}return{deps:t,fn:n,useNew:o,value:r}}(n);if(!0===n.multi){var a=t.get(o);if(a){if(a.fn!==De)throw Be(o)}else t.set(o,a={token:n.provide,deps:[],useNew:!1,fn:De,value:Pe});a.deps.push({token:o=n,options:6})}var s=t.get(o);if(s&&s.fn==De)throw Be(o);t.set(o,i)}}(r,e)}return e.prototype.get=function(e,t,n){void 0===n&&(n=0);var r=this._records.get(e);try{return function e(t,n,r,o,i,a){try{return function(t,n,r,o,i,a){var s,l;if(!n||4&a)2&a||(l=o.get(t,i,0));else{if((l=n.value)==Me)throw Error(ze+"Circular dependency");if(l===Pe){n.value=Me;var c=n.useNew,f=n.fn,p=n.deps,h=Pe;if(p.length){h=[];for(var d=0;d<p.length;d++){var m=p[d],g=m.options,y=2&g?r.get(m.token):void 0;h.push(e(m.token,y,r,y||4&g?o:Le,1&g?null:ke.THROW_IF_NOT_FOUND,0))}}n.value=l=c?new((s=f).bind.apply(s,u([void 0],h))):f.apply(void 0,h)}}return l}(t,n,r,o,i,a)}catch(e){throw e instanceof Error||(e=new Error(e)),(e.ngTempTokenPath=e.ngTempTokenPath||[]).unshift(t),n&&n.value==Me&&(n.value=Pe),e}}(e,r,this._records,this.parent,t,n)}catch(t){var o=t.ngTempTokenPath;throw e[Oe]&&o.unshift(e[Oe]),t.message=Ue("\n"+t.message,o,this.source),t.ngTokenPath=o,t.ngTempTokenPath=null,t}},e.prototype.toString=function(){var e=[];return this._records.forEach(function(t,n){return e.push(ve(n))}),"StaticInjector["+e.join(", ")+"]"},e}();function Be(e){return We("Cannot mix multi providers and regular providers",e)}function Ue(e,t,n){void 0===n&&(n=null),e=e&&"\n"===e.charAt(0)&&e.charAt(1)==ze?e.substr(2):e;var r=ve(t);if(t instanceof Array)r=t.map(ve).join(" -> ");else if("object"==typeof t){var o=[];for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];o.push(i+":"+("string"==typeof a?JSON.stringify(a):ve(a)))}r="{"+o.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+e.replace(Ve,"\n  ")}function We(e,t){return new Error(Ue(e,t))}var $e=void 0;function He(e){var t=$e;return $e=e,t}function qe(e,t){if(void 0===t&&(t=0),void 0===$e)throw new Error("inject() must be called from an injection context");if(null===$e){var n=e.ngInjectableDef;if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(8&t)return null;throw new Error("Injector: NOT_FOUND ["+ve(e)+"]")}return $e.get(e,8&t?null:void 0,t)}function Ge(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var o=void 0,i=0,a=0;a<r.length;a++){var s=r[a];s instanceof xe||"Optional"===s.ngMetadataName?i|=8:s instanceof Ee||"SkipSelf"===s.ngMetadataName?i|=4:s instanceof Ne||"Self"===s.ngMetadataName?i|=2:o=s instanceof we?s.token:s}t.push(qe(o,i))}else t.push(qe(r))}return t}String;var Ke=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({}),Xe=new function(e){this.full="6.1.4",this.major="6.1.4".split(".")[0],this.minor="6.1.4".split(".")[1],this.patch="6.1.4".split(".").slice(2).join(".")}("6.1.4"),Ze="ngDebugContext",Ye="ngOriginalError",Qe="ngErrorLogger";function Je(e){return e[Ze]}function et(e){return e[Ye]}function tt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e.error.apply(e,u(t))}var nt=function(){function e(){this._console=console}return e.prototype.handleError=function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e[Qe]||tt}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)},e.prototype._findContext=function(e){return e?Je(e)?Je(e):this._findContext(et(e)):null},e.prototype._findOriginalError=function(e){for(var t=et(e);t&&et(t);)t=et(t);return t},e}(),rt=new se("The presence of this token marks an injector as being the root injector."),ot={},it={},at=[],st=void 0;function ut(){return void 0===st&&(st=new Te),st}var lt=function(){function e(e,t,n){var r=this;this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this.destroyed=!1,pt([e],function(e){return r.processInjectorType(e,new Set)}),t&&pt(t,function(e){return r.processProvider(e)}),this.records.set(Se,ft(void 0,this)),this.isRootInjector=this.records.has(rt),this.injectorDefTypes.forEach(function(e){return r.get(e)})}return e.prototype.destroy=function(){this.assertNotDestroyed(),this.destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}},e.prototype.get=function(e,t,n){void 0===t&&(t=Ie),void 0===n&&(n=0),this.assertNotDestroyed();var r,o=He(this);try{if(!(4&n)){var i=this.records.get(e);if(void 0===i){var a=("function"==typeof(r=e)||"object"==typeof r&&r instanceof se)&&e.ngInjectableDef||void 0;void 0!==a&&this.injectableDefInScope(a)&&(i=ct(e),this.records.set(e,i))}if(void 0!==i)return this.hydrate(e,i)}return 2&n&&ut(),this.parent.get(e,t)}finally{He(o)}},e.prototype.assertNotDestroyed=function(){if(this.destroyed)throw new Error("Injector has already been destroyed.")},e.prototype.processInjectorType=function(e,t){var n=this,r=(e=_e(e)).ngInjectorDef,o=null==r&&e.ngModule||void 0,i=void 0===o?e:o,a=void 0!==o&&e.providers||at;if(void 0!==o&&(r=o.ngInjectorDef),null!=r){if(t.has(i))throw new Error("Circular dependency: type "+ve(i)+" ends up importing itself.");if(this.injectorDefTypes.add(i),this.records.set(i,ft(r.factory)),null!=r.imports){t.add(i);try{pt(r.imports,function(e){return n.processInjectorType(e,t)})}finally{t.delete(i)}}null!=r.providers&&pt(r.providers,function(e){return n.processProvider(e)}),pt(a,function(e){return n.processProvider(e)})}},e.prototype.processProvider=function(e){var t=ht(e=_e(e))?e:_e(e.provide),n=function(e){var t=_e(e),n=ot,r=void 0;if(ht(e))return ct(e);if(t=_e(e.provide),je in e)n=e.useValue;else if(e.useExisting)r=function(){return qe(e.useExisting)};else if(e.useFactory)r=function(){return e.useFactory.apply(e,u(Ge(e.deps||[])))};else{var o=e.useClass||t;if(!e.deps)return ct(o);r=function(){return new(o.bind.apply(o,u([void 0],Ge(e.deps))))}}return ft(r,n)}(e);if(ht(e)||!0!==e.multi){var r=this.records.get(t);if(r&&void 0!==r.multi)throw new Error("Mixed multi-provider for "+ve(t))}else{var o=this.records.get(t);if(o){if(void 0===o.multi)throw new Error("Mixed multi-provider for "+t+".")}else(o=ft(void 0,ot,!0)).factory=function(){return Ge(o.multi)},this.records.set(t,o);t=e,o.multi.push(e)}this.records.set(t,n)},e.prototype.hydrate=function(e,t){if(t.value===it)throw new Error("Circular dep for "+ve(e));var n;return t.value===ot&&(t.value=it,t.value=t.factory()),"object"==typeof t.value&&t.value&&"object"==typeof(n=t.value)&&null!=n&&n.ngOnDestroy&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value},e.prototype.injectableDefInScope=function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||"root"===e.providedIn&&this.isRootInjector:this.injectorDefTypes.has(e.providedIn))},e}();function ct(e){var t=e.ngInjectableDef;if(void 0===t){if(e instanceof se)throw new Error("Token "+ve(e)+" is missing an ngInjectableDef definition.");return ft(function(){return new e})}return ft(t.factory)}function ft(e,t,n){return void 0===t&&(t=ot),void 0===n&&(n=!1),{factory:e,value:t,multi:n?[]:void 0}}function pt(e,t){e.forEach(function(e){return Array.isArray(e)?pt(e,t):t(e)})}function ht(e){return"function"==typeof e}function dt(e){return!!e&&"function"==typeof e.then}var mt=new se("Application Initializer"),gt=function(){function e(e){var t=this;this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return e.prototype.runInitializers=function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var o=this.appInits[r]();dt(o)&&t.push(o)}Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}},e}(),yt=new se("AppId");function vt(){return""+bt()+bt()+bt()}function bt(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var _t=new se("Platform Initializer"),wt=new se("Platform ID"),xt=new se("appBootstrapListener"),Nt=function(){function e(){}return e.prototype.log=function(e){console.log(e)},e.prototype.warn=function(e){console.warn(e)},e}();function Et(){throw new Error("Runtime compiler is not loaded")}var Ot=function(){function e(){}return e.prototype.compileModuleSync=function(e){throw Et()},e.prototype.compileModuleAsync=function(e){throw Et()},e.prototype.compileModuleAndAllComponentsSync=function(e){throw Et()},e.prototype.compileModuleAndAllComponentsAsync=function(e){throw Et()},e.prototype.clearCache=function(){},e.prototype.clearCacheFor=function(e){},e.prototype.getModuleId=function(e){},e}(),Ct=function(){},It=function(){},St=function(){};function Tt(e){var t=Error("No component factory found for "+ve(e)+". Did you add it to @NgModule.entryComponents?");return t[Pt]=e,t}var kt,At,Pt="ngComponent",Mt=function(){function e(){}return e.prototype.resolveComponentFactory=function(e){throw Tt(e)},e}(),Dt=function(){function e(){}return e.NULL=new Mt,e}(),Rt=function(){function e(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(var r=0;r<e.length;r++){var o=e[r];this._factories.set(o.componentType,o)}}return e.prototype.resolveComponentFactory=function(e){var t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw Tt(e);return new jt(t,this._ngModule)},e}(),jt=function(e){function t(t,n){var r=e.call(this)||this;return r.factory=t,r.ngModule=n,r.selector=t.selector,r.componentType=t.componentType,r.ngContentSelectors=t.ngContentSelectors,r.inputs=t.inputs,r.outputs=t.outputs,r}return o(t,e),t.prototype.create=function(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)},t}(St),Lt=function(){},Vt=function(){},zt=function(){var e=pe.wtf;return!(!e||!(kt=e.trace)||(At=kt.events,0))}();function Ft(e,t){return null}var Bt=zt?function(e,t){return void 0===t&&(t=null),At.createScope(e,t)}:function(e,t){return Ft},Ut=zt?function(e,t){return kt.leaveScope(e,t),t}:function(e,t){return t},Wt=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n.__isAsync=t,n}return o(t,e),t.prototype.emit=function(t){e.prototype.next.call(this,t)},t.prototype.subscribe=function(t,n,r){var o,i=function(e){return null},a=function(){return null};t&&"object"==typeof t?(o=this.__isAsync?function(e){setTimeout(function(){return t.next(e)})}:function(e){t.next(e)},t.error&&(i=this.__isAsync?function(e){setTimeout(function(){return t.error(e)})}:function(e){t.error(e)}),t.complete&&(a=this.__isAsync?function(){setTimeout(function(){return t.complete()})}:function(){t.complete()})):(o=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)},n&&(i=this.__isAsync?function(e){setTimeout(function(){return n(e)})}:function(e){n(e)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var s=e.prototype.subscribe.call(this,o,i,a);return t instanceof w&&t.add(s),s},t}(Y),$t=function(){function e(e){var t,n=e.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wt(!1),this.onMicrotaskEmpty=new Wt(!1),this.onStable=new Wt(!1),this.onError=new Wt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,n,r,o,i,a){try{return Kt(t),e.invokeTask(r,o,i,a)}finally{Xt(t)}},onInvoke:function(e,n,r,o,i,a,s){try{return Kt(t),e.invoke(r,o,i,a,s)}finally{Xt(t)}},onHasTask:function(e,n,r,o){e.hasTask(r,o),n===r&&("microTask"==o.change?(t.hasPendingMicrotasks=o.microTask,Gt(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:function(e,n,r,o){return e.handleError(r,o),t.runOutsideAngular(function(){return t.onError.emit(o)}),!1}})}return e.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},e.assertInAngularZone=function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},e.assertNotInAngularZone=function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},e.prototype.run=function(e,t,n){return this._inner.run(e,t,n)},e.prototype.runTask=function(e,t,n,r){var o=this._inner,i=o.scheduleEventTask("NgZoneEvent: "+r,e,qt,Ht,Ht);try{return o.runTask(i,t,n)}finally{o.cancelTask(i)}},e.prototype.runGuarded=function(e,t,n){return this._inner.runGuarded(e,t,n)},e.prototype.runOutsideAngular=function(e){return this._outer.run(e)},e}();function Ht(){}var qt={};function Gt(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function Kt(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Xt(e){e._nesting--,Gt(e)}var Zt,Yt=function(){function e(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wt,this.onMicrotaskEmpty=new Wt,this.onStable=new Wt,this.onError=new Wt}return e.prototype.run=function(e){return e()},e.prototype.runGuarded=function(e){return e()},e.prototype.runOutsideAngular=function(e){return e()},e.prototype.runTask=function(e){return e()},e}(),Qt=function(){function e(e){var t=this;this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents(),e.run(function(){t.taskTrackingZone=Zone.current.get("TaskTrackingZone")})}return e.prototype._watchAngularEvents=function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){$t.assertNotInAngularZone(),ge(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})},e.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},e.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},e.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},e.prototype._runCallbacksIfReady=function(){var e=this;if(this.isStable())ge(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}},e.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,isPeriodic:e.data.isPeriodic,delay:e.data.delay,creationLocation:e.creationLocation,xhr:e.data.target}}):[]},e.prototype.addCallback=function(e,t,n){var r=this,o=-1;t&&t>0&&(o=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==o}),e(r._didWork,r.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:n})},e.prototype.whenStable=function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()},e.prototype.getPendingRequestCount=function(){return this._pendingCount},e.prototype.findProviders=function(e,t,n){return[]},e}(),Jt=function(){function e(){this._applications=new Map,en.addToWindow(this)}return e.prototype.registerApplication=function(e,t){this._applications.set(e,t)},e.prototype.unregisterApplication=function(e){this._applications.delete(e)},e.prototype.unregisterAllApplications=function(){this._applications.clear()},e.prototype.getTestability=function(e){return this._applications.get(e)||null},e.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},e.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},e.prototype.findTestabilityInTree=function(e,t){return void 0===t&&(t=!0),en.findTestabilityInTree(this,e,t)},e.ctorParameters=function(){return[]},e}(),en=new(function(){function e(){}return e.prototype.addToWindow=function(e){},e.prototype.findTestabilityInTree=function(e,t,n){return null},e}()),tn=!0,nn=!1,rn=new se("AllowMultipleToken");function on(){return nn=!0,tn}var an=function(e,t){this.name=e,this.token=t};function sn(e,t,n){void 0===n&&(n=[]);var r="Platform: "+t,o=new se(r);return function(t){void 0===t&&(t=[]);var i=un();if(!i||i.injector.get(rn,!1))if(e)e(n.concat(t).concat({provide:o,useValue:!0}));else{var a=n.concat(t).concat({provide:o,useValue:!0});!function(e){if(Zt&&!Zt.destroyed&&!Zt.injector.get(rn,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Zt=e.get(ln);var t=e.get(_t,null);t&&t.forEach(function(e){return e()})}(ke.create({providers:a,name:r}))}return function(e){var t=un();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(o)}}function un(){return Zt&&!Zt.destroyed?Zt:null}var ln=function(){function e(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return e.prototype.bootstrapModuleFactory=function(e,t){var n,r=this,o="noop"===(n=t?t.ngZone:void 0)?new Yt:("zone.js"===n?void 0:n)||new $t({enableLongStackTrace:on()}),i=[{provide:$t,useValue:o}];return o.run(function(){var t=ke.create({providers:i,parent:r.injector,name:e.moduleType.name}),n=e.create(t),a=n.injector.get(nt,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return pn(r._modules,n)}),o.runOutsideAngular(function(){return o.onError.subscribe({next:function(e){a.handleError(e)}})}),function(e,t,o){try{var i=((a=n.injector.get(gt)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return dt(i)?i.catch(function(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}):i}catch(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}var a}(a,o)})},e.prototype.bootstrapModule=function(e,t){var n=this;void 0===t&&(t=[]);var r=this.injector.get(Ct),o=cn({},t);return r.createCompiler([o]).compileModuleAsync(e).then(function(e){return n.bootstrapModuleFactory(e,o)})},e.prototype._moduleDoBootstrap=function(e){var t=e.injector.get(fn);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module "+ve(e.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');e.instance.ngDoBootstrap(t)}this._modules.push(e)},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},Object.defineProperty(e.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),e}();function cn(e,t){return Array.isArray(t)?t.reduce(cn,e):i({},e,t)}var fn=function(){function e(e,t,n,r,o,i){var a=this;this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=on(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run(function(){a.tick()})}});var s=new I(function(e){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular(function(){e.next(a._stable),e.complete()})}),u=new I(function(e){var t;a._zone.runOutsideAngular(function(){t=a._zone.onStable.subscribe(function(){$t.assertNotInAngularZone(),ge(function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,e.next(!0))})})});var n=a._zone.onUnstable.subscribe(function(){$t.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=Number.POSITIVE_INFINITY,o=null,i=e[e.length-1];return(n=i)&&"function"==typeof n.schedule?(o=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof i&&(r=e.pop()),null===o&&1===e.length&&e[0]instanceof I?e[0]:function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),function e(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(o){return o.pipe(e(function(e,r){return $(t(e,r)).pipe(F(function(t,o){return n(e,t,r,o)}))},r))}:("number"==typeof n&&(r=n),function(e){return e.lift(new H(t,r))})}(G,e)}(r)(W(e,o))}(s,u.pipe(function(e){return J()((t=ie,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,re);return r.source=e,r.subjectFactory=n,r})(e));var t}))}return e.prototype.bootstrap=function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof St?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var o=n instanceof jt?null:this._injector.get(Lt),i=n.create(ke.NULL,[],t||n.selector,o);i.onDestroy(function(){r._unloadComponent(i)});var a=i.injector.get(Qt,null);return a&&i.injector.get(Jt).registerApplication(i.location.nativeElement,a),this._loadComponent(i),on()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i},e.prototype.tick=function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0,this._views.forEach(function(e){return e.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(e){return e.checkNoChanges()})}catch(e){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(e)})}finally{this._runningTick=!1,Ut(n)}},e.prototype.attachView=function(e){var t=e;this._views.push(t),t.attachToAppRef(this)},e.prototype.detachView=function(e){var t=e;pn(this._views,t),t.detachFromAppRef()},e.prototype._loadComponent=function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(xt,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})},e.prototype._unloadComponent=function(e){this.detachView(e.hostView),pn(this.components,e)},e.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(e){return e.destroy()})},Object.defineProperty(e.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),e._tickScope=Bt("ApplicationRef#tick()"),e}();function pn(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var hn=function(){},dn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({}),mn=function(){},gn=function(e){this.nativeElement=e},yn=function(){function e(){this.dirty=!0,this._results=[],this.changes=new Wt,this.length=0}return e.prototype.map=function(e){return this._results.map(e)},e.prototype.filter=function(e){return this._results.filter(e)},e.prototype.find=function(e){return this._results.find(e)},e.prototype.reduce=function(e,t){return this._results.reduce(e,t)},e.prototype.forEach=function(e){this._results.forEach(e)},e.prototype.some=function(e){return this._results.some(e)},e.prototype.toArray=function(){return this._results.slice()},e.prototype[me()]=function(){return this._results[me()]()},e.prototype.toString=function(){return this._results.toString()},e.prototype.reset=function(e){this._results=function e(t){return t.reduce(function(t,n){var r=Array.isArray(n)?e(n):n;return t.concat(r)},[])}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},e.prototype.notifyOnChanges=function(){this.changes.emit(this)},e.prototype.setDirty=function(){this.dirty=!0},e.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},e}(),vn=function(){},bn=function(){},_n=function(){function e(e,t,n){this._debugContext=n,this.nativeNode=e,t&&t instanceof wn?t.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(e.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),e}(),wn=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.properties={},o.attributes={},o.classes={},o.styles={},o.childNodes=[],o.nativeElement=t,o}return o(t,e),t.prototype.addChild=function(e){e&&(this.childNodes.push(e),e.parent=this)},t.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))},t.prototype.insertChildrenAfter=function(e,t){var n,r=this,o=this.childNodes.indexOf(e);-1!==o&&((n=this.childNodes).splice.apply(n,u([o+1,0],t)),t.forEach(function(e){e.parent&&e.parent.removeChild(e),e.parent=r}))},t.prototype.insertBefore=function(e,t){var n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))},t.prototype.query=function(e){return this.queryAll(e)[0]||null},t.prototype.queryAll=function(e){var t=[];return function e(t,n,r){t.childNodes.forEach(function(t){t instanceof wn&&(n(t)&&r.push(t),e(t,n,r))})}(this,e,t),t},t.prototype.queryAllNodes=function(e){var t=[];return function e(t,n,r){t instanceof wn&&t.childNodes.forEach(function(t){n(t)&&r.push(t),t instanceof wn&&e(t,n,r)})}(this,e,t),t},Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes.filter(function(e){return e instanceof t})},enumerable:!0,configurable:!0}),t.prototype.triggerEventHandler=function(e,t){this.listeners.forEach(function(n){n.name==e&&n.callback(t)})},t}(_n),xn=new Map;function Nn(e){return xn.get(e)||null}function En(e){xn.set(e.nativeNode,e)}function On(e,t){var n=Sn(e),r=Sn(t);return n&&r?function(e,t,n){for(var r=e[me()](),o=t[me()]();;){var i=r.next(),a=o.next();if(i.done&&a.done)return!0;if(i.done||a.done)return!1;if(!n(i.value,a.value))return!1}}(e,t,On):!(n||!e||"object"!=typeof e&&"function"!=typeof e||r||!t||"object"!=typeof t&&"function"!=typeof t)||ye(e,t)}var Cn=function(){function e(e){this.wrapped=e}return e.wrap=function(t){return new e(t)},e.unwrap=function(t){return e.isWrapped(t)?t.wrapped:t},e.isWrapped=function(t){return t instanceof e},e}(),In=function(){function e(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}return e.prototype.isFirstChange=function(){return this.firstChange},e}();function Sn(e){return!!Tn(e)&&(Array.isArray(e)||!(e instanceof Map)&&me()in e)}function Tn(e){return null!==e&&("function"==typeof e||"object"==typeof e)}var kn=function(){function e(){}return e.prototype.supports=function(e){return Sn(e)},e.prototype.create=function(e){return new Pn(e)},e}(),An=function(e,t){return t},Pn=function(){function e(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||An}return e.prototype.forEachItem=function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)},e.prototype.forEachOperation=function(e){for(var t=this._itHead,n=this._removalsHead,r=0,o=null;t||n;){var i=!n||t&&t.currentIndex<jn(n,r,o)?t:n,a=jn(i,r,o),s=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(t=t._next,null==i.previousIndex)r++;else{o||(o=[]);var u=a-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var f=c<o.length?o[c]:o[c]=0,p=f+c;l<=p&&p<u&&(o[c]=f+1)}o[i.previousIndex]=l-u}}a!==s&&e(i,a,s)}},e.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)},e.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},e.prototype.forEachMovedItem=function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)},e.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},e.prototype.forEachIdentityChange=function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)},e.prototype.diff=function(e){if(null==e&&(e=[]),!Sn(e))throw new Error("Error trying to diff '"+ve(e)+"'. Only arrays and iterables are allowed");return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var t=this;this._reset();var n,r,o,i=this._itHead,a=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)o=this._trackByFn(s,r=e[s]),null!==i&&ye(i.trackById,o)?(a&&(i=this._verifyReinsertion(i,r,o,s)),ye(i.item,r)||this._addIdentityChange(i,r)):(i=this._mismatch(i,r,o,s),a=!0),i=i._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r=e[me()](),o=void 0;!(o=r.next()).done;)t(o.value)}(e,function(e){o=t._trackByFn(n,e),null!==i&&ye(i.trackById,o)?(a&&(i=t._verifyReinsertion(i,e,o,n)),ye(i.item,e)||t._addIdentityChange(i,e)):(i=t._mismatch(i,e,o,n),a=!0),i=i._next,n++}),this.length=n;return this._truncate(i),this.collection=e,this.isDirty},Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),e.prototype._reset=function(){if(this.isDirty){var e=void 0,t=void 0;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},e.prototype._mismatch=function(e,t,n,r){var o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(ye(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(ye(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):e=this._addAfter(new Mn(t,n),o,r),e},e.prototype._verifyReinsertion=function(e,t,n,r){var o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e},e.prototype._truncate=function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},e.prototype._reinsertAfter=function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e},e.prototype._moveAfter=function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e},e.prototype._addAfter=function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e},e.prototype._insertAfter=function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Rn),this._linkedRecords.put(e),e.currentIndex=n,e},e.prototype._remove=function(e){return this._addToRemovals(this._unlink(e))},e.prototype._unlink=function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e},e.prototype._addToMoves=function(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)},e.prototype._addToRemovals=function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Rn),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e},e.prototype._addIdentityChange=function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e},e}(),Mn=function(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Dn=function(){function e(){this._head=null,this._tail=null}return e.prototype.add=function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)},e.prototype.get=function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&ye(n.trackById,e))return n;return null},e.prototype.remove=function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head},e}(),Rn=function(){function e(){this.map=new Map}return e.prototype.put=function(e){var t=e.trackById,n=this.map.get(t);n||(n=new Dn,this.map.set(t,n)),n.add(e)},e.prototype.get=function(e,t){var n=this.map.get(e);return n?n.get(e,t):null},e.prototype.remove=function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.map.clear()},e}();function jn(e,t,n){var r=e.previousIndex;if(null===r)return r;var o=0;return n&&r<n.length&&(o=n[r]),r+t+o}var Ln=function(){function e(){}return e.prototype.supports=function(e){return e instanceof Map||Tn(e)},e.prototype.create=function(){return new Vn},e}(),Vn=function(){function e(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),e.prototype.forEachItem=function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)},e.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)},e.prototype.forEachChangedItem=function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)},e.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},e.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},e.prototype.diff=function(e){if(e){if(!(e instanceof Map||Tn(e)))throw new Error("Error trying to diff '"+ve(e)+"'. Only maps and objects are allowed")}else e=new Map;return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var o=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},e.prototype._insertBeforeOrAppend=function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null},e.prototype._getOrCreateRecordForKey=function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,o=n._next;return r&&(r._next=o),o&&(o._prev=r),n._next=null,n._prev=null,n}var i=new zn(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i},e.prototype._reset=function(){if(this.isDirty){var e=void 0;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},e.prototype._maybeAddToChanges=function(e,t){ye(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))},e.prototype._addToAdditions=function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)},e.prototype._addToChanges=function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)},e.prototype._forEach=function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})},e}(),zn=function(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Fn=function(){function e(e){this.factories=e}return e.create=function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)},e.extend=function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new Ee,new xe]]}},e.prototype.find=function(e){var t,n=this.factories.find(function(t){return t.supports(e)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((t=e).name||typeof t)+"'")},e.ngInjectableDef=ae({providedIn:"root",factory:function(){return new e([new kn])}}),e}(),Bn=function(){function e(e){this.factories=e}return e.create=function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)},e.extend=function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new Ee,new xe]]}},e.prototype.find=function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '"+e+"'")},e}(),Un=[new Ln],Wn=new Fn([new kn]),$n=new Bn(Un),Hn=sn(null,"core",[{provide:wt,useValue:"unknown"},{provide:ln,deps:[ke]},{provide:Jt,deps:[]},{provide:Nt,deps:[]}]),qn=new se("LocaleId");function Gn(){return Wn}function Kn(){return $n}function Xn(e){return e||"en-US"}var Zn=function(e){},Yn=function(){function e(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return e.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null);var n=t.response.body;return n.removeChild(n.firstChild),n},e.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},e.prototype.getInertBodyElement_InertDocument=function(e){var t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},e.prototype.stripCustomNsAttrs=function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var o=e.firstChild;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling},e}(),Qn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Jn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function er(e){return(e=String(e)).match(Qn)||e.match(Jn)?e:(on()&&console.warn("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function tr(e){var t,n,r={};try{for(var o=a(e.split(",")),i=o.next();!i.done;i=o.next())r[i.value]=!0}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function nr(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o={};try{for(var i=a(n),s=i.next();!s.done;s=i.next()){var u=s.value;for(var l in u)u.hasOwnProperty(l)&&(o[l]=!0)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o}var rr,or=tr("area,br,col,hr,img,wbr"),ir=tr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ar=tr("rp,rt"),sr=nr(ar,ir),ur=nr(or,nr(ir,tr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),nr(ar,tr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sr),lr=tr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cr=tr("srcset"),fr=nr(lr,cr,tr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),pr=function(){function e(){this.sanitizedSomething=!1,this.buf=[]}return e.prototype.sanitizeChildren=function(e){for(var t=e.firstChild;t;)if(t.nodeType===Node.ELEMENT_NODE?this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var n=this.checkClobberedElement(t,t.nextSibling);if(n){t=n;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")},e.prototype.startElement=function(e){var t=e.nodeName.toLowerCase();if(ur.hasOwnProperty(t)){this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,o=0;o<r.length;o++){var i=r.item(o),a=i.name,s=a.toLowerCase();if(fr.hasOwnProperty(s)){var u=i.value;lr[s]&&(u=er(u)),cr[s]&&(n=u,u=(n=String(n)).split(",").map(function(e){return er(e.trim())}).join(", ")),this.buf.push(" ",a,'="',mr(u),'"')}else this.sanitizedSomething=!0}this.buf.push(">")}else this.sanitizedSomething=!0},e.prototype.endElement=function(e){var t=e.nodeName.toLowerCase();ur.hasOwnProperty(t)&&!or.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))},e.prototype.chars=function(e){this.buf.push(mr(e))},e.prototype.checkClobberedElement=function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return t},e}(),hr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dr=/([^\#-~ |!])/g;function mr(e){return e.replace(/&/g,"&amp;").replace(hr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(dr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function gr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var yr=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),vr=/^url\(([^)]+)\)$/,br=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({}),_r=function(){};function wr(e,t,n){var r=e.state,o=1792&r;return o===t?(e.state=-1793&r|n,e.initIndex=-1,!0):o===n}function xr(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function Nr(e,t){return e.nodes[t]}function Er(e,t){return e.nodes[t]}function Or(e,t){return e.nodes[t]}function Cr(e,t){return e.nodes[t]}function Ir(e,t){return e.nodes[t]}var Sr={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function Tr(e,t,n,r){var o="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+t+"'. Current value: '"+n+"'.";return r&&(o+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){var n=new Error(e);return kr(n,t),n}(o,e)}function kr(e,t){e[Ze]=t,e[Qe]=t.logError.bind(t)}function Ar(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+e)}var Pr=function(){},Mr=new Map;function Dr(e){var t=Mr.get(e);return t||(t=ve(e)+"_"+Mr.size,Mr.set(e,t)),t}var Rr="$$undefined",jr="$$empty";function Lr(e){return{id:Rr,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var Vr=0;function zr(e,t,n,r){return!(!(2&e.state)&&ye(e.oldValues[t.bindingIndex+n],r))}function Fr(e,t,n,r){return!!zr(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function Br(e,t,n,r){var o=e.oldValues[t.bindingIndex+n];if(1&e.state||!On(o,r)){var i=t.bindings[n].name;throw Tr(Sr.createDebugContext(e,t.nodeIndex),i+": "+o,i+": "+r,0!=(1&e.state))}}function Ur(e){for(var t=e;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function Wr(e,t){for(var n=e;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function $r(e,t,n,r){try{return Ur(33554432&e.def.nodes[t].flags?Er(e,t).componentView:e),Sr.handleEvent(e,t,n,r)}catch(t){e.root.errorHandler.handleError(t)}}function Hr(e){return e.parent?Er(e.parent,e.parentNodeDef.nodeIndex):null}function qr(e){return e.parent?e.parentNodeDef.parent:null}function Gr(e,t){switch(201347067&t.flags){case 1:return Er(e,t.nodeIndex).renderElement;case 2:return Nr(e,t.nodeIndex).renderText}}function Kr(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function Xr(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function Zr(e){var t={},n=0,r={};return e&&e.forEach(function(e){var o=s(e,2),i=o[0],a=o[1];"number"==typeof i?(t[i]=a,n|=function(e){return 1<<e%32}(i)):r[i]=a}),{matchedQueries:t,references:r,matchedQueryIds:n}}function Yr(e,t){return e.map(function(e){var n,r,o;return Array.isArray(e)?(o=(n=s(e,2))[0],r=n[1]):(o=0,r=e),r&&("function"==typeof r||"object"==typeof r)&&t&&Object.defineProperty(r,Oe,{value:t,configurable:!0}),{flags:o,token:r,tokenKey:Dr(r)}})}function Qr(e,t,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Ke.Native?Er(e,n.renderParent.nodeIndex).renderElement:void 0:t}var Jr=new WeakMap;function eo(e){var t=Jr.get(e);return t||((t=e(function(){return Pr})).factory=e,Jr.set(e,t)),t}function to(e,t,n,r,o){3===t&&(n=e.renderer.parentNode(Gr(e,e.def.lastRenderRootNode))),no(e,t,0,e.def.nodes.length-1,n,r,o)}function no(e,t,n,r,o,i,a){for(var s=n;s<=r;s++){var u=e.def.nodes[s];11&u.flags&&oo(e,u,t,o,i,a),s+=u.childCount}}function ro(e,t,n,r,o,i){for(var a=e;a&&!Kr(a);)a=a.parent;for(var s=a.parent,u=qr(a),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var f=s.def.nodes[c];f.ngContentIndex===t&&oo(s,f,n,r,o,i),c+=f.childCount}if(!s.parent){var p=e.root.projectableNodes[t];if(p)for(c=0;c<p.length;c++)io(e,p[c],n,r,o,i)}}function oo(e,t,n,r,o,i){if(8&t.flags)ro(e,t.ngContent.index,n,r,o,i);else{var a=Gr(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&io(e,a,n,r,o,i),32&t.bindingFlags&&io(Er(e,t.nodeIndex).componentView,a,n,r,o,i)):io(e,a,n,r,o,i),16777216&t.flags)for(var s=Er(e,t.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)to(s[u],n,r,o,i);1&t.flags&&!t.element.name&&no(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,o,i)}}function io(e,t,n,r,o,i){var a=e.renderer;switch(n){case 1:a.appendChild(r,t);break;case 2:a.insertBefore(r,t,o);break;case 3:a.removeChild(r,t);break;case 0:i.push(t)}}var ao=/^:([^:]+):(.+)$/;function so(e){if(":"===e[0]){var t=e.match(ao);return[t[1],t[2]]}return["",e]}function uo(e){for(var t=0,n=0;n<e.length;n++)t|=e[n].flags;return t}function lo(e,t,n,r,o,i,a,s,u,l,c,f,p,h,d,m,g,y,v,b){switch(e){case 1:return t+co(n)+r;case 2:return t+co(n)+r+co(o)+i;case 3:return t+co(n)+r+co(o)+i+co(a)+s;case 4:return t+co(n)+r+co(o)+i+co(a)+s+co(u)+l;case 5:return t+co(n)+r+co(o)+i+co(a)+s+co(u)+l+co(c)+f;case 6:return t+co(n)+r+co(o)+i+co(a)+s+co(u)+l+co(c)+f+co(p)+h;case 7:return t+co(n)+r+co(o)+i+co(a)+s+co(u)+l+co(c)+f+co(p)+h+co(d)+m;case 8:return t+co(n)+r+co(o)+i+co(a)+s+co(u)+l+co(c)+f+co(p)+h+co(d)+m+co(g)+y;case 9:return t+co(n)+r+co(o)+i+co(a)+s+co(u)+l+co(c)+f+co(p)+h+co(d)+m+co(g)+y+co(v)+b;default:throw new Error("Does not support more than 9 expressions")}}function co(e){return null!=e?e.toString():""}function fo(e,t,n,r,o,i){e|=1;var a=Zr(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:i?eo(i):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:o||Pr},provider:null,text:null,query:null,ngContent:null}}function po(e,t,n,r,o,i,a,u,l,c,f,p){var h;void 0===a&&(a=[]),c||(c=Pr);var d=Zr(n),m=d.matchedQueries,g=d.references,y=d.matchedQueryIds,v=null,b=null;i&&(v=(h=s(so(i),2))[0],b=h[1]),u=u||[];for(var _=new Array(u.length),w=0;w<u.length;w++){var x=s(u[w],3),N=x[0],E=x[2],O=s(so(x[1]),2),C=O[0],I=O[1],S=void 0,T=void 0;switch(15&N){case 4:T=E;break;case 1:case 8:S=E}_[w]={flags:N,ns:C,name:I,nonMinifiedName:I,securityContext:S,suffix:T}}l=l||[];var k=new Array(l.length);for(w=0;w<l.length;w++){var A=s(l[w],2);k[w]={type:0,target:A[0],eventName:A[1],propName:null}}var P=(a=a||[]).map(function(e){var t=s(e,2),n=t[1],r=s(so(t[0]),2);return[r[0],r[1],n]});return p=function(e){if(e&&e.id===Rr){var t=null!=e.encapsulation&&e.encapsulation!==Ke.None||e.styles.length||Object.keys(e.data).length;e.id=t?"c"+Vr++:jr}return e&&e.id===jr&&(e=null),e||null}(p),f&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:m,matchedQueryIds:y,references:g,ngContentIndex:r,childCount:o,bindings:_,bindingFlags:uo(_),outputs:k,element:{ns:v,name:b,attrs:P,template:null,componentProvider:null,componentView:f||null,componentRendererType:p,publicProviders:null,allProviders:null,handleEvent:c||Pr},provider:null,text:null,query:null,ngContent:null}}function ho(e,t,n){var r,o=n.element,i=e.root.selectorOrNode,a=e.renderer;if(e.parent||!i){r=o.name?a.createElement(o.name,o.ns):a.createComment("");var u=Qr(e,t,n);u&&a.appendChild(u,r)}else r=a.selectRootElement(i);if(o.attrs)for(var l=0;l<o.attrs.length;l++){var c=s(o.attrs[l],3);a.setAttribute(r,c[1],c[2],c[0])}return r}function mo(e,t,n,r){for(var o=0;o<n.outputs.length;o++){var i=n.outputs[o],a=go(e,n.nodeIndex,(f=i.eventName,(c=i.target)?c+":"+f:f)),s=i.target,u=e;"component"===i.target&&(s=null,u=t);var l=u.renderer.listen(s||r,i.eventName,a);e.disposables[n.outputIndex+o]=l}var c,f}function go(e,t,n){return function(r){return $r(e,t,n,r)}}function yo(e,t,n,r){if(!Fr(e,t,n,r))return!1;var o=t.bindings[n],i=Er(e,t.nodeIndex),a=i.renderElement,s=o.name;switch(15&o.flags){case 1:!function(e,t,n,r,o,i){var a=t.securityContext,s=a?e.root.sanitizer.sanitize(a,i):i;s=null!=s?s.toString():null;var u=e.renderer;null!=i?u.setAttribute(n,o,s,r):u.removeAttribute(n,o,r)}(e,o,a,o.ns,s,r);break;case 2:!function(e,t,n,r){var o=e.renderer;r?o.addClass(t,n):o.removeClass(t,n)}(e,a,s,r);break;case 4:!function(e,t,n,r,o){var i=e.root.sanitizer.sanitize(br.STYLE,o);if(null!=i){i=i.toString();var a=t.suffix;null!=a&&(i+=a)}else i=null;var s=e.renderer;null!=i?s.setStyle(n,r,i):s.removeStyle(n,r)}(e,o,a,s,r);break;case 8:!function(e,t,n,r,o){var i=t.securityContext,a=i?e.root.sanitizer.sanitize(i,o):o;e.renderer.setProperty(n,r,a)}(33554432&t.flags&&32&o.flags?i.componentView:e,o,a,s,r)}return!0}var vo=new Object,bo=Dr(ke),_o=Dr(Se),wo=Dr(Lt);function xo(e,t,n,r){return n=_e(n),{index:-1,deps:Yr(r,ve(t)),flags:e,token:t,value:n}}function No(e,t,n){void 0===n&&(n=ke.THROW_IF_NOT_FOUND);var r,o,i=He(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);var a=t.tokenKey;switch(a){case bo:case _o:case wo:return e}var s=e._def.providersByKey[a];if(s){var u=e._providers[s.index];return void 0===u&&(u=e._providers[s.index]=Eo(e,s)),u===vo?void 0:u}if(t.token.ngInjectableDef&&(r=e,null!=(o=t.token.ngInjectableDef).providedIn&&(function(e,t){return e._def.modules.indexOf(o.providedIn)>-1}(r)||"root"===o.providedIn&&r._def.isRoot))){var l=e._providers.length;return e._def.providersByKey[t.tokenKey]={flags:5120,value:t.token.ngInjectableDef.factory,deps:[],index:l,token:t.token},e._providers[l]=vo,e._providers[l]=Eo(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{He(i)}}function Eo(e,t){var n;switch(201347067&t.flags){case 512:n=function(e,t,n){var r=n.length;switch(r){case 0:return new t;case 1:return new t(No(e,n[0]));case 2:return new t(No(e,n[0]),No(e,n[1]));case 3:return new t(No(e,n[0]),No(e,n[1]),No(e,n[2]));default:for(var o=new Array(r),i=0;i<r;i++)o[i]=No(e,n[i]);return new(t.bind.apply(t,u([void 0],o)))}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){var r=n.length;switch(r){case 0:return t();case 1:return t(No(e,n[0]));case 2:return t(No(e,n[0]),No(e,n[1]));case 3:return t(No(e,n[0]),No(e,n[1]),No(e,n[2]));default:for(var o=Array(r),i=0;i<r;i++)o[i]=No(e,n[i]);return t.apply(void 0,u(o))}}(e,t.value,t.deps);break;case 2048:n=No(e,t.deps[0]);break;case 256:n=t.value}return n===vo||null==n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?vo:n}function Oo(e,t){var n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;var r=n[t];return r.viewContainerParent=null,To(n,t),Sr.dirtyParentQueries(r),Io(r),r}function Co(e,t,n){var r=t?Gr(t,t.def.lastRenderRootNode):e.renderElement;to(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function Io(e){to(e,3,null,null,void 0)}function So(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function To(e,t){t>=e.length-1?e.pop():e.splice(t,1)}var ko=new Object,Ao=function(e){function t(t,n,r,o,i,a){var s=e.call(this)||this;return s.selector=t,s.componentType=n,s._inputs=o,s._outputs=i,s.ngContentSelectors=a,s.viewDefFactory=r,s}return o(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){var e=[],t=this._inputs;for(var n in t)e.push({propName:n,templateName:t[n]});return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){var e=[];for(var t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t,n,r){if(!r)throw new Error("ngModule should be provided");var o=eo(this.viewDefFactory),i=o.nodes[0].element.componentProvider.nodeIndex,a=Sr.createRootView(e,t||[],n,o,r,ko),s=Or(a,i).instance;return n&&a.renderer.setAttribute(Er(a,0).renderElement,"ng-version",Xe.full),new Po(a,new jo(a),s)},t}(St),Po=function(e){function t(t,n,r){var o=e.call(this)||this;return o._view=t,o._viewRef=n,o._component=r,o._elDef=o._view.def.nodes[0],o.hostView=n,o.changeDetectorRef=n,o.instance=r,o}return o(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return new gn(Er(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Fo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._viewRef.destroy()},t.prototype.onDestroy=function(e){this._viewRef.onDestroy(e)},t}(It);function Mo(e,t,n){return new Do(e,t,n)}var Do=function(){function e(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}return Object.defineProperty(e.prototype,"element",{get:function(){return new gn(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Fo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentInjector",{get:function(){for(var e=this._view,t=this._elDef.parent;!t&&e;)t=qr(e),e=e.parent;return e?new Fo(e,t):new Fo(this._view,null)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var t=Oo(this._data,e);Sr.destroyView(t)}},e.prototype.get=function(e){var t=this._embeddedViews[e];if(t){var n=new jo(t);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(e.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),e.prototype.createEmbeddedView=function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r},e.prototype.createComponent=function(e,t,n,r,o){var i=n||this.parentInjector;o||e instanceof jt||(o=i.get(Lt));var a=e.create(i,r,void 0,o);return this.insert(a.hostView,t),a},e.prototype.insert=function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,o,i,a=e;return o=a._view,i=(n=this._data).viewContainer._embeddedViews,null!==(r=t)&&void 0!==r||(r=i.length),o.viewContainerParent=this._view,So(i,r,o),function(e,t){var n=Hr(t);if(n&&n!==e&&!(16&t.state)){t.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,n){if(!(4&n.flags)){t.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,t.parentNodeDef)}}(n,o),Sr.dirtyParentQueries(o),Co(n,r>0?i[r-1]:null,o),a.attachToViewContainerRef(this),e},e.prototype.move=function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,o,i,a,s=this._embeddedViews.indexOf(e._view);return o=t,a=(i=(n=this._data).viewContainer._embeddedViews)[r=s],To(i,r),null==o&&(o=i.length),So(i,o,a),Sr.dirtyParentQueries(a),Io(a),Co(n,o>0?i[o-1]:null,a),e},e.prototype.indexOf=function(e){return this._embeddedViews.indexOf(e._view)},e.prototype.remove=function(e){var t=Oo(this._data,e);t&&Sr.destroyView(t)},e.prototype.detach=function(e){var t=Oo(this._data,e);return t?new jo(t):null},e}();function Ro(e){return new jo(e)}var jo=function(){function e(e){this._view=e,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(e.prototype,"rootNodes",{get:function(){return to(this._view,0,void 0,void 0,e=[]),e;var e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),e.prototype.markForCheck=function(){Ur(this._view)},e.prototype.detach=function(){this._view.state&=-5},e.prototype.detectChanges=function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{Sr.checkAndUpdateView(this._view)}finally{e.end&&e.end()}},e.prototype.checkNoChanges=function(){Sr.checkNoChangesView(this._view)},e.prototype.reattach=function(){this._view.state|=4},e.prototype.onDestroy=function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)},e.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Sr.destroyView(this._view)},e.prototype.detachFromAppRef=function(){this._appRef=null,Io(this._view),Sr.dirtyParentQueries(this._view)},e.prototype.attachToAppRef=function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e},e.prototype.attachToViewContainerRef=function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e},e}();function Lo(e,t){return new Vo(e,t)}var Vo=function(e){function t(t,n){var r=e.call(this)||this;return r._parentView=t,r._def=n,r}return o(t,e),t.prototype.createEmbeddedView=function(e){return new jo(Sr.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))},Object.defineProperty(t.prototype,"elementRef",{get:function(){return new gn(Er(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),t}(vn);function zo(e,t){return new Fo(e,t)}var Fo=function(){function e(e,t){this.view=e,this.elDef=t}return e.prototype.get=function(e,t){return void 0===t&&(t=ke.THROW_IF_NOT_FOUND),Sr.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Dr(e)},t)},e}();function Bo(e,t){var n=e.def.nodes[t];if(1&n.flags){var r=Er(e,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Nr(e,n.nodeIndex).renderText;if(20240&n.flags)return Or(e,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+t)}function Uo(e){return new Wo(e.renderer)}var Wo=function(){function e(e){this.delegate=e}return e.prototype.selectRootElement=function(e){return this.delegate.selectRootElement(e)},e.prototype.createElement=function(e,t){var n=s(so(t),2),r=this.delegate.createElement(n[1],n[0]);return e&&this.delegate.appendChild(e,r),r},e.prototype.createViewRoot=function(e){return e},e.prototype.createTemplateAnchor=function(e){var t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t},e.prototype.createText=function(e,t){var n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n},e.prototype.projectNodes=function(e,t){for(var n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])},e.prototype.attachViewAfter=function(e,t){for(var n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e),o=0;o<t.length;o++)this.delegate.insertBefore(n,t[o],r)},e.prototype.detachView=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},e.prototype.destroyView=function(e,t){for(var n=0;n<t.length;n++)this.delegate.destroyNode(t[n])},e.prototype.listen=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.listenGlobal=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.setElementProperty=function(e,t,n){this.delegate.setProperty(e,t,n)},e.prototype.setElementAttribute=function(e,t,n){var r=s(so(t),2),o=r[0],i=r[1];null!=n?this.delegate.setAttribute(e,i,n,o):this.delegate.removeAttribute(e,i,o)},e.prototype.setBindingDebugInfo=function(e,t,n){},e.prototype.setElementClass=function(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)},e.prototype.setElementStyle=function(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)},e.prototype.invokeElementMethod=function(e,t,n){e[t].apply(e,n)},e.prototype.setText=function(e,t){this.delegate.setValue(e,t)},e.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},e}();function $o(e,t,n,r){return new Ho(e,t,n,r)}var Ho=function(){function e(e,t,n,r){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var t=e._def,n=e._providers=new Array(t.providers.length),r=0;r<t.providers.length;r++){var o=t.providers[r];4096&o.flags||void 0===n[r]&&(n[r]=Eo(e,o))}}(this)}return e.prototype.get=function(e,t,n){void 0===t&&(t=ke.THROW_IF_NOT_FOUND),void 0===n&&(n=0);var r=0;return 4&n?r|=1:2&n&&(r|=4),No(this,{token:e,tokenKey:Dr(e),flags:r},t)},Object.defineProperty(e.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentFactoryResolver",{get:function(){return this.get(Dt)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+ve(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(e,t){for(var n=e._def,r=new Set,o=0;o<n.providers.length;o++)if(131072&n.providers[o].flags){var i=e._providers[o];if(i&&i!==vo){var a=i.ngOnDestroy;"function"!=typeof a||r.has(i)||(a.apply(i),r.add(i))}}}(this),this._destroyListeners.forEach(function(e){return e()})},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},e}(),qo=Dr(function(){}),Go=Dr(mn),Ko=Dr(gn),Xo=Dr(bn),Zo=Dr(vn),Yo=Dr(function(){}),Qo=Dr(ke),Jo=Dr(Se);function ei(e,t,n,r,o,i,a,u){var l=[];if(a)for(var c in a){var f=s(a[c],2);l[f[0]]={flags:8,name:c,nonMinifiedName:f[1],ns:null,securityContext:null,suffix:null}}var p=[];if(u)for(var h in u)p.push({type:1,propName:h,target:null,eventName:u[h]});return ni(e,t|=16384,n,r,o,o,i,l,p)}function ti(e,t,n,r,o){return ni(-1,e,t,0,n,r,o)}function ni(e,t,n,r,o,i,a,s,u){var l=Zr(n),c=l.matchedQueries,f=l.references,p=l.matchedQueryIds;u||(u=[]),s||(s=[]),i=_e(i);var h=Yr(a,ve(o));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:p,references:f,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:uo(s),outputs:u,element:null,provider:{token:o,value:i,deps:h},text:null,query:null,ngContent:null}}function ri(e,t){return si(e,t)}function oi(e,t){for(var n=e;n.parent&&!Kr(n);)n=n.parent;return ui(n.parent,qr(n),!0,t.provider.value,t.provider.deps)}function ii(e,t){var n=ui(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(var r=0;r<t.outputs.length;r++){var o=t.outputs[r],i=n[o.propName].subscribe(ai(e,t.parent.nodeIndex,o.eventName));e.disposables[t.outputIndex+r]=i.unsubscribe.bind(i)}return n}function ai(e,t,n){return function(r){return $r(e,t,n,r)}}function si(e,t){var n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return ui(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,o){var i=o.length;switch(i){case 0:return r();case 1:return r(ci(e,t,n,o[0]));case 2:return r(ci(e,t,n,o[0]),ci(e,t,n,o[1]));case 3:return r(ci(e,t,n,o[0]),ci(e,t,n,o[1]),ci(e,t,n,o[2]));default:for(var a=Array(i),s=0;s<i;s++)a[s]=ci(e,t,n,o[s]);return r.apply(void 0,u(a))}}(e,t.parent,n,r.value,r.deps);case 2048:return ci(e,t.parent,n,r.deps[0]);case 256:return r.value}}function ui(e,t,n,r,o){var i=o.length;switch(i){case 0:return new r;case 1:return new r(ci(e,t,n,o[0]));case 2:return new r(ci(e,t,n,o[0]),ci(e,t,n,o[1]));case 3:return new r(ci(e,t,n,o[0]),ci(e,t,n,o[1]),ci(e,t,n,o[2]));default:for(var a=new Array(i),s=0;s<i;s++)a[s]=ci(e,t,n,o[s]);return new(r.bind.apply(r,u([void 0],a)))}}var li={};function ci(e,t,n,r,o){if(void 0===o&&(o=ke.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var i=e;2&r.flags&&(o=null);var a=r.tokenKey;a===Yo&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);for(var s=e;s;){if(t)switch(a){case qo:return Uo(fi(s,t,n));case Go:return fi(s,t,n).renderer;case Ko:return new gn(Er(s,t.nodeIndex).renderElement);case Xo:return Er(s,t.nodeIndex).viewContainer;case Zo:if(t.element.template)return Er(s,t.nodeIndex).template;break;case Yo:return Ro(fi(s,t,n));case Qo:case Jo:return zo(s,t);default:var u=(n?t.element.allProviders:t.element.publicProviders)[a];if(u){var l=Or(s,u.nodeIndex);return l||(l={instance:si(s,u)},s.nodes[u.nodeIndex]=l),l.instance}}n=Kr(s),t=qr(s),s=s.parent,4&r.flags&&(s=null)}var c=i.root.injector.get(r.token,li);return c!==li||o===li?c:i.root.ngModule.injector.get(r.token,o)}function fi(e,t,n){var r;if(n)r=Er(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!Kr(r);)r=r.parent;return r}function pi(e,t,n,r,o,i){if(32768&n.flags){var a=Er(e,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(t.instance[n.bindings[r].name]=o,524288&n.flags){i=i||{};var s=Cn.unwrap(e.oldValues[n.bindingIndex+r]);i[n.bindings[r].nonMinifiedName]=new In(s,o,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=o,i}function hi(e,t){if(e.def.nodeFlags&t)for(var n=e.def.nodes,r=0,o=0;o<n.length;o++){var i=n[o],a=i.parent;for(!a&&i.flags&t&&mi(e,o,i.flags&t,r++),0==(i.childFlags&t)&&(o+=i.childCount);a&&1&a.flags&&o===a.nodeIndex+a.childCount;)a.directChildFlags&t&&(r=di(e,a,t,r)),a=a.parent}}function di(e,t,n,r){for(var o=t.nodeIndex+1;o<=t.nodeIndex+t.childCount;o++){var i=e.def.nodes[o];i.flags&n&&mi(e,o,i.flags&n,r++),o+=i.childCount}return r}function mi(e,t,n,r){var o=Or(e,t);if(o){var i=o.instance;i&&(Sr.setCurrentNode(e,t),1048576&n&&xr(e,512,r)&&i.ngAfterContentInit(),2097152&n&&i.ngAfterContentChecked(),4194304&n&&xr(e,768,r)&&i.ngAfterViewInit(),8388608&n&&i.ngAfterViewChecked(),131072&n&&i.ngOnDestroy())}}function gi(e){for(var t=e.def.nodeMatchedQueries;e.parent&&Xr(e);){var n=e.parentNodeDef;e=e.parent;for(var r=n.nodeIndex+n.childCount,o=0;o<=r;o++)67108864&(i=e.def.nodes[o]).flags&&536870912&i.flags&&(i.query.filterId&t)===i.query.filterId&&Ir(e,o).setDirty(),!(1&i.flags&&o+i.childCount<n.nodeIndex)&&67108864&i.childFlags&&536870912&i.childFlags||(o+=i.childCount)}if(134217728&e.def.nodeFlags)for(o=0;o<e.def.nodes.length;o++){var i;134217728&(i=e.def.nodes[o]).flags&&536870912&i.flags&&Ir(e,o).setDirty(),o+=i.childCount}}function yi(e,t){var n=Ir(e,t.nodeIndex);if(n.dirty){var r,o=void 0;if(67108864&t.flags){var i=t.parent.parent;o=vi(e,i.nodeIndex,i.nodeIndex+i.childCount,t.query,[]),r=Or(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(o=vi(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(o);for(var a=t.query.bindings,s=!1,u=0;u<a.length;u++){var l=a[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}r[l.propName]=c}s&&n.notifyOnChanges()}}function vi(e,t,n,r,o){for(var i=t;i<=n;i++){var a=e.def.nodes[i],s=a.matchedQueries[r.id];if(null!=s&&o.push(bi(e,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Er(e,i);if((a.childMatchedQueries&r.filterId)===r.filterId&&(vi(e,i+1,i+a.childCount,r,o),i+=a.childCount),16777216&a.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var f=l[c],p=Hr(f);p&&p===u&&vi(f,0,f.def.nodes.length-1,r,o)}var h=u.template._projectedViews;if(h)for(c=0;c<h.length;c++){var d=h[c];vi(d,0,d.def.nodes.length-1,r,o)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(i+=a.childCount)}return o}function bi(e,t,n){if(null!=n)switch(n){case 1:return Er(e,t.nodeIndex).renderElement;case 0:return new gn(Er(e,t.nodeIndex).renderElement);case 2:return Er(e,t.nodeIndex).template;case 3:return Er(e,t.nodeIndex).viewContainer;case 4:return Or(e,t.nodeIndex).instance}}function _i(e,t,n){var r=Qr(e,t,n);r&&ro(e,n.ngContent.index,1,r,null,void 0)}function wi(e,t,n){for(var r=new Array(n.length-1),o=1;o<n.length;o++)r[o-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[o]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function xi(e,t,n){var r,o=e.renderer;r=o.createText(n.text.prefix);var i=Qr(e,t,n);return i&&o.appendChild(i,r),{renderText:r}}function Ni(e,t){return(null!=e?e.toString():"")+t.suffix}function Ei(e,t,n,r){for(var o=0,i=0,a=0,s=0,u=0,l=null,c=null,f=!1,p=!1,h=null,d=0;d<t.length;d++){var m=t[d];if(m.nodeIndex=d,m.parent=l,m.bindingIndex=o,m.outputIndex=i,m.renderParent=c,a|=m.flags,u|=m.matchedQueryIds,m.element){var g=m.element;g.publicProviders=l?l.element.publicProviders:Object.create(null),g.allProviders=g.publicProviders,f=!1,p=!1,m.element.template&&(u|=m.element.template.nodeMatchedQueries)}if(Ci(l,m,t.length),o+=m.bindings.length,i+=m.outputs.length,!c&&3&m.flags&&(h=m),20224&m.flags){f||(f=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var y=0!=(32768&m.flags);0==(8192&m.flags)||y?l.element.publicProviders[Dr(m.provider.token)]=m:(p||(p=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Dr(m.provider.token)]=m),y&&(l.element.componentProvider=m)}if(l?(l.childFlags|=m.flags,l.directChildFlags|=m.flags,l.childMatchedQueries|=m.matchedQueryIds,m.element&&m.element.template&&(l.childMatchedQueries|=m.element.template.nodeMatchedQueries)):s|=m.flags,m.childCount>0)l=m,Oi(m)||(c=m);else for(;l&&d===l.nodeIndex+l.childCount;){var v=l.parent;v&&(v.childFlags|=l.childFlags,v.childMatchedQueries|=l.childMatchedQueries),c=(l=v)&&Oi(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:e,nodes:t,updateDirectives:n||Pr,updateRenderer:r||Pr,handleEvent:function(e,n,r,o){return t[n].element.handleEvent(e,r,o)},bindingCount:o,outputCount:i,lastRenderRootNode:h}}function Oi(e){return 0!=(1&e.flags)&&null===e.element.name}function Ci(e,t,n){var r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+t.nodeIndex+"!")}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+t.nodeIndex+"!");if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+t.nodeIndex+"!");if(134217728&t.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+t.nodeIndex+"!")}if(t.childCount){var o=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=o&&t.nodeIndex+t.childCount>o)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+t.nodeIndex+"!")}}function Ii(e,t,n,r){var o=ki(e.root,e.renderer,e,t,n);return Ai(o,e.component,r),Pi(o),o}function Si(e,t,n){var r=ki(e,e.renderer,null,null,t);return Ai(r,n,n),Pi(r),r}function Ti(e,t,n,r){var o,i=t.element.componentRendererType;return o=i?e.root.rendererFactory.createRenderer(r,i):e.root.renderer,ki(e.root,o,e,t.element.componentProvider,n)}function ki(e,t,n,r,o){var i=new Array(o.nodes.length),a=o.outputCount?new Array(o.outputCount):null;return{def:o,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:i,state:13,root:e,renderer:t,oldValues:new Array(o.bindingCount),disposables:a,initIndex:-1}}function Ai(e,t,n){e.component=t,e.context=n}function Pi(e){var t;Kr(e)&&(t=Er(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var n=e.def,r=e.nodes,o=0;o<n.nodes.length;o++){var i=n.nodes[o];Sr.setCurrentNode(e,o);var a=void 0;switch(201347067&i.flags){case 1:var s=ho(e,t,i),u=void 0;if(33554432&i.flags){var l=eo(i.element.componentView);u=Sr.createComponentView(e,i,l,s)}mo(e,u,i,s),a={renderElement:s,componentView:u,viewContainer:null,template:i.element.template?Lo(e,i):void 0},16777216&i.flags&&(a.viewContainer=Mo(e,i,a));break;case 2:a=xi(e,t,i);break;case 512:case 1024:case 2048:case 256:(a=r[o])||4096&i.flags||(a={instance:ri(e,i)});break;case 16:a={instance:oi(e,i)};break;case 16384:(a=r[o])||(a={instance:ii(e,i)}),32768&i.flags&&Ai(Er(e,i.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new yn;break;case 8:_i(e,t,i),a=void 0}r[o]=a}Bi(e,Fi.CreateViewNodes),Hi(e,201326592,268435456,0)}function Mi(e){ji(e),Sr.updateDirectives(e,1),Ui(e,Fi.CheckNoChanges),Sr.updateRenderer(e,1),Bi(e,Fi.CheckNoChanges),e.state&=-97}function Di(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,wr(e,0,256),ji(e),Sr.updateDirectives(e,0),Ui(e,Fi.CheckAndUpdate),Hi(e,67108864,536870912,0);var t=wr(e,256,512);hi(e,2097152|(t?1048576:0)),Sr.updateRenderer(e,0),Bi(e,Fi.CheckAndUpdate),Hi(e,134217728,536870912,0),hi(e,8388608|((t=wr(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,wr(e,768,1024)}function Ri(e,t,n,r,o,i,a,s,l,c,f,p,h){return 0===n?function(e,t,n,r,o,i,a,s,u,l,c,f){switch(201347067&t.flags){case 1:return function(e,t,n,r,o,i,a,s,u,l,c,f){var p=t.bindings.length,h=!1;return p>0&&yo(e,t,0,n)&&(h=!0),p>1&&yo(e,t,1,r)&&(h=!0),p>2&&yo(e,t,2,o)&&(h=!0),p>3&&yo(e,t,3,i)&&(h=!0),p>4&&yo(e,t,4,a)&&(h=!0),p>5&&yo(e,t,5,s)&&(h=!0),p>6&&yo(e,t,6,u)&&(h=!0),p>7&&yo(e,t,7,l)&&(h=!0),p>8&&yo(e,t,8,c)&&(h=!0),p>9&&yo(e,t,9,f)&&(h=!0),h}(e,t,n,r,o,i,a,s,u,l,c,f);case 2:return function(e,t,n,r,o,i,a,s,u,l,c,f){var p=!1,h=t.bindings,d=h.length;if(d>0&&Fr(e,t,0,n)&&(p=!0),d>1&&Fr(e,t,1,r)&&(p=!0),d>2&&Fr(e,t,2,o)&&(p=!0),d>3&&Fr(e,t,3,i)&&(p=!0),d>4&&Fr(e,t,4,a)&&(p=!0),d>5&&Fr(e,t,5,s)&&(p=!0),d>6&&Fr(e,t,6,u)&&(p=!0),d>7&&Fr(e,t,7,l)&&(p=!0),d>8&&Fr(e,t,8,c)&&(p=!0),d>9&&Fr(e,t,9,f)&&(p=!0),p){var m=t.text.prefix;d>0&&(m+=Ni(n,h[0])),d>1&&(m+=Ni(r,h[1])),d>2&&(m+=Ni(o,h[2])),d>3&&(m+=Ni(i,h[3])),d>4&&(m+=Ni(a,h[4])),d>5&&(m+=Ni(s,h[5])),d>6&&(m+=Ni(u,h[6])),d>7&&(m+=Ni(l,h[7])),d>8&&(m+=Ni(c,h[8])),d>9&&(m+=Ni(f,h[9]));var g=Nr(e,t.nodeIndex).renderText;e.renderer.setValue(g,m)}return p}(e,t,n,r,o,i,a,s,u,l,c,f);case 16384:return function(e,t,n,r,o,i,a,s,u,l,c,f){var p=Or(e,t.nodeIndex),h=p.instance,d=!1,m=void 0,g=t.bindings.length;return g>0&&zr(e,t,0,n)&&(d=!0,m=pi(e,p,t,0,n,m)),g>1&&zr(e,t,1,r)&&(d=!0,m=pi(e,p,t,1,r,m)),g>2&&zr(e,t,2,o)&&(d=!0,m=pi(e,p,t,2,o,m)),g>3&&zr(e,t,3,i)&&(d=!0,m=pi(e,p,t,3,i,m)),g>4&&zr(e,t,4,a)&&(d=!0,m=pi(e,p,t,4,a,m)),g>5&&zr(e,t,5,s)&&(d=!0,m=pi(e,p,t,5,s,m)),g>6&&zr(e,t,6,u)&&(d=!0,m=pi(e,p,t,6,u,m)),g>7&&zr(e,t,7,l)&&(d=!0,m=pi(e,p,t,7,l,m)),g>8&&zr(e,t,8,c)&&(d=!0,m=pi(e,p,t,8,c,m)),g>9&&zr(e,t,9,f)&&(d=!0,m=pi(e,p,t,9,f,m)),m&&h.ngOnChanges(m),65536&t.flags&&xr(e,256,t.nodeIndex)&&h.ngOnInit(),262144&t.flags&&h.ngDoCheck(),d}(e,t,n,r,o,i,a,s,u,l,c,f);case 32:case 64:case 128:return function(e,t,n,r,o,i,a,s,u,l,c,f){var p=t.bindings,h=!1,d=p.length;if(d>0&&Fr(e,t,0,n)&&(h=!0),d>1&&Fr(e,t,1,r)&&(h=!0),d>2&&Fr(e,t,2,o)&&(h=!0),d>3&&Fr(e,t,3,i)&&(h=!0),d>4&&Fr(e,t,4,a)&&(h=!0),d>5&&Fr(e,t,5,s)&&(h=!0),d>6&&Fr(e,t,6,u)&&(h=!0),d>7&&Fr(e,t,7,l)&&(h=!0),d>8&&Fr(e,t,8,c)&&(h=!0),d>9&&Fr(e,t,9,f)&&(h=!0),h){var m=Cr(e,t.nodeIndex),g=void 0;switch(201347067&t.flags){case 32:g=new Array(p.length),d>0&&(g[0]=n),d>1&&(g[1]=r),d>2&&(g[2]=o),d>3&&(g[3]=i),d>4&&(g[4]=a),d>5&&(g[5]=s),d>6&&(g[6]=u),d>7&&(g[7]=l),d>8&&(g[8]=c),d>9&&(g[9]=f);break;case 64:g={},d>0&&(g[p[0].name]=n),d>1&&(g[p[1].name]=r),d>2&&(g[p[2].name]=o),d>3&&(g[p[3].name]=i),d>4&&(g[p[4].name]=a),d>5&&(g[p[5].name]=s),d>6&&(g[p[6].name]=u),d>7&&(g[p[7].name]=l),d>8&&(g[p[8].name]=c),d>9&&(g[p[9].name]=f);break;case 128:var y=n;switch(d){case 1:g=y.transform(n);break;case 2:g=y.transform(r);break;case 3:g=y.transform(r,o);break;case 4:g=y.transform(r,o,i);break;case 5:g=y.transform(r,o,i,a);break;case 6:g=y.transform(r,o,i,a,s);break;case 7:g=y.transform(r,o,i,a,s,u);break;case 8:g=y.transform(r,o,i,a,s,u,l);break;case 9:g=y.transform(r,o,i,a,s,u,l,c);break;case 10:g=y.transform(r,o,i,a,s,u,l,c,f)}}m.value=g}return h}(e,t,n,r,o,i,a,s,u,l,c,f);default:throw"unreachable"}}(e,t,r,o,i,a,s,l,c,f,p,h):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){for(var r=!1,o=0;o<n.length;o++)yo(e,t,o,n[o])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){for(var r=t.bindings,o=!1,i=0;i<n.length;i++)Fr(e,t,i,n[i])&&(o=!0);if(o){var a="";for(i=0;i<n.length;i++)a+=Ni(n[i],r[i]);a=t.text.prefix+a;var s=Nr(e,t.nodeIndex).renderText;e.renderer.setValue(s,a)}return o}(e,t,n);case 16384:return function(e,t,n){for(var r=Or(e,t.nodeIndex),o=r.instance,i=!1,a=void 0,s=0;s<n.length;s++)zr(e,t,s,n[s])&&(i=!0,a=pi(e,r,t,s,n[s],a));return a&&o.ngOnChanges(a),65536&t.flags&&xr(e,256,t.nodeIndex)&&o.ngOnInit(),262144&t.flags&&o.ngDoCheck(),i}(e,t,n);case 32:case 64:case 128:return function(e,t,n){for(var r=t.bindings,o=!1,i=0;i<n.length;i++)Fr(e,t,i,n[i])&&(o=!0);if(o){var a=Cr(e,t.nodeIndex),s=void 0;switch(201347067&t.flags){case 32:s=n;break;case 64:for(s={},i=0;i<n.length;i++)s[r[i].name]=n[i];break;case 128:var l=n[0],c=n.slice(1);s=l.transform.apply(l,u(c))}a.value=s}return o}(e,t,n);default:throw"unreachable"}}(e,t,r)}function ji(e){var t=e.def;if(4&t.nodeFlags)for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(4&r.flags){var o=Er(e,n).template._projectedViews;if(o)for(var i=0;i<o.length;i++){var a=o[i];a.state|=32,Wr(a,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Li(e,t,n,r,o,i,a,s,u,l,c,f,p){return 0===n?function(e,t,n,r,o,i,a,s,u,l,c,f){var p=t.bindings.length;p>0&&Br(e,t,0,n),p>1&&Br(e,t,1,r),p>2&&Br(e,t,2,o),p>3&&Br(e,t,3,i),p>4&&Br(e,t,4,a),p>5&&Br(e,t,5,s),p>6&&Br(e,t,6,u),p>7&&Br(e,t,7,l),p>8&&Br(e,t,8,c),p>9&&Br(e,t,9,f)}(e,t,r,o,i,a,s,u,l,c,f,p):function(e,t,n){for(var r=0;r<n.length;r++)Br(e,t,r,n[r])}(e,t,r),!1}function Vi(e,t){if(Ir(e,t.nodeIndex).dirty)throw Tr(Sr.createDebugContext(e,t.nodeIndex),"Query "+t.query.id+" not dirty","Query "+t.query.id+" dirty",0!=(1&e.state))}function zi(e){if(!(128&e.state)){if(Ui(e,Fi.Destroy),Bi(e,Fi.Destroy),hi(e,131072),e.disposables)for(var t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(16&e.state){var t=Hr(e);if(t){var n=t.template._projectedViews;n&&(To(n,n.indexOf(e)),Sr.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var t=e.def.nodes.length,n=0;n<t;n++){var r=e.def.nodes[n];1&r.flags?e.renderer.destroyNode(Er(e,n).renderElement):2&r.flags?e.renderer.destroyNode(Nr(e,n).renderText):(67108864&r.flags||134217728&r.flags)&&Ir(e,n).destroy()}}(e),Kr(e)&&e.renderer.destroy(),e.state|=128}}var Fi=function(e){return e[e.CreateViewNodes=0]="CreateViewNodes",e[e.CheckNoChanges=1]="CheckNoChanges",e[e.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate=3]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",e[e.Destroy=5]="Destroy",e}({});function Bi(e,t){var n=e.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var o=n.nodes[r];33554432&o.flags?Wi(Er(e,r).componentView,t):0==(33554432&o.childFlags)&&(r+=o.childCount)}}function Ui(e,t){var n=e.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var o=n.nodes[r];if(16777216&o.flags)for(var i=Er(e,r).viewContainer._embeddedViews,a=0;a<i.length;a++)Wi(i[a],t);else 0==(16777216&o.childFlags)&&(r+=o.childCount)}}function Wi(e,t){var n=e.state;switch(t){case Fi.CheckNoChanges:0==(128&n)&&(12==(12&n)?Mi(e):64&n&&$i(e,Fi.CheckNoChangesProjectedViews));break;case Fi.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Mi(e):64&n&&$i(e,t));break;case Fi.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Di(e):64&n&&$i(e,Fi.CheckAndUpdateProjectedViews));break;case Fi.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Di(e):64&n&&$i(e,t));break;case Fi.Destroy:zi(e);break;case Fi.CreateViewNodes:Pi(e)}}function $i(e,t){Ui(e,t),Bi(e,t)}function Hi(e,t,n,r){if(e.def.nodeFlags&t&&e.def.nodeFlags&n)for(var o=e.def.nodes.length,i=0;i<o;i++){var a=e.def.nodes[i];if(a.flags&t&&a.flags&n)switch(Sr.setCurrentNode(e,a.nodeIndex),r){case 0:yi(e,a);break;case 1:Vi(e,a)}a.childFlags&t&&a.childFlags&n||(i+=a.childCount)}}var qi=!1;function Gi(e,t,n,r,o,i){return Si(Xi(e,o,o.injector.get(hn),t,n),r,i)}function Ki(e,t,n,r,o,i){var a=o.injector.get(hn),s=Xi(e,o,new Ta(a),t,n),u=ia(r);return Ia(da.create,Si,null,[s,u,i])}function Xi(e,t,n,r,o){var i=t.injector.get(_r),a=t.injector.get(nt);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:o,sanitizer:i,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:a}}function Zi(e,t,n,r){var o=ia(n);return Ia(da.create,Ii,null,[e,t,o,r])}function Yi(e,t,n,r){return n=ta.get(t.element.componentProvider.provider.token)||ia(n),Ia(da.create,Ti,null,[e,t,n,r])}function Qi(e,t,n,r){return $o(e,t,n,function(e){var t=function(e){var t=!1,n=!1;return 0===Ji.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(function(e){var r=Ji.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)}),e.modules.forEach(function(e){ea.forEach(function(r,o){o.ngInjectableDef.providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e),n=t.hasDeprecatedOverrides;return t.hasOverrides?(function(e){for(var t=0;t<e.providers.length;t++){var r=e.providers[t];n&&(r.flags|=4096);var o=Ji.get(r.token);o&&(r.flags=-3841&r.flags|o.flags,r.deps=Yr(o.deps),r.value=o.value)}if(ea.size>0){var i=new Set(e.modules);ea.forEach(function(t,r){if(i.has(r.ngInjectableDef.providedIn)){var o={token:r,flags:t.flags|(n?4096:0),deps:Yr(t.deps),value:t.value,index:e.providers.length};e.providers.push(o),e.providersByKey[Dr(r)]=o}})}}(e=e.factory(function(){return Pr})),e):e}(r))}var Ji=new Map,ea=new Map,ta=new Map;function na(e){Ji.set(e.token,e),"function"==typeof e.token&&e.token.ngInjectableDef&&"function"==typeof e.token.ngInjectableDef.providedIn&&ea.set(e.token,e)}function ra(e,t){var n=eo(eo(t.viewDefFactory).nodes[0].element.componentView);ta.set(e,n)}function oa(){Ji.clear(),ea.clear(),ta.clear()}function ia(e){if(0===Ji.size)return e;var t=function(e){for(var t=[],n=null,r=0;r<e.nodes.length;r++){var o=e.nodes[r];1&o.flags&&(n=o),n&&3840&o.flags&&Ji.has(o.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(function(){return Pr});for(var n=0;n<t.length;n++)r(e,t[n]);return e;function r(e,t){for(var n=t+1;n<e.nodes.length;n++){var r=e.nodes[n];if(1&r.flags)return;if(3840&r.flags){var o=r.provider,i=Ji.get(o.token);i&&(r.flags=-3841&r.flags|i.flags,o.deps=Yr(i.deps),o.value=i.value)}}}}function aa(e,t,n,r,o,i,a,s,u,l,c,f,p){var h=e.def.nodes[t];return Ri(e,h,n,r,o,i,a,s,u,l,c,f,p),224&h.flags?Cr(e,t).value:void 0}function sa(e,t,n,r,o,i,a,s,u,l,c,f,p){var h=e.def.nodes[t];return Li(e,h,n,r,o,i,a,s,u,l,c,f,p),224&h.flags?Cr(e,t).value:void 0}function ua(e){return Ia(da.detectChanges,Di,null,[e])}function la(e){return Ia(da.checkNoChanges,Mi,null,[e])}function ca(e){return Ia(da.destroy,zi,null,[e])}var fa,pa,ha,da=function(e){return e[e.create=0]="create",e[e.detectChanges=1]="detectChanges",e[e.checkNoChanges=2]="checkNoChanges",e[e.destroy=3]="destroy",e[e.handleEvent=4]="handleEvent",e}({});function ma(e,t){pa=e,ha=t}function ga(e,t,n,r){return ma(e,t),Ia(da.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function ya(e,t){if(128&e.state)throw Ar(da[fa]);return ma(e,Na(e,0)),e.def.updateDirectives(function(e,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=e.def.nodes[n];return 0===t?ba(e,a,r,o):_a(e,a,r,o),16384&a.flags&&ma(e,Na(e,n)),224&a.flags?Cr(e,a.nodeIndex).value:void 0},e)}function va(e,t){if(128&e.state)throw Ar(da[fa]);return ma(e,Ea(e,0)),e.def.updateRenderer(function(e,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=e.def.nodes[n];return 0===t?ba(e,a,r,o):_a(e,a,r,o),3&a.flags&&ma(e,Ea(e,n)),224&a.flags?Cr(e,a.nodeIndex).value:void 0},e)}function ba(e,t,n,r){if(Ri.apply(void 0,u([e,t,n],r))){var o=1===n?r[0]:r;if(16384&t.flags){for(var i={},a=0;a<t.bindings.length;a++){var s=t.bindings[a],l=o[a];8&s.flags&&(i[(h=s.nonMinifiedName,"ng-reflect-"+(h=h.replace(/[$@]/g,"_").replace(wa,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"-"+e[1].toLowerCase()})))]=xa(l))}var c=t.parent,f=Er(e,c.nodeIndex).renderElement;if(c.element.name)for(var p in i)null!=(l=i[p])?e.renderer.setAttribute(f,p,l):e.renderer.removeAttribute(f,p);else e.renderer.setValue(f,"bindings="+JSON.stringify(i,null,2))}}var h}function _a(e,t,n,r){Li.apply(void 0,u([e,t,n],r))}var wa=/([A-Z])/g;function xa(e){try{return null!=e?e.toString().slice(0,30):e}catch(e){return"[ERROR] Exception while trying to serialize the value"}}function Na(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Ea(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var Oa=function(){function e(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];for(var n=this.nodeDef,r=e;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=qr(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(e.prototype,"elOrCompView",{get:function(){return Er(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return zo(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){var e=[];if(this.elDef)for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){var e={};if(this.elDef){Ca(this.elView,this.elDef,e);for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&Ca(this.elView,n,e),t+=n.childCount}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentRenderElement",{get:function(){var e=function(e){for(;e&&!Kr(e);)e=e.parent;return e.parent?Er(e.parent,qr(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?Gr(this.view,this.nodeDef):Gr(this.elView,this.elDef)},enumerable:!0,configurable:!0}),e.prototype.logError=function(e){for(var t,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];2&this.nodeDef.flags?(t=this.view.def,n=this.nodeDef.nodeIndex):(t=this.elView.def,n=this.elDef.nodeIndex);var i=function(e,t){for(var n=-1,r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}(t,n),a=-1;t.factory(function(){var t;return++a===i?(t=e.error).bind.apply(t,u([e],r)):Pr}),a<i&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,u(r)))},e}();function Ca(e,t,n){for(var r in t.references)n[r]=bi(e,t,t.references[r])}function Ia(e,t,n,r){var o=fa,i=pa,a=ha;try{fa=e;var s=t.apply(n,r);return pa=i,ha=a,fa=o,s}catch(e){if(Je(e)||!pa)throw e;throw function(e,t){return e instanceof Error||(e=new Error(e.toString())),kr(e,t),e}(e,Sa())}}function Sa(){return pa?new Oa(pa,ha):null}var Ta=function(){function e(e){this.delegate=e}return e.prototype.createRenderer=function(e,t){return new ka(this.delegate.createRenderer(e,t))},e.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},e.prototype.end=function(){this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},e}(),ka=function(){function e(e){this.delegate=e,this.data=this.delegate.data}return e.prototype.destroyNode=function(e){!function(e){xn.delete(e.nativeNode)}(Nn(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)},e.prototype.destroy=function(){this.delegate.destroy()},e.prototype.createElement=function(e,t){var n=this.delegate.createElement(e,t),r=Sa();if(r){var o=new wn(n,null,r);o.name=e,En(o)}return n},e.prototype.createComment=function(e){var t=this.delegate.createComment(e),n=Sa();return n&&En(new _n(t,null,n)),t},e.prototype.createText=function(e){var t=this.delegate.createText(e),n=Sa();return n&&En(new _n(t,null,n)),t},e.prototype.appendChild=function(e,t){var n=Nn(e),r=Nn(t);n&&r&&n instanceof wn&&n.addChild(r),this.delegate.appendChild(e,t)},e.prototype.insertBefore=function(e,t,n){var r=Nn(e),o=Nn(t),i=Nn(n);r&&o&&r instanceof wn&&r.insertBefore(i,o),this.delegate.insertBefore(e,t,n)},e.prototype.removeChild=function(e,t){var n=Nn(e),r=Nn(t);n&&r&&n instanceof wn&&n.removeChild(r),this.delegate.removeChild(e,t)},e.prototype.selectRootElement=function(e){var t=this.delegate.selectRootElement(e),n=Sa();return n&&En(new wn(t,null,n)),t},e.prototype.setAttribute=function(e,t,n,r){var o=Nn(e);o&&o instanceof wn&&(o.attributes[r?r+":"+t:t]=n),this.delegate.setAttribute(e,t,n,r)},e.prototype.removeAttribute=function(e,t,n){var r=Nn(e);r&&r instanceof wn&&(r.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)},e.prototype.addClass=function(e,t){var n=Nn(e);n&&n instanceof wn&&(n.classes[t]=!0),this.delegate.addClass(e,t)},e.prototype.removeClass=function(e,t){var n=Nn(e);n&&n instanceof wn&&(n.classes[t]=!1),this.delegate.removeClass(e,t)},e.prototype.setStyle=function(e,t,n,r){var o=Nn(e);o&&o instanceof wn&&(o.styles[t]=n),this.delegate.setStyle(e,t,n,r)},e.prototype.removeStyle=function(e,t,n){var r=Nn(e);r&&r instanceof wn&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)},e.prototype.setProperty=function(e,t,n){var r=Nn(e);r&&r instanceof wn&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)},e.prototype.listen=function(e,t,n){if("string"!=typeof e){var r=Nn(e);r&&r.listeners.push(new function(e,t){this.name=e,this.callback=t}(t,n))}return this.delegate.listen(e,t,n)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setValue=function(e,t){return this.delegate.setValue(e,t)},e}(),Aa=function(e){function t(t,n,r){var o=e.call(this)||this;return o.moduleType=t,o._bootstrapComponents=n,o._ngModuleDefFactory=r,o}return o(t,e),t.prototype.create=function(e){!function(){if(!qi){qi=!0;var e=on()?{setCurrentNode:ma,createRootView:Ki,createEmbeddedView:Zi,createComponentView:Yi,createNgModuleRef:Qi,overrideProvider:na,overrideComponentView:ra,clearOverrides:oa,checkAndUpdateView:ua,checkNoChangesView:la,destroyView:ca,createDebugContext:function(e,t){return new Oa(e,t)},handleEvent:ga,updateDirectives:ya,updateRenderer:va}:{setCurrentNode:function(){},createRootView:Gi,createEmbeddedView:Ii,createComponentView:Ti,createNgModuleRef:$o,overrideProvider:Pr,overrideComponentView:Pr,clearOverrides:Pr,checkAndUpdateView:Di,checkNoChangesView:Mi,destroyView:zi,createDebugContext:function(e,t){return new Oa(e,t)},handleEvent:function(e,t,n,r){return e.def.handleEvent(e,t,n,r)},updateDirectives:function(e,t){return e.def.updateDirectives(0===t?aa:sa,e)},updateRenderer:function(e,t){return e.def.updateRenderer(0===t?aa:sa,e)}};Sr.setCurrentNode=e.setCurrentNode,Sr.createRootView=e.createRootView,Sr.createEmbeddedView=e.createEmbeddedView,Sr.createComponentView=e.createComponentView,Sr.createNgModuleRef=e.createNgModuleRef,Sr.overrideProvider=e.overrideProvider,Sr.overrideComponentView=e.overrideComponentView,Sr.clearOverrides=e.clearOverrides,Sr.checkAndUpdateView=e.checkAndUpdateView,Sr.checkNoChangesView=e.checkNoChangesView,Sr.destroyView=e.destroyView,Sr.resolveDep=ci,Sr.createDebugContext=e.createDebugContext,Sr.handleEvent=e.handleEvent,Sr.updateDirectives=e.updateDirectives,Sr.updateRenderer=e.updateRenderer,Sr.dirtyParentQueries=gi}}();var t=function(e){var t=Array.from(e.providers),n=Array.from(e.modules),r={};for(var o in e.providersByKey)r[o]=e.providersByKey[o];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(eo(this._ngModuleDefFactory));return Sr.createNgModuleRef(this.moduleType,e||ke.NULL,this._bootstrapComponents,t)},t}(Vt);function Pa(e,t,n){e!=t&&Da(n)}function Ma(e,t){null==e&&Da(t)}function Da(e){throw new Error("ASSERTION ERROR: "+e)}var Ra=16,ja=0,La=1,Va=2,za=3,Fa=4,Ba=5,Ua=6,Wa=7,$a=8,Ha=9,qa=10,Ga=11,Ka=14;function Xa(e,t,n){e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked))}function Za(e,t,n){e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked))}function Ya(e,t,n){null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}function Qa(e,t,n){16&e[Fa]&&(Ja(e[Wa],t.initHooks,t.checkHooks,n),e[Fa]&=-17)}function Ja(e,t,n,r){var o=r?t:n;o&&es(e,o)}function es(e,t){for(var n=0;n<t.length;n+=2)t[n+1].call(e[t[n]])}"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global);var ts=0,ns=4,rs="ngProjectAs";function os(e){return!!e.listen}var is={createRenderer:function(e,t){return document}};function as(e,t){Ma(e,"should be called with a node"),Pa(e.tNode.type,t,"should be a "+function(e){return 1==e?"Projection":0==e?"Container":2==e?"View":3==e?"Element":"<unknown>"}(t))}function ss(e){return Array.isArray(e)?e[0]:e}function us(e){if(2===e.tNode.type){var t=e.data;return t[Va]?t[Va][Ba]:null}return e.tNode.next?e.view[e.tNode.next.index]:null}function ls(e){return e.tNode.child?ss((2===e.tNode.type?e.data:e.view)[e.tNode.child.index]):null}function cs(e){if(-1===e.tNode.index&&2===e.tNode.type){var t=e.data[Ka];return-1===t?null:e.view[t].dynamicLContainerNode}var n=e.tNode.parent;return ss(n?e.view[n.index]:e.view[Ba])}var fs=[];function ps(e){for(var t=e[Ba];2===t.tNode.type;)ngDevMode&&Ma(e[La],"lViewData.parent"),t=(e=e[La])[Ba];return ngDevMode&&as(t,3),ngDevMode&&Ma(t.data,"node.data"),t}function hs(e,t,n,r,o){0===e?os(t)?t.insertBefore(n,r,o):n.insertBefore(r,o,!0):1===e?os(t)?t.removeChild(n,r):n.removeChild(r):2===e&&(ngDevMode&&ngDevMode.rendererDestroyNode++,t.destroyNode(r))}function ds(e){if(-1===e[ja].childIndex)return null;var t=e[e[ja].childIndex];return t.data?t.data:t.dynamicLContainerNode.data}function ms(e,t){var n;return(n=e[Ba])&&2===n.tNode.type?cs(n).data:e[La]===t?null:e[La]}function gs(e){if(e[ja]){var t=e;!function(e){var t=e[ja].cleanup;if(null!=t){for(var n=0;n<t.length-1;n+=2)"string"==typeof t[n]?(ss(e[t[n+1]]).native.removeEventListener(t[n],e[$a][t[n+2]],t[n+3]),n+=2):"number"==typeof t[n]?(0,e[$a][t[n]])():t[n].call(e[$a][t[n+1]]);e[$a]=null}}(t),function(e){var t,n=e[ja];null!=n&&null!=(t=n.destroyHooks)&&es(e[Wa],t)}(t),(r=(n=t)[ja]&&n[ja].pipeDestroyHooks)&&es(n,r),-1===t[ja].id&&os(t[Ga])&&(ngDevMode&&ngDevMode.rendererDestroy++,t[Ga].destroy())}var n,r}var ys,vs,bs,_s,ws,xs,Ns,Es,Os,Cs="__ngHostLNode__",Is=Promise.resolve(null),Ss=[0,0],Ts=new Array(Ra).fill(null),ks=!1,As=!0;function Ps(e,t){var n=Es;return Os=e&&e[Wa],ws=e&&e[ja],Ns=e&&1==(1&e[Fa]),As=e&&ws.firstTemplatePass,ys=e&&e[Ga],null!=t&&(bs=t,_s=!0),Es=e,xs=e&&e[za],n}function Ms(e,t){t||(ks||Ja(Os,ws.viewHooks,ws.viewCheckHooks,Ns),Es[Fa]&=-6),Es[Fa]|=16,Es[Ua]=-1,Ps(e,null)}function Ds(){ks||Qa(Es,ws,Ns),function(e){for(var t=ds(Es);null!==t;t=t[Va])if(t.length<Ra&&null===t[ts])for(var n=t,r=0;r<n[ns].length;r++){var o=n[ns][r],i=o.data;ngDevMode&&Ma(i[ja],"TView must be allocated"),Vs(o,i[ja],i[Ha],2)}}(),ks||Ja(Os,ws.contentHooks,ws.contentCheckHooks,Ns),ws.firstTemplatePass=As=!1,Rs(ws.hostBindings),function(e){if(null!=e.contentQueries)for(var t=0;t<e.contentQueries.length;t+=2){var n=e.contentQueries[t];e.directives[n].contentQueriesRefresh(n,e.contentQueries[t+1])}}(ws),function(e){if(null!=e)for(var t=0;t<e.length;t+=2)qs(e[t],e[t+1])}(ws.components)}function Rs(e){if(null!=e)for(var t=ws.directives,n=0;n<e.length;n+=2){var r=e[n],o=t[r];o.hostBindings&&o.hostBindings(r,e[n+1])}}function js(e,t,n,r,o){return[t,Es,null,null,25|r,null,-1,null,null,n,Es&&Es[qa],e,o||null,null,-1,null]}function Ls(e,t,n,r,o,i){var a=_s?bs:bs&&cs(bs),s=a&&a.view===Es?a.tNode:null,u=(_s?xs:bs&&bs.queries)||a&&a.queries&&a.queries.child(),l=null!=i,c=function(e,t,n,r,o,i){return{native:r,view:Es,nodeInjector:n?n.nodeInjector:null,data:o,queries:i,tNode:null,dynamicLContainerNode:null}}(0,0,a,n,l?i:null,u);if(-1===e||2===t)c.tNode=(i?i[ja].node:null)||Hs(t,e,null,null,s,null);else{var f=e+Ra;ngDevMode&&Js(f);var p=ws.data;if(Es[f]=c,f>=p.length){var h=p[f]=Hs(t,f,r,o,s,null);if(!_s&&bs){var d=bs.tNode;d.next=h,d.dynamicContainerNode&&(d.dynamicContainerNode.next=h)}}c.tNode=p[f],_s&&(xs=null,(null==bs.tNode.child&&bs.view===Es||2===bs.tNode.type)&&(bs.tNode.child=c.tNode))}if(2==(2&t)&&l){var m=i;ngDevMode&&null!=m[Ba]&&Da("lViewData[HOST_NODE] should not have been initialized"),m[Ba]=c,As&&(m[ja].node=c.tNode)}return bs=c,_s=!0,c}function Vs(e,t,n,r){var o,i=_s,a=bs;if(null==e.data[La]&&e.data[Ha]&&!t.template)Ks(e.data[Ha]);else try{_s=!0,bs=null,o=Ps(e.data,e),Us(),t.template(r,n),2&r?Ds():e.data[ja].firstTemplatePass=As=!1}finally{Ms(o,1==(1&r)),_s=i,bs=a}return e}function zs(e,t,n,r){var o=Ps(t,e);try{vs.begin&&vs.begin(),r?(Us(),r(Fs(t),n),Ds()):(ks||(Qa(Es,ws,Ns),Ja(Os,ws.contentHooks,ws.contentCheckHooks,Ns)),Rs(Ss),qs(0,Ra))}finally{vs.end&&vs.end(),Ms(o)}}function Fs(e){return 1&e[Fa]?3:2}var Bs=null;function Us(){Bs=null}function Ws(e,t,n,r,o){return ngDevMode&&ngDevMode.tView++,{id:e,template:t,viewQuery:o,node:null,data:Ts.slice(),childIndex:-1,bindingStartIndex:-1,directives:null,firstTemplatePass:!0,initHooks:null,checkHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,pipeDestroyHooks:null,cleanup:null,hostBindings:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof n?n():n,pipeRegistry:"function"==typeof r?r():r,currentMatches:null}}function $s(e,t){ngDevMode&&Qs(-1),vs=e;var n,r=e.createRenderer(null,null),o="string"==typeof t?os(r)?r.selectRootElement(t):r.querySelector(t):t;if(ngDevMode&&!o)throw new Error("Renderer: "+("string"==typeof t?"Host node with selector not found:":"Host node is required:")+" ["+("function"==typeof(n=t)?n.name||n:"string"==typeof n?n:null==n?"":""+n)+"]");return o}function Hs(e,t,n,r,o,i){return ngDevMode&&ngDevMode.tNode++,{type:e,index:t,flags:0,tagName:n,attrs:r,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:i,next:null,child:null,parent:o,dynamicContainerNode:null,detached:null,stylingTemplate:null,projection:null}}function qs(e,t){ngDevMode&&Qs(t);var n=Es[t];ngDevMode&&as(n,3),ngDevMode&&Ma(n.data,"Component's host node should have an LViewData attached.");var r=n.data;Gs(r)&&6&r[Fa]&&(ngDevMode&&Qs(e,Os),Ys(r,n,Os[e]))}function Gs(e){return 8==(8&e[Fa])}function Ks(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=eu(n);ngDevMode&&Ma(r.data,"Component host node should be attached to an LView"),zs(r,Xs(n),n)}}function Xs(e){ngDevMode&&Ma(e,"component");for(var t=eu(e).view;t[La];)t=t[La];return t}function Zs(e){var t=eu(e);ngDevMode&&Ma(t.data,"Component host node should be attached to an LViewData instance."),Ys(t.data,t,e)}function Ys(e,t,n){var r=Ps(e,t),o=e[ja],i=o.template,a=o.viewQuery;try{Us(),function(t,n,r){t&&1&e[Fa]&&t(1,r)}(a,0,n),i(Fs(e),n),Ds(),function(e,t){e&&e(2,t)}(a,n)}finally{Ms(r)}}function Qs(e,t){null==t&&(t=Es),function(e,t){e>=(t?t.length:0)&&Da("index expected to be a valid data index")}(e,t||Es)}function Js(e,t){null==t&&(t=Es),Pa(t.length,e,"index "+e+" expected to be at the end of arr (length "+t.length+")")}function eu(e){ngDevMode&&Ma(e,"expecting component got null");var t=e[Cs];return ngDevMode&&Ma(e,"object is not a component"),t}var tu=Is;function nu(e){return{components:[],scheduler:e,clean:tu}}var ru=function(){function e(e,t){this._view=e,this._appRef=null,this._viewContainerRef=null,this._lViewNode=null,this.context=t}return e.prototype._setComponentContext=function(e,t){this._view=e,this.context=t},Object.defineProperty(e.prototype,"destroyed",{get:function(){return 32==(32&this._view[Fa])},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){var e,t;this._viewContainerRef&&Gs(this._view)&&(this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),this._viewContainerRef=null),os(t=(e=this._view)[Ga])&&t.destroyNode&&function(t,n,r,o,i,a){for(var s=e[Ba],u=-1;s;){var l=null,c=s.tNode.type;if(3===c)hs(2,o,null,s.native,a),s.dynamicLContainerNode&&hs(2,o,null,s.dynamicLContainerNode.native,a);else if(0===c){hs(2,o,null,s.native,a);var f=s,p=f.dynamicLContainerNode?f.dynamicLContainerNode.data:f.data;(l=p[ns].length?ls(p[ns][0]):null)&&(a=f.dynamicLContainerNode?f.dynamicLContainerNode.native:f.native)}else if(1===c){var h=ps(s.view),d=h.tNode.projection[s.tNode.projection];fs[++u]=s,l=d?h.data[La][d.index]:null}else l=ls(s);if(null===l)for(null===(l=us(s))&&8192&s.tNode.flags&&(l=us(fs[u--]));s&&!l;){if(null===(s=cs(s))||s===n)return null;s.tNode.next||0!==c||(a=s.native),l=us(s)}s=l}}(0,e[Ba],0,t),function(e){if(-1===e[ja].childIndex)return gs(e);for(var t=ds(e);t;){var n=null;if(t.length>=Ra?t[ja].childIndex>-1&&(n=ds(t)):t[ns].length&&(n=t[ns][0].data),null==n){for(;t&&!t[Va]&&t!==e;)gs(t),t=ms(t,e);gs(t||e),n=t&&t[Va]}t=n}}(e),e[Fa]|=32},e.prototype.onDestroy=function(e){var t,n;n=e,function(e){return e[$a]||(e[$a]=[])}(t=this._view).push(n),t[ja].firstTemplatePass&&function(e){return e[ja].cleanup||(e[ja].cleanup=[])}(t).push(t[$a].length-1,null)},e.prototype.markForCheck=function(){!function(e){for(var t=e;null!=t[La];)t[Fa]|=4,t=t[La];var n,r;t[Fa]|=4,ngDevMode&&Ma(t[Ha],"rootContext"),(n=t[Ha]).clean==Is&&(n.clean=new Promise(function(e){return r=e}),n.scheduler(function(){Ks(n),r(null),n.clean=Is}))}(this._view)},e.prototype.detach=function(){this._view[Fa]&=-9},e.prototype.reattach=function(){this._view[Fa]|=8},e.prototype.detectChanges=function(){Zs(this.context)},e.prototype.checkNoChanges=function(){!function(e){ks=!0;try{Zs(e)}finally{ks=!1}}(this.context)},e.prototype.attachToViewContainerRef=function(e){this._viewContainerRef=e},e.prototype.detachFromAppRef=function(){this._appRef=null},e.prototype.attachToAppRef=function(e){this._appRef=e},e}(),ou=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.resolveComponentFactory=function(e){return ngDevMode&&(void 0===t&&(t="Type passed in is not ComponentType, it does not have 'ngComponentDef' property."),e.ngComponentDef||Da(t)),new uu(e.ngComponentDef);var t},t}(Dt);function iu(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var au=new se("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:function(){return nu(qe(su))}}),su=new se("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return requestAnimationFrame.bind(window)}}),uu=function(e){function t(t){var n=e.call(this)||this;return n.componentDef=t,n.componentType=t.type,n.selector=t.selectors[0][0],n.ngContentSelectors=[],n}return o(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){return iu(this.componentDef.inputs)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return iu(this.componentDef.outputs)},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t,n,r){var o,i,a=void 0===n,s=r?r.injector.get(hn):is,u=a?(o=this.selector,os(i=s.createRenderer(null,this.componentDef.rendererType)||ys)?i.createElement(o,Bs):null===Bs?i.createElement(o):i.createElementNS(Bs,o)):$s(s,n),l=r&&!a?r.injector.get(au):nu(requestAnimationFrame.bind(window)),c=js(s.createRenderer(u,this.componentDef.rendererType),Ws(-1,null,null,null,null),l,this.componentDef.onPush?4:2);c[qa]=r&&r.injector||null;var f,p,h=Ps(c,null);try{if(s.begin&&s.begin(),p=function(e,t,n,r){_s=!1,bs=null;var o,i=Ls(0,3,t,null,null,js(ys,(o=n.template).ngPrivateData||(o.ngPrivateData=Ws(-1,o,n.directiveDefs,n.pipeDefs,n.viewQuery)),null,n.onPush?4:2,r));return As&&(i.tNode.flags=4096,n.diPublic&&n.diPublic(n),ws.directives=[n]),i}(0,u,this.componentDef),l.components.push(f=function(e,t,n){if(ngDevMode&&Pa(Es[Ua],-1,"directives should be created before any bindings"),ngDevMode&&Pa(_s,!0,"previousOrParentNode should be a parent"),Object.defineProperty(t,Cs,{enumerable:!1,value:bs}),null==Os&&(Es[Wa]=Os=[]),ngDevMode&&Js(e,Os),Os[e]=t,As){var r=bs.tNode.flags;0==(4095&r)?bs.tNode.flags=e<<14|4096&r|1:(ngDevMode&&4095==(4095&r)&&Da("Reached the max number of directives"),bs.tNode.flags++)}else{var o=n.diPublic;o&&o(n)}return null!=n.attributes&&3==bs.tNode.type&&function(e,t){for(var n=os(ys),r=0;r<t.length;){var o=t[r];if(1===o)break;if(o===rs)r+=2;else if(ngDevMode&&ngDevMode.rendererSetAttribute++,0===o){var i=t[r+1],a=t[r+2],s=t[r+3];n?ys.setAttribute(e,a,s,i):e.setAttributeNS(i,a,s),r+=4}else s=t[r+1],n?ys.setAttribute(e,o,s):e.setAttribute(o,s),r+=2}}(bs.native,n.attributes),t}(0,this.componentDef.factory(),this.componentDef)),function(e,t,n){e&&null!=e.changeDetectorRef&&e.changeDetectorRef._setComponentContext(p.data,f)}(p.nodeInjector),function(e,t){var n=eu(e),r=n.view[ja];(function(e,t,n,r){ngDevMode&&Pa(r.firstTemplatePass,!0,"Should only be called on first template pass"),t&&(r.initHooks||(r.initHooks=[])).push(0,t),n&&((r.initHooks||(r.initHooks=[])).push(0,n),(r.checkHooks||(r.checkHooks=[])).push(0,n))})(0,t.onInit,t.doCheck,r),function(e,t){if(t.firstTemplatePass)for(var n=e>>14,r=n+(4095&e),o=n;o<r;o++){var i=t.directives[o];Xa(i,t,o),Za(i,t,o),Ya(i,t,o)}}(n.tNode.flags,r)}(f,this.componentDef),t)for(var d=0,m=p.tNode.projection=[],g=0;g<t.length;g++){for(var y=t[g],v=null,b=null,_=0;_<y.length;_++){var w=Ls(++d,3,y[_],null,null);b?b.next=w.tNode:v=w.tNode,b=w.tNode}m.push(v)}Vs(p,p.data[ja],f,1),p.data[Fa]&=-2}finally{Ps(h,null),s.end&&s.end()}var x=new lu(this.componentType,f,c,e,u);return a&&(x.hostView._lViewNode.tNode.child=p.tNode),x},t}(St),lu=function(e){function t(t,n,r,o,i){var a=e.call(this)||this;return a.destroyCbs=[],a.instance=n,a.hostView=a.changeDetectorRef=new ru(r,n),a.hostView._lViewNode=Ls(-1,2,null,null,null,r),a.injector=o,a.location=new gn(i),a.componentType=t,a}return o(t,e),t.prototype.destroy=function(){ngDevMode&&Ma(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null},t.prototype.onDestroy=function(e){ngDevMode&&Ma(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(e)},t}(It),cu={provide:Dt,useFactory:function(){return new ou},deps:[]},fu=function(e){function t(t,n){var r=e.call(this)||this;r._bootstrapComponents=[],r.destroyCbs=[];var o=t.ngModuleDef;return ngDevMode&&Ma(o,"NgModule '"+ve(t)+"' is not a subtype of 'NgModuleType'."),r._bootstrapComponents=o.bootstrap,r.injector=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),t=t||ut(),new lt(e,n,t)}(t,n,[cu,{provide:Lt,useValue:r}]),r.instance=r.injector.get(t),r.componentFactoryResolver=new ou,r}return o(t,e),t.prototype.destroy=function(){ngDevMode&&Ma(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null},t.prototype.onDestroy=function(e){ngDevMode&&Ma(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(e)},t}(Lt);!function(e){function t(t){var n=e.call(this)||this;return n.moduleType=t,n}o(t,e),t.prototype.create=function(e){return new fu(this.moduleType,e)}}(Vt);var pu=function(){},hu=function(){function e(){this.columnTitles=[]}return e.prototype.ngOnInit=function(){this.data=[{x:100,y:5},{x:110,y:5.3},{x:120,y:6.3},{x:130,y:6.7},{x:140,y:7.1},{x:150,y:8},{x:160,y:8.7}],this.columnTitles[0]="X [km/h]",this.columnTitles[1]="Y [l]"},e.prototype.updateDataset=function(e){this.data=e,this.data=this.data.slice()},e.prototype.updateTitles=function(e){this.columnTitles=e,this.columnTitles=this.columnTitles.slice()},e}(),du=new I(function(e){return e.complete()}),mu=function(e){function t(t,n){var r=e.call(this,t)||this;r.sources=n,r.completed=0,r.haveValues=0;var o=n.length;r.values=new Array(o);for(var i=0;i<o;i++){var a=V(r,n[i],null,i);a&&r.add(a)}return r}return o(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.values[n]=t,o._hasValue||(o._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,n=this.haveValues,r=this.values,o=r.length;e._hasValue?(this.completed++,this.completed===o&&(n===o&&t.next(r),t.complete())):t.complete()},t}(z),gu=function(){},yu=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],vu={},bu=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),_u=new se("UseV4Plurals"),wu=function(){},xu=function(e){function t(t,n){var r=e.call(this)||this;return r.locale=t,r.deprecatedPluralFn=n,r}return o(t,e),t.prototype.getPluralCategory=function(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return function(e){var t=e.toLowerCase().replace(/_/g,"-"),n=vu[t];if(n)return n;var r=t.split("-")[0];if(n=vu[r])return n;if("en"===r)return yu;throw new Error('Missing locale data for the locale "'+e+'".')}(e)[18]}(t||this.locale)(e)){case bu.Zero:return"zero";case bu.One:return"one";case bu.Two:return"two";case bu.Few:return"few";case bu.Many:return"many";default:return"other"}},t}(wu),Nu=function(){function e(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}return Object.defineProperty(e.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),e}(),Eu=function(){function e(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(e.prototype,"ngForOf",{set:function(e){this._ngForOf=e,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(e){on()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(e)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTemplate",{set:function(e){e&&(this._template=e)},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(n){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((t=e).name||typeof t)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},e.prototype._applyChanges=function(e){var t=this,n=[];e.forEachOperation(function(e,r,o){if(null==e.previousIndex){var i=t._viewContainer.createEmbeddedView(t._template,new Nu(null,t._ngForOf,-1,-1),o),a=new Ou(e,i);n.push(a)}else null==o?t._viewContainer.remove(r):(i=t._viewContainer.get(r),t._viewContainer.move(i,o),a=new Ou(e,i),n.push(a))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var o=this._viewContainer.length;r<o;r++){var i=this._viewContainer.get(r);i.context.index=r,i.context.count=o,i.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item})},e.prototype._perViewChange=function(e,t){e.context.$implicit=t.item},e}(),Ou=function(e,t){this.record=e,this.view=t},Cu=function(){function e(e,t){this._viewContainer=e,this._context=new Iu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}return Object.defineProperty(e.prototype,"ngIf",{set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfThen",{set:function(e){Su("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfElse",{set:function(e){Su("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),e.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},e}(),Iu=function(){this.$implicit=null,this.ngIf=null};function Su(e,t){if(t&&!t.createEmbeddedView)throw new Error(e+" must be a TemplateRef, but received '"+ve(t)+"'.")}var Tu=function(){},ku=new se("DocumentToken"),Au="server",Pu=null;function Mu(){return Pu}var Du,Ru={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},ju={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};pe.Node&&(Du=pe.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var Vu,zu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.parse=function(e){throw new Error("parse not implemented")},t.makeCurrent=function(){var e;e=new t,Pu||(Pu=e)},t.prototype.hasProperty=function(e,t){return t in e},t.prototype.setProperty=function(e,t,n){e[t]=n},t.prototype.getProperty=function(e,t){return e[t]},t.prototype.invoke=function(e,t,n){var r;(r=e)[t].apply(r,u(n))},t.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},t.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},t.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},t.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return Ru},enumerable:!0,configurable:!0}),t.prototype.contains=function(e,t){return Du.call(e,t)},t.prototype.querySelector=function(e,t){return e.querySelector(t)},t.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},t.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},t.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},t.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},t.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},t.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},t.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},t.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},t.prototype.getInnerHTML=function(e){return e.innerHTML},t.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},t.prototype.getOuterHTML=function(e){return e.outerHTML},t.prototype.nodeName=function(e){return e.nodeName},t.prototype.nodeValue=function(e){return e.nodeValue},t.prototype.type=function(e){return e.type},t.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},t.prototype.firstChild=function(e){return e.firstChild},t.prototype.nextSibling=function(e){return e.nextSibling},t.prototype.parentElement=function(e){return e.parentNode},t.prototype.childNodes=function(e){return e.childNodes},t.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},t.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.prototype.appendChild=function(e,t){e.appendChild(t)},t.prototype.removeChild=function(e,t){e.removeChild(t)},t.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},t.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},t.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},t.prototype.insertAllBefore=function(e,t,n){n.forEach(function(n){return e.insertBefore(n,t)})},t.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},t.prototype.setInnerHTML=function(e,t){e.innerHTML=t},t.prototype.getText=function(e){return e.textContent},t.prototype.setText=function(e,t){e.textContent=t},t.prototype.getValue=function(e){return e.value},t.prototype.setValue=function(e,t){e.value=t},t.prototype.getChecked=function(e){return e.checked},t.prototype.setChecked=function(e,t){e.checked=t},t.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},t.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},t.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},t.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},t.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},t.prototype.createScriptTag=function(e,t,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r},t.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},t.prototype.createShadowRoot=function(e){return e.createShadowRoot()},t.prototype.getShadowRoot=function(e){return e.shadowRoot},t.prototype.getHost=function(e){return e.host},t.prototype.clone=function(e){return e.cloneNode(!0)},t.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},t.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},t.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},t.prototype.addClass=function(e,t){e.classList.add(t)},t.prototype.removeClass=function(e,t){e.classList.remove(t)},t.prototype.hasClass=function(e,t){return e.classList.contains(t)},t.prototype.setStyle=function(e,t,n){e.style[t]=n},t.prototype.removeStyle=function(e,t){e.style[t]=""},t.prototype.getStyle=function(e,t){return e.style[t]},t.prototype.hasStyle=function(e,t,n){var r=this.getStyle(e,t)||"";return n?r==n:r.length>0},t.prototype.tagName=function(e){return e.tagName},t.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var o=n.item(r);t.set(o.name,o.value)}return t},t.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},t.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},t.prototype.getAttribute=function(e,t){return e.getAttribute(t)},t.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},t.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},t.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},t.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},t.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},t.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},t.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},t.prototype.getDefaultDocument=function(){return document},t.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},t.prototype.getTitle=function(e){return e.title},t.prototype.setTitle=function(e,t){e.title=t||""},t.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},t.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},t.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},t.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},t.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},t.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},t.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},t.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},t.prototype.adoptNode=function(e){return document.adoptNode(e)},t.prototype.getHref=function(e){return e.getAttribute("href")},t.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Lu.hasOwnProperty(t)&&(t=Lu[t]))}return ju[t]||t},t.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},t.prototype.getHistory=function(){return window.history},t.prototype.getLocation=function(){return window.location},t.prototype.getBaseHref=function(e){var t,n=Fu||(Fu=document.querySelector("base"))?Fu.getAttribute("href"):null;return null==n?null:(t=n,Vu||(Vu=document.createElement("a")),Vu.setAttribute("href",t),"/"===Vu.pathname.charAt(0)?Vu.pathname:"/"+Vu.pathname)},t.prototype.resetBaseElement=function(){Fu=null},t.prototype.getUserAgent=function(){return window.navigator.userAgent},t.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},t.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},t.prototype.getComputedStyle=function(e){return getComputedStyle(e)},t.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},t.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},t.prototype.supportsCookies=function(){return!0},t.prototype.getCookie=function(e){return function(e,t){var n,r;t=encodeURIComponent(t);try{for(var o=a(e.split(";")),i=o.next();!i.done;i=o.next()){var u=i.value,l=u.indexOf("="),c=s(-1==l?[u,""]:[u.slice(0,l),u.slice(l+1)],2),f=c[1];if(c[0].trim()===t)return decodeURIComponent(f)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}(document.cookie,e)},t.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},t}(function(e){function t(){var t=e.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],o=0;o<r.length;o++)if(null!=t.getStyle(n,r[o]+"AnimationName")){t._animationPrefix="-"+r[o].toLowerCase()+"-";break}var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(i).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=i[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}return o(t,e),t.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},t.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},t.prototype.supportsDOMEvents=function(){return!0},t.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},t.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},t.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},t.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},t}(function(){function e(){this.resourceLoaderType=null}return Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),e}())),Fu=null,Bu=ku;function Uu(){return!!window.history.pushState}var Wu=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n._init(),n}return o(t,e),t.prototype._init=function(){this.location=Mu().getLocation(),this._history=Mu().getHistory()},t.prototype.getBaseHrefFromDOM=function(){return Mu().getBaseHref(this._doc)},t.prototype.onPopState=function(e){Mu().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},t.prototype.onHashChange=function(e){Mu().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(t.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),t.prototype.pushState=function(e,t,n){Uu()?this._history.pushState(e,t,n):this.location.hash=n},t.prototype.replaceState=function(e,t,n){Uu()?this._history.replaceState(e,t,n):this.location.hash=n},t.prototype.forward=function(){this._history.forward()},t.prototype.back=function(){this._history.back()},t.ctorParameters=function(){return[{type:void 0,decorators:[{type:we,args:[Bu]}]}]},t}(gu),$u=new se("TRANSITION_ID"),Hu=[{provide:mt,useFactory:function(e,t,n){return function(){n.get(gt).donePromise.then(function(){var n=Mu();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(function(t){return n.getAttribute(t,"ng-transition")===e}).forEach(function(e){return n.remove(e)})})}},deps:[$u,Bu,ke],multi:!0}],qu=function(){function e(){}return e.init=function(){var t;t=new e,en=t},e.prototype.addToWindow=function(e){pe.getAngularTestability=function(t,n){void 0===n&&(n=!0);var r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},pe.getAllAngularTestabilities=function(){return e.getAllTestabilities()},pe.getAllAngularRootElements=function(){return e.getAllRootElements()},pe.frameworkStabilizers||(pe.frameworkStabilizers=[]),pe.frameworkStabilizers.push(function(e){var t=pe.getAllAngularTestabilities(),n=t.length,r=!1,o=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(o)})})},e.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?Mu().isShadowRoot(t)?this.findTestabilityInTree(e,Mu().getHost(t),!0):this.findTestabilityInTree(e,Mu().parentElement(t),!0):null},e}();function Gu(e,t){"undefined"!=typeof COMPILED&&COMPILED||((pe.ng=pe.ng||{})[e]=t)}var Ku={ApplicationRef:fn,NgZone:$t};function Xu(e){return Nn(e)}var Zu=new se("EventManagerPlugins"),Yu=function(){function e(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}return e.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},e.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},e.prototype.getZone=function(){return this._zone},e.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var o=n[r];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error("No event manager plugin found for event "+e)},e}(),Qu=function(){function e(e){this._doc=e}return e.prototype.addGlobalEventListener=function(e,t,n){var r=Mu().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target "+r+" for event "+t);return this.addEventListener(r,t,n)},e}(),Ju=function(){function e(){this._stylesSet=new Set}return e.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},e.prototype.onStylesAdded=function(e){},e.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},e}(),el=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(t.head),n}return o(t,e),t.prototype._addStylesToHost=function(e,t){var n=this;e.forEach(function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))})},t.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},t.prototype.removeHost=function(e){this._hostNodes.delete(e)},t.prototype.onStylesAdded=function(e){var t=this;this._hostNodes.forEach(function(n){return t._addStylesToHost(e,n)})},t.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return Mu().remove(e)})},t}(Ju),tl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nl=/%COMP%/g,rl="_nghost-%COMP%",ol="_ngcontent-%COMP%";function il(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?il(e,o,n):(o=o.replace(nl,e),n.push(o))}return n}function al(e){return function(t){!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var sl=function(){function e(e,t){this.eventManager=e,this.sharedStylesHost=t,this.rendererByCompId=new Map,this.defaultRenderer=new ul(e)}return e.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case Ke.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new pl(this.eventManager,this.sharedStylesHost,t),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case Ke.Native:case Ke.ShadowDom:return new hl(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=il(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}},e.prototype.begin=function(){},e.prototype.end=function(){},e}(),ul=function(){function e(e){this.eventManager=e,this.data=Object.create(null)}return e.prototype.destroy=function(){},e.prototype.createElement=function(e,t){return t?document.createElementNS(tl[t],e):document.createElement(e)},e.prototype.createComment=function(e){return document.createComment(e)},e.prototype.createText=function(e){return document.createTextNode(e)},e.prototype.appendChild=function(e,t){e.appendChild(t)},e.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},e.prototype.removeChild=function(e,t){e&&e.removeChild(t)},e.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},e.prototype.parentNode=function(e){return e.parentNode},e.prototype.nextSibling=function(e){return e.nextSibling},e.prototype.setAttribute=function(e,t,n,r){if(r){t=r+":"+t;var o=tl[r];o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)},e.prototype.removeAttribute=function(e,t,n){if(n){var r=tl[n];r?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t)}else e.removeAttribute(t)},e.prototype.addClass=function(e,t){e.classList.add(t)},e.prototype.removeClass=function(e,t){e.classList.remove(t)},e.prototype.setStyle=function(e,t,n,r){r&dn.DashCase?e.style.setProperty(t,n,r&dn.Important?"important":""):e.style[t]=n},e.prototype.removeStyle=function(e,t,n){n&dn.DashCase?e.style.removeProperty(t):e.style[t]=""},e.prototype.setProperty=function(e,t,n){cl(t,"property"),e[t]=n},e.prototype.setValue=function(e,t){e.nodeValue=t},e.prototype.listen=function(e,t,n){return cl(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,al(n)):this.eventManager.addEventListener(e,t,al(n))},e}(),ll="@".charCodeAt(0);function cl(e,t){if(e.charCodeAt(0)===ll)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var fl,pl=function(e){function t(t,n,r){var o=e.call(this,t)||this;o.component=r;var i=il(r.id,r.styles,[]);return n.addStyles(i),o.contentAttr=ol.replace(nl,r.id),o.hostAttr=rl.replace(nl,r.id),o}return o(t,e),t.prototype.applyToHost=function(t){e.prototype.setAttribute.call(this,t,this.hostAttr,"")},t.prototype.createElement=function(t,n){var r=e.prototype.createElement.call(this,t,n);return e.prototype.setAttribute.call(this,r,this.contentAttr,""),r},t}(ul),hl=function(e){function t(t,n,r,o){var i=e.call(this,t)||this;i.sharedStylesHost=n,i.hostEl=r,i.component=o,i.shadowRoot=o.encapsulation===Ke.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),i.sharedStylesHost.addHost(i.shadowRoot);for(var a=il(o.id,o.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],i.shadowRoot.appendChild(u)}return i}return o(t,e),t.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},t.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},t.prototype.appendChild=function(t,n){return e.prototype.appendChild.call(this,this.nodeOrShadowRoot(t),n)},t.prototype.insertBefore=function(t,n,r){return e.prototype.insertBefore.call(this,this.nodeOrShadowRoot(t),n,r)},t.prototype.removeChild=function(t,n){return e.prototype.removeChild.call(this,this.nodeOrShadowRoot(t),n)},t.prototype.parentNode=function(t){return this.nodeOrShadowRoot(e.prototype.parentNode.call(this,this.nodeOrShadowRoot(t)))},t}(ul),dl="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},ml=dl("addEventListener"),gl=dl("removeEventListener"),yl={},vl="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[dl("BLACK_LISTED_EVENTS")]&&(fl={});var bl=function(e){return!!fl&&fl.hasOwnProperty(e)},_l=function(e){var t=yl[e.type];if(t){var n=this[t];if(n){var r=[e];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var o=n.slice(),i=0;i<o.length&&!0!==e[vl];i++){var a;(a=o[i]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},wl=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.ngZone=n,r&&function(e){return e===Au}(r)||o.patchEvent(),o}return o(t,e),t.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[vl]=!0),e&&e.apply(this,arguments)}}},t.prototype.supports=function(e){return!0},t.prototype.addEventListener=function(e,t,n){var r=this,o=n;if(!e[ml]||$t.isInAngularZone()&&!bl(t))e.addEventListener(t,o,!1);else{var i=yl[t];i||(i=yl[t]=dl("ANGULAR"+t+"FALSE"));var a=e[i],s=a&&a.length>0;a||(a=e[i]=[]);var u=bl(t)?Zone.root:Zone.current;if(0===a.length)a.push({zone:u,handler:o});else{for(var l=!1,c=0;c<a.length;c++)if(a[c].handler===o){l=!0;break}l||a.push({zone:u,handler:o})}s||e[ml](t,_l,!1)}return function(){return r.removeEventListener(e,t,o)}},t.prototype.removeEventListener=function(e,t,n){var r=e[gl];if(!r)return e.removeEventListener.apply(e,[t,n,!1]);var o=yl[t],i=o&&e[o];if(!i)return e.removeEventListener.apply(e,[t,n,!1]);for(var a=!1,s=0;s<i.length;s++)if(i[s].handler===n){a=!0,i.splice(s,1);break}a?0===i.length&&r.apply(e,[t,_l,!1]):e.removeEventListener.apply(e,[t,n,!1])},t}(Qu),xl={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Nl=new se("HammerGestureConfig"),El=new se("HammerLoader"),Ol=function(){function e(){this.events=[],this.overrides={}}return e.prototype.buildHammer=function(e){var t=new Hammer(e,this.options);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t},e}(),Cl=function(e){function t(t,n,r,o){var i=e.call(this,t)||this;return i._config=n,i.console=r,i.loader=o,i}return o(t,e),t.prototype.supports=function(e){return!(!xl.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+e+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},t.prototype.addEventListener=function(e,t,n){var r=this,o=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){var i=!1,a=function(){i=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});i||(a=r.addEventListener(e,t,n))}).catch(function(){r.console.warn('The "'+t+'" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return o.runOutsideAngular(function(){var i=r._config.buildHammer(e),a=function(e){o.runGuarded(function(){n(e)})};return i.on(t,a),function(){return i.off(t,a)}})},t.prototype.isCustomEvent=function(e){return this._config.events.indexOf(e)>-1},t}(Qu),Il=["alt","control","meta","shift"],Sl={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Tl=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.supports=function(e){return null!=t.parseEventName(e)},t.prototype.addEventListener=function(e,n,r){var o=t.parseEventName(n),i=t.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Mu().onAndCancel(e,o.domEventName,i)})},t.parseEventName=function(e){var n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var o=t._normalizeKey(n.pop()),i="";if(Il.forEach(function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),i+=e+".")}),i+=o,0!=n.length||0===o.length)return null;var a={};return a.domEventName=r,a.fullKey=i,a},t.getEventFullKey=function(e){var t="",n=Mu().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Il.forEach(function(r){r!=n&&(0,Sl[r])(e)&&(t+=r+".")}),t+=n},t.eventCallback=function(e,n,r){return function(o){t.getEventFullKey(o)===e&&r.runGuarded(function(){return n(o)})}},t._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},t}(Qu),kl=function(){},Al=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n}return o(t,e),t.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case br.NONE:return t;case br.HTML:return t instanceof Ml?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=null;try{rr=rr||new Yn(e);var r=t?String(t):"";n=rr.getInertBodyElement(r);var o=5,i=r;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,r=i,i=n.innerHTML,n=rr.getInertBodyElement(r)}while(r!==i);var a=new pr,s=a.sanitizeChildren(gr(n)||n);return on()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),s}finally{if(n)for(var u=gr(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(this._doc,String(t)));case br.STYLE:return t instanceof Dl?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(vr);return t&&er(t[1])===t[1]||e.match(yr)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var o=e.charAt(r);"'"===o&&n?t=!t:'"'===o&&t&&(n=!n)}return t&&n}(e)?e:(on()&&console.warn("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}(t));case br.SCRIPT:if(t instanceof Rl)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case br.URL:return t instanceof Ll||t instanceof jl?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),er(String(t)));case br.RESOURCE_URL:if(t instanceof Ll)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},t.prototype.checkNotSafeValue=function(e,t){if(e instanceof Pl)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},t.prototype.bypassSecurityTrustHtml=function(e){return new Ml(e)},t.prototype.bypassSecurityTrustStyle=function(e){return new Dl(e)},t.prototype.bypassSecurityTrustScript=function(e){return new Rl(e)},t.prototype.bypassSecurityTrustUrl=function(e){return new jl(e)},t.prototype.bypassSecurityTrustResourceUrl=function(e){return new Ll(e)},t}(kl),Pl=function(){function e(e){this.changingThisBreaksApplicationSecurity=e}return e.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},e}(),Ml=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getTypeName=function(){return"HTML"},t}(Pl),Dl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getTypeName=function(){return"Style"},t}(Pl),Rl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getTypeName=function(){return"Script"},t}(Pl),jl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getTypeName=function(){return"URL"},t}(Pl),Ll=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getTypeName=function(){return"ResourceURL"},t}(Pl),Vl=sn(Hn,"browser",[{provide:wt,useValue:"browser"},{provide:_t,useValue:function(){zu.makeCurrent(),qu.init()},multi:!0},{provide:gu,useClass:Wu,deps:[Bu]},{provide:Bu,useFactory:function(){return document},deps:[]}]);function zl(){return new nt}var Fl=function(){function e(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return e.withServerTransition=function(t){return{ngModule:e,providers:[{provide:yt,useValue:t.appId},{provide:$u,useExisting:yt},Hu]}},e}();"undefined"!=typeof window&&window;var Bl=function(){function e(){}return Object.defineProperty(e.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},e.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},e.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},e}(),Ul=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),t}(Bl);function Wl(e){return null==e||0===e.length}var $l=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Hl=function(){function e(){}return e.min=function(e){return function(t){if(Wl(t.value)||Wl(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}},e.max=function(e){return function(t){if(Wl(t.value)||Wl(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}},e.required=function(e){return Wl(e.value)?{required:!0}:null},e.requiredTrue=function(e){return!0===e.value?null:{required:!0}},e.email=function(e){return Wl(e.value)?null:$l.test(e.value)?null:{email:!0}},e.minLength=function(e){return function(t){if(Wl(t.value))return null;var n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}},e.maxLength=function(e){return function(t){var n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}},e.pattern=function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(Wl(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r},e.nullValidator=function(e){return null},e.compose=function(e){if(!e)return null;var t=e.filter(ql);return 0==t.length?null:function(e){return Kl(function(e,n){return t.map(function(t){return t(e)})}(e))}},e.composeAsync=function(e){if(!e)return null;var t=e.filter(ql);return 0==t.length?null:function(e){return function e(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&d(n[0])&&(n=n[0]),0===n.length?du:t?e(n).pipe(F(function(e){return t.apply(void 0,e)})):new I(function(e){return new mu(e,n)})}(function(e,n){return t.map(function(t){return t(e)})}(e).map(Gl)).pipe(F(Kl))}},e}();function ql(e){return null!=e}function Gl(e){var t,n=dt(e)?$(e):e;if(!(t=n)||"function"!=typeof t.subscribe)throw new Error("Expected validator to return Promise or Observable.");return n}function Kl(e){var t=e.reduce(function(e,t){return null!=t?i({},e,t):e},{});return 0===Object.keys(t).length?null:t}var Xl=new se("NgValueAccessor"),Zl=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),Yl=new se("CompositionEventMode"),Ql=function(){function e(e,t,n){var r;this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=Mu()?Mu().getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._handleInput=function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)},e.prototype._compositionStart=function(){this._composing=!0},e.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},e}();function Jl(e){return e.validate?function(t){return e.validate(t)}:e}function ec(e){return e.validate?function(t){return e.validate(t)}:e}var tc=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();function nc(){throw new Error("unimplemented")}var rc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._parent=null,t.name=null,t.valueAccessor=null,t._rawValidators=[],t._rawAsyncValidators=[],t}return o(t,e),Object.defineProperty(t.prototype,"validator",{get:function(){return nc()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return nc()},enumerable:!0,configurable:!0}),t}(Bl),oc=function(){function e(){this._accessors=[]}return e.prototype.add=function(e,t){this._accessors.push([e,t])},e.prototype.remove=function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},e.prototype.select=function(e){var t=this;this._accessors.forEach(function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)})},e.prototype._isSameGroup=function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name},e}(),ic=function(){function e(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){this._control=this._injector.get(rc),this._checkName(),this._registry.add(this._control,this)},e.prototype.ngOnDestroy=function(){this._registry.remove(this)},e.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},e.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},e.prototype.fireUncheck=function(e){this.writeValue(e)},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},e.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},e}(),ac='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',sc='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';function uc(e,t){return u(t.path,[e])}function lc(e,t){e||fc(t,"Cannot find control with"),t.valueAccessor||fc(t,"No value accessor for form control with"),e.validator=Hl.compose([e.validator,t.validator]),e.asyncValidator=Hl.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&cc(e,t)})}(e,t),function(e,t){e.registerOnChange(function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&cc(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(function(e){t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(function(){return e.updateValueAndValidity()})}),t._rawAsyncValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(function(){return e.updateValueAndValidity()})})}function cc(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function fc(e,t){var n;throw n=e.path.length>1?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+n)}function pc(e){return null!=e?Hl.compose(e.map(Jl)):null}function hc(e){return null!=e?Hl.composeAsync(e.map(ec)):null}var dc=[Zl,function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),tc,function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=ye}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(){return(this._idCounter++).toString()},e.prototype._getOptionId=function(e){var t,n;try{for(var r=a(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i),e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e},e}(),function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=ye}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map(function(e){return n._getOptionId(e)});t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var o=n.selectedOptions,i=0;i<o.length;i++){var a=o.item(i),s=t._getOptionValue(a.value);r.push(s)}else for(o=n.options,i=0;i<o.length;i++)(a=o.item(i)).selected&&(s=t._getOptionValue(a.value),r.push(s));t.value=r,e(r)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},e.prototype._getOptionId=function(e){var t,n;try{for(var r=a(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i)._value,e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e},e}(),ic],mc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},t.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(t.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return uc(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return pc(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return hc(this._asyncValidators)},enumerable:!0,configurable:!0}),t.prototype._checkParentType=function(){},t}(Ul),gc=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(function(){function e(e){this._cd=e}return Object.defineProperty(e.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),e}());function yc(e){var t=bc(e)?e.validators:e;return Array.isArray(t)?pc(t):t||null}function vc(e,t){var n=bc(t)?t.asyncValidators:e;return Array.isArray(n)?hc(n):n||null}function bc(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var _c=function(){function e(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),e.prototype.setValidators=function(e){this.validator=yc(e)},e.prototype.setAsyncValidators=function(e){this.asyncValidator=vc(e)},e.prototype.clearValidators=function(){this.validator=null},e.prototype.clearAsyncValidators=function(){this.asyncValidator=null},e.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},e.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},e.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype.markAsPending=function(e){void 0===e&&(e={}),this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},e.prototype.disable=function(e){void 0===e&&(e={}),this.status="DISABLED",this.errors=null,this._forEachChild(function(t){t.disable(i({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!0)})},e.prototype.enable=function(e){void 0===e&&(e={}),this.status="VALID",this._forEachChild(function(t){t.enable(i({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!1)})},e.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},e.prototype.setParent=function(e){this._parent=e},e.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},e.prototype._updateTreeValidity=function(e){void 0===e&&(e={emitEvent:!0}),this._forEachChild(function(t){return t._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})},e.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},e.prototype._runValidator=function(){return this.validator?this.validator(this):null},e.prototype._runAsyncValidator=function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var n=Gl(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){return t.setErrors(n,{emitEvent:e})})}},e.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},e.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},e.prototype.get=function(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce(function(e,t){return e instanceof xc?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Nc&&e.at(t)||null},e))}(this,e)},e.prototype.getError=function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null},e.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(e.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),e.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},e.prototype._initObservables=function(){this.valueChanges=new Wt,this.statusChanges=new Wt},e.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},e.prototype._anyControlsHaveStatus=function(e){return this._anyControls(function(t){return t.status===e})},e.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},e.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},e.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},e.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},e.prototype._setUpdateStrategy=function(e){bc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},e}(),wc=function(e){function t(t,n,r){void 0===t&&(t=null);var o=e.call(this,yc(n),vc(r,n))||this;return o._onChange=[],o._applyFormState(t),o._setUpdateStrategy(n),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o._initObservables(),o}return o(t,e),t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},t.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},t.prototype._updateValue=function(){},t.prototype._anyControls=function(e){return!1},t.prototype._allControlsDisabled=function(){return this.disabled},t.prototype.registerOnChange=function(e){this._onChange.push(e)},t.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},t.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},t.prototype._forEachChild=function(e){},t.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},t.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},t}(_c),xc=function(e){function t(t,n,r){var o=e.call(this,yc(n),vc(r,n))||this;return o.controls=t,o._initObservables(),o._setUpdateStrategy(n),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o}return o(t,e),t.prototype.registerControl=function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},t.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),Object.keys(e).forEach(function(r){n._throwIfControlMissing(r),n.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),Object.keys(e).forEach(function(r){n.controls[r]&&n.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.reset=function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)},t.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof wc?t.value:t.getRawValue(),e})},t.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},t.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},t.prototype._forEachChild=function(e){var t=this;Object.keys(this.controls).forEach(function(n){return e(t.controls[n],n)})},t.prototype._setUpControls=function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})},t.prototype._updateValue=function(){this.value=this._reduceValue()},t.prototype._anyControls=function(e){var t=this,n=!1;return this._forEachChild(function(r,o){n=n||t.contains(o)&&e(r)}),n},t.prototype._reduceValue=function(){var e=this;return this._reduceChildren({},function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t})},t.prototype._reduceChildren=function(e,t){var n=e;return this._forEachChild(function(e,r){n=t(n,e,r)}),n},t.prototype._allControlsDisabled=function(){var e,t;try{for(var n=a(Object.keys(this.controls)),r=n.next();!r.done;r=n.next())if(this.controls[r.value].enabled)return!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return Object.keys(this.controls).length>0||this.disabled},t.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")})},t}(_c),Nc=function(e){function t(t,n,r){var o=e.call(this,yc(n),vc(r,n))||this;return o.controls=t,o._initObservables(),o._setUpdateStrategy(n),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o}return o(t,e),t.prototype.at=function(e){return this.controls[e]},t.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},t.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},t.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(t.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),e.forEach(function(e,r){n._throwIfControlMissing(r),n.at(r).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),e.forEach(function(e,r){n.at(r)&&n.at(r).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.reset=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)},t.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof wc?e.value:e.getRawValue()})},t.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},t.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},t.prototype._forEachChild=function(e){this.controls.forEach(function(t,n){e(t,n)})},t.prototype._updateValue=function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})},t.prototype._anyControls=function(e){return this.controls.some(function(t){return t.enabled&&e(t)})},t.prototype._setUpControls=function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})},t.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: "+n+".")})},t.prototype._allControlsDisabled=function(){var e,t;try{for(var n=a(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.controls.length>0||this.disabled},t.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},t}(_c),Ec=Promise.resolve(null),Oc=function(e){function t(t,n){var r=e.call(this)||this;return r.submitted=!1,r._directives=[],r.ngSubmit=new Wt,r.form=new xc({},pc(t),hc(n)),r}return o(t,e),t.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(t.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),t.prototype.addControl=function(e){var t=this;Ec.then(function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),lc(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)})},t.prototype.getControl=function(e){return this.form.get(e.path)},t.prototype.removeControl=function(e){var t=this;Ec.then(function(){var n,r,o=t._findContainer(e.path);o&&o.removeControl(e.name),(r=(n=t._directives).indexOf(e))>-1&&n.splice(r,1)})},t.prototype.addFormGroup=function(e){var t=this;Ec.then(function(){var n=t._findContainer(e.path),r=new xc({});(function(e,t){null==e&&fc(t,"Cannot find control with"),e.validator=Hl.compose([e.validator,t.validator]),e.asyncValidator=Hl.composeAsync([e.asyncValidator,t.asyncValidator])})(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})},t.prototype.removeFormGroup=function(e){var t=this;Ec.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)})},t.prototype.getFormGroup=function(e){return this.form.get(e.path)},t.prototype.updateModel=function(e,t){var n=this;Ec.then(function(){n.form.get(e.path).setValue(t)})},t.prototype.setValue=function(e){this.control.setValue(e)},t.prototype.onSubmit=function(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t},t.prototype.onReset=function(){this.resetForm()},t.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},t.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},t.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},t}(Ul),Cc=function(){function e(){}return e.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},e.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+ac+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+sc)},e.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},e.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+ac+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+sc)},e}(),Ic=function(e){function t(t,n,r){var o=e.call(this)||this;return o._parent=t,o._validators=n,o._asyncValidators=r,o}return o(t,e),t.prototype._checkParentType=function(){this._parent instanceof t||this._parent instanceof Oc||Cc.modelGroupParentException()},t}(mc),Sc=Promise.resolve(null),Tc=function(e){function t(t,n,r,o){var i=e.call(this)||this;return i.control=new wc,i._registered=!1,i.update=new Wt,i._parent=t,i._rawValidators=n||[],i._rawAsyncValidators=r||[],i.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||fc(e,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,o=void 0;return t.forEach(function(t){var i;t.constructor===Ql?n=t:(i=t,dc.some(function(e){return i.constructor===e})?(r&&fc(e,"More than one built-in value accessor matches form control with"),r=t):(o&&fc(e,"More than one custom value accessor matches form control with"),o=t))}),o||r||n||(fc(e,"No valid value accessor for form control with"),null)}(i,o),i}return o(t,e),t.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!ye(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},t.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(t.prototype,"path",{get:function(){return this._parent?uc(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return pc(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return hc(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),t.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},t.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},t.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},t.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},t.prototype._setUpStandalone=function(){lc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},t.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},t.prototype._checkParentType=function(){!(this._parent instanceof Ic)&&this._parent instanceof mc?Cc.formGroupNameException():this._parent instanceof Ic||this._parent instanceof Oc||Cc.modelParentException()},t.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Cc.missingNameException()},t.prototype._updateValue=function(e){var t=this;Sc.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},t.prototype._updateDisabled=function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;Sc.then(function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()})},t}(rc),kc=function(){},Ac=function(){},Pc=function(){function e(){this.onValuesChange=new Wt,this.onTitlesChange=new Wt}return e.prototype.changeValues=function(e,t,n){try{this.data[t][n]=parseFloat(e.target.value),this.onValuesChange.emit(this.data)}catch(e){console.log("This value is incorrect.")}},e.prototype.changeTitles=function(e){this.onTitlesChange.emit(this.columnTitles)},e}(),Mc=Lr({encapsulation:2,styles:[],data:{}});function Dc(e){return Ei(0,[(e()(),po(0,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),po(1,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),po(2,0,null,null,0,"input",[["type","number"]],[[8,"value",0]],[[null,"change"]],function(e,t,n){var r=!0;return"change"===t&&(r=!1!==e.component.changeValues(n,e.context.index,"x")&&r),r},null,null)),(e()(),po(3,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),po(4,0,null,null,0,"input",[["type","number"]],[[8,"value",0]],[[null,"change"]],function(e,t,n){var r=!0;return"change"===t&&(r=!1!==e.component.changeValues(n,e.context.index,"y")&&r),r},null,null))],null,function(e,t){var n=t.component;e(t,2,0,lo(1,"",n.data[t.context.index].x,"")),e(t,4,0,lo(1,"",n.data[t.context.index].y,""))})}function Rc(e){return Ei(0,[(e()(),po(0,0,null,null,18,"table",[],null,null,null,null,null)),(e()(),po(1,0,null,null,17,"tbody",[],null,null,null,null,null)),(e()(),po(2,0,null,null,14,"tr",[],null,null,null,null,null)),(e()(),po(3,0,null,null,6,"th",[],null,null,null,null,null)),(e()(),po(4,0,null,null,5,"input",[["class","title-input"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Bo(e,5)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Bo(e,5).onTouched()&&r),"compositionstart"===t&&(r=!1!==Bo(e,5)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Bo(e,5)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(o.columnTitles[0]=n)&&r),"change"===t&&(r=!1!==o.changeTitles(n)&&r),r},null,null)),ei(5,16384,null,0,Ql,[mn,gn,[2,Yl]],null,null),ti(1024,null,Xl,function(e){return[e]},[Ql]),ei(7,671744,null,0,Tc,[[8,null],[8,null],[8,null],[6,Xl]],{model:[0,"model"]},{update:"ngModelChange"}),ti(2048,null,rc,null,[Tc]),ei(9,16384,null,0,gc,[[4,rc]],null,null),(e()(),po(10,0,null,null,6,"th",[],null,null,null,null,null)),(e()(),po(11,0,null,null,5,"input",[["class","title-input"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Bo(e,12)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Bo(e,12).onTouched()&&r),"compositionstart"===t&&(r=!1!==Bo(e,12)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Bo(e,12)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(o.columnTitles[1]=n)&&r),"change"===t&&(r=!1!==o.changeTitles(n)&&r),r},null,null)),ei(12,16384,null,0,Ql,[mn,gn,[2,Yl]],null,null),ti(1024,null,Xl,function(e){return[e]},[Ql]),ei(14,671744,null,0,Tc,[[8,null],[8,null],[8,null],[6,Xl]],{model:[0,"model"]},{update:"ngModelChange"}),ti(2048,null,rc,null,[Tc]),ei(16,16384,null,0,gc,[[4,rc]],null,null),(e()(),fo(16777216,null,null,1,null,Dc)),ei(18,278528,null,0,Eu,[bn,vn,Fn],{ngForOf:[0,"ngForOf"]},null),(e()(),po(19,0,null,null,1,"p",[["class","alert alert-info"]],null,null,null,null,null)),(e()(),wi(-1,null,["An example table: Skoda Octavia fuel usage on a highway."]))],function(e,t){var n=t.component;e(t,7,0,n.columnTitles[0]),e(t,14,0,n.columnTitles[1]),e(t,18,0,n.data)},function(e,t){e(t,4,0,Bo(t,9).ngClassUntouched,Bo(t,9).ngClassTouched,Bo(t,9).ngClassPristine,Bo(t,9).ngClassDirty,Bo(t,9).ngClassValid,Bo(t,9).ngClassInvalid,Bo(t,9).ngClassPending),e(t,11,0,Bo(t,16).ngClassUntouched,Bo(t,16).ngClassTouched,Bo(t,16).ngClassPristine,Bo(t,16).ngClassDirty,Bo(t,16).ngClassValid,Bo(t,16).ngClassInvalid,Bo(t,16).ngClassPending)})}var jc,Lc,Vc=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},zc=(1===(jc=Vc).length&&(Lc=jc,jc=function(e,t){return Vc(Lc(e),t)}),{left:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var o=n+r>>>1;jc(e[o],t)<0?n=o+1:r=o}return n},right:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var o=n+r>>>1;jc(e[o],t)>0?r=o:n=o+1}return n}}).right;Array;var Fc=Math.sqrt(50),Bc=Math.sqrt(10),Uc=Math.sqrt(2),Wc=function(e,t,n){var r,o,i,a,s=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),0===(a=$c(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),i=new Array(o=Math.ceil(t-e+1));++s<o;)i[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),i=new Array(o=Math.ceil(e-t+1));++s<o;)i[s]=(e-s)/a;return r&&i.reverse(),i};function $c(e,t,n){var r=(t-e)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,o);return o>=0?(i>=Fc?10:i>=Bc?5:i>=Uc?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(i>=Fc?10:i>=Bc?5:i>=Uc?2:1)}var Hc=Array.prototype.slice,qc=function(e){return e},Gc=1,Kc=2,Xc=3,Zc=4,Yc=1e-6;function Qc(e){return"translate("+(e+.5)+",0)"}function Jc(e){return"translate(0,"+(e+.5)+")"}function ef(){return!this.__axis}function tf(e,t){var n=[],r=null,o=null,i=6,a=6,s=3,u=e===Gc||e===Zc?-1:1,l=e===Zc||e===Kc?"x":"y",c=e===Gc||e===Xc?Qc:Jc;function f(f){var p=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,h=null==o?t.tickFormat?t.tickFormat.apply(t,n):qc:o,d=Math.max(i,0)+s,m=t.range(),g=+m[0]+.5,y=+m[m.length-1]+.5,v=(t.bandwidth?function(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}:function(e){return function(t){return+e(t)}})(t.copy()),b=f.selection?f.selection():f,_=b.selectAll(".domain").data([null]),w=b.selectAll(".tick").data(p,t).order(),x=w.exit(),N=w.enter().append("g").attr("class","tick"),E=w.select("line"),O=w.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(N),E=E.merge(N.append("line").attr("stroke","currentColor").attr(l+"2",u*i)),O=O.merge(N.append("text").attr("fill","currentColor").attr(l,u*d).attr("dy",e===Gc?"0em":e===Xc?"0.71em":"0.32em")),f!==b&&(_=_.transition(f),w=w.transition(f),E=E.transition(f),O=O.transition(f),x=x.transition(f).attr("opacity",Yc).attr("transform",function(e){return isFinite(e=v(e))?c(e):this.getAttribute("transform")}),N.attr("opacity",Yc).attr("transform",function(e){var t=this.parentNode.__axis;return c(t&&isFinite(t=t(e))?t:v(e))})),x.remove(),_.attr("d",e===Zc||e==Kc?a?"M"+u*a+","+g+"H0.5V"+y+"H"+u*a:"M0.5,"+g+"V"+y:a?"M"+g+","+u*a+"V0.5H"+y+"V"+u*a:"M"+g+",0.5H"+y),w.attr("opacity",1).attr("transform",function(e){return c(v(e))}),E.attr(l+"2",u*i),O.attr(l,u*d).text(h),b.filter(ef).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Kc?"start":e===Zc?"end":"middle"),b.each(function(){this.__axis=v})}return f.scale=function(e){return arguments.length?(t=e,f):t},f.ticks=function(){return n=Hc.call(arguments),f},f.tickArguments=function(e){return arguments.length?(n=null==e?[]:Hc.call(e),f):n.slice()},f.tickValues=function(e){return arguments.length?(r=null==e?null:Hc.call(e),f):r&&r.slice()},f.tickFormat=function(e){return arguments.length?(o=e,f):o},f.tickSize=function(e){return arguments.length?(i=a=+e,f):i},f.tickSizeInner=function(e){return arguments.length?(i=+e,f):i},f.tickSizeOuter=function(e){return arguments.length?(a=+e,f):a},f.tickPadding=function(e){return arguments.length?(s=+e,f):s},f}var nf={value:function(){}};function rf(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new of(r)}function of(e){this._=e}function af(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function sf(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=nf,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}of.prototype=rf.prototype={constructor:of,on:function(e,t){var n,r,o=this._,i=(r=o,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=i[a]).type)o[n]=sf(o[n],e.name,t);else if(null==t)for(n in o)o[n]=sf(o[n],e.name,null);return this}for(;++a<s;)if((n=(e=i[a]).type)&&(n=af(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new of(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};var uf=rf,lf="http://www.w3.org/1999/xhtml",cf={svg:"http://www.w3.org/2000/svg",xhtml:lf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ff=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),cf.hasOwnProperty(t)?{space:cf[t],local:e}:e},pf=function(e){var t=ff(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===lf&&t.documentElement.namespaceURI===lf?t.createElement(e):t.createElementNS(n,e)}})(t)};function hf(){}var df=function(e){return null==e?hf:function(){return this.querySelector(e)}};function mf(){return[]}var gf=function(e){return null==e?mf:function(){return this.querySelectorAll(e)}},yf=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var vf=document.documentElement;if(!vf.matches){var bf=vf.webkitMatchesSelector||vf.msMatchesSelector||vf.mozMatchesSelector||vf.oMatchesSelector;yf=function(e){return function(){return bf.call(this,e)}}}}var _f=yf,wf=function(e){return new Array(e.length)};function xf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xf.prototype={constructor:xf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Nf="$";function Ef(e,t,n,r,o,i){for(var a,s=0,u=t.length,l=i.length;s<l;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new xf(e,i[s]);for(;s<u;++s)(a=t[s])&&(o[s]=a)}function Of(e,t,n,r,o,i,a){var s,u,l,c={},f=t.length,p=i.length,h=new Array(f);for(s=0;s<f;++s)(u=t[s])&&(h[s]=l=Nf+a.call(u,u.__data__,s,t),l in c?o[s]=u:c[l]=u);for(s=0;s<p;++s)(u=c[l=Nf+a.call(e,i[s],s,i)])?(r[s]=u,u.__data__=i[s],c[l]=null):n[s]=new xf(e,i[s]);for(s=0;s<f;++s)(u=t[s])&&c[h[s]]===u&&(o[s]=u)}function Cf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var If=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function Sf(e,t){return e.style.getPropertyValue(t)||If(e).getComputedStyle(e,null).getPropertyValue(t)}function Tf(e){return e.trim().split(/^|\s+/)}function kf(e){return e.classList||new Af(e)}function Af(e){this._node=e,this._names=Tf(e.getAttribute("class")||"")}function Pf(e,t){for(var n=kf(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Mf(e,t){for(var n=kf(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Df(){this.textContent=""}function Rf(){this.innerHTML=""}function jf(){this.nextSibling&&this.parentNode.appendChild(this)}function Lf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vf(){return null}function zf(){var e=this.parentNode;e&&e.removeChild(this)}function Ff(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Bf(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}Af.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Uf={},Wf=null;function $f(e,t,n){return e=Hf(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function Hf(e,t,n){return function(r){var o=Wf;Wf=r;try{e.call(this,this.__data__,t,n)}finally{Wf=o}}}function qf(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?t.length=o:delete this.__on}}}function Gf(e,t,n){var r=Uf.hasOwnProperty(e.type)?$f:Hf;return function(o,i,a){var s,u=this.__on,l=r(t,i,a);if(u)for(var c=0,f=u.length;c<f;++c)if((s=u[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=t);this.addEventListener(e.type,l,n),s={type:e.type,name:e.name,value:t,listener:l,capture:n},u?u.push(s):this.__on=[s]}}function Kf(e,t,n){var r=If(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Uf={mouseenter:"mouseover",mouseleave:"mouseout"}));var Xf=[null];function Zf(e,t){this._groups=e,this._parents=t}function Yf(){return new Zf([[document.documentElement]],Xf)}Zf.prototype=Yf.prototype={constructor:Zf,select:function(e){"function"!=typeof e&&(e=df(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a,s=t[o],u=s.length,l=r[o]=new Array(u),c=0;c<u;++c)(i=s[c])&&(a=e.call(i,i.__data__,c,s))&&("__data__"in i&&(a.__data__=i.__data__),l[c]=a);return new Zf(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=gf(e));for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a,s=t[i],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(e.call(a,a.__data__,l,s)),o.push(a));return new Zf(r,o)},filter:function(e){"function"!=typeof e&&(e=_f(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,u=r[o]=[],l=0;l<s;++l)(i=a[l])&&e.call(i,i.__data__,l,a)&&u.push(i);return new Zf(r,this._parents)},data:function(e,t){if(!e)return d=new Array(this.size()),c=-1,this.each(function(e){d[++c]=e}),d;var n,r=t?Of:Ef,o=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=i.length,s=new Array(a),u=new Array(a),l=new Array(a),c=0;c<a;++c){var f=o[c],p=i[c],h=p.length,d=e.call(f,f&&f.__data__,c,o),m=d.length,g=u[c]=new Array(m),y=s[c]=new Array(m);r(f,p,g,y,l[c]=new Array(h),d,t);for(var v,b,_=0,w=0;_<m;++_)if(v=g[_]){for(_>=w&&(w=_+1);!(b=y[w])&&++w<m;);v._next=b||null}}return(s=new Zf(s,o))._enter=u,s._exit=l,s},enter:function(){return new Zf(this._enter||this._groups.map(wf),this._parents)},exit:function(){return new Zf(this._exit||this._groups.map(wf),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,o=Math.min(r,n.length),i=new Array(r),a=0;a<o;++a)for(var s,u=t[a],l=n[a],c=u.length,f=i[a]=new Array(c),p=0;p<c;++p)(s=u[p]||l[p])&&(f[p]=s);for(;a<r;++a)i[a]=t[a];return new Zf(i,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Cf);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],u=s.length,l=o[i]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(t)}return new Zf(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,s=i.length;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=ff(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):Sf(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=Tf(e+"");if(arguments.length<2){for(var r=kf(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?Pf:Mf)(this,e)}}:t?function(e){return function(){Pf(this,e)}}:function(e){return function(){Mf(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?Df:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Rf:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(jf)},lower:function(){return this.each(Lf)},append:function(e){var t="function"==typeof e?e:pf(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:pf(e),r=null==t?Vf:"function"==typeof t?t:df(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(zf)},clone:function(e){return this.select(e?Bf:Ff)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),a=i.length;if(!(arguments.length<2)){for(s=t?Gf:qf,null==n&&(n=!1),r=0;r<a;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return Kf(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return Kf(this,e,t)}})(e,t))}};var Qf=Yf,Jf=function(e){return"string"==typeof e?new Zf([[document.querySelector(e)]],[document.documentElement]):new Zf([[e]],Xf)},ep=0;function tp(){this._="@"+(++ep).toString(36)}tp.prototype=(function(){return new tp}).prototype={constructor:tp,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var np=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function rp(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function op(){}var ip="\\s*([+-]?\\d+)\\s*",ap="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",sp="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",up=/^#([0-9a-f]{3})$/,lp=/^#([0-9a-f]{6})$/,cp=new RegExp("^rgb\\("+[ip,ip,ip]+"\\)$"),fp=new RegExp("^rgb\\("+[sp,sp,sp]+"\\)$"),pp=new RegExp("^rgba\\("+[ip,ip,ip,ap]+"\\)$"),hp=new RegExp("^rgba\\("+[sp,sp,sp,ap]+"\\)$"),dp=new RegExp("^hsl\\("+[ap,sp,sp]+"\\)$"),mp=new RegExp("^hsla\\("+[ap,sp,sp,ap]+"\\)$"),gp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function yp(e){var t;return e=(e+"").trim().toLowerCase(),(t=up.exec(e))?new xp((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=lp.exec(e))?vp(parseInt(t[1],16)):(t=cp.exec(e))?new xp(t[1],t[2],t[3],1):(t=fp.exec(e))?new xp(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=pp.exec(e))?bp(t[1],t[2],t[3],t[4]):(t=hp.exec(e))?bp(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=dp.exec(e))?Ep(t[1],t[2]/100,t[3]/100,1):(t=mp.exec(e))?Ep(t[1],t[2]/100,t[3]/100,t[4]):gp.hasOwnProperty(e)?vp(gp[e]):"transparent"===e?new xp(NaN,NaN,NaN,0):null}function vp(e){return new xp(e>>16&255,e>>8&255,255&e,1)}function bp(e,t,n,r){return r<=0&&(e=t=n=NaN),new xp(e,t,n,r)}function _p(e){return e instanceof op||(e=yp(e)),e?new xp((e=e.rgb()).r,e.g,e.b,e.opacity):new xp}function wp(e,t,n,r){return 1===arguments.length?_p(e):new xp(e,t,n,null==r?1:r)}function xp(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Np(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Ep(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Cp(e,t,n,r)}function Op(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof Cp)return new Cp(e.h,e.s,e.l,e.opacity);if(e instanceof op||(e=yp(e)),!e)return new Cp;if(e instanceof Cp)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,u=(i+o)/2;return s?(a=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=u<.5?i+o:2-i-o,a*=60):s=u>0&&u<1?0:a,new Cp(a,s,u,e.opacity)}(e):new Cp(e,t,n,null==r?1:r)}function Cp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Ip(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}np(op,yp,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),np(xp,wp,rp(op,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new xp(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new xp(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Np(this.r)+Np(this.g)+Np(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),np(Cp,Op,rp(op,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Cp(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Cp(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new xp(Ip(e>=240?e-240:e+120,o,r),Ip(e,o,r),Ip(e<120?e+240:e-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Sp=Math.PI/180,Tp=180/Math.PI,kp=.96422,Ap=1,Pp=.82521,Mp=4/29,Dp=6/29,Rp=3*Dp*Dp,jp=Dp*Dp*Dp;function Lp(e){if(e instanceof Vp)return new Vp(e.l,e.a,e.b,e.opacity);if(e instanceof $p){if(isNaN(e.h))return new Vp(e.l,0,0,e.opacity);var t=e.h*Sp;return new Vp(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof xp||(e=_p(e));var n,r,o=Up(e.r),i=Up(e.g),a=Up(e.b),s=zp((.2225045*o+.7168786*i+.0606169*a)/Ap);return o===i&&i===a?n=r=s:(n=zp((.4360747*o+.3850649*i+.1430804*a)/kp),r=zp((.0139322*o+.0971045*i+.7141733*a)/Pp)),new Vp(116*s-16,500*(n-s),200*(s-r),e.opacity)}function Vp(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function zp(e){return e>jp?Math.pow(e,1/3):e/Rp+Mp}function Fp(e){return e>Dp?e*e*e:Rp*(e-Mp)}function Bp(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Up(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Wp(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof $p)return new $p(e.h,e.c,e.l,e.opacity);if(e instanceof Vp||(e=Lp(e)),0===e.a&&0===e.b)return new $p(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Tp;return new $p(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new $p(e,t,n,null==r?1:r)}function $p(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}np(Vp,function(e,t,n,r){return 1===arguments.length?Lp(e):new Vp(e,t,n,null==r?1:r)},rp(op,{brighter:function(e){return new Vp(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Vp(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new xp(Bp(3.1338561*(t=kp*Fp(t))-1.6168667*(e=Ap*Fp(e))-.4906146*(n=Pp*Fp(n))),Bp(-.9787684*t+1.9161415*e+.033454*n),Bp(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),np($p,Wp,rp(op,{brighter:function(e){return new $p(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new $p(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Lp(this).rgb()}}));var Hp=-.29227,qp=-.90649,Gp=1.97294,Kp=Gp*qp,Xp=1.78277*Gp,Zp=1.78277*Hp- -.14861*qp;function Yp(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof Qp)return new Qp(e.h,e.s,e.l,e.opacity);e instanceof xp||(e=_p(e));var t=e.g/255,n=e.b/255,r=(Zp*n+Kp*(e.r/255)-Xp*t)/(Zp+Kp-Xp),o=n-r,i=(Gp*(t-r)-Hp*o)/qp,a=Math.sqrt(i*i+o*o)/(Gp*r*(1-r)),s=a?Math.atan2(i,o)*Tp-120:NaN;return new Qp(s<0?s+360:s,a,r,e.opacity)}(e):new Qp(e,t,n,null==r?1:r)}function Qp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Jp(e,t,n,r,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*r+a*o)/6}np(Qp,Yp,rp(op,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Qp(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Qp(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Sp,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),o=Math.sin(e);return new xp(255*(t+n*(-.14861*r+1.78277*o)),255*(t+n*(Hp*r+qp*o)),255*(t+n*(Gp*r)),this.opacity)}}));var eh=function(e){return function(){return e}};function th(e,t){return function(n){return e+n*t}}function nh(e,t){var n=t-e;return n?th(e,n>180||n<-180?n-360*Math.round(n/360):n):eh(isNaN(e)?t:e)}function rh(e,t){var n=t-e;return n?th(e,n):eh(isNaN(e)?t:e)}var oh=function e(t){var n=function(e){return 1==(e=+e)?rh:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):eh(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=wp(e)).r,(t=wp(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=rh(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function ih(e){return function(t){var n,r,o=t.length,i=new Array(o),a=new Array(o),s=new Array(o);for(n=0;n<o;++n)r=wp(t[n]),i[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return i=e(i),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=a(e),r.b=s(e),r+""}}}var ah,sh,uh,lh,ch=ih(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],i=e[r+1];return Jp((n-r/t)*t,r>0?e[r-1]:2*o-i,o,i,r<t-1?e[r+2]:2*i-o)}}),fh=(ih(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t);return Jp((n-r/t)*t,e[(r+t-1)%t],e[r%t],e[(r+1)%t],e[(r+2)%t])}}),function(e,t){return t-=e=+e,function(n){return e+t*n}}),ph=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hh=new RegExp(ph.source,"g"),dh=function(e,t){var n,r,o,i=ph.lastIndex=hh.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=ph.exec(e))&&(r=hh.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:fh(n,r)})),i=hh.lastIndex;return i<t.length&&(o=t.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})},mh=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?eh(t):("number"===r?fh:"string"===r?(n=yp(t))?(t=n,oh):dh:t instanceof yp?oh:t instanceof Date?function(e,t){var n=new Date;return t-=e=+e,function(r){return n.setTime(e+t*r),n}}:Array.isArray(t)?function(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,i=new Array(o),a=new Array(r);for(n=0;n<o;++n)i[n]=mh(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<o;++n)a[n]=i[n](e);return a}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var n,r={},o={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=mh(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}:fh)(e,t)},gh=function(e,t){return t-=e=+e,function(n){return Math.round(e+t*n)}},yh=180/Math.PI,vh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},bh=function(e,t,n,r,o,i){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*yh,skewX:Math.atan(u)*yh,scaleX:a,scaleY:s}};function _h(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,a){var s=[],u=[];return i=e(i),a=e(a),function(e,r,o,i,a,s){if(e!==o||r!==i){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:fh(e,o)},{i:u-2,x:fh(r,i)})}else(o||i)&&a.push("translate("+o+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:fh(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(i.rotate,a.rotate,s,u),function(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:fh(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(i.skewX,a.skewX,s,u),function(e,t,n,r,i,a){if(e!==n||t!==r){var s=i.push(o(i)+"scale(",null,",",null,")");a.push({i:s-4,x:fh(e,n)},{i:s-2,x:fh(t,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,u),i=a=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var wh=_h(function(e){return"none"===e?vh:(ah||(ah=document.createElement("DIV"),sh=document.documentElement,uh=document.defaultView),ah.style.transform=e,e=uh.getComputedStyle(sh.appendChild(ah),null).getPropertyValue("transform"),sh.removeChild(ah),e=e.slice(7,-1).split(","),bh(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),xh=_h(function(e){return null==e?vh:(lh||(lh=document.createElementNS("http://www.w3.org/2000/svg","g")),lh.setAttribute("transform",e),(e=lh.transform.baseVal.consolidate())?bh((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):vh)},", ",")",")");function Nh(e){return function(t,n){var r=e((t=Op(t)).h,(n=Op(n)).h),o=rh(t.s,n.s),i=rh(t.l,n.l),a=rh(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=o(e),t.l=i(e),t.opacity=a(e),t+""}}}function Eh(e){return function(t,n){var r=e((t=Wp(t)).h,(n=Wp(n)).h),o=rh(t.c,n.c),i=rh(t.l,n.l),a=rh(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=o(e),t.l=i(e),t.opacity=a(e),t+""}}}function Oh(e){return function t(n){function r(t,r){var o=e((t=Yp(t)).h,(r=Yp(r)).h),i=rh(t.s,r.s),a=rh(t.l,r.l),s=rh(t.opacity,r.opacity);return function(e){return t.h=o(e),t.s=i(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}Math,Nh(nh),Nh(rh),Eh(nh),Eh(rh),Oh(nh);var Ch,Ih,Sh=Oh(rh),Th=0,kh=0,Ah=0,Ph=1e3,Mh=0,Dh=0,Rh=0,jh="object"==typeof performance&&performance.now?performance:Date,Lh="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Vh(){return Dh||(Lh(zh),Dh=jh.now()+Rh)}function zh(){Dh=0}function Fh(){this._call=this._time=this._next=null}function Bh(e,t,n){var r=new Fh;return r.restart(e,t,n),r}function Uh(){Dh=(Mh=jh.now())+Rh,Th=kh=0;try{!function(){Vh(),++Th;for(var e,t=Ch;t;)(e=Dh-t._time)>=0&&t._call.call(null,e),t=t._next;--Th}()}finally{Th=0,function(){for(var e,t,n=Ch,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ch=t);Ih=e,$h(r)}(),Dh=0}}function Wh(){var e=jh.now(),t=e-Mh;t>Ph&&(Rh-=t,Mh=e)}function $h(e){Th||(kh&&(kh=clearTimeout(kh)),e-Dh>24?(e<1/0&&(kh=setTimeout(Uh,e-jh.now()-Rh)),Ah&&(Ah=clearInterval(Ah))):(Ah||(Mh=jh.now(),Ah=setInterval(Wh,Ph)),Th=1,Lh(Uh)))}Fh.prototype=Bh.prototype={constructor:Fh,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Vh():+n)+(null==t?0:+t),this._next||Ih===this||(Ih?Ih._next=this:Ch=this,Ih=this),this._call=e,this._time=n,$h()},stop:function(){this._call&&(this._call=null,this._time=1/0,$h())}};var Hh=function(e,t,n){var r=new Fh;return r.restart(function(n){r.stop(),e(n+t)},t=null==t?0:+t,n),r},qh=uf("start","end","interrupt"),Gh=[],Kh=0,Xh=1,Zh=2,Yh=3,Qh=4,Jh=5,ed=6,td=function(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(u){var l,c,f,p;if(n.state!==Xh)return s();for(l in o)if((p=o[l]).name===n.name){if(p.state===Yh)return Hh(i);p.state===Qh?(p.state=ed,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[l]):+l<t&&(p.state=ed,p.timer.stop(),delete o[l])}if(Hh(function(){n.state===Yh&&(n.state=Qh,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Zh,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Zh){for(n.state=Yh,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(p=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=p);r.length=c+1}}function a(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=Jh,1),i=-1,a=r.length;++i<a;)r[i].call(null,o);n.state===Jh&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=ed,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=Bh(function(e){n.state=Xh,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:o,on:qh,tween:Gh,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Kh})};function nd(e,t){var n=od(e,t);if(n.state>Kh)throw new Error("too late; already scheduled");return n}function rd(e,t){var n=od(e,t);if(n.state>Zh)throw new Error("too late; already started");return n}function od(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function id(e,t,n){var r=e._id;return e.each(function(){var e=rd(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return od(e,r).value[t]}}var ad=function(e,t){var n;return("number"==typeof t?fh:t instanceof yp?oh:(n=yp(t))?(t=n,oh):dh)(e,t)},sd=Qf.prototype.constructor,ud=0;function ld(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function cd(){return++ud}var fd=Qf.prototype;ld.prototype=(function(e){return Qf().transition(e)}).prototype={constructor:ld,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=df(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s,u,l=r[a],c=l.length,f=i[a]=new Array(c),p=0;p<c;++p)(s=l[p])&&(u=e.call(s,s.__data__,p,l))&&("__data__"in s&&(u.__data__=s.__data__),f[p]=u,td(f[p],t,n,p,f,od(s,n)));return new ld(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=gf(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var p,h=e.call(u,u.__data__,f,l),d=od(u,n),m=0,g=h.length;m<g;++m)(p=h[m])&&td(p,t,n,m,h,d);i.push(h),a.push(u)}return new ld(i,a,t,n)},filter:function(e){"function"!=typeof e&&(e=_f(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,u=r[o]=[],l=0;l<s;++l)(i=a[l])&&e.call(i,i.__data__,l,a)&&u.push(i);return new ld(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=Math.min(r,n.length),i=new Array(r),a=0;a<o;++a)for(var s,u=t[a],l=n[a],c=u.length,f=i[a]=new Array(c),p=0;p<c;++p)(s=u[p]||l[p])&&(f[p]=s);for(;a<r;++a)i[a]=t[a];return new ld(i,this._parents,this._name,this._id)},selection:function(){return new sd(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=cd(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=od(a,t);td(a,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ld(r,this._parents,e,n)},call:fd.call,nodes:fd.nodes,node:fd.node,size:fd.size,empty:fd.empty,each:fd.each,on:function(e,t){var n=this._id;return arguments.length<2?od(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?nd:rd;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}(n,e,t))},attr:function(e,t){var n=ff(e),r="transform"===n?xh:ad;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,o,i;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttributeNS(e.space,e.local))===s?null:a===r&&s===o?i:i=t(r=a,o=s);this.removeAttributeNS(e.space,e.local)}}:function(e,t,n){var r,o,i;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttribute(e))===s?null:a===r&&s===o?i:i=t(r=a,o=s);this.removeAttribute(e)}})(n,r,id(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,o;return function(){var i=this.getAttributeNS(e.space,e.local);return i===n?null:i===r?o:o=t(r=i,n)}}:function(e,t,n){var r,o;return function(){var i=this.getAttribute(e);return i===n?null:i===r?o:o=t(r=i,n)}})(n,r,t+""))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=ff(e);return this.tween(n,(r.local?function(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttributeNS(e.space,e.local,r(t))}}return n._value=t,n}:function(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttribute(e,r(t))}}return n._value=t,n})(r,t))},style:function(e,t,n){var r="transform"==(e+="")?wh:ad;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var i=Sf(this,e),a=(this.style.removeProperty(e),Sf(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}(e,r)).on("end.style."+e,function(e){return function(){this.style.removeProperty(e)}}(e)):this.styleTween(e,"function"==typeof t?function(e,t,n){var r,o,i;return function(){var a=Sf(this,e),s=n(this);return null==s&&(this.style.removeProperty(e),s=Sf(this,e)),a===s?null:a===r&&s===o?i:i=t(r=a,o=s)}}(e,r,id(this,"style."+e,t)):function(e,t,n){var r,o;return function(){var i=Sf(this,e);return i===n?null:i===r?o:o=t(r=i,n)}}(e,r,t+""),n)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){function r(){var r=this,o=t.apply(r,arguments);return o&&function(t){r.style.setProperty(e,o(t),n)}}return r._value=t,r}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(id(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=od(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var o=rd(this,e),i=o.tween;if(i!==n)for(var a=0,s=(r=n=i).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}o.tween=r}}:function(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var i=rd(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},u=0,l=o.length;u<l;++u)if(o[u].name===t){o[u]=s;break}u===l&&o.push(s)}i.tween=o}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){nd(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){nd(this,e).delay=t}})(t,e)):od(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){rd(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){rd(this,e).duration=t}})(t,e)):od(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){rd(this,e).ease=t}}(t,e)):od(this.node(),t).ease}},function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),Math,function e(t){function n(e){return e*e*((t+1)*e-t)}return t=+t,n.overshoot=e,n}(1.70158),function e(t){function n(e){return--e*e*((t+1)*e+t)+1}return t=+t,n.overshoot=e,n}(1.70158),function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158);var pd=2*Math.PI,hd=(function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=pd);function o(e){return t*Math.pow(2,10*--e)*Math.sin((r-e)/n)}return o.amplitude=function(t){return e(t,n*pd)},o.period=function(n){return e(t,n)},o}(1,.3),function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=pd);function o(e){return 1-t*Math.pow(2,-10*(e=+e))*Math.sin((e+r)/n)}return o.amplitude=function(t){return e(t,n*pd)},o.period=function(n){return e(t,n)},o}(1,.3),function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=pd);function o(e){return((e=2*e-1)<0?t*Math.pow(2,10*e)*Math.sin((r-e)/n):2-t*Math.pow(2,-10*e)*Math.sin((r+e)/n))/2}return o.amplitude=function(t){return e(t,n*pd)},o.period=function(n){return e(t,n)},o}(1,.3),{time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}});function dd(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return hd.time=Vh(),hd;return n}function md(e){return{type:e}}Qf.prototype.interrupt=function(e){return this.each(function(){!function(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>Zh&&n.state<Jh,n.state=ed,n.timer.stop(),r&&n.on.call("interrupt",e,e.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete e.__transition}}(this,e)})},Qf.prototype.transition=function(e){var t,n;e instanceof ld?(t=e._id,e=e._name):(t=cd(),(n=hd).time=Vh(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],u=s.length,l=0;l<u;++l)(a=s[l])&&td(a,e,t,l,s,n||dd(a,t));return new ld(r,this._parents,e,t)},["e","w"].map(md),["n","s"].map(md),["n","e","s","w","nw","ne","se","sw"].map(md),Math,Math,Math,Math,Array;var gd=Math.PI,yd=2*gd,vd=yd-1e-6;function bd(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function _d(){return new bd}bd.prototype=_d.prototype={constructor:bd,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,o,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+o)+","+(this._y1=+i)},arcTo:function(e,t,n,r,o){var i=this._x1,a=this._y1,s=(n=+n)-(e=+e),u=(r=+r)-(t=+t),l=i-e,c=a-t,f=l*l+c*c;if((o=+o)<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>1e-6)if(Math.abs(c*s-u*l)>1e-6&&o){var p=n-i,h=r-a,d=s*s+u*u,m=p*p+h*h,g=Math.sqrt(d),y=Math.sqrt(f),v=o*Math.tan((gd-Math.acos((d+f-m)/(2*g*y)))/2),b=v/y,_=v/g;Math.abs(b-1)>1e-6&&(this._+="L"+(e+b*l)+","+(t+b*c)),this._+="A"+o+","+o+",0,0,"+ +(c*p>l*h)+","+(this._x1=e+_*s)+","+(this._y1=t+_*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,r,o,i){e=+e,t=+t;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+a,l=t+s,c=1^i,f=i?r-o:o-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%yd+yd),f>vd?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=gd)+","+c+","+(this._x1=e+n*Math.cos(o))+","+(this._y1=t+n*Math.sin(o))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var wd=_d;function xd(){}function Nd(e,t){var n=new xd;if(e instanceof xd)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,o=-1,i=e.length;if(null==t)for(;++o<i;)n.set(o,e[o]);else for(;++o<i;)n.set(t(r=e[o],o,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}function Ed(){}xd.prototype=Nd.prototype={constructor:xd,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var Od=Nd.prototype;Ed.prototype=(function(e,t){var n=new Ed;if(e instanceof Ed)e.each(function(e){n.add(e)});else if(e){var r=-1,o=e.length;if(null==t)for(;++r<o;)n.add(e[r]);else for(;++r<o;)n.add(t(e[r],r,e))}return n}).prototype={constructor:Ed,has:Od.has,add:function(e){return this["$"+(e+="")]=e,this},remove:Od.remove,clear:Od.clear,values:Od.keys,size:Od.size,empty:Od.empty,each:Od.each},Array;var Cd={},Id={},Sd=34,Td=10,kd=13;function Ad(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}var Pd=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,o=[],i=e.length,a=0,s=0,u=i<=0,l=!1;function c(){if(u)return Id;if(l)return l=!1,Cd;var t,r,o=a;if(e.charCodeAt(o)===Sd){for(;a++<i&&e.charCodeAt(a)!==Sd||e.charCodeAt(++a)===Sd;);return(t=a)>=i?u=!0:(r=e.charCodeAt(a++))===Td?l=!0:r===kd&&(l=!0,e.charCodeAt(a)===Td&&++a),e.slice(o+1,t-1).replace(/""/g,'"')}for(;a<i;){if((r=e.charCodeAt(t=a++))===Td)l=!0;else if(r===kd)l=!0,e.charCodeAt(a)===Td&&++a;else if(r!==n)continue;return e.slice(o,t)}return u=!0,e.slice(o,i)}for(e.charCodeAt(i-1)===Td&&--i,e.charCodeAt(i-1)===kd&&--i;(r=c())!==Id;){for(var f=[];r!==Cd&&r!==Id;)f.push(r),r=c();t&&null==(f=t(f,s++))||o.push(f)}return o}function o(t){return t.map(i).join(e)}function i(e){return null==e?"":t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,o,i=r(e,function(e,r){if(n)return n(e,r-1);o=e,n=t?function(e,t){var n=Ad(e);return function(r,o){return t(n(r),o,e)}}(e,t):Ad(e)});return i.columns=o||[],i},parseRows:r,format:function(t,n){return null==n&&(n=function(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}(t)),[n.map(i).join(e)].concat(t.map(function(t){return n.map(function(e){return i(t[e])}).join(e)})).join("\n")},formatRows:function(e){return e.map(o).join("\n")}}},Md=Pd(",").parse,Dd=Pd("\t").parse;function Rd(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}var jd=function(e,t){return fetch(e,t).then(Rd)};function Ld(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),jd(t,n).then(function(t){return e(t,r)})}}function Vd(e){return function(t,n){return jd(t,n).then(function(t){return(new DOMParser).parseFromString(t,e)})}}function zd(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var o,i,a,s,u,l,c,f,p,h=e._root,d={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!h)return e._root=d,e;for(;h.length;)if((l=t>=(i=(m+y)/2))?m=i:y=i,(c=n>=(a=(g+v)/2))?g=a:v=a,o=h,!(h=h[f=c<<1|l]))return o[f]=d,e;if(s=+e._x.call(null,h.data),u=+e._y.call(null,h.data),t===s&&n===u)return d.next=h,o?o[f]=d:e._root=d,e;do{o=o?o[f]=new Array(4):e._root=new Array(4),(l=t>=(i=(m+y)/2))?m=i:y=i,(c=n>=(a=(g+v)/2))?g=a:v=a}while((f=c<<1|l)==(p=(u>=a)<<1|s>=i));return o[p]=h,o[f]=d,e}Ld(Md),Ld(Dd),Vd("application/xml"),Vd("text/html"),Vd("image/svg+xml");var Fd=function(e,t,n,r,o){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=o};function Bd(e){return e[0]}function Ud(e){return e[1]}function Wd(e,t,n,r,o,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function $d(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Hd=(function(e,t,n){var r=new Wd(null==t?Bd:t,null==n?Ud:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}).prototype=Wd.prototype;Hd.copy=function(){var e,t,n=new Wd(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=$d(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var o=0;o<4;++o)(t=r.source[o])&&(t.length?e.push({source:t,target:r.target[o]=new Array(4)}):r.target[o]=$d(t));return n},Hd.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return zd(this.cover(t,n),t,n,e)},Hd.addAll=function(e){var t,n,r,o,i=e.length,a=new Array(i),s=new Array(i),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=r,s[n]=o,r<u&&(u=r),r>c&&(c=r),o<l&&(l=o),o>f&&(f=o));for(c<u&&(u=this._x0,c=this._x1),f<l&&(l=this._y0,f=this._y1),this.cover(u,l).cover(c,f),n=0;n<i;++n)zd(this,a[n],s[n],e[n]);return this},Hd.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{if(!(n>e||e>o||r>t||t>i))return this;var a,s,u=o-n,l=this._root;switch(s=(t<(r+i)/2)<<1|e<(n+o)/2){case 0:do{(a=new Array(4))[s]=l,l=a}while(i=r+(u*=2),e>(o=n+u)||t>i);break;case 1:do{(a=new Array(4))[s]=l,l=a}while(i=r+(u*=2),(n=o-u)>e||t>i);break;case 2:do{(a=new Array(4))[s]=l,l=a}while(r=i-(u*=2),e>(o=n+u)||r>t);break;case 3:do{(a=new Array(4))[s]=l,l=a}while(r=i-(u*=2),(n=o-u)>e||r>t)}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this},Hd.data=function(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},Hd.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Hd.find=function(e,t,n){var r,o,i,a,s,u,l,c=this._x0,f=this._y0,p=this._x1,h=this._y1,d=[],m=this._root;for(m&&d.push(new Fd(m,c,f,p,h)),null==n?n=1/0:(c=e-n,f=t-n,p=e+n,h=t+n,n*=n);u=d.pop();)if(!(!(m=u.node)||(o=u.x0)>p||(i=u.y0)>h||(a=u.x1)<c||(s=u.y1)<f))if(m.length){var g=(o+a)/2,y=(i+s)/2;d.push(new Fd(m[3],g,y,a,s),new Fd(m[2],o,y,g,s),new Fd(m[1],g,i,a,y),new Fd(m[0],o,i,g,y)),(l=(t>=y)<<1|e>=g)&&(u=d[d.length-1],d[d.length-1]=d[d.length-1-l],d[d.length-1-l]=u)}else{var v=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),_=v*v+b*b;if(_<n){var w=Math.sqrt(n=_);c=e-w,f=t-w,p=e+w,h=t+w,r=m.data}}return r},Hd.remove=function(e){if(isNaN(i=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,o,i,a,s,u,l,c,f,p,h=this._root,d=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((l=i>=(s=(d+g)/2))?d=s:g=s,(c=a>=(u=(m+y)/2))?m=u:y=u,t=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,p=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(o=h.next)&&delete h.next,r?(o?r.next=o:delete r.next,this):t?(o?t[f]=o:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[p]=h:this._root=h),this):(this._root=o,this)},Hd.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Hd.root=function(){return this._root},Hd.size=function(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},Hd.visit=function(e){var t,n,r,o,i,a,s=[],u=this._root;for(u&&s.push(new Fd(u,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(u=t.node,r=t.x0,o=t.y0,i=t.x1,a=t.y1)&&u.length){var l=(r+i)/2,c=(o+a)/2;(n=u[3])&&s.push(new Fd(n,l,c,i,a)),(n=u[2])&&s.push(new Fd(n,r,c,l,a)),(n=u[1])&&s.push(new Fd(n,l,o,i,c)),(n=u[0])&&s.push(new Fd(n,r,o,l,c))}return this},Hd.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Fd(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var o=t.node;if(o.length){var i,a=t.x0,s=t.y0,u=t.x1,l=t.y1,c=(a+u)/2,f=(s+l)/2;(i=o[0])&&n.push(new Fd(i,a,s,c,f)),(i=o[1])&&n.push(new Fd(i,c,s,u,f)),(i=o[2])&&n.push(new Fd(i,a,f,c,l)),(i=o[3])&&n.push(new Fd(i,c,f,u,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},Hd.x=function(e){return arguments.length?(this._x=e,this):this._x},Hd.y=function(e){return arguments.length?(this._y=e,this):this._y},Math,Math.sqrt(5);var qd=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},Gd=function(e){return(e=qd(Math.abs(e)))?e[1]:NaN},Kd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xd(e){return new Zd(e)}function Zd(e){if(!(t=Kd.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}Xd.prototype=Zd.prototype,Zd.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Yd,Qd,Jd,em,tm=function(e){e:for(var t,n=e.length,r=1,o=-1;r<n;++r)switch(e[r]){case".":o=t=r;break;case"0":0===o&&(o=r),t=r;break;default:if(o>0){if(!+e[r])break e;o=0}}return o>0?e.slice(0,o)+e.slice(t+1):e},nm=function(e,t){var n=qd(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")},rm={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return nm(100*e,t)},r:nm,s:function(e,t){var n=qd(e,t);if(!n)return e+"";var r=n[0],o=n[1],i=o-(Yd=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+qd(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},om=function(e){return e},im=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];Qd=function(e){var t,n,r=e.grouping&&e.thousands?(t=e.grouping,n=e.thousands,function(e,r){for(var o=e.length,i=[],a=0,s=t[0],u=0;o>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),i.push(e.substring(o-=s,o+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return i.reverse().join(n)}):om,o=e.currency,i=e.decimal,a=e.numerals?function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(e.numerals):om,s=e.percent||"%";function u(e){var t=(e=Xd(e)).fill,n=e.align,u=e.sign,l=e.symbol,c=e.zero,f=e.width,p=e.comma,h=e.precision,d=e.trim,m=e.type;"n"===m?(p=!0,m="g"):rm[m]||(null==h&&(h=12),d=!0,m="g"),(c||"0"===t&&"="===n)&&(c=!0,t="0",n="=");var g="$"===l?o[0]:"#"===l&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y="$"===l?o[1]:/[%p]/.test(m)?s:"",v=rm[m],b=/[defgprs%]/.test(m);function _(e){var o,s,l,_=g,w=y;if("c"===m)w=v(e)+w,e="";else{var x=(e=+e)<0;if(e=v(Math.abs(e),h),d&&(e=tm(e)),x&&0==+e&&(x=!1),_=(x?"("===u?u:"-":"-"===u||"("===u?"":u)+_,w=("s"===m?im[8+Yd/3]:"")+w+(x&&"("===u?")":""),b)for(o=-1,s=e.length;++o<s;)if(48>(l=e.charCodeAt(o))||l>57){w=(46===l?i+e.slice(o+1):e.slice(o))+w,e=e.slice(0,o);break}}p&&!c&&(e=r(e,1/0));var N=_.length+e.length+w.length,E=N<f?new Array(f-N+1).join(t):"";switch(p&&c&&(e=r(E+e,E.length?f-w.length:1/0),E=""),n){case"<":e=_+e+w+E;break;case"=":e=_+E+e+w;break;case"^":e=E.slice(0,N=E.length>>1)+_+e+w+E.slice(N);break;default:e=E+_+e+w}return a(e)}return h=null==h?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),_.toString=function(){return e+""},_}return{format:u,formatPrefix:function(e,t){var n=u(((e=Xd(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Gd(t)/3))),o=Math.pow(10,-r),i=im[8+r/3];return function(e){return n(o*e)+i}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Jd=Qd.format,em=Qd.formatPrefix;var am=function(){return new sm};function sm(){this.reset()}sm.prototype={constructor:sm,reset:function(){this.s=this.t=0},add:function(e){lm(um,e,this.t),lm(this,um.s,this.s),this.s?this.t+=um.t:this.s=um.t},valueOf:function(){return this.s}};var um=new sm;function lm(e,t,n){var r=e.s=t+n,o=r-t;e.t=t-(r-o)+(n-o)}var cm=Math.PI,fm=cm/2,pm=2*cm,hm=cm/180,dm=(Math,Math.atan),mm=Math.atan2,gm=Math.cos,ym=(Math,Math,Math,Math,Math,Math.sin),vm=(Math,Math.sqrt);function bm(e){return e>1?fm:e<-1?-fm:Math.asin(e)}function _m(e,t){return[e>cm?e-pm:e<-cm?e+pm:e,t]}function wm(){}function xm(e){return function(t,n){var r=gm(t),o=gm(n),i=e(r*o);return[i*o*ym(t),i*ym(n)]}}function Nm(e){return function(t,n){var r=vm(t*t+n*n),o=e(r),i=ym(o),a=gm(o);return[mm(t*i,r*a),bm(r&&n*i/r)]}}function Em(e,t){return[e,t]}function Om(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function Cm(e,t){var n,r,o,i,a,s=new km(e),u=+e.value&&(s.value=e.value),l=[s];for(null==t&&(t=Im);n=l.pop();)if(u&&(n.value=+n.data.value),(o=t(n.data))&&(a=o.length))for(n.children=new Array(a),i=a-1;i>=0;--i)l.push(r=n.children[i]=new km(o[i])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Tm)}function Im(e){return e.children}function Sm(e){e.data=e.data.data}function Tm(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function km(e){this.data=e,this.depth=this.height=0,this.parent=null}Math,am(),am(),am(),_m.invert=_m,am(),am(),am(),am(),am(),wm.prototype={constructor:wm,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},gm(30*hm),xm(function(e){return vm(2/(1+e))}).invert=Nm(function(e){return 2*bm(e/2)}),xm(function(e){return(e=(t=e)>1?0:t<-1?cm:Math.acos(t))&&e/ym(e);var t}).invert=Nm(function(e){return e}),Em.invert=Em,vm(3),Nm(dm),Nm(bm),Nm(function(e){return 2*dm(e)}),km.prototype=Cm.prototype={constructor:km,count:function(){return this.eachAfter(Om)},each:function(e){var t,n,r,o,i=this,a=[i];do{for(t=a.reverse(),a=[];i=t.pop();)if(e(i),n=i.children)for(r=0,o=n.length;r<o;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(e){for(var t,n,r,o=this,i=[o],a=[];o=i.pop();)if(a.push(o),t=o.children)for(n=0,r=t.length;n<r;++n)i.push(t[n]);for(;o=a.pop();)e(o);return this},eachBefore:function(e){for(var t,n,r=this,o=[r];r=o.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)o.push(t[n]);return this},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,o=r&&r.length;--o>=0;)n+=r[o].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),o=null;for(e=n.pop(),t=r.pop();e===t;)o=e,e=n.pop(),t=r.pop();return o}(t,e),r=[t];t!==n;)r.push(t=t.parent);for(var o=r.length;e!==n;)r.splice(o,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return Cm(this).eachBefore(Sm)}},Array;var Am=function(e,t,n,r,o){for(var i,a=e.children,s=-1,u=a.length,l=e.value&&(r-t)/e.value;++s<u;)(i=a[s]).y0=n,i.y1=o,i.x0=t,i.x1=t+=i.value*l};Object.create(km.prototype);var Pm=function(e,t,n,r,o){for(var i,a=e.children,s=-1,u=a.length,l=e.value&&(o-n)/e.value;++s<u;)(i=a[s]).x0=t,i.x1=r,i.y0=n,i.y1=n+=i.value*l},Mm=(1+Math.sqrt(5))/2;function Dm(e,t,n,r,o,i){for(var a,s,u,l,c,f,p,h,d,m,g,y=[],v=t.children,b=0,_=0,w=v.length,x=t.value;b<w;){u=o-n,l=i-r;do{c=v[_++].value}while(!c&&_<w);for(f=p=c,g=c*c*(m=Math.max(l/u,u/l)/(x*e)),d=Math.max(p/g,g/f);_<w;++_){if(c+=s=v[_].value,s<f&&(f=s),s>p&&(p=s),g=c*c*m,(h=Math.max(p/g,g/f))>d){c-=s;break}d=h}y.push(a={value:c,dice:u<l,children:v.slice(b,_)}),a.dice?Am(a,n,r,o,x?r+=l*c/x:i):Pm(a,n,r,x?n+=u*c/x:o,i),x-=c,b=_}return y}(function e(t){function n(e,n,r,o,i){Dm(t,e,n,r,o,i)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n})(Mm),function e(t){function n(e,n,r,o,i){if((a=e._squarify)&&a.ratio===t)for(var a,s,u,l,c,f=-1,p=a.length,h=e.value;++f<p;){for(u=(s=a[f]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?Am(s,n,r,o,r+=(i-r)*s.value/h):Pm(s,n,r,n+=(o-n)*s.value/h,i),h-=s.value}else e._squarify=a=Dm(t,e,n,r,o,i),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Mm);var Rm=function(){return Math.random()},jm=(function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return n.source=e,n}(Rm),function e(t){function n(e,n){var r,o;return e=null==e?0:+e,n=null==n?1:+n,function(){var i;if(null!=r)i=r,r=null;else do{r=2*t()-1,i=2*t()-1,o=r*r+i*i}while(!o||o>1);return e+n*i*Math.sqrt(-2*Math.log(o)/o)}}return n.source=e,n}(Rm)),Lm=(function e(t){function n(){var e=jm.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return n.source=e,n}(Rm),function e(t){function n(e){return function(){for(var n=0,r=0;r<e;++r)n+=t();return n}}return n.source=e,n}(Rm)),Vm=(function e(t){function n(e){var n=Lm.source(t)(e);return function(){return n()/e}}return n.source=e,n}(Rm),function e(t){function n(e){return function(){return-Math.log(1-t())/e}}return n.source=e,n}(Rm),Array.prototype),zm=Vm.map,Fm=Vm.slice,Bm=function(e){return function(){return e}},Um=function(e){return+e},Wm=[0,1];function $m(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Bm(t)}function Hm(e,t,n,r){var o=e[0],i=e[1],a=t[0],s=t[1];return i<o?(o=n(i,o),a=r(s,a)):(o=n(o,i),a=r(a,s)),function(e){return a(o(e))}}function qm(e,t,n,r){var o=Math.min(e.length,t.length)-1,i=new Array(o),a=new Array(o),s=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<o;)i[s]=n(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(t){var n=zc(e,t,1,o)-1;return a[n](i[n](t))}}var Gm=function(e,t,n){var r,o=e[0],i=e[e.length-1],a=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/o;return i>=Fc?o*=10:i>=Bc?o*=5:i>=Uc&&(o*=2),t<e?-o:o}(o,i,null==t?10:t);switch((n=Xd(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(o),Math.abs(i));return null!=n.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Gd(t)/3)))-Gd(Math.abs(e)))}(a,s))||(n.precision=r),em(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Gd(t)-Gd(e))+1}(a,Math.max(Math.abs(o),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(e){return Math.max(0,-Gd(Math.abs(e)))}(a))||(n.precision=r-2*("%"===n.type))}return Jd(n)};function Km(){var e=function(e,t){var n,r,o,i=Wm,a=Wm,s=mh,u=!1;function l(){return n=Math.min(i.length,a.length)>2?qm:Hm,r=o=null,c}function c(t){return(r||(r=n(i,a,u?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}(e):e,s)))(+t)}return c.invert=function(e){return(o||(o=n(a,i,$m,u?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}(t):t)))(+e)},c.domain=function(e){return arguments.length?(i=zm.call(e,Um),l()):i.slice()},c.range=function(e){return arguments.length?(a=Fm.call(e),l()):a.slice()},c.rangeRound=function(e){return a=Fm.call(e),s=gh,l()},c.clamp=function(e){return arguments.length?(u=!!e,l()):u},c.interpolate=function(e){return arguments.length?(s=e,l()):s},l()}($m,fh);return e.copy=function(){return t=e,Km().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp());var t},function(e){var t=e.domain;return e.ticks=function(e){var n=t();return Wc(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return Gm(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r,o=t(),i=0,a=o.length-1,s=o[i],u=o[a];return u<s&&(r=s,s=u,u=r,r=i,i=a,a=r),(r=$c(s,u,n))>0?r=$c(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=$c(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(o[i]=Math.floor(s/r)*r,o[a]=Math.ceil(u/r)*r,t(o)):r<0&&(o[i]=Math.ceil(s*r)/r,o[a]=Math.floor(u*r)/r,t(o)),e},e}(e)}var Xm=new Date,Zm=new Date;function Ym(e,t,n,r){function o(t){return e(t=new Date(+t)),t}return o.floor=o,o.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},o.round=function(e){var t=o(e),n=o.ceil(e);return e-t<n-e?t:n},o.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},o.range=function(n,r,i){var a,s=[];if(n=o.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return s;do{s.push(a=new Date(+n)),t(n,i),e(n)}while(a<n&&n<r);return s},o.filter=function(n){return Ym(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})},n&&(o.count=function(t,r){return Xm.setTime(+t),Zm.setTime(+r),e(Xm),e(Zm),Math.floor(n(Xm,Zm))},o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?o.filter(r?function(t){return r(t)%e==0}:function(t){return o.count(0,t)%e==0}):o:null}),o}var Qm=Ym(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Qm.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Ym(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):Qm:null};var Jm=6e4,eg=6048e5,tg=(Ym(function(e){e.setTime(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),Ym(function(e){e.setTime(Math.floor(e/Jm)*Jm)},function(e,t){e.setTime(+e+t*Jm)},function(e,t){return(t-e)/Jm},function(e){return e.getMinutes()}),Ym(function(e){var t=e.getTimezoneOffset()*Jm%36e5;t<0&&(t+=36e5),e.setTime(36e5*Math.floor((+e-t)/36e5)+t)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),Ym(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jm)/864e5},function(e){return e.getDate()-1}));function ng(e){return Ym(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jm)/eg})}var rg=ng(0),og=ng(1),ig=(ng(2),ng(3),ng(4)),ag=(ng(5),ng(6),Ym(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),Ym(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}));ag.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ym(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var sg=ag,ug=(Ym(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Jm)},function(e,t){return(t-e)/Jm},function(e){return e.getUTCMinutes()}),Ym(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),Ym(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}));function lg(e){return Ym(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/eg})}var cg=lg(0),fg=lg(1),pg=(lg(2),lg(3),lg(4)),hg=(lg(5),lg(6),Ym(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),Ym(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}));hg.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ym(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var dg=hg;function mg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function gg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function yg(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}var vg,bg,_g,wg={"-":"",_:" ",0:"0"},xg=/^\s*\d+/,Ng=/^%/,Eg=/[\\^$*+?|[\]().{}]/g;function Og(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(t)+o:o)}function Cg(e){return e.replace(Eg,"\\$&")}function Ig(e){return new RegExp("^(?:"+e.map(Cg).join("|")+")","i")}function Sg(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function Tg(e,t,n){var r=xg.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function kg(e,t,n){var r=xg.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Ag(e,t,n){var r=xg.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Pg(e,t,n){var r=xg.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Mg(e,t,n){var r=xg.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Dg(e,t,n){var r=xg.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Rg(e,t,n){var r=xg.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function jg(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Lg(e,t,n){var r=xg.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Vg(e,t,n){var r=xg.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function zg(e,t,n){var r=xg.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Fg(e,t,n){var r=xg.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Bg(e,t,n){var r=xg.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Ug(e,t,n){var r=xg.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Wg(e,t,n){var r=xg.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function $g(e,t,n){var r=xg.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Hg(e,t,n){var r=Ng.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function qg(e,t,n){var r=xg.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Gg(e,t,n){var r=xg.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function Kg(e,t){return Og(e.getDate(),t,2)}function Xg(e,t){return Og(e.getHours(),t,2)}function Zg(e,t){return Og(e.getHours()%12||12,t,2)}function Yg(e,t){return Og(1+tg.count(sg(e),e),t,3)}function Qg(e,t){return Og(e.getMilliseconds(),t,3)}function Jg(e,t){return Qg(e,t)+"000"}function ey(e,t){return Og(e.getMonth()+1,t,2)}function ty(e,t){return Og(e.getMinutes(),t,2)}function ny(e,t){return Og(e.getSeconds(),t,2)}function ry(e){var t=e.getDay();return 0===t?7:t}function oy(e,t){return Og(rg.count(sg(e),e),t,2)}function iy(e,t){var n=e.getDay();return e=n>=4||0===n?ig(e):ig.ceil(e),Og(ig.count(sg(e),e)+(4===sg(e).getDay()),t,2)}function ay(e){return e.getDay()}function sy(e,t){return Og(og.count(sg(e),e),t,2)}function uy(e,t){return Og(e.getFullYear()%100,t,2)}function ly(e,t){return Og(e.getFullYear()%1e4,t,4)}function cy(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Og(t/60|0,"0",2)+Og(t%60,"0",2)}function fy(e,t){return Og(e.getUTCDate(),t,2)}function py(e,t){return Og(e.getUTCHours(),t,2)}function hy(e,t){return Og(e.getUTCHours()%12||12,t,2)}function dy(e,t){return Og(1+ug.count(dg(e),e),t,3)}function my(e,t){return Og(e.getUTCMilliseconds(),t,3)}function gy(e,t){return my(e,t)+"000"}function yy(e,t){return Og(e.getUTCMonth()+1,t,2)}function vy(e,t){return Og(e.getUTCMinutes(),t,2)}function by(e,t){return Og(e.getUTCSeconds(),t,2)}function _y(e){var t=e.getUTCDay();return 0===t?7:t}function wy(e,t){return Og(cg.count(dg(e),e),t,2)}function xy(e,t){var n=e.getUTCDay();return e=n>=4||0===n?pg(e):pg.ceil(e),Og(pg.count(dg(e),e)+(4===dg(e).getUTCDay()),t,2)}function Ny(e){return e.getUTCDay()}function Ey(e,t){return Og(fg.count(dg(e),e),t,2)}function Oy(e,t){return Og(e.getUTCFullYear()%100,t,2)}function Cy(e,t){return Og(e.getUTCFullYear()%1e4,t,4)}function Iy(){return"+0000"}function Sy(){return"%"}function Ty(e){return+e}function ky(e){return Math.floor(+e/1e3)}!function(e){vg=function(t){var n=e.dateTime,r=e.date,o=e.time,i=e.periods,a=e.days,s=e.shortDays,u=e.months,l=e.shortMonths,c=Ig(i),f=Sg(i),p=Ig(a),h=Sg(a),d=Ig(s),m=Sg(s),g=Ig(u),y=Sg(u),v=Ig(l),b=Sg(l),_={a:function(e){return s[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:Kg,e:Kg,f:Jg,H:Xg,I:Zg,j:Yg,L:Qg,m:ey,M:ty,p:function(e){return i[+(e.getHours()>=12)]},Q:Ty,s:ky,S:ny,u:ry,U:oy,V:iy,w:ay,W:sy,x:null,X:null,y:uy,Y:ly,Z:cy,"%":Sy},w={a:function(e){return s[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:fy,e:fy,f:gy,H:py,I:hy,j:dy,L:my,m:yy,M:vy,p:function(e){return i[+(e.getUTCHours()>=12)]},Q:Ty,s:ky,S:by,u:_y,U:wy,V:xy,w:Ny,W:Ey,x:null,X:null,y:Oy,Y:Cy,Z:Iy,"%":Sy},x={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=m[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=b[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,t,r){return O(e,n,t,r)},d:Vg,e:Vg,f:$g,H:Fg,I:Fg,j:zg,L:Wg,m:Lg,M:Bg,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=f[r[0].toLowerCase()],n+r[0].length):-1},Q:qg,s:Gg,S:Ug,u:kg,U:Ag,V:Pg,w:Tg,W:Mg,x:function(e,t,n){return O(e,r,t,n)},X:function(e,t,n){return O(e,o,t,n)},y:Rg,Y:Dg,Z:jg,"%":Hg};function N(e,t){return function(n){var r,o,i,a=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(a.push(e.slice(u,s)),null!=(o=wg[r=e.charAt(++s)])?r=e.charAt(++s):o="e"===r?" ":"0",(i=t[r])&&(r=i(n,o)),a.push(r),u=s+1);return a.push(e.slice(u,s)),a.join("")}}function E(e,t){return function(n){var r,o,i=yg(1900);if(O(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("p"in i&&(i.H=i.H%12+12*i.p),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(r=(o=(r=gg(yg(i.y))).getUTCDay())>4||0===o?fg.ceil(r):fg(r),r=ug.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(r=(o=(r=t(yg(i.y))).getDay())>4||0===o?og.ceil(r):og(r),r=tg.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),o="Z"in i?gg(yg(i.y)).getUTCDay():t(yg(i.y)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,gg(i)):t(i)}}function O(e,t,n,r){for(var o,i,a=0,s=t.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(o=t.charCodeAt(a++))){if(o=t.charAt(a++),!(i=x[o in wg?t.charAt(a++):o])||(r=i(e,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return _.x=N(r,_),_.X=N(o,_),_.c=N(n,_),w.x=N(r,w),w.X=N(o,w),w.c=N(n,w),{format:function(e){var t=N(e+="",_);return t.toString=function(){return e},t},parse:function(e){var t=E(e+="",mg);return t.toString=function(){return e},t},utcFormat:function(e){var t=N(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=E(e,gg);return t.toString=function(){return e},t}}}(),bg=vg.utcFormat,_g=vg.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Date.prototype.toISOString||bg("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||_g("%Y-%m-%dT%H:%M:%S.%LZ");var Ay=function(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n},Py=(Ay("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ay("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ay("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ay("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ay("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Ay("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Ay("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Ay("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ay("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),function(e){return ch(e[e.length-1])});function My(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}Py(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ay)),Py(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ay)),Py(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ay)),Py(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ay)),Py(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ay)),Py(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ay)),Py(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ay)),Py(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ay)),Py(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ay)),Py(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ay)),Py(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ay)),Py(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ay)),Py(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ay)),Py(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ay)),Py(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ay)),Py(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ay)),Py(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ay)),Py(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ay)),Py(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ay)),Py(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ay)),Py(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ay)),Py(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ay)),Py(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ay)),Py(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ay)),Py(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ay)),Py(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ay)),Py(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ay)),Sh(Yp(300,.5,0),Yp(-240,.5,1)),Sh(Yp(-100,.75,.35),Yp(80,1.5,.8)),Sh(Yp(260,.75,.35),Yp(80,1.5,.8)),Yp(),wp(),Math,Math,My(Ay("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),My(Ay("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),My(Ay("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),My(Ay("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Dy=function(e){return function(){return e}},Ry=(Math,Math,Math,Math,Math,Math,Math,1e-12),jy=Math.PI,Ly=2*jy;function Vy(e){this._context=e}Vy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var zy=function(e){return new Vy(e)};function Fy(e){return e[0]}function By(e){return e[1]}function Uy(e){this._curve=e}Uy.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}},Array,Math.sqrt(1/3),Math.sin(jy/10),Math.sin(7*jy/10);var Wy=(Math.sin(Ly/10),Math.cos(Ly/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){});function $y(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Hy(e){this._context=e}function qy(e,t){this._basis=new Hy(e),this._beta=t}function Gy(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Ky(e,t){this._context=e,this._k=(1-t)/6}function Xy(e,t){this._context=e,this._k=(1-t)/6}function Zy(e,t){this._context=e,this._k=(1-t)/6}function Yy(e,t,n){var r=e._x1,o=e._y1,i=e._x2,a=e._y2;if(e._l01_a>Ry){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,o=(o*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Ry){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*l+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,o,i,a,e._x2,e._y2)}function Qy(e,t){this._context=e,this._alpha=t}function Jy(e,t){this._context=e,this._alpha=t}function ev(e,t){this._context=e,this._alpha=t}function tv(e){return e<0?-1:1}function nv(e,t,n){var r=e._x1-e._x0,o=t-e._x1,i=(e._y1-e._y0)/(r||o<0&&-0),a=(n-e._y1)/(o||r<0&&-0),s=(i*o+a*r)/(r+o);return(tv(i)+tv(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(s))||0}function rv(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ov(e,t,n){var r=e._x0,o=e._x1,i=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,e._y0+a*t,o-a,i-a*n,o,i)}function iv(e){this._context=e}function av(e){this._context=e}function sv(e){return new iv(e)}function uv(){this._=null}function lv(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function cv(e,t){var n=t,r=t.R,o=n.U;o?o.L===n?o.L=r:o.R=r:e._=r,r.U=o,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function fv(e,t){var n=t,r=t.L,o=n.U;o?o.L===n?o.L=r:o.R=r:e._=r,r.U=o,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function pv(e){for(;e.L;)e=e.L;return e}Hy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$y(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$y(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},qy.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,o=e[0],i=t[0],a=e[n]-o,s=t[n]-i,u=-1;++u<=n;)this._basis.point(this._beta*e[u]+(1-this._beta)*(o+(r=u/n)*a),this._beta*t[u]+(1-this._beta)*(i+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}},function e(t){function n(e){return 1===t?new Hy(e):new qy(e,t)}return n.beta=function(t){return e(+t)},n}(.85),Ky.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Gy(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Gy(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new Ky(e,t)}return n.tension=function(t){return e(+t)},n}(0),Xy.prototype={areaStart:Wy,areaEnd:Wy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Gy(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new Xy(e,t)}return n.tension=function(t){return e(+t)},n}(0),Zy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Gy(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new Zy(e,t)}return n.tension=function(t){return e(+t)},n}(0),Qy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Yy(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return t?new Qy(e,t):new Ky(e,0)}return n.alpha=function(t){return e(+t)},n}(.5),Jy.prototype={areaStart:Wy,areaEnd:Wy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Yy(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return t?new Jy(e,t):new Xy(e,0)}return n.alpha=function(t){return e(+t)},n}(.5),ev.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Yy(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return t?new ev(e,t):new Zy(e,0)}return n.alpha=function(t){return e(+t)},n}(.5),iv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ov(this,this._t0,rv(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ov(this,rv(this,n=nv(this,e,t)),n);break;default:ov(this,this._t0,n=nv(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},((function(e){this._context=new av(e)}).prototype=Object.create(iv.prototype)).point=function(e,t){iv.prototype.point.call(this,t,e)},av.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,o,i){this._context.bezierCurveTo(t,e,r,n,i,o)}},uv.prototype={constructor:uv,insert:function(e,t){var n,r,o;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=pv(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(o=r.R)&&o.C?(n.C=o.C=!1,r.C=!0,e=r):(e===n.R&&(cv(this,n),n=(e=n).U),n.C=!1,r.C=!0,fv(this,r)):(o=r.L)&&o.C?(n.C=o.C=!1,r.C=!0,e=r):(e===n.L&&(fv(this,n),n=(e=n).U),n.C=!1,r.C=!0,cv(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,o=e.U,i=e.L,a=e.R;if(n=i?a?pv(a):i:a,o?o.L===e?o.L=n:o.R=n:this._=n,i&&a?(r=n.C,n.C=e.C,n.L=i,i.U=n,n!==a?(o=n.U,n.U=e.U,o.L=e=n.R,n.R=a,a.U=n):(n.U=o,o=n,e=n.R)):(r=e.C,e=n),e&&(e.U=o),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===o.L){if((t=o.R).C&&(t.C=!1,o.C=!0,cv(this,o),t=o.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,fv(this,t),t=o.R),t.C=o.C,o.C=t.R.C=!1,cv(this,o),e=this._;break}}else if((t=o.L).C&&(t.C=!1,o.C=!0,fv(this,o),t=o.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,cv(this,t),t=o.L),t.C=o.C,o.C=t.L.C=!1,fv(this,o),e=this._;break}t.C=!0,e=o,o=o.U}while(!e.C);e&&(e.C=!1)}}};var hv=uv;function dv(e,t,n,r){var o=[null,null],i=jv.push(o)-1;return o.left=e,o.right=t,n&&gv(o,e,t,n),r&&gv(o,t,e,r),Dv[e.index].halfedges.push(i),Dv[t.index].halfedges.push(i),o}function mv(e,t,n){var r=[t,n];return r.left=e,r}function gv(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function yv(e,t,n,r,o){var i,a=e[0],s=e[1],u=a[0],l=a[1],c=0,f=1,p=s[0]-u,h=s[1]-l;if(i=t-u,p||!(i>0)){if(i/=p,p<0){if(i<c)return;i<f&&(f=i)}else if(p>0){if(i>f)return;i>c&&(c=i)}if(i=r-u,p||!(i<0)){if(i/=p,p<0){if(i>f)return;i>c&&(c=i)}else if(p>0){if(i<c)return;i<f&&(f=i)}if(i=n-l,h||!(i>0)){if(i/=h,h<0){if(i<c)return;i<f&&(f=i)}else if(h>0){if(i>f)return;i>c&&(c=i)}if(i=o-l,h||!(i<0)){if(i/=h,h<0){if(i>f)return;i>c&&(c=i)}else if(h>0){if(i<c)return;i<f&&(f=i)}return!(c>0||f<1)||(c>0&&(e[0]=[u+c*p,l+c*h]),f<1&&(e[1]=[u+f*p,l+f*h]),!0)}}}}}function vv(e,t,n,r,o){var i=e[1];if(i)return!0;var a,s,u=e[0],l=e.left,c=e.right,f=l[0],p=l[1],h=c[0],d=c[1],m=(f+h)/2,g=(p+d)/2;if(d===p){if(m<t||m>=r)return;if(f>h){if(u){if(u[1]>=o)return}else u=[m,n];i=[m,o]}else{if(u){if(u[1]<n)return}else u=[m,o];i=[m,n]}}else if(s=g-(a=(f-h)/(d-p))*m,a<-1||a>1)if(f>h){if(u){if(u[1]>=o)return}else u=[(n-s)/a,n];i=[(o-s)/a,o]}else{if(u){if(u[1]<n)return}else u=[(o-s)/a,o];i=[(n-s)/a,n]}else if(p<d){if(u){if(u[0]>=r)return}else u=[t,a*t+s];i=[r,a*r+s]}else{if(u){if(u[0]<t)return}else u=[r,a*r+s];i=[t,a*t+s]}return e[0]=u,e[1]=i,!0}function bv(e,t){var n=e.site,r=t.left,o=t.right;return n===o&&(o=r,r=n),o?Math.atan2(o[1]-r[1],o[0]-r[0]):(n===r?(r=t[1],o=t[0]):(r=t[0],o=t[1]),Math.atan2(r[0]-o[0],o[1]-r[1]))}function _v(e,t){return t[+(t.left!==e.site)]}function wv(e,t){return t[+(t.left===e.site)]}var xv,Nv=[];function Ev(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,o=e.site,i=n.site;if(r!==i){var a=o[0],s=o[1],u=r[0]-a,l=r[1]-s,c=i[0]-a,f=i[1]-s,p=2*(u*f-l*c);if(!(p>=-Vv)){var h=u*u+l*l,d=c*c+f*f,m=(f*h-l*d)/p,g=(u*d-c*h)/p,y=Nv.pop()||new function(){lv(this),this.x=this.y=this.arc=this.site=this.cy=null};y.arc=e,y.site=o,y.x=m+a,y.y=(y.cy=g+s)+Math.sqrt(m*m+g*g),e.circle=y;for(var v=null,b=Rv._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){v=b.P;break}b=b.L}else{if(!b.R){v=b;break}b=b.R}Rv.insert(v,y),v||(xv=y)}}}}function Ov(e){var t=e.circle;t&&(t.P||(xv=t.N),Rv.remove(t),Nv.push(t),lv(t),e.circle=null)}var Cv=[];function Iv(e){var t=Cv.pop()||new function(){lv(this),this.edge=this.site=this.circle=null};return t.site=e,t}function Sv(e){Ov(e),Mv.remove(e),Cv.push(e),lv(e)}function Tv(e){var t=e.circle,n=t.x,r=t.cy,o=[n,r],i=e.P,a=e.N,s=[e];Sv(e);for(var u=i;u.circle&&Math.abs(n-u.circle.x)<Lv&&Math.abs(r-u.circle.cy)<Lv;)i=u.P,s.unshift(u),Sv(u),u=i;s.unshift(u),Ov(u);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<Lv&&Math.abs(r-l.circle.cy)<Lv;)a=l.N,s.push(l),Sv(l),l=a;s.push(l),Ov(l);var c,f=s.length;for(c=1;c<f;++c)gv((l=s[c]).edge,(u=s[c-1]).site,l.site,o);(l=s[f-1]).edge=dv((u=s[0]).site,l.site,null,o),Ev(u),Ev(l)}function kv(e){for(var t,n,r,o,i=e[0],a=e[1],s=Mv._;s;)if((r=Av(s,a)-i)>Lv)s=s.L;else{if(!((o=i-Pv(s,a))>Lv)){r>-Lv?(t=s.P,n=s):o>-Lv?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}!function(e){Dv[e.index]={site:e,halfedges:[]}}(e);var u=Iv(e);if(Mv.insert(t,u),t||n){if(t===n)return Ov(t),n=Iv(t.site),Mv.insert(u,n),u.edge=n.edge=dv(t.site,u.site),Ev(t),void Ev(n);if(n){Ov(t),Ov(n);var l=t.site,c=l[0],f=l[1],p=e[0]-c,h=e[1]-f,d=n.site,m=d[0]-c,g=d[1]-f,y=2*(p*g-h*m),v=p*p+h*h,b=m*m+g*g,_=[(g*v-h*b)/y+c,(p*b-m*v)/y+f];gv(n.edge,l,d,_),u.edge=dv(l,e,null,_),n.edge=dv(e,d,null,_),Ev(t),Ev(n)}else u.edge=dv(t.site,u.site)}}function Av(e,t){var n=e.site,r=n[0],o=n[1],i=o-t;if(!i)return r;var a=e.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],l=u-t;if(!l)return s;var c=s-r,f=1/i-1/l,p=c/l;return f?(-p+Math.sqrt(p*p-2*f*(c*c/(-2*l)-u+l/2+o-i/2)))/f+r:(r+s)/2}function Pv(e,t){var n=e.N;if(n)return Av(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var Mv,Dv,Rv,jv,Lv=1e-6,Vv=1e-12;function zv(e,t){return t[1]-e[1]||t[0]-e[0]}function Fv(e,t){var n,r,o,i=e.sort(zv).pop();for(jv=[],Dv=new Array(e.length),Mv=new hv,Rv=new hv;;)if(o=xv,i&&(!o||i[1]<o.y||i[1]===o.y&&i[0]<o.x))i[0]===n&&i[1]===r||(kv(i),n=i[0],r=i[1]),i=e.pop();else{if(!o)break;Tv(o.arc)}if(function(){for(var e,t,n,r,o=0,i=Dv.length;o<i;++o)if((e=Dv[o])&&(r=(t=e.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=bv(e,jv[t[n]]);for(a.sort(function(e,t){return s[t]-s[e]}),n=0;n<r;++n)s[n]=t[a[n]];for(n=0;n<r;++n)t[n]=s[n]}}(),t){var a=+t[0][0],s=+t[0][1],u=+t[1][0],l=+t[1][1];!function(e,t,n,r){for(var o,i=jv.length;i--;)vv(o=jv[i],e,t,n,r)&&yv(o,e,t,n,r)&&(Math.abs(o[0][0]-o[1][0])>Lv||Math.abs(o[0][1]-o[1][1])>Lv)||delete jv[i]}(a,s,u,l),function(e,t,n,r){var o,i,a,s,u,l,c,f,p,h,d,m,g=Dv.length,y=!0;for(o=0;o<g;++o)if(i=Dv[o]){for(a=i.site,s=(u=i.halfedges).length;s--;)jv[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)d=(h=wv(i,jv[u[s]]))[0],m=h[1],f=(c=_v(i,jv[u[++s%l]]))[0],p=c[1],(Math.abs(d-f)>Lv||Math.abs(m-p)>Lv)&&(u.splice(s,0,jv.push(mv(a,h,Math.abs(d-e)<Lv&&r-m>Lv?[e,Math.abs(f-e)<Lv?p:r]:Math.abs(m-r)<Lv&&n-d>Lv?[Math.abs(p-r)<Lv?f:n,r]:Math.abs(d-n)<Lv&&m-t>Lv?[n,Math.abs(f-n)<Lv?p:t]:Math.abs(m-t)<Lv&&d-e>Lv?[Math.abs(p-t)<Lv?f:e,t]:null))-1),++l);l&&(y=!1)}if(y){var v,b,_,w=1/0;for(o=0,y=null;o<g;++o)(i=Dv[o])&&(_=(v=(a=i.site)[0]-e)*v+(b=a[1]-t)*b)<w&&(w=_,y=i);if(y){var x=[e,t],N=[e,r],E=[n,r],O=[n,t];y.halfedges.push(jv.push(mv(a=y.site,x,N))-1,jv.push(mv(a,N,E))-1,jv.push(mv(a,E,O))-1,jv.push(mv(a,O,x))-1)}}for(o=0;o<g;++o)(i=Dv[o])&&(i.halfedges.length||delete Dv[o])}(a,s,u,l)}this.edges=jv,this.cells=Dv,Mv=Rv=jv=Dv=null}function Bv(e,t,n){this.k=e,this.x=t,this.y=n}Fv.prototype={constructor:Fv,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return _v(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(i=(o=n.halfedges).length)for(var o,i,a,s,u,l,c=n.site,f=-1,p=t[o[i-1]],h=p.left===c?p.right:p.left;++f<i;)a=h,h=(p=t[o[f]]).left===c?p.right:p.left,a&&h&&r<a.index&&r<h.index&&((s=c)[0]-(l=h)[0])*((u=a)[1]-s[1])-(s[0]-u[0])*(l[1]-s[1])<0&&e.push([c.data,a.data,h.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r,o,i=this,a=i._found||0,s=i.cells.length;!(o=i.cells[a]);)if(++a>=s)return null;var u=e-o.site[0],l=t-o.site[1],c=u*u+l*l;do{o=i.cells[r=a],a=null,o.halfedges.forEach(function(n){var r=i.edges[n],s=r.left;if(s!==o.site&&s||(s=r.right)){var u=e-s[0],l=t-s[1],f=u*u+l*l;f<c&&(c=f,a=s.index)}})}while(null!==a);return i._found=r,null==n||c<=n*n?o.site:null}},Bv.prototype={constructor:Bv,scale:function(e){return 1===e?this:new Bv(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Bv(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Bv(1,0,0);var Uv=function(){function e(){this.loaded=!1}return e.prototype.ngOnChanges=function(e){this.drawGraph()},e.prototype.drawGraph=function(){this.loaded=!1;for(var e=window.innerWidth/1.5-50-50,t=window.innerHeight/1.5-50-50,n=Km().domain([this.findValue("min",this.data,"x")-10,this.findValue("max",this.data,"x")]).range([0,e]),r=Km().domain([this.findValue("min",this.data,"y"),Math.ceil(this.findValue("max",this.data,"y"))]).range([t,0]),o=function(){var e=Fy,t=By,n=Dy(!0),r=null,o=zy,i=null;function a(a){var s,u,l,c=a.length,f=!1;for(null==r&&(i=o(l=wd())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(u,s,a),+t(u,s,a));if(l)return i=null,l+""||null}return a.x=function(t){return arguments.length?(e="function"==typeof t?t:Dy(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:Dy(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:Dy(!!e),a):n},a.curve=function(e){return arguments.length?(o=e,null!=r&&(i=o(r)),a):o},a.context=function(e){return arguments.length?(null==e?r=i=null:i=o(r=e),a):r},a}().x(function(e,t){return n(e.x)}).y(function(e){return r(e.y)}).curve(sv),i=[],a=0;a<this.data.length;a++)i.push({x:this.data[a].x,y:this.data[a].y});Jf("#graph-content svg")&&Jf("#graph-content svg").remove();var s=Jf("#graph-content").append("svg").attr("width",e+50+50).attr("height",t+50+50).append("g").attr("transform","translate(50,50)");s.append("g").attr("class","x axis").attr("transform","translate(0,"+t+")").call(tf(Xc,n)),s.append("g").attr("class","y axis").call(tf(Zc,r)),s.append("text").attr("class","x label").attr("text-anchor","end").attr("x",e).attr("y",t-6).text(this.columnTitles[0]),s.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").text(this.columnTitles[1]),s.append("path").data([i]).attr("class","line").attr("d",o),s.selectAll(".dot").data(i).enter().append("circle").attr("class","dot").attr("cx",function(e,t){return n(e.x)}).attr("cy",function(e){return r(e.y)}).attr("r",5),this.loaded=!0},e.prototype.findValue=function(e,t,n){return Math[e].apply(t,t.map(function(e){return e[n]}))},e}(),Wv=Lr({encapsulation:2,styles:[],data:{}});function $v(e){return Ei(0,[(e()(),po(0,0,null,null,0,"div",[["id","graph-content"]],null,null,null,null,null))],null,null)}var Hv=n("Re/O"),qv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function Gv(e,t){function n(){this.constructor=e}qv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Kv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function Xv(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function Zv(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var Yv=1e-7;function Qv(){return Yv}var Jv=0;function eb(){return Jv++}var tb={};function nb(e){return void 0===e&&(e=""),e in tb||(tb[e]=0),tb[e]+=1,e+tb[e].toString()}var rb={float32:{},int32:{}},ob="float32";function ib(e,t){return void 0===t&&(t=ob),null==rb[t][e]&&(rb[t][e]=Object(Hv.ob)(e,t),Object(Hv.Aa)(rb[t][e])),rb[t][e]}var ab=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return Gv(t,e),t}(Error),sb=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return Gv(t,e),t}(Error),ub=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return Gv(t,e),t}(Error),lb=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return Gv(t,e),t}(Error),cb=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return Gv(t,e),t}(Error);function fb(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}return(n=new Array(t)).fill(e),n}function pb(e,t){if(!e)throw new cb(t)}function hb(e,t){for(var n=0,r=0,o=e;r<o.length;r++)o[r]===t&&n++;return n}function db(e){return 1===e.length?e[0]:e}function mb(e){return Array.isArray(e)?e:[e]}function gb(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}!function(e){Gv(function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r},e)}(Error);var yb={};function vb(e){return null===e||void 0===e?null:{className:e.getClassName(),config:e.getConfig()}}function bb(e,t,n,r){if(void 0===t&&(t={}),void 0===n&&(n={}),void 0===r&&(r="object"),"string"==typeof e){var o=void 0;if(e in n)o=n[e];else if(e in yb)o=yb[e];else if(null==(o=t[e]))throw new ub("Unknown "+r+": "+e);return o}var i=e;if(null==i.className||null==i.config)throw new ub(r+": Improper config format: "+JSON.stringify(i)+".\n'className' and 'config' must set.");var a,s,u,l=i.className,c=void 0,f=void 0;if(l in n?(c=(a=n.get(l))[0],f=a[1]):l in yb?(c=(s=yb.className)[0],f=s[1]):l in t&&(c=(u=t[l])[0],f=u[1]),null==c)throw new ub("Unknown "+r+": "+l);if(null!=f){for(var p={},h=0,d=Object.keys(yb);h<d.length;h++)p[_=d[h]]=yb[_];for(var m=0,g=Object.keys(n);m<g.length;m++)p[_=g[m]]=n[_];i.config.customObjects=p;for(var y=Kv({},yb),v=0,b=Object.keys(n);v<b.length;v++){var _=b[v];yb[_]=n[_]}var w=f(c,i.config);return yb=Kv({},y),w}y=Kv({},yb);for(var x=0,N=Object.keys(n);x<N.length;x++)yb[_=N[x]]=n[_];return w=new c(i.config),yb=Kv({},y),w}function _b(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function wb(e){if(null==e)return e;for(var t=[],n=0,r=e;n<r.length;n++){var o=r[n];-1===t.indexOf(o)&&t.push(o)}return t}function xb(e){if(null==e)throw new ub("Invalid value in obj: "+JSON.stringify(e));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Nb(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new ub(n+" is not a valid "+t+".  Valid values are "+e+" or null/undefined.")}function Eb(e,t,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),pb(n>=0),pb(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(function(e){return typeof e===t})}function Ob(e,t){return Object(Hv.Tb)(function(){return Object(Hv.Fb)(Object(Hv.Nb)(Object(Hv.Xa)(e,e),t,!0))})}var Cb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.getConfig=function(){return{}},t}(Hv.rb.Serializable),Ib=function(e){function t(t){var n=e.call(this)||this;return n.defaultMaxValue=2,n.defaultAxis=0,n.maxValue=null!=t.maxValue?t.maxValue:n.defaultMaxValue,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return Gv(t,e),t.prototype.apply=function(e){var t=this;return Object(Hv.Tb)(function(){var n=Ob(e,t.axis),r=Object(Hv.x)(n,0,t.maxValue);return Object(Hv.Wa)(e,Object(Hv.K)(r,Object(Hv.f)(ib(Qv()),n)))})},t.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},t.className="MaxNorm",t}(Cb);Hv.rb.SerializationMap.register(Ib);var Sb=function(e){function t(t){var n=e.call(this)||this;return n.defaultAxis=0,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return Gv(t,e),t.prototype.apply=function(e){var t=this;return Object(Hv.Tb)(function(){return Object(Hv.K)(e,Object(Hv.f)(ib(Qv()),Ob(e,t.axis)))})},t.prototype.getConfig=function(){return{axis:this.axis}},t.className="UnitNorm",t}(Cb);Hv.rb.SerializationMap.register(Sb);var Tb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e){return Object(Hv.kb)(e)},t.className="NonNeg",t}(Cb);Hv.rb.SerializationMap.register(Tb);var kb=function(e){function t(t){var n=e.call(this)||this;return n.defaultMinValue=0,n.defaultMaxValue=1,n.defaultRate=1,n.defaultAxis=0,n.minValue=null!=t.minValue?t.minValue:n.defaultMinValue,n.maxValue=null!=t.maxValue?t.maxValue:n.defaultMaxValue,n.rate=null!=t.rate?t.rate:n.defaultRate,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return Gv(t,e),t.prototype.apply=function(e){var t=this;return Object(Hv.Tb)(function(){var n=Ob(e,t.axis),r=Object(Hv.f)(Object(Hv.Wa)(ib(t.rate),Object(Hv.x)(n,t.minValue,t.maxValue)),Object(Hv.Wa)(ib(1-t.rate),n));return Object(Hv.Wa)(e,Object(Hv.K)(r,Object(Hv.f)(ib(Qv()),n)))})},t.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},t.className="MinMaxNorm",t}(Cb);Hv.rb.SerializationMap.register(kb);var Ab={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Pb(e){return vb(e)}function Mb(e,t){return void 0===t&&(t={}),bb(e,Hv.rb.SerializationMap.getMap().classNameMap,t,"constraint")}function Db(e){return null==e?null:"string"==typeof e?Mb({className:e in Ab?Ab[e]:e,config:{}}):e instanceof Cb?e:Mb(e)}Object.freeze({maxNorm:function(e){return new Ib(e)},unitNorm:function(e){return new Sb(e)},nonNeg:function(){return new Tb},minMaxNorm:function(e){return new kb(e)}});var Rb=new Map,jb=["channelsFirst","channelsLast"];function Lb(e){Nb(jb,"DataFormat",e)}var Vb=["valid","same","causal"];function zb(e){Nb(Vb,"PaddingMode",e)}var Fb=["max","avg"],Bb=[],Ub="/";function Wb(e,t){Bb.push(e);try{var n=t();return Bb.pop(),n}catch(e){throw Bb.pop(),e}}function $b(e){if(!Gb(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Bb.length?"":Bb.join(Ub)+Ub)+e}function Hb(e){if(!Gb(e))throw new Error("Not a valid tensor name: '"+e+"'");Rb.has(e)||Rb.set(e,0);var t=Rb.get(e);if(Rb.set(e,Rb.get(e)+1),t>0){var n=e+"_"+t;return Rb.set(n,1),n}return e}var qb=new RegExp(/^[A-Za-z][A-Za-z0-9\._\/]*$/);function Gb(e){return!!e.match(qb)}function Kb(e){return e===parseInt(e.toString(),10)}function Xb(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,o=t;o<n;++o)r*=e[o];return r}function Zb(e){return e=Array.isArray(e)?new Float32Array(e):e,Object(Hv.Rb)(e)}function Yb(e){return Object(Hv.Ra)(Zb(e)).dataSync()[0]}function Qb(e){return Object(Hv.Na)(Zb(e)).dataSync()[0]}function Jb(e,t){if(t<e)throw new ub("end ("+t+") < begin ("+e+") is forbidden.");for(var n=[],r=e;r<t;++r)n.push(r);return n}function e_(e,t){return e.asType(t)}function t_(e,t){void 0===t&&(t=-1);var n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(n)}function n_(e,t,n){return Object(Hv.Tb)(function(){switch(e.rank){case 1:return Object(Hv.xb)(e,t,n);case 2:return Object(Hv.yb)(e,[t,0],[n,e.shape[1]]);case 3:return Object(Hv.zb)(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Object(Hv.Ab)(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);default:throw new ub("sliceAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}})}function r_(e,t,n){return Object(Hv.Tb)(function(){switch(e.rank){case 1:return Object(Hv.xb)(e,t,n);case 2:return Object(Hv.yb)(e,[0,t],[e.shape[0],n]);case 3:return Object(Hv.zb)(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Object(Hv.Ab)(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new ub("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}})}function o_(e,t,n,r){return Object(Hv.Tb)(function(){switch(e.rank){case 1:return Object(Hv.xb)(e,t,n);case 2:switch(r){case 1:return n_(e,t,n);case 2:return r_(e,t,n);default:throw new ub("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return n_(e,t,n);case 2:return Object(Hv.zb)(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return r_(e,t,n);default:throw new ub("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return n_(e,t,n);case 2:return Object(Hv.Ab)(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Object(Hv.Ab)(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return r_(e,t,n);default:throw new ub("The axis is not within the rank of the tensor "+r)}default:throw new ub("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}})}function i_(e,t){var n;return void 0===t&&(t=-1),t<0&&(t=0!==(n=e[0].rank)?n:0),t===e[0].rank&&(t=-1),Object(Hv.y)(e,t)}function a_(e,t){switch(e.rank){case 1:return Object(Hv.z)([e,t]);case 2:return Object(Hv.A)([e,t],0);case 3:return Object(Hv.B)([e,t],0);case 4:return Object(Hv.C)([e,t],0);default:throw new ub("concatAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}}function s_(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new ub("The length of input n ("+t.length+") does not match the number of dimensions in input x ("+e.rank+")");return Object(Hv.Ub)(e,t)}function u_(e,t,n,r,o){return void 0===t&&(t=0),void 0===n&&(n=1),Object(Hv.gb)(e,t,n,r,o)}function l_(e,t){if(2!==t.rank)throw new lb("dot support for y other than rank 2 is not yet implemented: y shape = "+t.shape);if(2===e.rank)return Object(Hv.Ma)(e,t);if(3===e.rank){var n=e.shape[0],r=e.shape[1];return e=e.reshape([n*r,e.shape[2]]),Object(Hv.Ma)(e,t).reshape([n,r,t.shape[1]])}throw new lb("dot support for x of rank "+e.rank+" is not yet implemented: x shape = "+e.shape)}function c_(e,t,n){return Object(Hv.Tb)(function(){return t=Array.isArray(t)?Object(Hv.Rb)(t,"int32"):t.toInt(),Object(Hv.V)(e,t,n)})}function f_(e){return Object(Hv.Xa)(e,e)}function p_(e,t,n){return Object(Hv.Tb)(function(){if(null==n&&(n="channelsLast"),Lb(n),1!==t.rank&&t.rank!==e.rank)throw new ub("Unexpected bias dimensions: "+t.rank+"; expected it to be 1 or "+e.rank);var r,o=t.shape;if(5===e.rank)"channelsFirst"===n?r=e.add(t.reshape(1===o.length?[1,o[0],1,1,1]:[1,o[3],o[0],o[1],o[2]])):"channelsLast"===n&&(r=e.add(t.reshape(1===o.length?[1,1,1,1,o[0]]:[1].concat(o))));else if(4===e.rank)"channelsFirst"===n?r=e.add(t.reshape(1===o.length?[1,o[0],1,1]:[1,o[2],o[0],o[1]])):"channelsLast"===n&&(r=e.add(t.reshape(1===o.length?[1,1,1,o[0]]:[1].concat(o))));else if(3===e.rank)"channelsFirst"===n?r=e.add(t.reshape(1===o.length?[1,o[0],1]:[1,o[1],o[0]])):"channelsLast"===n&&(r=e.add(t.reshape(1===o.length?[1,1,o[0]]:[1].concat(o))));else{if(!(e.rank<3))throw new ub("Unsupported input rank by biasAdd: "+e.rank);r=e.add(t)}return r})}function h_(e,t,n,r){return Object(Hv.Tb)(function(){if(null!=n&&!Hv.ac.arraysEqual(e.shape,n))throw new lb("Non-default noise shape is not implemented yet: "+JSON.stringify(n));if(null!=r)throw new lb("seed is not implemented for dropout yet.");var o=Object(Hv.Kb)(Object(Hv.f)(Object(Hv.Ya)(t),Object(Hv.hb)(e.shape,0,1,"float32")));return o=Object(Hv.Wa)(Object(Hv.K)(ib(1),Object(Hv.Mb)(ib(1),t)),o),Object(Hv.Wa)(e,o)})}function d_(e,t,n){return void 0===n&&(n=!1),n?e():t()}var m_=["fanIn","fanOut","fanAvg"],g_=["normal","uniform"],y_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.fromConfigUsesCustomObjects=function(){return!1},t.prototype.getConfig=function(){return{}},t}(Hv.rb.Serializable),v_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e,t){return Object(Hv.fc)(e,t)},t.className="Zeros",t}(y_);Hv.rb.SerializationMap.register(v_);var b_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e,t){return Object(Hv.cb)(e,t)},t.className="Ones",t}(y_);Hv.rb.SerializationMap.register(b_);var __=function(e){function t(t){var n=e.call(this)||this;if("object"!=typeof t)throw new ub("Expected argument of type ConstantConfig but got "+t);if(void 0===t.value)throw new ub("config must have value set but got "+t);return n.value=t.value,n}return Gv(t,e),t.prototype.apply=function(e,t){var n=this;return Object(Hv.Tb)(function(){return Object(Hv.Wa)(Object(Hv.ob)(n.value),Object(Hv.cb)(e,t))})},t.prototype.getConfig=function(){return{value:this.value}},t.className="Constant",t}(y_);Hv.rb.SerializationMap.register(__);var w_=function(e){function t(t){var n=e.call(this)||this;return n.DEFAULT_MINVAL=-.05,n.DEFAULT_MAXVAL=.05,n.minval=t.minval||n.DEFAULT_MINVAL,n.maxval=t.maxval||n.DEFAULT_MAXVAL,n.seed=t.seed,n}return Gv(t,e),t.prototype.apply=function(e,t){return Object(Hv.hb)(e,this.minval,this.maxval,t)},t.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},t.className="RandomUniform",t}(y_);Hv.rb.SerializationMap.register(w_);var x_=function(e){function t(t){var n=e.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=t.mean||n.DEFAULT_MEAN,n.stddev=t.stddev||n.DEFAULT_STDDEV,n.seed=t.seed,n}return Gv(t,e),t.prototype.apply=function(e,t){if("bool"===t)throw new lb("randomNormal does not support dType bool.");return u_(e,this.mean,this.stddev,t,this.seed)},t.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t.className="RandomNormal",t}(y_);Hv.rb.SerializationMap.register(x_);var N_=function(e){function t(t){var n=e.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=t.mean||n.DEFAULT_MEAN,n.stddev=t.stddev||n.DEFAULT_STDDEV,n.seed=t.seed,n}return Gv(t,e),t.prototype.apply=function(e,t){if("bool"===t)throw new lb("truncatedNormal does not support dType bool.");return Object(Hv.Yb)(e,this.mean,this.stddev,t,this.seed)},t.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t.className="TruncatedNormal",t}(y_);Hv.rb.SerializationMap.register(N_);var E_=function(e){function t(t){var n=e.call(this)||this;return n.gain=null!=t.gain?Object(Hv.ob)(t.gain):ib(1),n}return Gv(t,e),t.prototype.apply=function(e,t){var n=this;return Object(Hv.Tb)(function(){if(2!==e.length||e[0]!==e[1])throw new ub("Identity matrix initializer can only be used for 2D square matrices.");return Object(Hv.Wa)(n.gain,Object(Hv.R)(e[0]))})},t.prototype.getConfig=function(){return{gain:this.gain.get()}},t.className="Identity",t}(y_);Hv.rb.SerializationMap.register(E_);var O_=function(e){function t(t){var n=e.call(this)||this;if(t.scale<0)throw new ub("scale must be a positive float. Got: "+t.scale);return n.scale=null==t.scale?1:t.scale,n.mode=t.mode,Nb(m_,"FanMode",n.mode),n.distribution=t.distribution,Nb(g_,"Distribution",n.distribution),n.seed=t.seed,n}return Gv(t,e),t.prototype.apply=function(e,t){var n=function(e,t){var n,r;if(void 0===t&&(t="channelsLast"),Lb(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length))if("channelsFirst"===t){var o=Xb(e,2);n=e[1]*o,r=e[0]*o}else"channelsLast"===t&&(o=Xb(e,0,e.length-2),n=e[e.length-2]*o,r=e[e.length-1]*o);else{var i=Xb(e);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}(e),r=n[0],o=n[1],i=this.scale;if(i/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,o):Math.max(1,(r+o)/2),"normal"===this.distribution){var a=Math.sqrt(i);if("bool"===t)throw new lb(this.getClassName()+" does not support dType bool.");return Object(Hv.Yb)(e,0,a,t,this.seed)}var s=Math.sqrt(3*i);return Object(Hv.hb)(e,-s,s,t)},t.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},t.className="VarianceScaling",t}(y_);Hv.rb.SerializationMap.register(O_);var C_=function(e){function t(t){return e.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==t?null:t.seed})||this}return Gv(t,e),t.prototype.getClassName=function(){return O_.className},t}(O_),I_=function(e){function t(t){return e.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==t?null:t.seed})||this}return Gv(t,e),t.prototype.getClassName=function(){return O_.className},t}(O_),S_=function(e){function t(t){return e.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})||this}return Gv(t,e),t.prototype.getClassName=function(){return O_.className},t}(O_),T_=function(e){function t(t){return e.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})||this}return Gv(t,e),t.prototype.getClassName=function(){return O_.className},t}(O_),k_=function(e){function t(t){var n=e.call(this)||this;if(n.DEFAULT_GAIN=1,n.gain=null==t.gain?n.DEFAULT_GAIN:t.gain,n.seed=t.seed,null!=n.seed)throw new lb("Random seed is not implemented for Orthogonal Initializer yet.");return n}return Gv(t,e),t.prototype.apply=function(e,t){var n=this;return Object(Hv.Tb)(function(){if(2!==e.length)throw new lb("The Orthogonal Initializer does not support non-2D shapes yet.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+e[0]*e[1]+") elements: Slowness may result.");var t=u_(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=Hv.Ea.gramSchmidt(t);return e[0]>e[1]&&(r=r.transpose()),Object(Hv.Wa)(ib(n.gain),r)})},t.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},t.className="Orthogonal",t}(y_);Hv.rb.SerializationMap.register(k_);var A_={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",identity:"Identity",leCunNormal:"LeCunNormal",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function P_(e,t){return void 0===t&&(t={}),bb(e,Hv.rb.SerializationMap.getMap().classNameMap,t,"initializer")}function M_(e){return vb(e)}function D_(e){if("string"==typeof e){var t=e in A_?A_[e]:e;return"GlorotUniform"===t?new C_:"GlorotNormal"===t?new I_:"HeNormal"===t?new S_:"LeCunNormal"===t?new T_:P_({className:t,config:{}})}return e instanceof y_?e:P_(e)}function R_(e){return Array.isArray(e)&&Array.isArray(e[0])}function j_(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function L_(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new ub("Expected Tensor length to be 1; got "+e.length);t=e[0]}else t=e;return t}function V_(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new ub("Expected exactly 1 Shape; got "+e.length)}return e}function z_(e){for(var t=0,n=0,r=e;n<r.length;n++){var o=r[n];t+=0===o.shape.length?1:o.shape.reduce(function(e,t){return e*t})}return t}Object.freeze({zeros:function(){return new v_},ones:function(){return new b_},constant:function(e){return new __(e)},randomUniform:function(e){return new w_(e)},randomNormal:function(e){return new x_(e)},truncatedNormal:function(e){return new N_(e)},identity:function(e){return new E_(e)},varianceScaling:function(e){return new O_(e)},glorotUniform:function(e){return new C_(e)},glorotNormal:function(e){return new I_(e)},heNormal:function(e){return new S_(e)},leCunNormal:function(e){return new T_(e)},orthogonal:function(e){return new k_(e)}});var F_="Variable",B_=function(){function e(e,t,n,r,o){void 0===t&&(t="float32"),void 0===n&&(n=F_),void 0===r&&(r=!0),void 0===o&&(o=null),this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=eb(),this.originalName=$b(n=null==n?F_:n),this.name=Hb(this.originalName),this.trainable=r,this.constraint=o,this.val=Object(Hv.bc)(e,this.trainable,this.name,this.dtype)}return e.prototype.read=function(){return this.assertNotDisposed(),this.val},e.prototype.write=function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this},e.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},e.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},e}();function U_(e){return e.map(function(e){return e.read()})}function W_(e){e.map(function(e){e[0].write(e[1])})}var $_=function(e){this.dtype=e.dtype,this.shape=e.shape,this.ndim=null!=e.shape?e.shape.length:e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}},H_=function(e,t,n,r,o,i,a){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=o,this.outputTensorIndex=a,this.id=eb(),null!=i&&(this.originalName=$b(i),this.name=Hb(this.originalName)),this.rank=t.length},q_=0,G_=function(){function e(e,t){this.callArgs=t,this.id=q_++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(var n=0,r=e.inboundLayers;n<r.length;n++){var o=r[n];null!=o&&o.outboundNodes.push(this)}e.outboundLayer.inboundNodes.push(this)}return e.prototype.getConfig=function(){for(var e=[],t=0,n=this.inboundLayers;t<n.length;t++){var r=n[t];e.push(null!=r?r.name:null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},e}(),K_=0,X_=function(e){function t(t){var n=e.call(this)||this;n._callHook=null,n._addedWeightNames=[],n._stateful=!1,n.id=K_++,n.activityRegularizer=null,n.inputSpec=null,n.supportsMasking=!1,n._trainableWeights=[],n._nonTrainableWeights=[],n._losses=[],n._updates=[],n._built=!1,n.inboundNodes=[],n.outboundNodes=[];var r=t.name;if(!r){var o=n.getClassName();r=gb(o)+"_"+nb(o)}if(n.name=r,n.trainable=null==t.trainable||t.trainable,n.updatable=null==t.updatable||t.updatable,null!=t.inputShape||null!=t.batchInputShape){var i=void 0;if(null!=t.batchInputShape)i=t.batchInputShape;else if(null!=t.inputShape){var a=null;null!=t.batchSize&&(a=t.batchSize),i=[a].concat(t.inputShape)}n.batchInputShape=i;var s=t.dtype;null==s&&(s=t.inputDType),null==s&&(s="float32"),n.dtype=s}return n.initialWeights=null!=t.weights?t.weights:null,n._refCount=null,n}return Gv(t,e),t.nodeKey=function(e,t){return e.name+"_ib-"+t.toString()},t.prototype.getNodeAtIndex=function(e,t){if(0===this.inboundNodes.length)throw new sb("The layer has never been called and thus has no defined "+t+".");if(this.inboundNodes.length<=e)throw new ub("Asked to get "+t+" at node "+e+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[e]},t.prototype.getInputAt=function(e){return db(this.getNodeAtIndex(e,"input").inputTensors)},t.prototype.getOutputAt=function(e){return db(this.getNodeAtIndex(e,"output").outputTensors)},Object.defineProperty(t.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new ab("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new ab("Layer "+this.name+" is not connected, no input to return.");return db(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"output",{get:function(){if(0===this.inboundNodes.length)throw new ab("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new ab("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return db(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),t.prototype.calculateLosses=function(){return this.losses.map(function(e){return e()})},Object.defineProperty(t.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"built",{get:function(){return this._built},set:function(e){this._built=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.trainable?this._trainableWeights:[]},set:function(e){this._trainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._nonTrainableWeights:this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),t.prototype.assertInputCompatibility=function(e){if(e=mb(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=mb(this.inputSpec);if(e.length!==t.length)throw new ub("Layer "+this.name+" expects "+t.length+" inputs, but it received "+e.length+" input tensors. Input received: "+e);for(var n=0;n<e.length;n++){var r=e[n],o=t[n];if(null!=o){var i=r.rank;if(null!=o.ndim&&i!==o.ndim)throw new ub("Input "+n+" is incompatible with layer "+this.name+": expected ndim="+o.ndim+", found ndim="+i);if(null!=o.maxNDim&&i>o.maxNDim)throw new ub("Input "+n+" is incompatible with layer "+this.name+": expected max_ndim="+o.maxNDim+", found ndim="+i);if(null!=o.minNDim&&i<o.minNDim)throw new ub("Input "+n+" is incompatible with layer "+this.name+": expected min_ndim="+o.minNDim+", found ndim="+i+".");if(null!=o.dtype&&r.dtype!==o.dtype)throw new ub("Input "+n+" is incompatible with layer "+this.name+" : expected dtype="+o.dtype+", found dtype="+r.dtype+".");if(o.axes){var a=r.shape;for(var s in o.axes){var u=Number(s),l=o.axes[s];if(null!=l&&-1===[l,null].indexOf(u>=0?a[u]:a[a.length+u]))throw new ub("Input "+n+" is incompatible with layer "+this.name+": expected axis "+u+" of input shape to have value "+l+" but got shape "+a+".")}}if(null!=o.shape)for(var c=0;c<o.shape.length;++c){var f=o.shape[c],p=r.shape[c];if(null!=f&&null!=p&&f!==p)throw new ub("Input "+n+" is incompatible with layer "+this.name+": expected shape="+o.shape+", found shape=${xShape}.")}}}}},t.prototype.call=function(e,t){return e},t.prototype.invokeCallHook=function(e,t){null!=this._callHook&&this._callHook(e,t)},t.prototype.setCallHook=function(e){this._callHook=e},t.prototype.clearCallHook=function(){this._callHook=null},t.prototype.apply=function(e,t){var n=this;t=t||{},this.assertNotDisposed();for(var r=mb(e),o=!0,i=0,a=r;i<a.length;i++)if(!(a[i]instanceof H_)){o=!1;break}for(var s=!0,u=0,l=r;u<l.length;u++)if(l[u]instanceof H_){s=!1;break}if(o===s)throw new ub("Arguments to apply() must be all SymbolicTensors or all Tensors");return Wb(this.name,function(){if(!n.built){n.assertInputCompatibility(e);for(var o=[],i=0,a=mb(e);i<a.length;i++)o.push(a[i].shape);n.build(db(o)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&s&&(n._refCount=1)}if(n.assertInputCompatibility(e),s){for(var u=[],l=0,c=mb(d=n.call(e,t));l<c.length;l++){var f=c[l];-1!==r.indexOf(f)&&(f=f.clone()),u.push(f)}if(d=db(u),null!=n.activityRegularizer)throw new lb("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return d}var p=function(e){for(var t=[],n=0,r=e=mb(e);n<r.length;n++)t.push(r[n].shape);return db(t)}(e),h=n.computeOutputShape(p),d=void 0,m="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?p[0]:p),d=null!=h&&h.length>0&&Array.isArray(h[0])?h.map(function(r,o){return new H_(m,r,n,mb(e),t,n.name,o)}):new H_(m,h,n,mb(e),t,n.name),n.addInboundNode(e,d,null,null,p,h,t),n._refCount++,null!=n.activityRegularizer)throw new lb("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return d})},t.prototype.warnOnIncompatibleInputShape=function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(e)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var t=!1;this.batchInputShape.forEach(function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn("The shape of the input tensor ("+JSON.stringify(e)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(t.prototype,"outputShape",{get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new ab("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var e=[],t=0,n=this.inboundNodes;t<n.length;t++){var r=JSON.stringify(n[t].outputShapes);-1===e.indexOf(r)&&e.push(r)}if(1===e.length){var o=this.inboundNodes[0].outputShapes;return Array.isArray(o)&&Array.isArray(o[0])&&1===o.length?o[0]:o}throw new ab("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),t.prototype.countParams=function(){if(!this.built)throw new sb("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return z_(this.weights)},t.prototype.build=function(e){this.built=!0},t.prototype.getWeights=function(e){return void 0===e&&(e=!1),U_(e?this.trainableWeights:this.weights)},t.prototype.setWeights=function(e){var t=this;Object(Hv.Tb)(function(){var n=t.weights;if(n.length!==e.length)throw new ub('You called setWeights(weights) on layer "'+t.name+'" with a weight list of length '+e.length+", but the layer was expecting "+n.length+" weights. Provided weights: "+e+"...");if(0!==n.length){for(var r=[],o=U_(n),i=0;i<o.length;++i){var a=o[i],s=n[i],u=e[i];if(!Hv.ac.arraysEqual(a.shape,u.shape))throw new ub("Layer weight shape "+a.shape+" not compatible with provided weight shape "+u.shape);r.push([s,u])}W_(r)}})},t.prototype.addWeight=function(e,t,n,r,o,i,a){if(-1!==this._addedWeightNames.indexOf(e))throw new ub("Duplicate weight name "+e+" for layer "+this.name);this._addedWeightNames.push(e),null==n&&(n="float32");var s=new B_(r.apply(t,n),n,e,i,a);return null!=o&&this.addLoss(function(){return o.apply(s.read())}),null==i&&(i=!0),i?this._trainableWeights.push(s):this._nonTrainableWeights.push(s),s},t.prototype.addLoss=function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=mb(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,e))},t.prototype.computeOutputShape=function(e){return e},t.prototype.computeMask=function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer "+this.name+" does not support masking,but was passed an inputMask.");t.forEach(function(e){if(null!=e)throw new TypeError("Layer "+n.name+" does not support masking,but was passed an inputMask.")})}return null}return t},t.prototype.addInboundNode=function(e,t,n,r,o,i,a){void 0===a&&(a=null);var s=mb(e);t=mb(t),n=mb(n),r=mb(r),o=j_(o),i=j_(i);for(var u=[],l=[],c=[],f=0,p=s;f<p.length;f++){var h=p[f];u.push(h.sourceLayer),l.push(h.nodeIndex),c.push(h.tensorIndex)}new G_({outboundLayer:this,inboundLayers:u,nodeIndices:l,tensorIndices:c,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:o,outputShapes:i},a);for(var d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d},t.prototype.getConfig=function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e},t.prototype.disposeWeights=function(){return this.weights.forEach(function(e){return e.dispose()}),this.weights.length},t.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Layer '"+this.name+"' is already disposed.")},t.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}},t}(Hv.rb.Serializable),Z_=function(e){function t(t){var n=e.call(this,{dtype:t.dtype,name:null!=t.name?t.name:nb("input").toString()})||this;if(null==t.batchSize&&(t.batchSize=null),null==t.sparse&&(t.sparse=!1),n.trainable=!1,n.built=!0,n.sparse=t.sparse,null!=t.inputShape&&null!=t.batchInputShape)throw new ub("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var r=t.batchInputShape;if(null==r){if(null==t.inputShape)throw new ub("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[t.batchSize].concat(t.inputShape)}else if(null!=t.batchSize)throw new ub("Cannot specify batchSize if batchInputShape isspecified when creating an InputLayer.");var o=t.dtype||"float32";n.batchInputShape=r,n.dtype=o,n.inputSpec=[{shape:r}];var i=new H_(n.dtype,n.batchInputShape,n,[],{},n.name);return i.nodeIndex=0,i.tensorIndex=0,new G_({outboundLayer:n,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]}),n}return Gv(t,e),t.prototype.apply=function(e,t){throw new ub("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},t.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},t.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},t.className="InputLayer",t}(X_);function Y_(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new ub("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new Z_({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}function Q_(e){return Xv(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u;return Zv(this,function(l){switch(l.label){case 0:if(null==e)return[2];for(o in t=[],n=[],r=[],e)"number"!=typeof(i=e[o])&&(t.push((a=i).data()),n.push(o),r.push(a));return[4,Promise.all(t)];case 1:for(s=l.sent(),u=0;u<s.length;++u)e[n[u]]=s[u][0];return Object(Hv.J)(r),[2]}})})}Hv.rb.SerializationMap.register(Z_);var J_=function(){function e(){this.validationData=null}return e.prototype.setParams=function(e){this.params=e},e.prototype.onEpochBegin=function(e,t){return Xv(this,void 0,void 0,function(){return Zv(this,function(e){return[2]})})},e.prototype.onEpochEnd=function(e,t){return Xv(this,void 0,void 0,function(){return Zv(this,function(e){return[2]})})},e.prototype.onBatchBegin=function(e,t){return Xv(this,void 0,void 0,function(){return Zv(this,function(e){return[2]})})},e.prototype.onBatchEnd=function(e,t){return Xv(this,void 0,void 0,function(){return Zv(this,function(e){return[2]})})},e.prototype.onTrainBegin=function(e){return Xv(this,void 0,void 0,function(){return Zv(this,function(e){return[2]})})},e.prototype.onTrainEnd=function(e){return Xv(this,void 0,void 0,function(){return Zv(this,function(e){return[2]})})},e.prototype.setModel=function(e){},e}(),ew=function(){function e(e,t){void 0===t&&(t=10),null==e&&(e=[]),this.callbacks=e,this.queueLength=t}return e.prototype.append=function(e){this.callbacks.push(e)},e.prototype.setParams=function(e){for(var t=0,n=this.callbacks;t<n.length;t++)n[t].setParams(e)},e.prototype.setModel=function(e){for(var t=0,n=this.callbacks;t<n.length;t++)n[t].setModel(e)},e.prototype.onEpochBegin=function(e,t){return Xv(this,void 0,void 0,function(){var n,r;return Zv(this,function(o){switch(o.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?[4,r[n].onEpochBegin(e,t)]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.onEpochEnd=function(e,t){return Xv(this,void 0,void 0,function(){var n,r;return Zv(this,function(o){switch(o.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?[4,r[n].onEpochEnd(e,t)]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.onBatchBegin=function(e,t){return Xv(this,void 0,void 0,function(){var n,r;return Zv(this,function(o){switch(o.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?[4,r[n].onBatchBegin(e,t)]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.onBatchEnd=function(e,t){return Xv(this,void 0,void 0,function(){var n,r;return Zv(this,function(o){switch(o.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?[4,r[n].onBatchEnd(e,t)]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.onTrainBegin=function(e){return Xv(this,void 0,void 0,function(){var t,n;return Zv(this,function(r){switch(r.label){case 0:null==e&&(e={}),t=0,n=this.callbacks,r.label=1;case 1:return t<n.length?[4,n[t].onTrainBegin(e)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},e.prototype.onTrainEnd=function(e){return Xv(this,void 0,void 0,function(){var t,n;return Zv(this,function(r){switch(r.label){case 0:null==e&&(e={}),t=0,n=this.callbacks,r.label=1;case 1:return t<n.length?[4,n[t].onTrainEnd(e)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},e}(),tw=function(){function e(e){this.yieldEvery=e,this.batchCount=0,this.batchDurationsMillis=[],this.autoYieldEveryBatches=null,this.batchStartMillis=Hv.ac.now()}return e.prototype.resolveOneTensorInLogs=function(e){return Xv(this,void 0,void 0,function(){var t,n,r,o;return Zv(this,function(i){switch(i.label){case 0:for(n in t=[],e)t.push(n);r=0,i.label=1;case 1:return r<t.length?"number"==typeof(o=e[t[r]])?[3,3]:[4,o.data()]:[3,4];case 2:return i.sent(),[3,4];case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.maybeYieldOnBatch=function(t){return Xv(this,void 0,void 0,function(){var n,r;return Zv(this,function(o){switch(o.label){case 0:return"auto"!==this.yieldEvery?[3,7]:(this.batchCount++,null!=this.autoYieldEveryBatches?[3,3]:[4,this.resolveOneTensorInLogs(t)]);case 1:return o.sent(),n=Hv.ac.now(),[4,Object(Hv.Za)()];case 2:return o.sent(),this.batchCount>e.SKIP_FIRST_BATCHES&&(this.batchDurationsMillis.push(n-this.batchStartMillis),this.batchDurationsMillis.length>=e.DECISION_BATCH_COUNT&&(r=this.batchDurationsMillis.reduce(function(e,t){return e+t})/this.batchDurationsMillis.length,this.autoYieldEveryBatches=Math.round(e.THRESHOLD_MILLIS/r),this.autoYieldEveryBatches<1&&(this.autoYieldEveryBatches=1))),this.batchStartMillis=Hv.ac.now(),this.lastYieldBatchCount=this.batchCount,[3,6];case 3:return this.batchCount-this.lastYieldBatchCount>=this.autoYieldEveryBatches?[4,Object(Hv.Za)()]:[3,6];case 4:return o.sent(),[4,this.resolveOneTensorInLogs(t)];case 5:o.sent(),this.lastYieldBatchCount=this.batchCount,o.label=6;case 6:return[3,9];case 7:return"batch"!==this.yieldEvery?[3,9]:[4,Object(Hv.Za)()];case 8:o.sent(),o.label=9;case 9:return[2]}})})},e.prototype.maybeYieldOnEpoch=function(){return Xv(this,void 0,void 0,function(){return Zv(this,function(e){switch(e.label){case 0:return"epoch"!==this.yieldEvery?[3,2]:[4,Object(Hv.Za)()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.SKIP_FIRST_BATCHES=1,e.DECISION_BATCH_COUNT=2,e.THRESHOLD_MILLIS=16,e}(),nw=function(e){function t(t){var n=e.call(this)||this;return n.yieldEvery=t||"auto",n}return Gv(t,e),t.prototype.onTrainBegin=function(e){return Xv(this,void 0,void 0,function(){return Zv(this,function(e){return this.autoYielder=new tw(this.yieldEvery),[2]})})},t.prototype.onEpochBegin=function(e){return Xv(this,void 0,void 0,function(){return Zv(this,function(e){return this.seen=0,this.totals={},[2]})})},t.prototype.onBatchEnd=function(e,t){return Xv(this,void 0,void 0,function(){var e,n,r,o,i=this;return Zv(this,function(a){switch(a.label){case 0:return[4,this.autoYielder.maybeYieldOnBatch(t)];case 1:for(o in a.sent(),null==t&&(t={}),this.seen+=e=null==t.size?0:t.size,n=function(n){var o=t[n];if("number"==typeof o)r.totals.hasOwnProperty(n)||(r.totals[n]=0),r.totals[n]=r.totals[n]+o*e;else{var a=void 0;n in r.totals?a=r.totals[n]:r.totals[n]=ib(0),r.totals[n]=Object(Hv.Tb)(function(){return Object(Hv.f)(i.totals[n],Object(Hv.Wa)(o,ib(e)))}),null!=a&&a.dispose()}},r=this,t)n(o);return[2]}})})},t.prototype.onEpochEnd=function(e,t){return Xv(this,void 0,void 0,function(){var e,n,r,o,i=this;return Zv(this,function(a){switch(a.label){case 0:return[4,this.autoYielder.maybeYieldOnEpoch()];case 1:if(a.sent(),null!=t)for(e=function(e){if(null==n.totals[e])return"continue";"number"==typeof n.totals[e]?t[e]=n.totals[e]/n.seen:Object(Hv.Tb)(function(){t[e]=Object(Hv.Wa)(Object(Hv.K)(ib(1),ib(i.seen)),i.totals[e]),i.totals[e].dispose(),Object(Hv.Aa)(t[e])})},n=this,r=0,o=this.params.metrics;r<o.length;r++)e(o[r]);return[2]}})})},t}(J_),rw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.onTrainBegin=function(e){return Xv(this,void 0,void 0,function(){return Zv(this,function(e){return this.epoch=[],this.history={},[2]})})},t.prototype.onEpochEnd=function(e,t){return Xv(this,void 0,void 0,function(){var n;return Zv(this,function(r){for(n in null==t&&(t={}),this.epoch.push(e),t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n]);return[2]})})},t.prototype.syncData=function(){return Xv(this,void 0,void 0,function(){var e,t,n,r,o,i,a,s;return Zv(this,function(u){switch(u.label){case 0:for(r in e=[],t=[],n=[],this.history)for(o=this.history[r],i=0;i<o.length;++i)"number"!=typeof o[i]&&(e.push(o[i].data()),t.push(r),n.push(i));return[4,Promise.all(e)];case 1:for(a=u.sent(),s=0;s<a.length;++s)this.history[t[s]][n[s]].dispose(),this.history[t[s]][n[s]]=a[s][0];return[2]}})})},t}(J_),ow=function(e){function t(t){var n=e.call(this)||this;return n.trainBegin=t.onTrainBegin,n.trainEnd=t.onTrainEnd,n.epochBegin=t.onEpochBegin,n.epochEnd=t.onEpochEnd,n.batchBegin=t.onBatchBegin,n.batchEnd=t.onBatchEnd,n}return Gv(t,e),t.prototype.onEpochBegin=function(e,t){return Xv(this,void 0,void 0,function(){return Zv(this,function(n){switch(n.label){case 0:return null==this.epochBegin?[3,3]:[4,Q_(t)];case 1:return n.sent(),[4,this.epochBegin(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.onEpochEnd=function(e,t){return Xv(this,void 0,void 0,function(){return Zv(this,function(n){switch(n.label){case 0:return null==this.epochEnd?[3,3]:[4,Q_(t)];case 1:return n.sent(),[4,this.epochEnd(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.onBatchBegin=function(e,t){return Xv(this,void 0,void 0,function(){return Zv(this,function(n){switch(n.label){case 0:return null==this.batchBegin?[3,3]:[4,Q_(t)];case 1:return n.sent(),[4,this.batchBegin(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.onBatchEnd=function(e,t){return Xv(this,void 0,void 0,function(){return Zv(this,function(n){switch(n.label){case 0:return null==this.batchEnd?[3,3]:[4,Q_(t)];case 1:return n.sent(),[4,this.batchEnd(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.onTrainBegin=function(e){return Xv(this,void 0,void 0,function(){return Zv(this,function(t){switch(t.label){case 0:return null==this.trainBegin?[3,3]:[4,Q_(e)];case 1:return t.sent(),[4,this.trainBegin(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.onTrainEnd=function(e){return Xv(this,void 0,void 0,function(){return Zv(this,function(t){switch(t.label){case 0:return null==this.trainEnd?[3,3]:[4,Q_(e)];case 1:return t.sent(),[4,this.trainEnd(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t}(J_);function iw(e,t){return Object(Hv.Tb)(function(){var n=Object(Hv.Nb)(f_(e),t,!0),r=Object(Hv.Wa)(Object(Hv.ob)(Qv()),Object(Hv.db)(e)),o=Object(Hv.Fb)(Object(Hv.Pa)(n,r));return Object(Hv.K)(e,o)})}function aw(e,t){return Object(Hv.Tb)(function(){return Object(Hv.Qa)(f_(Object(Hv.Mb)(t,e)),-1)})}function sw(e,t){return Object(Hv.Tb)(function(){return Object(Hv.Qa)(Object(Hv.c)(Object(Hv.Mb)(t,e)),-1)})}function uw(e,t){return Object(Hv.Tb)(function(){var n=Object(Hv.Mb)(e,t),r=Object(Hv.x)(Object(Hv.c)(e),Qv(),Number.MAX_VALUE),o=Object(Hv.c)(Object(Hv.K)(n,r));return Object(Hv.Wa)(ib(100),Object(Hv.Qa)(o,-1))})}function lw(e,t){return Object(Hv.Tb)(function(){var n=ib(1),r=Object(Hv.x)(t,Qv(),Number.MAX_VALUE),o=Object(Hv.Ha)(Object(Hv.f)(n,r)),i=Object(Hv.x)(e,Qv(),Number.MAX_VALUE),a=Object(Hv.Ha)(Object(Hv.f)(n,i));return Object(Hv.Qa)(f_(Object(Hv.Mb)(o,a)),-1)})}function cw(e,t){return Object(Hv.Tb)(function(){var n=ib(0),r=ib(1),o=Object(Hv.Pa)(n,Object(Hv.Mb)(r,Object(Hv.Wa)(e,t)));return Object(Hv.Qa)(f_(o),-1)})}function fw(e,t){return Object(Hv.Tb)(function(){var n=ib(0),r=ib(1),o=Object(Hv.Pa)(n,Object(Hv.Mb)(r,Object(Hv.Wa)(e,t)));return Object(Hv.Qa)(o,-1)})}function pw(e,t){return Object(Hv.Tb)(function(){var n=ib(0),r=ib(1),o=Object(Hv.Nb)(Object(Hv.Wa)(e,t),-1),i=Object(Hv.Na)(Object(Hv.Wa)(Object(Hv.Mb)(r,e),t),-1);return Object(Hv.Pa)(n,Object(Hv.f)(r,Object(Hv.Mb)(i,o)))})}function hw(e,t){return Object(Hv.Tb)(function(){var n=ib(Math.log(2)),r=Object(Hv.Mb)(t,e),o=Object(Hv.Mb)(Object(Hv.f)(r,Object(Hv.Cb)(Object(Hv.Wa)(ib(-2),r))),n);return Object(Hv.Qa)(o,-1)})}function dw(e,t,n){return void 0===n&&(n=!1),Object(Hv.Tb)(function(){if(n)t=Object(Hv.Bb)(t);else{var r=Object(Hv.Nb)(t,t.shape.length-1,!0);t=Object(Hv.K)(t,r)}return t=Object(Hv.x)(t,Qv(),1-Qv()),Object(Hv.Ya)(Object(Hv.Nb)(Object(Hv.Wa)(e.toFloat(),Object(Hv.Ha)(t)),t.shape.length-1))})}function mw(e,t,n){return void 0===n&&(n=!1),Object(Hv.Tb)(function(){var r=Object(Hv.T)(function(e){var t=[Xb(e.shape)];return e.reshape(t)}(e)).toInt(),o=t.shape;return dw(Object(Hv.bb)(r,o[o.length-1]).reshape(o),t,n)})}function gw(e,t){return Object(Hv.Tb)(function(){var n;return n=Object(Hv.x)(t,Qv(),1-Qv()),n=Object(Hv.Ha)(Object(Hv.K)(n,Object(Hv.Mb)(Object(Hv.db)(n),n))),Object(Hv.Qa)(function(e,t){return Object(Hv.Tb)(function(){var n=Object(Hv.Pa)(t,Object(Hv.gc)(t)),r=Object(Hv.Wa)(t,e),o=Object(Hv.Ha)(Object(Hv.f)(ib(1),Object(Hv.O)(Object(Hv.Ya)(Object(Hv.c)(t)))));return Object(Hv.f)(Object(Hv.Mb)(n,r),o)})}(e,n),-1)})}function yw(e,t){return Object(Hv.Tb)(function(){var n=Object(Hv.x)(e,Qv(),1),r=Object(Hv.x)(t,Qv(),1);return Object(Hv.Nb)(Object(Hv.Wa)(e,Object(Hv.Ha)(Object(Hv.K)(n,r))),-1)})}function vw(e,t){return Object(Hv.Tb)(function(){var n=Object(Hv.Ha)(Object(Hv.f)(ib(Qv()),t));return Object(Hv.Qa)(Object(Hv.Mb)(t,Object(Hv.Wa)(e,n)),-1)})}function bw(e,t){return Object(Hv.Tb)(function(){var n=iw(e,-1),r=iw(t,-1),o=Object(Hv.Wa)(n,r);return Object(Hv.Ya)(Object(Hv.Nb)(o,-1))})}function _w(e){var t={meanSquaredError:aw,meanAbsoluteError:sw,meanAbsolutePercentageError:uw,meanSquaredLogarithmicError:lw,squaredHinge:cw,hinge:fw,categoricalHinge:pw,logcosh:hw,categoricalCrossentropy:dw,sparseCategoricalCrossentropy:mw,binaryCrossentropy:gw,kullbackLeiblerDivergence:yw,poisson:vw,cosineProximity:bw};if("string"==typeof e){if(e in t)return t[e];throw new ub("Unknown loss "+e)}return e}function ww(e,t){return Object(Hv.Tb)(function(){var n=Object(Hv.Wa)(ib(.5),Object(Hv.db)(t)),r=e_(Object(Hv.W)(t,n),e.dtype);return Object(Hv.Qa)(Object(Hv.M)(e,r),-1)})}function xw(e,t){return Object(Hv.Tb)(function(){return e_(Object(Hv.M)(Object(Hv.j)(e,-1),Object(Hv.j)(t,-1)),"float32")})}function Nw(e,t){return gw(e,t)}function Ew(e,t){throw new lb}var Ow=aw,Cw=aw,Iw=sw,Sw=sw,Tw=uw,kw=uw,Aw=dw,Pw=bw,Mw=mw;function Dw(e,t,n){void 0===n&&(n=console.log);for(var r="",o=0;o<e.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[o]).slice(0,t[o]),r+=" ".repeat(t[o]-r.length);n(r)}function Rw(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}Dw([e.name+" ("+e.getClassName()+")",r,e.countParams().toString()],t,n)}function jw(e,t,n,r){var o;try{o=JSON.stringify(e.outputShape)}catch(e){o="multiple"}for(var i=[],a=0,s=e.inboundNodes;a<s.length;a++){var u=s[a];if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(var l=0;l<u.inboundLayers.length;++l)i.push(u.inboundLayers[l].name+"["+u.nodeIndices[l]+"]["+u.tensorIndices[l]+"]")}var c=e.name,f=e.getClassName(),p=0===i.length?"":i[0];for(Dw([c+" ("+f+")",o,e.countParams().toString(),p],t,r),l=1;l<i.length;++l)Dw(["","","",i[l]],t,r)}function Lw(e,t){return void 0===t&&(t={}),bb(e,Hv.rb.SerializationMap.getMap().classNameMap,t,"layer")}function Vw(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function zw(e,t,n,r){if(!n.startsWith("2."))throw new ub("Unsupported Keras version in weights being loaded: "+n);return t}function Fw(e,t,n){var r=function(e){switch(e){case"float32":return"float32";default:throw new ub("Invalid dtype: "+e)}}(e);return Hv.b.make(t,{values:0===t.length?n:Hv.ac.flatten(n)},r)}var Bw,Uw,Ww=function(e){function t(n){var r=e.call(this,{})||this;if(r.containerNodes=new Set,r.name=n.name,null==r.name){var o=r.getClassName().toLowerCase();r.name=nb(o)}if(r.supportsMasking=!1,r.trainable=!0,r.updatable=!0,r.inputs=Array.isArray(n.inputs)?n.inputs.slice():[n.inputs],r.outputs=Array.isArray(n.outputs)?n.outputs.slice():[n.outputs],wb(r.inputs).length!==r.inputs.length)throw new ub("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map(function(e){return e.name}));wb(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map(function(e){return e.name})),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[];for(var i=0,a=r.outputs;i<a.length;i++){var s=(C=a[i]).sourceLayer,u=C.nodeIndex,l=C.tensorIndex;r.outputLayers.push(s),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(l)}for(var c=0,f=r.inputs;c<f.length;c++)s=(C=f[c]).sourceLayer,l=C.tensorIndex,pb(0===(u=C.nodeIndex),"input layer has >1 nodes"),pb(0===l,"input layer has >1 tensors"),r.inputLayers.push(s),r.inputLayersNodeIndices.push(u),r.inputLayersTensorIndices.push(l);r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var p=0;p<r.inputLayers.length;p++){if(!((s=r.inputLayers[p])instanceof Z_))throw new TypeError("Input layers to a Model must be InputLayer objects. Received inputs: "+n.inputs+". Input "+p+" (0-based) originates from layer type "+s.getClassName()+".");r.inputNames.push(s.name),r.feedInputShapes.push(s.batchInputShape),r.feedInputNames.push(s.name)}for(var h=0,d=r.outputLayers;h<d.length;h++)r.outputNames.push((s=d[h]).name);r.internalInputShapes=r.inputs.map(function(e){return e.shape}),r.internalOutputShapes=r.outputs.map(function(e){return e.shape});for(var m={},g={},y={},v={},b={},_=[],w=function(e,n,o,i,a,s){null!=i&&null!=a&&null!=s||(i=e.sourceLayer,a=e.nodeIndex,s=e.tensorIndex);var u=i.inboundNodes[a];if(-1!==o.indexOf(u))throw new sb("The tensor "+e.name+' at layer "'+i.name+'" is part of a cycle.');if(-1===n.indexOf(u)){r.containerNodes.add(t.nodeKey(i,a)),i.id in b||(b[i.id]=Object.keys(b).length),-1===o.indexOf(u)&&o.push(u);for(var l=u.inboundLayers.length,c=0;c<l;c++)w(u.inputTensors[c],n,o,u.inboundLayers[c],u.nodeIndices[c],u.tensorIndices[c]);for(n.push(u);o.indexOf(u)>=0;)o.splice(o.indexOf(u),1);_.push(u)}},x=[],N=[],E=0,O=r.outputs;E<O.length;E++){var C=O[E];w(C,x,N)}for(var I=0,S=_.slice().reverse();I<S.length;I++){g[(G=S[I]).id]=G,G.id in m||(m[G.id]=0);var T=m[G.id];for(T=Math.max(T,null==y[G.outboundLayer.id]?0:y[G.outboundLayer.id]),y[G.outboundLayer.id]=T,v[G.outboundLayer.id]=G.outboundLayer,m[G.id]=T,p=0;p<G.inboundLayers.length;p++){var k=G.inboundLayers[p].inboundNodes[u=G.nodeIndices[p]];m[k.id]=Math.max(T+1,null==m[k.id]?0:m[k.id]),g[k.id]=k}}var A={};for(var P in m)(T=m[P])in A||(A[T]=[]),A[T].push(g[P]);var M={};for(var D in y)(T=y[D])in M||(M[T]=[]),M[T].push(v[D]);var R=Object.keys(M).map(function(e){return parseInt(e,10)}).sort(_b);r.layers=[];for(var j=0,L=R;j<L.length;j++){var V=M[T=L[j]];V.sort(function(e,t){var n=b[e.id],r=b[t.id];return n<r?-1:n>r?1:0});for(var z=0,F=V;z<F.length;z++)r.layers.push(s=F[z])}r.layersByDepth=M,R=Object.keys(A).map(function(e){return parseInt(e,10)}).sort(_b);for(var B=r.inputs.slice(),U=[],W=0,$=R;W<$.length;W++)for(var H=0,q=A[T=$[W]];H<q.length;H++){var G;if(null!=(s=(G=q[H]).outboundLayer)){for(var K=0,X=G.inputTensors;K<X.length;K++)if(-1===B.indexOf(C=X[K]))throw new sb("Graph disconnected: cannot obtain value for tensor "+C+' at layer "'+s.name+'". The following previous layers were accessed without issue: '+U);for(var Z=0,Y=G.outputTensors;Z<Y.length;Z++)B.push(C=Y[Z]);U.push(s.name)}}r.nodesByDepth=A;for(var Q=r.layers.map(function(e){return e.name}),J=function(e){var t=Q.filter(function(t){return t===e}).length;if(1!==t)throw new sb('The name "'+e+'" is used '+t+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(Q))},ee=0,te=Q;ee<te.length;ee++)J(te[ee]);return r.outboundNodes=[],r.inboundNodes=[],new G_({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map(function(e){return null}),outputMasks:r.outputs.map(function(e){return null}),inputShapes:r.inputs.map(function(e){return e.shape}),outputShapes:r.outputs.map(function(e){return e.shape})}),r.built=!0,r._refCount=1,r}return Gv(t,e),t.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Container '"+this.name+"' is already disposed.")},t.prototype.dispose=function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount)for(var t=0,n=this.layers;t<n.length;t++)e.numDisposedVariables+=n[t].dispose().numDisposedVariables;return e.refCountAfterDispose=this._refCount,e},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new ub("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var e=[],t=0,n=this.layers;t<n.length;t++)e=e.concat(n[t].trainableWeights);return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){for(var e=[],t=0,n=this.layers;t<n.length;t++){var r=n[t];e.push.apply(e,r.nonTrainableWeights)}if(!this.trainable){for(var o=[],i=0,a=this.layers;i<a.length;i++)o.push.apply(o,(r=a[i]).trainableWeights);return o.concat(e)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),t.prototype.loadWeights=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),n?function(e,t,n){void 0===n&&(n=!0);for(var r={},o=0,i=0,a=t;i<a.length;i++)for(var s=0,u=a[i].weights;s<u.length;s++){var l=u[s];if(null!=r[l.originalName])throw new ub("Duplicate weight name: "+l.originalName);r[l.originalName]=l,o++}var c=[];for(var f in e){if(null!=r[f])c.push([r[f],e[f]]);else if(n)throw new ub("Provided weight data has no target variable: "+f);delete r[f]}if(n){var p=[];for(var h in r)p.push(h);if(p.length>0)throw new ub(p.length+" of "+o+" weights are not set: "+p)}W_(c)}(e,this.layers,r):function(e,t,n){void 0===n&&(n=!1);for(var r=e.keras_version,o=t.map(function(e){return e.name}),i={},a=0,s=t;a<s.length;a++)null!=(v=s[a]).name&&(null==i[v.name]&&(i[v.name]=[]),i[v.name].push(v));for(var u=e.weights,l=[],c=0;c<o.length;++c){var f=o[c],p=u[f];null==p&&(p=[]);for(var h=[],d=0;d<p.length;++d){var m=p[d];h.push(new B_(Fw(m.dtype,m.shape,m.value)))}for(var g=0,y=i[f];g<y.length;g++){var v,b=(v=y[g]).weights;if((h=zw(0,h,r)).length!==b.length){if(!n)throw new ub("Layer #"+c+' (named "'+v.name+'") expects '+b.length+" weight(s), but the saved weights have "+h.length+" element(s).");console.warn("Skipping loading of weights of layer "+v.name+" due to mismatch in number of weights: ("+h.length+" vs "+b.length+").")}for(var _=0;_<h.length;++_)!n||Hv.ac.arraysEqual(b[_].shape,h[_].shape)?l.push([b[_],h[_].read()]):console.warn("Skipping loading of weights for layer "+v.name+" due to mismatch in shape ("+b[_].shape+" vs "+h[_].shape+")")}}W_(l)}(e,this.layers,t)},t.prototype.updatedConfig=function(){var e=this.getConfig();return{className:this.getClassName(),config:e,kerasVersion:"tfjs-layers 0.7.4",backend:"TensorFlow.js"}},t.prototype.toJSON=function(e,t){void 0===t&&(t=!0);var n=function e(t,n){if(null===t||void 0===t)return null;if("string"==typeof t)return gb(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){for(var r=[],o=t.length,i=0;i<o;++i){var a=t[i];Vw(n,i,a)?r.push(a):r.push(e(a,n))}return r}for(var s={},u=0,l=Object.keys(t);u<l.length;u++){var c=l[u],f=t[c];s[gb(c)]="name"!==c&&"className"!==c||"string"!=typeof f?e(f,c):f}return s}(this.updatedConfig());return t?JSON.stringify(n):n},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){var r;return e=mb(e),r="mask"in t?mb(t.mask):fb(null,e.length),n.runInternalGraph(e,r)[0]})},t.prototype.computeMask=function(e,t){var n=this;return Object(Hv.Tb)(function(){var r;return e=mb(e),r=null==t?fb(null,e.length):mb(t),n.runInternalGraph(e,r)[1]})},t.prototype.computeOutputShape=function(e){var t=j_(e);if(t.length!==this.inputLayers.length)throw new ub("Invalid inputShape argument "+e+": model has "+this.inputLayers.length+" tensor inputs.");for(var n={},r=0;r<t.length;r++){var o=this.inputLayers[r];n[b=o.name+"_0_0"]=t[r]}var i=Object.keys(this.nodesByDepth).map(function(e){return parseInt(e,10)}).sort(_b);if(i.length>1)for(var a=0,s=i;a<s.length;a++)for(var u=0,l=this.nodesByDepth[s[a]];u<l.length;u++){var c=l[u];if(o=c.outboundLayer,-1===this.inputLayers.map(function(e){return e.id}).indexOf(o.id)){for(var f=[],p=0;p<c.inboundLayers.length;p++){var h=c.tensorIndices[p],d=n[b=c.inboundLayers[p].name+"_"+c.nodeIndices[p]+"_"+h];f.push(d)}var m=j_(o.computeOutputShape(db(f))),g=o.inboundNodes.indexOf(c);for(p=0;p<m.length;p++)n[b=o.name+"_"+g+"_"+p]=m[p]}}var y=[],v=[];for(r=0;r<this.outputLayers.length;r++){var b=(o=this.outputLayers[r]).name+"_"+(g=this.outputLayersNodeIndices[r])+"_"+(h=this.outputLayersTensorIndices[r]);v.push(b)}for(r=0;r<v.length;r++){var _=v[r];pb(_ in n),y.push(n[_])}return db(y)},t.prototype.runInternalGraph=function(e,t){null==t&&(t=fb(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var o=this.inputs[r],i=e[r],a=t[r];n[o.id]=[i,a]}for(var s=0,u=Object.keys(this.nodesByDepth).map(function(e){return parseInt(e,10)}).sort(_b);s<u.length;s++)for(var l=0,c=this.nodesByDepth[u[s]];l<c.length;l++){for(var f=c[l],p=f.outboundLayer,h=f.inputTensors,d=f.outputTensors,m=new Array,g=0,y=h;g<y.length;g++)(o=y[g]).id in n&&m.push(n[o.id]);if(m.length===h.length){var v={},b=void 0,_=void 0,w=void 0,x=void 0;if(null!=f.callArgs&&(v=f.callArgs),1===m.length){var N=m[0],E=N[0],O=N[1];null==v.mask&&(v.mask=O),w=mb(p.call(E,v)),x=mb(p.computeMask(E,O)),b=[E],_=[O]}else b=m.map(function(e){return e[0]}),_=m.map(function(e){return e[1]}),null==v.mask&&(v.mask=_),w=mb(p.call(b,v)),x=mb(p.computeMask(b,_));if(p.activityRegularizer)throw new lb("Model invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(r=0;r<d.length;++r)n[(o=d[r]).id]=[i=w[r],a=x[r]]}}for(var C=[],I=[],S=[],T=0,k=this.outputs;T<k.length;T++){pb((o=k[T]).id in n,"Could not compute output "+o.name+" : "+o.id);var A=n[o.id],P=A[0];a=A[1],S.push(P.shape),C.push(P),I.push(a)}return[C,I,S]},t.prototype.buildNodeConversionMap=function(e){for(var n,r={},o=0,i=this.layers;o<i.length;o++){var a=i[o];n=a instanceof t?1:0;for(var s=0;s<a.inboundNodes.length;s++){var u=t.nodeKey(a,s);u in this.containerNodes&&(r[u]=n,n+=1)}}return r},t.prototype.getLayer=function(e,t){if(null!=t){if(this.layers.length<=t)throw new ub("Was asked to retrieve layer at index "+t+", but model only has "+this.layers.length+" layer(s).");return this.layers[t]}if(null==e)throw new ub("Provide either a layer name or layer index");for(var n=0,r=this.layers;n<r.length;n++){var o=r[n];if(o.name===e)return o}throw new ub("No such layer: "+e)},t.prototype.calculateLosses=function(){var e=this;return Object(Hv.Tb)(function(){for(var n=[],r=0,o=e.layers;r<o.length;r++)for(var i=o[r],a=0;a<i.inboundNodes.length;++a){var s=t.nodeKey(i,a);e.containerNodes.has(s)&&n.push.apply(n,i.calculateLosses())}return n})},t.prototype.getConfig=function(){for(var e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[],o=0,i=this.layers;o<i.length;o++){for(var a=(b=i[o]).getClassName(),s=b.getConfig(),u=[],l=0;l<b.inboundNodes.length;l++){var c=b.inboundNodes[l],f=t.nodeKey(b,l),p={};if(this.containerNodes.has(f)){if(c.callArgs)try{JSON.stringify(c.callArgs),p=c.callArgs}catch(e){console.warn("Layer "+b.name+" was passed non-serializable keyword arguments: "+c.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),p={}}if(c.inboundLayers.length>0){for(var h=[],d=0;d<c.inboundLayers.length;d++){var m=c.inboundLayers[d],g=c.nodeIndices[d],y=c.tensorIndices[d];null!==(w=n[t.nodeKey(m,g)])&&void 0!==w||(w=0),h.push([m.name,w,y,p])}u.push(h)}}}r.push({name:b.name,className:a,config:s,inboundNodes:u})}e.layers=r;var v=[];for(d=0;d<this.inputLayers.length;d++){var b=this.inputLayers[d];f=t.nodeKey(b,g=this.inputLayersNodeIndices[d]),this.containerNodes.has(f)&&(null!==(w=n[f])&&void 0!==w||(w=0),v.push([b.name,w,y=this.inputLayersTensorIndices[d]]))}e.inputLayers=v;var _=[];for(d=0;d<this.outputLayers.length;d++){var w;f=t.nodeKey(b=this.outputLayers[d],g=this.outputLayersNodeIndices[d]),this.containerNodes.has(f)&&(null!==(w=n[f])&&void 0!==w||(w=0),_.push([b.name,w,y=this.outputLayersTensorIndices[d]]))}return e.outputLayers=_,e},t.fromConfig=function(e,t){var n={},r={};function o(e,t){e.name in r?r[e.name].push(t):r[e.name]=[t]}function i(e,t){for(var r,i=[],a=0,s=t;a<s.length;a++){var u=s[a],l=u[0],c=u[1],f=u[2];if(3===u.length)r={};else{if(4!==u.length)throw new ub("Improperly formatted model config for layer "+JSON.stringify(e)+": "+JSON.stringify(u));r=u[3]}if(!(l in n))return void o(e,t);var p=n[l];if(p.inboundNodes.length<=c)return void o(e,t);i.push(p.inboundNodes[c].outputTensors[f])}i.length>0&&e.apply(db(i),r)}function a(e){var r=e.name,i=Lw(e,null!=t.customObjects?t.customObjects:{});n[r]=i;for(var a=0,s=e.inboundNodes;a<s.length;a++){var u=s[a];if(!(u instanceof Array))throw new ub("Corrupted configuration, expected array for nodeData: "+u);o(i,u)}}for(var s=t.name,u=t.layers,l=0,c=u;l<c.length;l++)a(h=c[l]);for(;!xb(r);)for(var f=0,p=u;f<p.length;f++){var h=p[f];if((C=n[h.name]).name in r){for(var d=0,m=r[C.name];d<m.length;d++)i(C,m[d]);delete r[C.name]}}for(var g=[],y=[],v=0,b=t.inputLayers;v<b.length;v++){var _=(h=b[v])[0],w=h[1],x=h[2];pb(_ in n);var N=(C=n[_]).inboundNodes[w].outputTensors;g.push(N[x])}for(var E=0,O=t.outputLayers;E<O.length;E++){var C;_=(h=O[E])[0],w=h[1],x=h[2],pb(_ in n),N=(C=n[_]).inboundNodes[w].outputTensors,y.push(N[x])}return new e({inputs:g,outputs:y,name:s})},Object.defineProperty(t.prototype,"stateful",{get:function(){if(this._stateful)throw new ub("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var e=0,t=this.layers;e<t.length;e++)if(t[e].stateful)return!0;return!1},enumerable:!0,configurable:!0}),t}(X_),$w=function(){function e(t){if(this.id2Value={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n];else{if(null==t)return;for(var r=0,o=t;r<o.length;r++){var i=o[r];this.add(i.key,i.value)}}}return e.prototype.add=function(e,t){if(null!=this.id2Value[e.id])throw new ub("Duplicate key: name="+e.name+", id="+e.id);return this.id2Value[e.id]=function(e,t){if(null!=e.shape){if(e.shape.length!==t.shape.length)throw new ub("The rank of feed ("+t.shape.length+") does not match the rank of the key ("+e.shape.length+").");for(var n=0;n<e.shape.length;++n)if(null!=e.shape[n]&&e.shape[n]!==t.shape[n])throw new ub("The "+n+"-th dimension of the feed ("+t.shape[n]+") is incompatible with that of the key ("+e.shape[n]+").")}if(null==e.dtype||e.dtype===t.dtype)return t;try{return Object(Hv.v)(t,e.dtype)}catch(n){throw new ub("The dtype of the feed ("+t.dtype+") can not be cast to the dtype of the key '"+e.name+"' ("+e.dtype+").")}}(e,t),this},e.prototype.addFeed=function(e){this.add(e.key,e.value)},e.prototype.hasKey=function(e){return null!=this.id2Value[e.id]},e.prototype.getValue=function(e){if(null==this.id2Value[e.id])throw new ub("Nonexistent key: "+JSON.stringify(e));return this.id2Value[e.id]},e}();function Hw(e,t,n){for(var r=Array.isArray(e),o=r?e:[e],i=[],a=new $w(t),s=0,u=o;s<u.length;s++)i.push(qw(u[s],a,n));return r?i:i[0]}function qw(e,t,n){if(t.hasKey(e))return t.getValue(e);if(e.sourceLayer instanceof Z_)throw new ub("Missing a feed value for SymbolicTensor from InputLayer '"+Z_.name+"'");for(var r=[],o=0,i=e.inputs;o<i.length;o++){var a=qw(i[o],t,n);r.push(a)}var s=e.sourceLayer.apply(r,n);Array.isArray(s)||(s=[s]);for(var u=function(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r)for(var o=0,i=e.sourceLayer.inboundNodes[r].outputTensors;o<i.length;o++)if(i[o].id===e.id){n=r;break}t=e.sourceLayer.getOutputAt(n)}return t}(e),l=Array.isArray(u)?u:[u],c=0;c<l.length;++c)t.add(l[c],s[c]);return 1===s.length?s[0]:s[e.outputTensorIndex]}function Gw(e){return Array.isArray(e)}function Kw(e){return!function(e){return e instanceof Hv.b}(e)&&!Gw(e)}function Xw(e,t,n,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=""),null==t||0===t.length){if(null!=e){var i=!1;if(Gw(e)&&e.length>0)i=!0;else if(Kw(e)){for(var a in e)if(e.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new ub("Error when checking model "+o+" expected no data, but got "+e)}return[]}if(null==e)return t.map(function(e){return null});var s;if(Kw(e)){e=e,s=[];for(var u=0,l=t;u<l.length;u++){var c=l[u];if(null==e[c])throw new ub('No data provided for "'+c+'". Need data for each key in: '+t);s.push(e[c])}}else if(Gw(e)){if((e=e).length!==t.length)throw new ub("Error when checking model "+o+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+t.length+" Tensor(s), but instead got the following list of Tensor(s): "+e);s=e}else{if(e=e,t.length>1)throw new ub("The model "+o+" expects "+t.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+e.shape);s=[e]}for(var f=0;f<t.length;++f)1===(p=s[f]).shape.length&&(s[f]=t_(p,1));if(null!=n)for(f=0;f<t.length;++f)if(null!=n[f]){var p;if((p=s[f]).shape.length!==n[f].length)throw new ub("Error when checking "+o+": expected "+t[f]+" to have "+n[f].length+" dimension(s). but got array with shape "+p.shape);for(var h=0;h<n[f].length;++h)if(0!==h||r){var d=n[f][h];if(null!=d&&d>=0&&p.shape[h]!==d)throw new ub("Error when checking "+o+": expected "+t[f]+" to have shape ["+n[f]+"], but got array with shape ["+p.shape+"].")}}return s}function Zw(e,t){for(var n=[],r=0,o=null;r<e;)(o=r+t)>=e&&(o=e),n.push([r,o]),r=o;return n}function Yw(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(function(e){return n_(e,t,n-t)}):n_(e,t,n-t)}function Qw(e,t){return Object(Hv.Tb)(function(){return null==e?null:Array.isArray(e)?e.map(function(e){return Qw(e,t)}):c_(e,"int32"===t.dtype?t:t.toInt())})}function Jw(e,t,n,r,o){var i;if(void 0===r&&(r=!0),void 0===o&&(o=""),Array.isArray(e)){if(e.length!==t.length)throw new ub("Error when checking model "+o+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+t.length+" Tensor(s), but instead got "+e.length+" Tensors(s).");i=e}else{if(t.length>1)throw new ub("The model expects "+t.length+" "+o+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(e.shape)+".");i=[e]}if(null!=n)for(var a=0;a<t.length;++a)if(null!=n[a]){var s=i[a];if(s.shape.length!==n[a].length)throw new ub("Error when checking "+o+": expected "+t[a]+" to have "+n[a].length+" dimension(s), but got array with shape "+JSON.stringify(s.shape));for(var u=0;u<n[a].length;++u)if(0!==u||r){var l=n[a][u];if(null!=l&&l!==s.shape[u])throw new ub("Error when checking "+o+": expected "+t[a]+" to have shape "+JSON.stringify(n[a])+" but got array with shape "+JSON.stringify(s.shape)+".")}}}(Uw=Bw||(Bw={}))[Uw.SILENT=0]="SILENT",Uw[Uw.VERBOSE=1]="VERBOSE";var ex=function(e){function t(t){var n=e.call(this,t)||this;return n.isTraining=!1,n}return Gv(t,e),t.prototype.summary=function(e,t,n){if(void 0===n&&(n=console.log),!this.built)throw new ub("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(e,t,n,r){void 0===r&&(r=console.log);var o,i=function(e){var t=!0,n=[],r=[];for(var o in e.nodesByDepth)n.push(e.nodesByDepth[o]);for(var i=0,a=n;i<a.length;i++){var s=a[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,s)}if(t)for(var u=0,l=e.layers;u<l.length;u++){for(var c=!1,f=0,p=l[u].inboundNodes;f<p.length;f++)if(-1!==r.indexOf(p[f])){if(c){t=!1;break}c=!0}if(!t)break}return t}(e),a=["Layer (type)","Output shape","Param #"];if(i?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(function(e){return Math.floor(t*e)})),!i)for(var s in a.push("Receives inputs"),o=[],e.nodesByDepth)o.push.apply(o,e.nodesByDepth[s]);r("_".repeat(t)),Dw(a,n,r),r("=".repeat(t));for(var u=e.layers,l=0;l<u.length;++l)i?Rw(u[l],n,r):jw(u[l],n,o,r),r((l===u.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var c=function(e){return z_(null!=e.collectedTrainableWeights?e.collectedTrainableWeights:e.trainableWeights)}(e),f=z_(e.nonTrainableWeights);r("Total params: "+(c+f)),r("Trainable params: "+c),r("Non-trainable params: "+f),r("_".repeat(t))}(this,e,t,n)},t.prototype.compile=function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer=function(e){var t={Adagrad:function(){return Hv.Wb.adagrad(.01)},Adadelta:function(){return Hv.Wb.adadelta(1,.95,Qv())},Adam:function(){return Hv.Wb.adam(.001,.9,.999,Qv())},Adamax:function(){return Hv.Wb.adamax(.002,.9,.999,Qv(),0)},RMSProp:function(){return Hv.Wb.rmsprop(.001,.9,0,Qv())},SGD:function(){return Hv.Wb.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new ub("Unknown Optimizer "+e)}(e.optimizer);else{if(!(e.optimizer instanceof Hv.a))throw new ub("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer=e.optimizer}var n=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ub("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+e.loss+".");n=e.loss.map(function(e){return _w(e)})}else{var r=_w(e.loss);this.outputs.map(function(e){n.push(r)})}else{for(var o in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(o))throw new ub('Unknown entry in loss dictionary: "'+o+'". Only expect the following keys: '+this.outputNames);for(var i in this.outputNames)null==e.loss[i]&&console.warn('Output "'+i+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+i+" during training"),n.push(_w(e.loss[i]))}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var a=0;a<this.outputs.length;++a){var s=this.internalOutputShapes[a];this.feedOutputNames.push(this.outputNames[a]),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[a])}var u=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Wb("loss",function(){for(var e=0;e<t.outputs.length;++e)-1===u.indexOf(e)&&t.outputs.length>1&&(t.metricsTensors.push([t.lossFunctions[e],e]),t.metricsNames.push(t.outputNames[e]+"_loss"))});var l=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(function(e){return[]});if(Array.isArray(e))return t.map(function(t){return e});if(null!=e){for(var n=[],r=0,o=t;r<o.length;r++){var i=o[r],a=e.hasOwnProperty(i)?e[i]:[];Array.isArray(a)||(a=[a]),n.push(a)}return n}throw new TypeError("Type of metrics argument not understood. Expected an Array or Object, found: "+e)}(e.metrics,this.outputNames);Wb("metric",function(){for(var e=function(e){if(-1!==u.indexOf(e))return"continue";!function(n){for(var r,o,i,a=function(n){if(-1!==["accuracy","acc","crossentropy","ce"].indexOf(n)){var a=t.internalOutputShapes[e];1===a[a.length-1]||t.lossFunctions[e]===gw?-1!==["accuracy","acc"].indexOf(n)?o=ww:-1!==["crossentropy","ce"].indexOf(n)&&(o=Nw):t.lossFunctions[e]===mw?-1!==["accuracy","acc"].indexOf(n)?o=Ew:-1!==["crossentropy","ce"].indexOf(n)&&(o=Mw):-1!==["accuracy","acc"].indexOf(n)?o=xw:-1!==["crossentropy","ce"].indexOf(n)&&(o=Aw);var s=void 0;-1!==["accuracy","acc"].indexOf(n)?s="acc":-1!==["crossentropy","ce"].indexOf(n)&&(s="ce"),i=o,r=""+s}else{var u=function(e){var t={binaryAccuracy:ww,categoricalAccuracy:xw,categoricalCrossentropy:Aw,sparseCategoricalCrossentropy:Mw,mse:Ow,MSE:Cw,mae:Iw,MAE:Sw,mape:Tw,MAPE:kw,cosine:Pw};if("string"==typeof e&&e in t)return t[e];if("string"!=typeof e&&null!=e)return e;throw new ub("Unknown metric "+e)}(n);i=u,r=""+n}var l;Wb(r,function(){l=i}),function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])}(e,r,l)},s=0,u=l[e];s<u.length;s++)a(u[s])}()},n=0;n<t.outputs.length;++n)e(n)}),this.collectedTrainableWeights=this.trainableWeights},t.prototype.checkTrainableWeightsConsistency=function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},t.prototype.evaluate=function(e,t,n){void 0===n&&(n={});var r=null==n.batchSize?32:n.batchSize,o=this.standardizeUserData(e,t,!0,r),i=o[0].concat(o[1]);return this.makeTestFunction(),db(this.testLoop(this.testFunction,i,r,n.verbose,n.steps))},t.prototype.checkNumSamples=function(e,t,n,r){var o;if(void 0===r&&(r="steps"),null!=n){if(o=null,null!=t)throw new ub("If "+r+" is set, batchSize must be null or undefined.Got batchSize = "+t)}else{if(null==e)throw new ub("Either the input data should have a defined shape, or "+r+" shoud be specified.");o=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return o},t.prototype.execute=function(e,t){if(Array.isArray(t)&&0===t.length)throw new ub("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=this.retrieveSymbolicTensors(n?t:[t]),o=new $w;if(e instanceof Hv.b&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ub("The number of inputs provided ("+e.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var i=0;i<this.inputs.length;++i)o.add(this.inputs[i],e[i])}else for(var a=0,s=this.inputs;a<s.length;a++){var u=s[a],l=e[u.name];if(null==l)throw new ub("No value is provided for the model's input "+u.name);o.add(u,l)}var c=Hw(r,o);return n?c:c[0]},t.prototype.retrieveSymbolicTensors=function(e){for(var t=fb(null,e.length),n=e.length,r=0,o=this.layers;r<o.length;r++){for(var i=o[r],a=Array.isArray(i.output)?i.output:[i.output],s=a.map(function(e){return e.name}),u=0;u<e.length;++u){var l=s.indexOf(e[u]);if(-1!==l&&(t[u]=a[l],n--),0===n)break}if(0===n)break}if(n>0){var c=[];throw t.forEach(function(t,n){null==t&&c.push(e[n])}),new ub("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(c))}return t},t.prototype.predictLoop=function(e,t,n){var r=this;return void 0===t&&(t=32),void 0===n&&(n=!1),Object(Hv.Tb)(function(){var o=r.checkNumSamples(e);if(n)throw new lb("Verbose predictLoop() is not implemented yet.");for(var i=Zw(o,t),a=[],s=function(t){var n=Object(Hv.Tb)(function(){var n=Yw(e,i[t][0],i[t][1]),o=[];if(Array.isArray(n))for(var a=0;a<n.length;++a)o.push({key:r.inputs[a],value:n[a]});else o.push({key:r.inputs[0],value:n});var s=new $w(o);return Hw(r.outputs,s)});if(0===t)for(var o=0,s=n;o<s.length;o++)a.push(s[o]);else for(var u=0;u<n.length;++u)a[u]=a_(a[u],n[u])},u=0;u<i.length;++u)s(u);return db(a)})},t.prototype.predict=function(e,t){return void 0===t&&(t={}),Jw(e,this.inputNames,this.feedInputShapes,!1),this.predictLoop(e,null==t.batchSize?32:t.batchSize)},t.prototype.predictOnBatch=function(e){return Jw(e,this.inputNames,this.feedInputShapes,!0),this.predictLoop(e,e.shape[0])},t.prototype.standardizeUserData=function(e,t,n,r){if(void 0===n&&(n=!0),null==this.optimizer)throw new sb("You must compile a model before training/testing. Use Model.compile(modelCompileConfig).");for(var o=[],i=0;i<this.feedOutputShapes.length;++i){var a=this.feedOutputShapes[i];o.push(this.feedLossFns[i]===mw?a.slice(0,a.length-1).concat([1]):a)}if(function(e,t,n){var r=wb(e.map(function(e){return e.shape[0]}));r.sort();var o=wb(t.map(function(e){return e.shape[0]}));if(o.sort(),r.length>1)throw new ub("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(function(e){return e.shape})));if(o.length>1)throw new ub("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(function(e){return e.shape})));if(r.length>0&&o.length>0&&!Hv.ac.arraysEqual(r,o))throw new ub("Input Tensors should have the same number of samples as target Tensors. Found "+r[0]+" input sample(s) and "+o[0]+" target sample(s).")}(e=Xw(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=Xw(t,this.feedOutputNames,o,!1,"target")),function(e,t,n){for(var r=[aw,gw,dw],o=0;o<e.length;++o){var i=e[o],a=t[o],s=n[o];if(null!=a){if(a===dw&&1===i.shape[i.shape.length-1])throw new ub("You are passing a target array of shape "+i.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(a))for(var u=i.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var f=l[c];if(null!=f&&u[c]!==f)throw new ub("A target Tensor with shape "+i.shape+" was passed for an output of shape "+s+", while using a loss function that expects targets to have the same shape as the output.")}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!=0)throw new ub("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+r+". Found: "+e[0].shape[0]+" sample(s).");return[e,t,null]},t.prototype.fitLoop=function(e,t,n,r,o,i,a,s,u,l,c,f,p,h,d){return Xv(this,void 0,void 0,function(){var m,g,y,v,b,_,w,x,N=this;return Zv(this,function(E){switch(E.label){case 0:if(null==r&&(r=32),null==o&&(o=1),null==l&&(l=!0),null==f&&(f=0),m=!1,null!=s&&null!=u&&(m=!0),null!=h&&(m=!0,null==p))throw new ub("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");if(null!=(g=this.checkNumSamples(t,r,p,"steps_per_epoch"))&&(y=Jb(0,g)),this.history=new rw,v=new nw(d),a=(a=null==a?[v]:[v].concat(a)).concat([this.history]),i>0)throw new lb("Verbose mode is not implemented yet.");return(b=new ew(a)).setModel(this),b.setParams({epochs:o,initialEpoch:f,steps:p,verbose:i,doValidation:m,metrics:c}),[4,b.onTrainBegin()];case 1:E.sent(),this.stopTraining_=!1,_=function(o){var i,a,c,f,h;return Zv(this,function(d){switch(d.label){case 0:return[4,b.onEpochBegin(o)];case 1:if(d.sent(),i={},null==p)return[3,2];throw new lb("stepsPerEpoch mode is not implemented yet.");case 2:if("batch"===l)throw new lb("batch shuffling is not implemneted yet");l&&Hv.ac.shuffle(y),a=Object(Hv.Rb)(y),c=Zw(g,r),f=function(o){var l;return Zv(this,function(f){switch(f.label){case 0:return[4,b.onBatchBegin(o,l={})];case 1:return f.sent(),Object(Hv.Tb)(function(){var f=c[o][0],p=c[o][1],h=n_(a,f,p-f);l.batch=o,l.size=p-f;for(var d=Qw(t,h),g=e(d),y=0;y<n.length;++y){var v=n[y],b=g[y];l[v]=b,Object(Hv.Aa)(b)}if(o===c.length-1&&m){var _=N.testLoop(s,u,r);for(y=0;y<n.length;++y)v=n[y],b=_[y],Object(Hv.Aa)(b),i["val_"+v]=b}}),[4,b.onBatchEnd(o,l)];case 2:return f.sent(),function(e){if(null!=e)for(var t in e){var n=e[t];"number"!=typeof n&&n.dispose()}}(l),w.stopTraining_?[2,"break"]:[2]}})},h=0,d.label=3;case 3:return h<c.length?[5,f(h)]:[3,6];case 4:if("break"===d.sent())return[3,6];d.label=5;case 5:return++h,[3,3];case 6:a.dispose(),d.label=7;case 7:return[4,b.onEpochEnd(o,i)];case 8:return d.sent(),w.stopTraining_?[2,"break"]:[2]}})},w=this,x=f,E.label=2;case 2:return x<o?[5,_(x)]:[3,5];case 3:if("break"===E.sent())return[3,5];E.label=4;case 4:return++x,[3,2];case 5:return[4,b.onTrainEnd()];case 6:return E.sent(),[4,this.history.syncData()];case 7:return E.sent(),[2,this.history]}})})},t.prototype.testLoop=function(e,t,n,r,o){var i=this;return void 0===r&&(r=0),Object(Hv.Tb)(function(){var a=i.checkNumSamples(t,n,o,"steps"),s=[];if(1===r)throw new lb("Verbose mode is not implemented yet.");if(null!=o)throw new lb("steps mode in testLoop() is not implemented yet");for(var u=Zw(a,n),l=Object(Hv.Rb)(Jb(0,a)),c=0;c<u.length;++c){var f=u[c][0],p=u[c][1],h=n_(l,f,p-f),d=Qw(t,h),m=e(d);if(0===c)for(var g=0;g<m.length;++g)s.push(ib(0));for(g=0;g<m.length;++g){var y=m[g];s[g]=Object(Hv.f)(s[g],Object(Hv.Wa)(ib(p-f),y))}}for(g=0;g<s.length;++g)s[g]=Object(Hv.K)(s[g],ib(a));return s})},t.prototype.getDedupedMetricsNames=function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],o=r;hb(e,r)>1&&(o+="_"+hb(e.slice(0,n),r)),t.push(o)}return t},t.prototype.makeTestFunction=function(){var e=this;this.testFunction=function(t){return Object(Hv.Tb)(function(){for(var n,r=[],o=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),a=[],s=0;s<e.inputs.length;++s)a.push({key:e.inputs[s],value:o[s]});var u=new $w(a),l=Hw(e.outputs,u);for(s=0;s<e.lossFunctions.length;++s){var c=e.lossFunctions[s],f=Object(Hv.Qa)(c(i[s],l[s]));n=0===s?f:Object(Hv.f)(n,f),r.push(n)}for(s=0;s<e.metricsTensors.length;++s){var p=e.metricsTensors[s][0],h=e.metricsTensors[s][1],d=Object(Hv.Qa)(p(i[h],l[h]));r.push(d)}return r})}},t.prototype.fit=function(e,t,n){return void 0===n&&(n={}),Xv(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,f,p,h,d,m,g,y,v,b,_,w,x=this;return Zv(this,function(N){switch(N.label){case 0:if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");if(this.isTraining=!0,o=this.standardizeUserData(e,t,!1,r=null==n.batchSize?32:n.batchSize),i=o[0],a=o[1],s=!1,f=!1,null!=n.validationData&&n.validationData.length>0){if(s=!0,2!==n.validationData.length)throw 3===n.validationData.length?new lb("validationData including sample weights is not supported yet."):new ub("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+n.validationData+" is invalid.");p=this.standardizeUserData(u=n.validationData[0],l=n.validationData[1],!0,r),c=(u=p[0]).concat(l=p[1])}else null!=n.validationSplit&&n.validationSplit>0&&n.validationSplit<1?(s=!0,h=Math.floor(i[0].shape[0]*(1-n.validationSplit)),u=Yw(i,h,d=i[0].shape[0]),i=Yw(i,0,h),l=Yw(a,h,d),a=Yw(a,0,h),f=!0,c=u.concat(l)):null!=n.validationSteps&&(s=!0);return m=i.concat(a),this.checkTrainableWeightsConsistency(),g=function(e){var t=e.slice(0,x.inputs.length),n=e.slice(x.inputs.length,x.inputs.length+x.outputs.length),r=[],o=x.collectedTrainableWeights.map(function(e){return e.read()});return[x.optimizer.minimize(function(){for(var e=[],o=0;o<x.inputs.length;++o)e.push({key:x.inputs[o],value:t[o]});var i,a=new $w(e),s=Hw(x.outputs,a,{training:!0});for(o=0;o<x.lossFunctions.length;++o){var u=(0,x.lossFunctions[o])(n[o],s[o]);Object(Hv.Qa)(u),i=0===o?u:Object(Hv.f)(i,u)}for(o=0;o<x.metricsTensors.length;++o){var l=x.metricsTensors[o][0],c=x.metricsTensors[o][1],f=Object(Hv.Qa)(l(n[c],s[c]));Object(Hv.Aa)(f),r.push(f)}return i=Object(Hv.Qa)(i),x.calculateLosses().forEach(function(e){i=Object(Hv.f)(i,e)}),i},!0,o)].concat(r)},y=this.getDedupedMetricsNames(),s?(this.makeTestFunction(),v=this.testFunction,b=y.slice().concat(y.map(function(e){return"val_"+e}))):(v=null,c=[],b=y.slice()),_=function(e){return null==e?null:e instanceof J_?[e]:Array.isArray(e)&&e[0]instanceof J_?e:mb(e).map(function(e){return new ow(e)})}(n.callbacks),[4,this.fitLoop(g,m,y,r,n.epochs,n.verbose,_,v,c,n.shuffle,b,n.initialEpoch,null,null,n.yieldEvery)];case 1:return w=N.sent(),f&&(c.forEach(function(e){return e.dispose()}),i.forEach(function(e){return e.dispose()}),a.forEach(function(e){return e.dispose()})),this.isTraining=!1,[2,w]}})})},t.prototype.getNamedWeights=function(e){for(var t={},n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,o=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||(t[r[i].originalName]=o[i]);return t},Object.defineProperty(t.prototype,"stopTraining",{set:function(e){this.stopTraining_=e},enumerable:!0,configurable:!0}),t.prototype.save=function(e,t){return Xv(this,void 0,void 0,function(){var n,r,o;return Zv(this,function(i){switch(i.label){case 0:if("string"==typeof e){if(0===(n=Hv.Z.getSaveHandlers(e)).length)throw new ub("Cannot find any save handlers for URL '"+e+"'");if(n.length>1)throw new ub("Found more than one ("+n.length+") save handlers for URL '"+e+"'");e=n[0]}if(null==e.save)throw new ub("Model.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,Hv.Z.encodeWeights(this.getNamedWeights(t))];case 1:return r=i.sent(),o=this.toJSON(null,!1),[2,e.save({modelTopology:o,weightData:r.data,weightSpecs:r.specs})]}})})},t.className="Model",t}(Ww);Hv.rb.SerializationMap.register(ex);var tx=function(e){function t(t){var n=e.call(this,{inputs:[],outputs:[]})||this;if(t=t||{},n.trainable=!0,n._updatable=!0,n.built=!1,n.name=null!=t.name?t.name:nb("sequential_"),null!=t.layers)for(var r=0,o=t.layers;r<o.length;r++)n.add(o[r]);return n}return Gv(t,e),t.prototype.add=function(e){var n,r=e instanceof t||e instanceof ex;if(r){if(1!==(n=e).outputs.length)throw new ub("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new ub("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new ub("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var o=Y_({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(r)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new ub("A layer added to a Sequential model must not already be connected somewhere else. Model received layer "+e.name+" which has "+e.inboundNodes.length+" pre-existing inbound connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new ub("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=function e(t,n,r){if((null==n||null!=r&&r>0)&&(n=t.sourceLayer,r=t.nodeIndex),0===n.inboundNodes.length)return[t];var o=n.inboundNodes[r];if(0===o.inboundLayers.length)return o.inputTensors;for(var i=[],a=0;a<o.inboundLayers.length;a++)for(var s=0,u=e(o.inputTensors[a],o.inboundLayers[a],o.nodeIndices[a]);s<u.length;s++){var l=u[s];-1===i.indexOf(l)&&i.push(l)}return i}(this.outputs[0])}this.inboundNodes=[],new G_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:fb(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(e){return e.shape}),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1},t.prototype.pop=function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},t.prototype.call=function(e,t){return null==this.model&&this.build(),this.model.call(e,t)},t.prototype.build=function(e){if(V_(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ex({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.model.updatable=this.updatable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},t.prototype.countParams=function(){return this.built||this.build(),e.prototype.countParams.call(this)},t.prototype.summary=function(t,n,r){void 0===r&&(r=console.log),this.built||this.build(),e.prototype.summary.call(this,t,n,r)},t.prototype.setWeights=function(e){null==this.model&&this.build(),this.model.setWeights(e)},Object.defineProperty(t.prototype,"updatable",{get:function(){return this._updatable},set:function(e){this.built&&(this.model.updatable=e),this._updatable=e},enumerable:!0,configurable:!0}),t.prototype.evaluate=function(e,t,n){if(void 0===n&&(n={}),!this.built)throw new sb("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)},t.prototype.predict=function(e,t){return void 0===t&&(t={}),null==this.model&&this.build(),this.model.predict(e,t)},t.prototype.predictOnBatch=function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)},t.prototype.compile=function(e){this.build(),this.model.compile(e),this.optimizer=this.model.optimizer,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},t.prototype.fit=function(e,t,n){return void 0===n&&(n={}),Xv(this,void 0,void 0,function(){return Zv(this,function(r){if(!this.built)throw new sb("The model needs to be compiled before being used.");return[2,this.model.fit(e,t,n)]})})},t.fromConfig=function(e,n){var r=new e({});if(!(r instanceof t))throw new ub("Sequential.fromConfig called on non-Sequential input: "+r);if(!(n instanceof Array))throw new ub("Sequential.fromConfig called without an array of configs");if(null==n[0].className||"Merge"===n[0].className)throw new ub("Legacy serialization format not supported yet.");for(var o=0,i=n;o<i.length;o++){var a=Lw(i[o]);r.add(a)}return r},Object.defineProperty(t.prototype,"stopTraining",{set:function(e){this.model.stopTraining=e},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){for(var e=[],t=0,n=this.layers;t<n.length;t++){var r=n[t];e.push({className:r.getClassName(),config:r.getConfig()})}return e},t.className="Sequential",t}(ex);Hv.rb.SerializationMap.register(tx);var nx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.getConfig=function(){return{}},t}(Hv.rb.Serializable),rx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=1),function(e,t){if(void 0===t&&(t=1),1!==t)throw new lb("Support for alpha values other than 1 ("+t+") is not implemented yet.");return Object(Hv.L)(e)}(e,t)},t.className="elu",t}(nx);Hv.rb.SerializationMap.register(rx);var ox=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e){return Object(Hv.pb)(e)},t.className="selu",t}(nx);Hv.rb.SerializationMap.register(ox);var ix=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e){return Object(Hv.kb)(e)},t.className="relu",t}(nx);Hv.rb.SerializationMap.register(ix);var ax=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e){return Object(Hv.Tb)(function(){return Object(Hv.Sa)(ib(6),Object(Hv.kb)(e))})},t.className="relu6",t}(nx);Hv.rb.SerializationMap.register(ax);var sx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e){return e},t.className="linear",t}(nx);Hv.rb.SerializationMap.register(sx);var ux=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e){return Object(Hv.sb)(e)},t.className="sigmoid",t}(nx);Hv.rb.SerializationMap.register(ux);var lx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e){return function(e){return Object(Hv.Tb)(function(){var t=Object(Hv.f)(ib(.5),Object(Hv.Wa)(ib(.2),e));return Object(Hv.x)(t,0,1)})}(e)},t.className="hardSigmoid",t}(nx);Hv.rb.SerializationMap.register(lx);var cx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e){return Object(Hv.Cb)(e)},t.className="softplus",t}(nx);Hv.rb.SerializationMap.register(cx);var fx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e){return function(e){return Object(Hv.Tb)(function(){return Object(Hv.K)(e,Object(Hv.f)(ib(1),Object(Hv.c)(e)))})}(e)},t.className="softsign",t}(nx);Hv.rb.SerializationMap.register(fx);var px=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e){return Object(Hv.Pb)(e)},t.className="tanh",t}(nx);Hv.rb.SerializationMap.register(px);var hx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=-1),Object(Hv.Bb)(e,t)},t.className="softmax",t}(nx);function dx(e){return e.getClassName()}function mx(e,t){return void 0===t&&(t={}),bb(e,Hv.rb.SerializationMap.getMap().classNameMap,t,"activation")}function gx(e){return null==e?mx({className:"linear",config:{}}):"string"==typeof e?mx({className:e,config:{}}):e instanceof nx?e:mx(e)}Hv.rb.SerializationMap.register(hx);var yx=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_ALPHA=.3,null==t&&(t={}),n.alpha=null==t.alpha?n.DEFAULT_ALPHA:t.alpha,n}return Gv(t,e),t.prototype.call=function(e,t){var n=L_(e);return Object(Hv.Ba)(n,this.alpha)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={alpha:this.alpha},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="LeakyReLU",t}(X_);Hv.rb.SerializationMap.register(yx);var vx=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;if(n.DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==n.DEFAULT_ALPHA)throw new lb("Non-default alpha value ("+t.alpha+") is not supported by the ELU layer yet.");return n.alpha=null==t.alpha?n.DEFAULT_ALPHA:t.alpha,n}return Gv(t,e),t.prototype.call=function(e,t){var n=L_(e);return Object(Hv.L)(n)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={alpha:this.alpha},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ELU",t}(X_);Hv.rb.SerializationMap.register(vx);var bx=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_THETA=1,null==t&&(t={}),n.theta=null==t.theta?n.DEFAULT_THETA:t.theta,n.thetaTensor=ib(n.theta),n}return Gv(t,e),t.prototype.call=function(e,t){var n=L_(e);return n.mul(e_(n.greater(this.thetaTensor),"float32"))},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={theta:this.theta},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ThresholdedReLU",t}(X_);Hv.rb.SerializationMap.register(bx);var _x=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_AXIS=1,null==t&&(t={}),n.softmax=(new hx).apply,n.axis=null==t.axis?n.DEFAULT_AXIS:t.axis,n}return Gv(t,e),t.prototype.call=function(e,t){var n=L_(e);return this.softmax(n,this.axis)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={axis:this.axis},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Softmax",t}(X_);Hv.rb.SerializationMap.register(_x);var wx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t}(Hv.rb.Serializable),xx=function(e){function t(t){var n=e.call(this)||this,r=null==t||null==t.l1?.01:t.l1,o=null==t||null==t.l2?.01:t.l2;return n.hasL1=0!==r,n.hasL2=0!==o,n.l1=ib(r),n.l2=ib(o),n}return Gv(t,e),t.prototype.apply=function(e){var t=this;return Object(Hv.Tb)(function(){var n=Object(Hv.fc)([1]);return t.hasL1&&(n=Object(Hv.f)(n,Object(Hv.Nb)(Object(Hv.Wa)(t.l1,Object(Hv.c)(e))))),t.hasL2&&(n=Object(Hv.f)(n,Object(Hv.Nb)(Object(Hv.Wa)(t.l2,f_(e))))),n.asScalar()})},t.prototype.getConfig=function(){return{l1:this.l1.dataSync()[0],l2:this.l2.dataSync()[0]}},t.fromConfig=function(e,t){return new e({l1:t.l1,l2:t.l2})},t.className="L1L2",t}(wx);Hv.rb.SerializationMap.register(xx);var Nx={l1l2:"L1L2"};function Ex(e){return vb(e)}function Ox(e,t){return void 0===t&&(t={}),bb(e,Hv.rb.SerializationMap.getMap().classNameMap,t,"regularizer")}function Cx(e){return null==e?null:"string"==typeof e?Ox({className:e in Nx?Nx[e]:e,config:{}}):e instanceof wx?e:Ox(e)}function Ix(e,t,n){if("number"==typeof e)return fb(e,t);if(e.length!==t)throw new ub("The "+n+" argument must be a tuple of "+t+" integers. Received: "+e.length+" elements.");for(var r=0;r<t;++r){var o=e[r];if(!Kb(o))throw new ub("The "+n+" argument must be a tuple of "+t+" integers. Received: "+JSON.stringify(e)+" including a non-integer number "+o)}return e}function Sx(e,t,n,r,o){return void 0===o&&(o=1),null==e?e:Math.floor((("same"===n?e:e-(t+(t-1)*(o-1))+1)+r-1)/r)}function Tx(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Qb([n-t,0]);else{if("same"!==r)throw new ub("Unsupport padding mode: "+r+".");e*=t}return e}function kx(e,t){return Object(Hv.Tb)(function(){return Lb(t),"channelsFirst"===t?Object(Hv.Xb)(e,[0,2,3,1]):e})}var Ax=function(e){function t(n,r){var o=e.call(this,r)||this;if(o.bias=null,o.DEFAULT_KERNEL_INITIALIZER="glorotNormal",o.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyConfig(r),o.rank=n,1!==o.rank&&2!==o.rank)throw new lb("Convolution layer for rank other than 1 or 2 ("+o.rank+") is not implemented yet.");if(o.kernelSize=Ix(r.kernelSize,n,"kernelSize"),o.strides=Ix(null==r.strides?1:r.strides,n,"strides"),o.padding=null==r.padding?"valid":r.padding,zb(o.padding),o.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,Lb(o.dataFormat),o.activation=gx(r.activation),o.useBias=null==r.useBias||r.useBias,o.biasInitializer=D_(r.biasInitializer||o.DEFAULT_BIAS_INITIALIZER),o.biasConstraint=Db(r.biasConstraint),o.biasRegularizer=Cx(r.biasRegularizer),o.activityRegularizer=Cx(r.activityRegularizer),o.dilationRate=Ix(null==r.dilationRate?1:r.dilationRate,n,"dilationRate"),1===o.rank&&Array.isArray(o.dilationRate)&&1!==o.dilationRate.length)throw new ub("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(o.dilationRate));if(2===o.rank)if("number"==typeof o.dilationRate)o.dilationRate=[o.dilationRate,o.dilationRate];else if(2!==o.dilationRate.length)throw new ub("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(o.dilationRate));return o}return Gv(t,e),t.verifyConfig=function(e){if(pb("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!Eb(e.kernelSize,"number",1,2))throw new ub("BaseConv expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(e.kernelSize)+".")},t.prototype.getConfig=function(){var t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:dx(this.activation),useBias:this.useBias,biasInitializer:M_(this.biasInitializer),biasRegularizer:Ex(this.biasRegularizer),activityRegularizer:Ex(this.activityRegularizer),biasConstraint:Pb(this.biasConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(X_),Px=function(e){function t(n,r){var o=e.call(this,n,r)||this;return o.kernel=null,t.verifyConfig(r),o.filters=r.filters,o.kernelInitializer=D_(r.kernelInitializer||o.DEFAULT_KERNEL_INITIALIZER),o.kernelConstraint=Db(r.kernelConstraint),o.kernelRegularizer=Cx(r.kernelRegularizer),o}return Gv(t,e),t.prototype.build=function(e){e=V_(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new ub("The channel dimension of the input should be defined. Found "+e[t]);var n,r=e[t],o=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(n={},n[t]=r,n)}],this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){var t;e=L_(e);var r=null==n.bias?null:n.bias.read();if(1===n.rank)t=function(e,t,n,r,o,i,a){return void 0===r&&(r=1),void 0===o&&(o="valid"),void 0===a&&(a=1),Object(Hv.Tb)(function(){if(null==i&&(i="channelsLast"),Lb(i),3!==e.shape.length)throw new ub("The input of a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead.");if(3!==t.shape.length)throw new ub("The kernel for a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead");if(null!=n&&1!==n.shape.length)throw new ub("The bias for a conv1dWithBias operation should be 1, but is "+t.shape.length+" instead");if("channelsFirst"===i&&(e=Object(Hv.Xb)(e,[0,2,1])),"causal"===o)throw new lb("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=Object(Hv.D)(e,t,r,"same"===o?"same":"valid","NWC",a);return null!=n&&(s=p_(s,n)),s})}(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=function(e,t,n,r,o,i,a){return void 0===r&&(r=[1,1]),void 0===o&&(o="valid"),Object(Hv.Tb)(function(){if(null==i&&(i="channelsLast"),Lb(i),3!==e.rank&&4!==e.rank)throw new ub("conv2dWithBias expects input to be of rank 3 or 4, but received "+e.rank+".");if(3!==t.rank&&4!==t.rank)throw new ub("conv2dWithBias expects kernel to be of rank 3 or 4, but received "+e.rank+".");var s=kx(e,i);if("causal"===o)throw new lb("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return s=Object(Hv.E)(s,t,r,"same"===o?"same":"valid","NHWC",a),null!=n&&(s=p_(s,n)),"channelsFirst"===i&&(s=Object(Hv.Xb)(s,[0,3,1,2])),s})}(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else if(3===n.rank)throw new lb("3D convolution is not implemented yet.");return null!=n.activation&&(t=n.activation.apply(t)),t})},t.prototype.computeOutputShape=function(e){e=V_(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var o=Sx(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(o)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i},t.prototype.getConfig=function(){var t={filters:this.filters,kernelInitializer:M_(this.kernelInitializer),kernelRegularizer:Ex(this.kernelRegularizer),kernelConstraint:Pb(this.kernelConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.verifyConfig=function(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new ub("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(e.filters))},t}(Ax),Mx=function(e){function t(n){var r=e.call(this,2,n)||this;return t.verifyConfig(n),r}return Gv(t,e),t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,t},t.verifyConfig=function(e){if("number"!=typeof e.kernelSize&&!Eb(e.kernelSize,"number",1,2))throw new ub("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(e.kernelSize)+".")},t.className="Conv2D",t}(Px);Hv.rb.SerializationMap.register(Mx);var Dx=function(e){function t(t){var n=e.call(this,t)||this;if(n.inputSpec=[new $_({ndim:4})],"same"!==n.padding&&"valid"!==n.padding)throw new ub("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+n.padding);return n}return Gv(t,e),t.prototype.build=function(e){if(4!==(e=V_(e)).length)throw new ub("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new ub("The channel dimension of the inputs should be defined. Found `None`.");var n,r=e[t],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new $_({ndim:4,axes:(n={},n[t]=r,n)})],this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){var t=L_(e);if(4!==t.shape.length)throw new ub("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+t.shape.length);var r,o,i=t.shape;"channelsFirst"===n.dataFormat?(r=2,o=3):(r=1,o=2);var a=i[o],s=n.kernelSize[1],u=n.strides[1],l=[i[0],Tx(i[r],n.strides[0],n.kernelSize[0],n.padding),Tx(a,u,s,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=Object(Hv.Xb)(t,[0,2,3,1]));var c=Object(Hv.F)(t,n.kernel.read(),l,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(c=Object(Hv.Xb)(c,[0,3,1,2])),null!=n.bias&&(c=p_(c,n.bias.read(),n.dataFormat)),null!=n.activation&&(c=n.activation.apply(c)),c})},t.prototype.computeOutputShape=function(e){var t,n,r,o=(e=V_(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],a=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return o[t]=this.filters,o[n]=Tx(o[n],s,i,this.padding),o[r]=Tx(o[r],u,a,this.padding),o},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.dilationRate,t},t.className="Conv2DTranspose",t}(Mx);Hv.rb.SerializationMap.register(Dx);var Rx=function(e){function t(t){return e.call(this,2,t)||this}return Gv(t,e),t.className="SeparableConv2D",t}(function(e){function t(t,n){var r=e.call(this,t,n)||this;if(r.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",r.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",r.depthwiseKernel=null,r.pointwiseKernel=null,null==n.filters)throw new ub("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=n.kernelInitializer||null!=n.kernelRegularizer||null!=n.kernelConstraint)throw new ub("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=n.padding&&"same"!==n.padding&&"valid"!==n.padding)throw new ub("SeparableConv"+r.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(n.padding));return r.depthMultiplier=null==n.depthMultiplier?1:n.depthMultiplier,r.depthwiseInitializer=D_(n.depthwiseInitializer||r.DEFAULT_DEPTHWISE_INITIALIZER),r.depthwiseRegularizer=Cx(n.depthwiseRegularizer),r.depthwiseConstraint=Db(n.depthwiseConstraint),r.pointwiseInitializer=D_(n.depthwiseInitializer||r.DEFAULT_POINTWISE_INITIALIZER),r.pointwiseRegularizer=Cx(n.pointwiseRegularizer),r.pointwiseConstraint=Db(n.pointwiseConstraint),r}return Gv(t,e),t.prototype.build=function(e){if((e=V_(e)).length<this.rank+2)throw new ub("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(e));var t,n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n]||e[n]<0)throw new ub("The channel dimension of the inputs should be defined, but found "+JSON.stringify(e[n]));for(var r=e[n],o=this.kernelSize.concat([r,this.depthMultiplier]),i=[],a=0;a<this.rank;++a)i.push(1);i.push(r*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.inputSpec=[new $_({ndim:this.rank+2,axes:(t={},t[n]=r,t)})],this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){var t;if(e=L_(e),1===n.rank)throw new lb("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=Object(Hv.Xb)(e,[0,2,3,1])),t=Object(Hv.qb)(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=p_(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=Object(Hv.Xb)(t,[0,3,1,2])),t})},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=M_(this.depthwiseInitializer),t.pointwiseInitializer=M_(this.pointwiseInitializer),t.depthwiseRegularizer=Ex(this.depthwiseRegularizer),t.pointwiseRegularizer=Ex(this.pointwiseRegularizer),t.depthwiseConstraint=Pb(this.depthwiseConstraint),t.pointwiseConstraint=Pb(this.pointwiseConstraint),t},t.className="SeparableConv",t}(Px));Hv.rb.SerializationMap.register(Rx);var jx=function(e){function t(n){var r=e.call(this,1,n)||this;return t.verifyConfig(n),r.inputSpec=[{ndim:3}],r}return Gv(t,e),t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,delete t.dataFormat,t},t.verifyConfig=function(e){if("number"!=typeof e.kernelSize&&!Eb(e.kernelSize,"number",1,1))throw new ub("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(e.kernelSize)+".")},t.className="Conv1D",t}(Px);Hv.rb.SerializationMap.register(jx);var Lx=function(e){function t(t){var n=e.call(this,t)||this;return n.cropping="number"==typeof t.cropping?[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"==typeof t.cropping[0]?[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:t.cropping,n.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,n.inputSpec=[{ndim:4}],n}return Gv(t,e),t.prototype.computeOutputShape=function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){return e=L_(e),"channelsLast"===n.dataFormat?o_(o_(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2),n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3):o_(o_(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3),n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)})},t.prototype.getConfig=function(){var t={cropping:this.cropping,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Cropping2D",t}(X_);Hv.rb.SerializationMap.register(Lx);var Vx=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_SIZE=[2,2],n.inputSpec=[{ndim:4}],n.size=null==t.size?n.DEFAULT_SIZE:t.size,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,n}return Gv(t,e),t.prototype.computeOutputShape=function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}return[e[0],t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2],e[3]]},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){var t=L_(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=Object(Hv.Xb)(t,[0,2,3,1]);var o=n.size[0]*r[2],i=n.size[1]*r[3],a=t.resizeNearestNeighbor([o,i]);return Object(Hv.Xb)(a,[0,3,1,2])}return t.resizeNearestNeighbor([o=n.size[0]*r[1],i=n.size[1]*r[2]])})},t.prototype.getConfig=function(){var t={size:this.size,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="UpSampling2D",t}(X_);Hv.rb.SerializationMap.register(Vx);var zx=function(e){function t(t){var n=e.call(this,2,t)||this;return n.depthwiseKernel=null,n.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,n.depthwiseInitializer=D_(t.depthwiseInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.depthwiseConstraint=Db(t.depthwiseConstraint),n.depthwiseRegularizer=Cx(t.depthwiseRegularizer),n}return Gv(t,e),t.prototype.build=function(e){if((e=V_(e)).length<4)throw new ub("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(e)+".");var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new ub("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+e[t]+").");var n=e[t];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){var t=function(e,t,n,r,o,i){return void 0===n&&(n=[1,1]),void 0===r&&(r="valid"),Object(Hv.Tb)(function(){null==o&&(o="channelsLast"),Lb(o);var i=kx(e,o);if(4!==e.rank)throw new ub("Input for depthwiseConv2d is required to be 4-D, but is instead "+e.rank+"-D");if(4!==t.rank)throw new ub("depthwiseKernel is required to be 4-D, but is instead "+t.rank+"-D");return i=Object(Hv.I)(i,t,n,"same"===r?"same":"valid","NHWC",null),"channelsFirst"===o&&(i=Object(Hv.Xb)(i,[0,3,1,2])),i})}(e=L_(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat);return n.useBias&&(t=p_(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t})},t.prototype.computeOutputShape=function(e){e=V_(e);var t="channelsFirst"===this.dataFormat?e[3]:e[2],n="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=Sx("channelsFirst"===this.dataFormat?e[2]:e[1],this.kernelSize[0],this.padding,this.strides[0]),o=Sx(t,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],n,r,o]:[e[0],r,o,n]},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=M_(this.depthwiseInitializer),t.depthwiseRegularizer=Ex(this.depthwiseRegularizer),t.depthwiseConstraint=Pb(this.depthwiseRegularizer),t},t.className="DepthwiseConv2D",t}(Ax);Hv.rb.SerializationMap.register(zx);var Fx=function(e){function t(t){var n=e.call(this,t)||this;if(n.rate=Math.max(Math.min(t.rate,1),0),n.rateScalar=ib(n.rate),n.noiseShape=t.noiseShape,n.seed=t.seed,null!=n.seed)throw new lb("Non-default seed is not implemented in Dropout layer yet: "+n.seed);return n.supportsMasking=!0,n}return Gv(t,e),t.prototype.getNoiseShape=function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){n.invokeCallHook(e,t);var r=L_(e);if(null!=n.noiseShape&&!Hv.ac.arraysEqual(r.shape,n.noiseShape))throw new lb("Non-default noise shape is not implemented in Dropout layer yet: "+JSON.stringify(n.noiseShape));if(0<n.rate&&n.rate<1){var o=null!=t.training&&t.training,i=n.getNoiseShape(r);return d_(function(){return h_(r,n.rateScalar,i,n.seed)},function(){return r},o)}return e})},t.prototype.getConfig=function(){var t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Dropout",t}(X_);Hv.rb.SerializationMap.register(Fx);var Bx=function(e){function t(t){var n=e.call(this,t)||this;if(n.activation=null,n.useBias=!0,n.kernel=null,n.bias=null,n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){var r=null;null!=t.batchSize&&(r=t.batchSize),n.batchInputShape=[r,t.inputDim]}return n.units=t.units,n.activation=gx(t.activation),null!=t.useBias&&(n.useBias=t.useBias),n.kernelInitializer=D_(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.biasInitializer=D_(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelConstraint=Db(t.kernelConstraint),n.biasConstraint=Db(t.biasConstraint),n.kernelRegularizer=Cx(t.kernelRegularizer),n.biasRegularizer=Cx(t.biasRegularizer),n.activityRegularizer=Cx(t.activityRegularizer),n.inputSpec=[{minNDim:2}],n}return Gv(t,e),t.prototype.build=function(e){var t,n=(e=V_(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(t={},t[-1]=n,t)}],this.built=!0},t.prototype.computeOutputShape=function(e){var t=(e=V_(e)).slice();return t[t.length-1]=this.units,t},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){n.invokeCallHook(e,t);var r=l_(L_(e),n.kernel.read());return null!=n.bias&&(r=p_(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r)),r})},t.prototype.getConfig=function(){var t={units:this.units,activation:dx(this.activation),useBias:this.useBias,kernelInitializer:M_(this.kernelInitializer),biasInitializer:M_(this.biasInitializer),kernelRegularizer:Ex(this.kernelRegularizer),biasRegularizer:Ex(this.biasRegularizer),activityRegularizer:Ex(this.activityRegularizer),kernelConstraint:Pb(this.kernelConstraint),biasConstraint:Pb(this.biasConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Dense",t}(X_);Hv.rb.SerializationMap.register(Bx);var Ux=function(e){function t(t){var n=e.call(this,t||{})||this;return n.inputSpec=[{minNDim:3}],n}return Gv(t,e),t.prototype.computeOutputShape=function(e){for(var t=0,n=(e=V_(e)).slice(1);t<n.length;t++)if(null==n[t])throw new ub('The shape of the input to "Flatten" is not fully defined (got '+e.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],Xb(e,1)]},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){return n.invokeCallHook(e,t),function(e){if(e.rank<=1)throw new ub("batchFlatten requires a minimum rank of 2. Got rank: "+e.rank+".");var t=[e.shape[0],Xb(e.shape,1)];return e.reshape(t)}(L_(e))})},t.className="Flatten",t}(X_);Hv.rb.SerializationMap.register(Ux);var Wx=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.activation=gx(t.activation),n}return Gv(t,e),t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){n.invokeCallHook(e,t);var r=L_(e);return n.activation.apply(r)})},t.prototype.getConfig=function(){var t={activation:dx(this.activation)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Activation",t}(X_);Hv.rb.SerializationMap.register(Wx);var $x=function(e){function t(t){var n=e.call(this,t)||this;return n.n=t.n,n.inputSpec=[{ndim:2}],n}return Gv(t,e),t.prototype.computeOutputShape=function(e){return[e[0],this.n,e[1]]},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){return function(e,t){return Object(Hv.Tb)(function(){if(2!==e.shape.length)throw new ub("repeat() expects a rank-2 tensor, but received a rank-"+e.shape.length+" tensor.");return s_(t_(e,1),[1,t,1])})}(e=L_(e),n.n)})},t.prototype.getConfig=function(){var t={n:this.n},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="RepeatVector",t}(X_);Hv.rb.SerializationMap.register($x);var Hx=function(e){function t(t){var n=e.call(this,t)||this;n.targetShape=t.targetShape;for(var r=0;r<n.targetShape.length;++r)n.isUnknown(n.targetShape[r])&&(n.targetShape[r]=null);return n}return Gv(t,e),t.prototype.isUnknown=function(e){return e<0||null==e},t.prototype.fixUnknownDimension=function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),o=1,i=null,a=0;a<r.length;++a){var s=r[a];if(this.isUnknown(s)){if(null!==i)throw new ub("Can only specifiy one unknown dimension.");i=a}else o*=s}var u=Xb(e);if(null!==i){if(0===o||u%o!=0)throw new ub(n);r[i]=u/o}else if(u!==o)throw new ub(n);return r},t.prototype.computeOutputShape=function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){n.invokeCallHook(e,t);var r=L_(e),o=r.shape,i=o.slice(0,1).concat(n.fixUnknownDimension(o.slice(1),n.targetShape));return r.reshape(i)})},t.prototype.getConfig=function(){var t={targetShape:this.targetShape},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Reshape",t}(X_);Hv.rb.SerializationMap.register(Hx);var qx=function(e){function t(t){var n=e.call(this,t)||this;if(null==t.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+t.dims+" instead.");var r=Jb(1,t.dims.length+1);if(!Hv.ac.arraysEqual(t.dims.slice().sort(),r))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");return n.dims=t.dims,n.dimsIncludingBatch=[0].concat(n.dims),n.inputSpec=[new $_({ndim:n.dims.length+1})],n}return Gv(t,e),t.prototype.computeOutputShape=function(e){var t=(e=V_(e)).slice();return this.dims.forEach(function(n,r){t[r+1]=e[n]}),t},t.prototype.call=function(e,t){return Object(Hv.Xb)(L_(e),this.dimsIncludingBatch)},t.prototype.getConfig=function(){var t={dims:this.dims},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Permute",t}(X_);Hv.rb.SerializationMap.register(qx);var Gx=function(e){function t(t){var n=e.call(this,t)||this;if(n.embeddings=null,n.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){var r=null;null!=t.batchSize&&(r=t.batchSize),n.batchInputShape=null==t.inputLength?[r,null]:[r].concat(mb(t.inputLength))}return n.inputDim=t.inputDim,n.outputDim=t.outputDim,n.embeddingsInitializer=D_(t.embeddingsInitializer||n.DEFAULT_EMBEDDINGS_INITIALIZER),n.embeddingsRegularizer=Cx(t.embeddingsRegularizer),n.activityRegularizer=Cx(t.activityRegularizer),n.embeddingsConstraint=Db(t.embeddingsConstraint),n.maskZero=t.maskZero,n.inputLength=t.inputLength,n}return Gv(t,e),t.prototype.build=function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},t.prototype.warnOnIncompatibleInputShape=function(e){},t.prototype.computeMask=function(e,t){throw new lb("computeMask has not been implemented for Embedding yet")},t.prototype.computeOutputShape=function(e){if(e=V_(e),null==this.inputLength)return e.concat([this.outputDim]);var t=mb(this.inputLength);if(t.length!==e.length-1)throw new ub('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);for(var n=0,r=0;r<t.length;++r){var o=t[r],i=e[r+1];if(null!=o&&null!=i&&o!==i)throw new ub('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);null==o&&(t[n]=i),n++}return[e[0]].concat(t,[this.outputDim])},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){n.invokeCallHook(e,t);var r=L_(e);return"int32"!==r.dtype&&(r=e_(r,"int32")),c_(n.embeddings.read(),r.as1D()).reshape(V_(n.computeOutputShape(r.shape)))})},t.prototype.getConfig=function(){var t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:M_(this.embeddingsInitializer),embeddingsRegularizer:Ex(this.embeddingsRegularizer),activityRegularizer:Ex(this.activityRegularizer),embeddingsConstraint:Pb(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Embedding",t}(X_);Hv.rb.SerializationMap.register(Gx);var Kx=function(e){function t(t){var n=e.call(this,t||{})||this;return n.supportsMasking=!0,n}return Gv(t,e),t.prototype.mergeFunction=function(e){throw new lb},t.prototype.computeElementwiseOpOutputShape=function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var o=e[e.length-t.length+r],i=t[r];if(null==o||null==i||o<0||i<0)n.push(null);else if(1===o)n.push(i);else if(1===i)n.push(o);else{if(o!==i)throw new ub("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(o)}}return n},t.prototype.build=function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[V_(e)]),(e=e).length<2)throw new ub("A merge layer should be called on an Array of at least 2 inputs. Got "+e.length+" input(s).");for(var t=[],n=0,r=e;n<r.length;n++)null!=(a=r[n])&&null!==a[0]&&t.push(a[0]);if((t=wb(t)).length>1)throw new ub("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(e)+".");for(var o=null==e[0]?null:e[0].slice(1),i=1;i<e.length;++i){var a=null==e[i]?null:e[i].slice(1);o=this.computeElementwiseOpOutputShape(o,a)}var s=e.map(function(e){return e.length});this.reshapeRequired=-1!==e.indexOf(null)||1!==wb(s).length},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){if(e=e,n.reshapeRequired){var t=[],r=e.map(function(e){return e.rank});if(-1===r.indexOf(null)){for(var o=Qb(r),i=0,a=e;i<a.length;i++){for(var s=(p=a[i]).rank,u=0;u<o-s;++u)p=t_(p,1);t.push(p)}return n.mergeFunction(t)}for(var l=!1,c=0,f=e;c<f.length;c++){var p;if(null==(s=(p=f[c]).rank)){var h=p.shape,d=h[0],m=h.slice(1).concat([d]),g=p.reshape([d].concat(Xb(h.slice(1))));g=(g=Object(Hv.Xb)(g,[1,0])).reshape(m),t.push(g),l=!0}else if(s>1){var y=Jb(1,s).concat([0]);t.push(Object(Hv.Xb)(p,y)),l=!0}else t.push(p)}var v=n.mergeFunction(t),b=v.rank;if(l)if(null==b){var _=v.shape;m=[d=_[_.length-1]].concat(_.slice(0,_.length-1)),v=Object(Hv.Xb)(v.reshape([-1,d]),[1,0]).reshape(m)}else b>1&&(y=[b-1].concat(Jb(0,b-1)),v=Object(Hv.Xb)(v,y));return v}return n.mergeFunction(e)})},t.prototype.computeOutputShape=function(e){var t;t=null==(e=e)[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}for(var o=[],i=0,a=e;i<a.length;i++)null!=(r=a[i])&&null!==r[0]&&o.push(r[0]);return 1===(o=wb(o)).length?o.concat(t):[null].concat(t)},t}(X_),Xx=function(e){function t(t){return e.call(this,t)||this}return Gv(t,e),t.prototype.mergeFunction=function(e){return Object(Hv.Tb)(function(){for(var t=Object(Hv.fc)(e[0].shape),n=0,r=e;n<r.length;n++){var o=r[n];t=Object(Hv.f)(t,o)}return t})},t.className="Add",t}(Kx);Hv.rb.SerializationMap.register(Xx);var Zx=function(e){function t(t){return e.call(this,t)||this}return Gv(t,e),t.prototype.mergeFunction=function(e){return Object(Hv.Tb)(function(){for(var t=Object(Hv.cb)(e[0].shape),n=0,r=e;n<r.length;n++){var o=r[n];t=Object(Hv.Wa)(t,o)}return t})},t.className="Multiply",t}(Kx);Hv.rb.SerializationMap.register(Zx);var Yx=function(e){function t(t){return e.call(this,t)||this}return Gv(t,e),t.prototype.mergeFunction=function(e){return Object(Hv.Tb)(function(){for(var t=Object(Hv.fc)(e[0].shape),n=0,r=e;n<r.length;n++){var o=r[n];t=Object(Hv.f)(t,o)}return Object(Hv.Wa)(ib(1/e.length),t)})},t.className="Average",t}(Kx);Hv.rb.SerializationMap.register(Yx);var Qx=function(e){function t(t){return e.call(this,t)||this}return Gv(t,e),t.prototype.mergeFunction=function(e){return Object(Hv.Tb)(function(){for(var t=e[0],n=1;n<e.length;++n)t=Object(Hv.Pa)(t,e[n]);return t})},t.className="Maximum",t}(Kx);Hv.rb.SerializationMap.register(Qx);var Jx=function(e){function t(t){return e.call(this,t)||this}return Gv(t,e),t.prototype.mergeFunction=function(e){return Object(Hv.Tb)(function(){for(var t=e[0],n=1;n<e.length;++n)t=Object(Hv.Sa)(t,e[n]);return t})},t.className="Minimum",t}(Kx);Hv.rb.SerializationMap.register(Jx);var eN=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_AXIS=-1,null==t&&(t={}),n.axis=null==t.axis?n.DEFAULT_AXIS:t.axis,n.supportsMasking=!0,n.reshapeRequired=!1,n}return Gv(t,e),t.prototype.build=function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new ub("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var t=!0,n=0,r=e=e;n<r.length;n++)if(null!=(c=r[n])){t=!1;break}if(!t){for(var o=[],i=0;i<e.length;++i){var a=e[i].slice();a.splice(this.axis,1);for(var s=!1,u=0,l=o;u<l.length;u++){var c=l[u];if(Hv.ac.arraysEqual(c,a)){s=!0;break}}s||o.push(a)}if(o.length>1)throw new ub("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}},t.prototype.mergeFunction=function(e){var t=this;return Object(Hv.Tb)(function(){return i_(e,t.axis)})},t.prototype.computeOutputShape=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new ub("A `Concatenate` layer should be called on a list of inputs.");for(var t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis,o=0,i=t.slice(1);o<i.length;o++){var a=i[o];if(null==n[r]||null==a[r]){n[r]=null;break}n[r]+=a[r]}return n},t.prototype.getConfig=function(){var t={axis:this.axis},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Concatenate",t}(Kx);function tN(e,t,n,r,o,i){var a;if(void 0===i&&(i=.001),2===e.rank)a=Object(Hv.r)(e,t,n,i,o,r);else if(3===e.rank)a=Object(Hv.s)(e,t,n,i,o,r);else{if(4!==e.rank)throw new lb("batchNormalization is not implememnted for array of rank "+e.rank+" yet");a=Object(Hv.t)(e,t,n,i,o,r)}return a}Hv.rb.SerializationMap.register(eN);var nN=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.axis=null==t.axis?-1:t.axis,n.momentum=null==t.momentum?.99:t.momentum,n.epsilon=null==t.epsilon?.001:t.epsilon,n.center=null==t.center||t.center,n.scale=null==t.scale||t.scale,n.betaInitializer=D_(t.betaInitializer||"zeros"),n.gammaInitializer=D_(t.gammaInitializer||"ones"),n.movingMeanInitializer=D_(t.movingMeanInitializer||"zeros"),n.movingVarianceInitializer=D_(t.movingVarianceInitializer||"ones"),n.betaConstraint=Db(t.betaConstraint),n.gammaConstraint=Db(t.gammaConstraint),n.betaRegularizer=Cx(t.betaRegularizer),n.gammaRegularizer=Cx(t.gammaRegularizer),n.stepCount=0,n}return Gv(t,e),t.prototype.build=function(e){e=V_(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new ub("Axis "+t+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(e)+".");this.inputSpec=[new $_({ndim:e.length,axes:(r={},r[t]=n,r)})];var r,o=[n];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){var r=null!=t.training&&t.training,o=L_(e),i=o.shape,a=i.length,s=Jb(0,a),u=n.axis>=0?n.axis:n.axis+a;s.splice(u,1);var l=fb(1,a);l[u]=i[u];var c=s.slice();c.sort();var f=!Hv.ac.arraysEqual(c,Jb(0,a).slice(0,a-1));if(!r)return function(){if(f){var e=n.movingMean.read().reshape(l),t=n.movingVariance.read().reshape(l),r=n.center?n.beta.read().reshape(l):null,i=n.scale?n.gamma.read().reshape(l):null;return tN(o,e,t,r,i,n.epsilon)}return tN(o,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var p=function(e,t,n,r,o){return void 0===o&&(o=.001),Hv.ac.arraysEqual(r.slice().sort(),Jb(0,e.rank-1))?function(e,t,n,r,o){return void 0===o&&(o=.001),Object(Hv.Tb)(function(){var i=Object(Hv.Ua)(e,r),a=i.mean,s=i.variance;return[tN(e,a,s,n,t,o),a,s]})}(e,t,n,r,o):function(e,t,n,r,o){return void 0===o&&(o=.001),Object(Hv.Tb)(function(){for(var i=Object(Hv.Ua)(e,r),a=i.mean,s=i.variance,u=[],l=0,c=Jb(0,e.rank);l<c.length;l++){var f=c[l];-1!==r.indexOf(f)?u.push(1):u.push(e.shape[f])}var p=a.reshape(u),h=s.reshape(u),d=null==t?null:t.reshape(u),m=null==n?null:n.reshape(u);return[tN(e,p,h,m,d,o),a,s]})}(e,t,n,r,o)}(o,n.gamma.read(),n.beta.read(),s,n.epsilon),h=p[0],d=p[1],m=p[2],g=Xb(s.map(function(e){return o.shape[e]})),y=m.mul(ib(g/(g-(1+n.epsilon))));return function(){n.stepCount++;var e=Object(Hv.Va)(n.movingMean.read(),d,n.momentum,n.stepCount);n.movingMean.write(e);var t=Object(Hv.Va)(n.movingVariance.read(),y,n.momentum,n.stepCount);n.movingVariance.write(t)}(),h})},t.prototype.getConfig=function(){var t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:M_(this.betaInitializer),gammaInitializer:M_(this.gammaInitializer),movingMeanInitializer:M_(this.movingMeanInitializer),movingVarianceInitializer:M_(this.movingVarianceInitializer),betaRegularizer:Ex(this.betaRegularizer),gammaRegularizer:Ex(this.gammaRegularizer),betaConstraint:Pb(this.betaConstraint),gammaConstraint:Pb(this.gammaConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="BatchNormalization",t}(X_);Hv.rb.SerializationMap.register(nN);var rN=function(e){function t(t){var n=this;if(null==t&&(t={}),(n=e.call(this,t)||this).dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,null==t.padding)n.padding=[[1,1],[1,1]];else if("number"==typeof t.padding)n.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new ub("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+t.padding.length+" array.");var r=void 0,o=void 0;if("number"==typeof t.padding[0])r=[t.padding[0],t.padding[0]],o=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new ub("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+t.padding[0].length+" array.");if(r=t.padding[0],2!==t.padding[1].length)throw new ub("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+t.padding[1].length+" array.");o=t.padding[1]}n.padding=[r,o]}return n.inputSpec=[new $_({ndim:4})],n}return Gv(t,e),t.prototype.computeOutputShape=function(e){return e=V_(e),"channelsFirst"===this.dataFormat?[e[0],e[1],null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null]:[e[0],null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,e[3]]},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){return function(e,t,n){return Object(Hv.Tb)(function(){if(4!==e.rank)throw new ub("temporalPadding expects input tensor to be 4-D, but received a "+e.rank+"-D tensor.");if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new ub("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new ub("Unknown data format: "+n+". Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],Object(Hv.eb)(e,r)})}(L_(e),n.padding,n.dataFormat)})},t.prototype.getConfig=function(){var t={padding:this.padding,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ZeroPadding2D",t}(X_);function oN(e,t,n,r,o,i){return Object(Hv.Tb)(function(){var a;Lb(o),Nb(Fb,"PoolMode",i),zb(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==o&&(o="channelsLast"),null==i&&(i="max"),e=kx(e,o);var s="same"===r?"same":"valid";return a="max"===i?Object(Hv.Oa)(e,t,n,s):Object(Hv.p)(e,t,n,s),"channelsFirst"===o&&(a=Object(Hv.Xb)(a,[0,3,1,2])),a})}Hv.rb.SerializationMap.register(rN);var iN=function(e){function t(t){var n=this;if(null==t.poolSize&&(t.poolSize=2),n=e.call(this,t)||this,"number"==typeof t.poolSize)n.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!=typeof t.poolSize[0])throw new ub("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.poolSize));n.poolSize=t.poolSize}if(null==t.strides)n.strides=n.poolSize;else if("number"==typeof t.strides)n.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!=typeof t.strides[0])throw new ub("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.strides));n.strides=t.strides}return n.padding=null==t.padding?"valid":t.padding,zb(n.padding),n.inputSpec=[new $_({ndim:3})],n}return Gv(t,e),t.prototype.computeOutputShape=function(e){var t=Sx((e=V_(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){n.invokeCallHook(e,t),e=t_(L_(e),2);var r=n.poolingFunction(L_(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Object(Hv.Ib)(r,[2])})},t.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(X_),aN=function(e){function t(t){return e.call(this,t)||this}return Gv(t,e),t.prototype.poolingFunction=function(e,t,n,r,o){return Lb(o),zb(r),oN(e,t,n,r,o,"max")},t.className="MaxPooling1D",t}(iN);Hv.rb.SerializationMap.register(aN);var sN=function(e){function t(t){return e.call(this,t)||this}return Gv(t,e),t.prototype.poolingFunction=function(e,t,n,r,o){return Lb(o),zb(r),oN(e,t,n,r,o,"avg")},t.className="AveragePooling1D",t}(iN);Hv.rb.SerializationMap.register(sN);var uN=function(e){function t(t){var n=this;if(null==t.poolSize&&(t.poolSize=[2,2]),(n=e.call(this,t)||this).poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)n.strides=n.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new ub("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+t.strides.length+".");n.strides=t.strides}else n.strides=[t.strides,t.strides];return n.padding=null==t.padding?"valid":t.padding,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Lb(n.dataFormat),zb(n.padding),n.inputSpec=[new $_({ndim:4})],n}return Gv(t,e),t.prototype.computeOutputShape=function(e){e=V_(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=Sx(t,this.poolSize[0],this.padding,this.strides[0]),n=Sx(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){return n.invokeCallHook(e,t),n.poolingFunction(L_(e),n.poolSize,n.strides,n.padding,n.dataFormat)})},t.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(X_),lN=function(e){function t(t){return e.call(this,t)||this}return Gv(t,e),t.prototype.poolingFunction=function(e,t,n,r,o){return Lb(o),zb(r),oN(e,t,n,r,o,"max")},t.className="MaxPooling2D",t}(uN);Hv.rb.SerializationMap.register(lN);var cN=function(e){function t(t){return e.call(this,t)||this}return Gv(t,e),t.prototype.poolingFunction=function(e,t,n,r,o){return Lb(o),zb(r),oN(e,t,n,r,o,"avg")},t.className="AveragePooling2D",t}(uN);Hv.rb.SerializationMap.register(cN);var fN=function(e){function t(t){var n=e.call(this,t)||this;return n.inputSpec=[new $_({ndim:3})],n}return Gv(t,e),t.prototype.computeOutputShape=function(e){return[e[0],e[2]]},t.prototype.call=function(e,t){throw new lb},t}(X_),pN=function(e){function t(t){return e.call(this,t)||this}return Gv(t,e),t.prototype.call=function(e,t){return Object(Hv.Tb)(function(){var t=L_(e);return Object(Hv.Qa)(t,1)})},t.className="GlobalAveragePooling1D",t}(fN);Hv.rb.SerializationMap.register(pN);var hN=function(e){function t(t){return e.call(this,t)||this}return Gv(t,e),t.prototype.call=function(e,t){return Object(Hv.Tb)(function(){var t=L_(e);return Object(Hv.Na)(t,1)})},t.className="GlobalMaxPooling1D",t}(fN);Hv.rb.SerializationMap.register(hN);var dN=function(e){function t(t){var n=e.call(this,t)||this;return n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Lb(n.dataFormat),n.inputSpec=[new $_({ndim:4})],n}return Gv(t,e),t.prototype.computeOutputShape=function(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]},t.prototype.call=function(e,t){throw new lb},t.prototype.getConfig=function(){var t={dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(X_),mN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){var t=L_(e);return"channelsLast"===n.dataFormat?Object(Hv.Qa)(t,[1,2]):Object(Hv.Qa)(t,[2,3])})},t.className="GlobalAveragePooling2D",t}(dN);Hv.rb.SerializationMap.register(mN);var gN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){var t=L_(e);return"channelsLast"===n.dataFormat?Object(Hv.Na)(t,[1,2]):Object(Hv.Na)(t,[2,3])})},t.className="GlobalMaxPooling2D",t}(dN);function yN(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new ub("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function o(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=o(t),constants:n=o(n)}}function vN(e,t,n,r,o,i,a,s){void 0===r&&(r=!1),void 0===a&&(a=!1);var u=t.shape.length;if(u<3)throw new ub("Input should be at least 3D, but is "+u+"D.");var l,c,f=[1,0].concat(Jb(2,u));if(t=Object(Hv.Xb)(t,f),null!=o)throw new lb("The rnn() function of the deeplearn.js backend does not support masking yet.");if(null!=i)throw new lb("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),r&&(t=Object(Hv.mb)(t,0));for(var p=n,h=t.shape[0],d=0;d<h;++d){var m=n_(t,d,1),g=e(m=m.reshape(m.shape.slice(1)),p);c=g[0],l=0===d?c.reshape([1].concat(c.shape)):a_(l,c.reshape([1].concat(c.shape))),p=g[1]}return[c,Object(Hv.Xb)(l,[1,0].concat(Jb(2,l.shape.length))),p]}Hv.rb.SerializationMap.register(gN);var bN=function(e){function t(t){var n,r=e.call(this,t)||this;if(null==t.cell)throw new ub("cell property is missing for the constructor of RNN.");if(null==(n=Array.isArray(t.cell)?new IN({cells:t.cell}):t.cell).stateSize)throw new ub("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=n,r.returnSequences=null!=t.returnSequences&&t.returnSequences,r.returnState=null!=t.returnState&&t.returnState,r.goBackwards=null!=t.goBackwards&&t.goBackwards,r._stateful=null!=t.stateful&&t.stateful,r.unroll=null!=t.unroll&&t.unroll,r.supportsMasking=!0,r.inputSpec=[new $_({ndim:3})],r.stateSpec=null,r.states=null,r.numConstants=null,r}return Gv(t,e),t.prototype.getStates=function(){return null==this.states?Jb(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(function(e){return null}):this.states},t.prototype.setStates=function(e){this.states=e},t.prototype.computeOutputShape=function(e){R_(e)&&(e=e[0]),e=e;var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){for(var o=[],i=0,a=t;i<a.length;i++)o.push([e[0],a[i]]);return[n].concat(o)}return n},t.prototype.computeMask=function(e,t){throw new lb("computeMask has not been implemented for RNN yet")},t.prototype.build=function(e){if(null!=this.numConstants)throw new lb("Constants support is not implemented in RNN yet.");R_(e)&&(e=e[0]),e=e,this.inputSpec[0]=new $_({shape:[this.stateful?e[0]:null,null,e[e.length-1]]});var t,n=[e[0]].concat(e.slice(2));if(this.cell.build(n),t=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Hv.ac.arraysEqual(this.stateSpec.map(function(e){return e.shape[e.shape.length-1]}),t))throw new ub("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=t.map(function(e){return new $_({shape:[null,e]})});if(this.stateful)throw new lb("stateful RNN layer is not implemented yet")},t.prototype.resetStates=function(e){var t=this;Object(Hv.Tb)(function(){if(!t.stateful)throw new ab("Cannot call resetState() on an RNN Layer that is not stateful.");var n=t.inputSpec[0].shape[0];if(null==n)throw new ub("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states)t.states=Array.isArray(t.cell.stateSize)?t.cell.stateSize.map(function(e){return Object(Hv.fc)([n,e])}):[Object(Hv.fc)([n,t.cell.stateSize])];else if(null==e)Array.isArray(t.cell.stateSize)?t.states=t.cell.stateSize.map(function(e){return Object(Hv.fc)([n,e])}):t.states[0]=Object(Hv.fc)([n,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states.length)throw new ub("Layer "+t.name+" expects "+t.states.length+" state(s), but it received "+e.length+" state value(s). Input received: "+e);for(var r=0;r<t.states.length;++r){var o=e[r],i=Array.isArray(t.cell.stateSize)?t.cell.stateSize[r]:t.cell.stateSize,a=[n,i];if(!Hv.ac.arraysEqual(o.shape,a))throw new ub("State "+r+" is incompatible with layer "+t.name+": expected shape="+a+", received shape="+o.shape);t.states[r]=o}}})},t.prototype.apply=function(t,n){var r=null==n?null:n.initialState,o=null==n?null:n.constants;null==n&&(n={});var i=yN(t,r,o,this.numConstants);t=i.inputs,o=i.constants;var a=[],s=[];if(null!=(r=i.initialState)){n.initialState=r,a=a.concat(r),this.stateSpec=[];for(var u=0,l=r;u<l.length;u++)this.stateSpec.push(new $_({shape:l[u].shape}));s=s.concat(this.stateSpec)}if(null!=o&&(n.constants=o,a=a.concat(o),this.numConstants=o.length),a[0]instanceof H_){var c=[t].concat(a),f=this.inputSpec.concat(s),p=this.inputSpec;this.inputSpec=f;var h=e.prototype.apply.call(this,c,n);return this.inputSpec=p,h}return e.prototype.apply.call(this,t,n)},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){var r=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;if(e=L_(e),null==i){if(n.stateful)throw new lb("stateful RNN layer is not implemented yet.");i=n.getInitialState(e)}if(null!=r)throw new lb("Masking is not implemented for RNN yet");var a=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==a)throw new ub("RNN Layer has "+a+" state(s) but was passed "+i.length+" initial state(s).");n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:o},u=vN(function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]},e,i,n.goBackwards,null,null,n.unroll),l=u[0],c=u[1],f=u[2];if(n.stateful)throw new lb("stateful RNN layer is not implemented yet");var p=n.returnSequences?c:l;return n.returnState?[p].concat(f):p})},t.prototype.getInitialState=function(e){var t=this;return Object(Hv.Tb)(function(){var n=Object(Hv.fc)(e.shape);return n=t_(n=Object(Hv.Nb)(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map(function(e){return e>1?s_(n,[1,e]):n}):t.cell.stateSize>1?[s_(n,[1,t.cell.stateSize])]:[n]})},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var n=this.cell.getConfig();t.cell={className:this.cell.getClassName(),config:n};var r=e.prototype.getConfig.call(this);return Object.assign(t,r),t},t.className="RNN",t}(X_);Hv.rb.SerializationMap.register(bN);var _N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t}(X_),wN=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,n.activation=gx(null==t.activation?n.DEFAULT_ACTIVATION:t.activation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=D_(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=D_(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=D_(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=Cx(t.kernelRegularizer),n.recurrentRegularizer=Cx(t.recurrentRegularizer),n.biasRegularizer=Cx(t.biasRegularizer),n.kernelConstraint=Db(t.kernelConstraint),n.recurrentConstraint=Db(t.recurrentConstraint),n.biasConstraint=Db(t.biasConstraint),n.dropout=Yb([1,Qb([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=Yb([1,Qb([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return Gv(t,e),t.prototype.build=function(e){e=V_(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){if(2!==(e=e).length)throw new ub("SimpleRNNCell expects 2 input Tensors, got "+e.length+".");var r=e[1];e=e[0];var o,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=SN(function(){return Object(Hv.db)(e)},n.dropout,i)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=SN(function(){return Object(Hv.db)(r)},n.recurrentDropout,i));var a=n.dropoutMask,s=n.recurrentDropoutMask;o=l_(null!=a?Object(Hv.Wa)(e,a):e,n.kernel.read()),null!=n.bias&&(o=p_(o,n.bias.read())),null!=s&&(r=Object(Hv.Wa)(r,s));var u=Object(Hv.f)(o,l_(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]})},t.prototype.getConfig=function(){var t={units:this.units,activation:dx(this.activation),useBias:this.useBias,kernelInitializer:M_(this.kernelInitializer),recurrentInitializer:M_(this.recurrentInitializer),biasInitializer:M_(this.biasInitializer),kernelRegularizer:Ex(this.kernelRegularizer),recurrentRegularizer:Ex(this.recurrentRegularizer),biasRegularizer:Ex(this.biasRegularizer),activityRegularizer:Ex(this.activityRegularizer),kernelConstraint:Pb(this.kernelConstraint),recurrentConstraint:Pb(this.recurrentConstraint),biasConstraint:Pb(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="SimpleRNNCell",t}(_N);Hv.rb.SerializationMap.register(wN);var xN=function(e){function t(t){return t.cell=new wN(t),e.call(this,t)||this}return Gv(t,e),t.prototype.call=function(t,n){var r=this;return Object(Hv.Tb)(function(){return null!=r.cell.dropoutMask&&(Object(Hv.J)(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Object(Hv.J)(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),e.prototype.call.call(r,t,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})})},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={units:this.units,activation:dx(this.activation),useBias:this.useBias,kernelInitializer:M_(this.kernelInitializer),recurrentInitializer:M_(this.recurrentInitializer),biasInitializer:M_(this.biasInitializer),kernelRegularizer:Ex(this.kernelRegularizer),recurrentRegularizer:Ex(this.recurrentRegularizer),biasRegularizer:Ex(this.biasRegularizer),activityRegularizer:Ex(this.activityRegularizer),kernelConstraint:Pb(this.kernelConstraint),recurrentConstraint:Pb(this.recurrentConstraint),biasConstraint:Pb(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},t.className="SimpleRNN",t}(bN);Hv.rb.SerializationMap.register(xN);var NN=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,n.activation=gx(void 0===t.activation?n.DEFAULT_ACTIVATION:t.activation),n.recurrentActivation=gx(void 0===t.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=D_(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=D_(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=D_(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=Cx(t.kernelRegularizer),n.recurrentRegularizer=Cx(t.recurrentRegularizer),n.biasRegularizer=Cx(t.biasRegularizer),n.kernelConstraint=Db(t.kernelConstraint),n.recurrentConstraint=Db(t.recurrentConstraint),n.biasConstraint=Db(t.biasConstraint),n.dropout=Yb([1,Qb([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=Yb([1,Qb([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.implementation=t.implementation,n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return Gv(t,e),t.prototype.build=function(e){var t=(e=V_(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){if(2!==(e=e).length)throw new ub("GRUCell expects 2 input Tensors (inputs, h, c), got "+e.length+".");var r=null!=t.training&&t.training,o=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=SN(function(){return Object(Hv.db)(e)},n.dropout,r,3)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=SN(function(){return Object(Hv.db)(o)},n.recurrentDropout,r,3));var i,a,s,u=n.dropoutMask,l=n.recurrentDropoutMask;if(1===n.implementation){var c=r_(n.kernel.read(),0,n.units),f=r_(n.kernel.read(),n.units,n.units),p=r_(n.kernel.read(),2*n.units,n.units),h=r_(n.recurrentKernel.read(),0,n.units),d=r_(n.recurrentKernel.read(),n.units,n.units),m=r_(n.recurrentKernel.read(),2*n.units,n.units),g=void 0,y=void 0,v=void 0;0<n.dropout&&n.dropout<1?(g=Object(Hv.Wa)(e,u[0]),y=Object(Hv.Wa)(e,u[1]),v=Object(Hv.Wa)(e,u[2])):(g=e,y=e,v=e);var b=l_(g,c),_=l_(y,f),w=l_(v,p);if(n.useBias){var x=n_(n.bias.read(),0,n.units),N=n_(n.bias.read(),n.units,n.units),E=n_(n.bias.read(),2*n.units,n.units);b=p_(b,x),_=p_(_,N),w=p_(w,E)}var O=void 0,C=void 0,I=void 0;0<n.recurrentDropout&&n.recurrentDropout<1?(O=Object(Hv.Wa)(o,l[0]),C=Object(Hv.Wa)(o,l[1]),I=Object(Hv.Wa)(o,l[2])):(O=o,C=o,I=o),i=n.recurrentActivation.apply(Object(Hv.f)(b,l_(O,h))),a=n.recurrentActivation.apply(Object(Hv.f)(_,l_(C,d))),s=n.activation.apply(Object(Hv.f)(w,l_(Object(Hv.Wa)(a,I),m)))}else{0<n.dropout&&n.dropout<1&&(e=Object(Hv.Wa)(e,u[0]));var S=l_(e,n.kernel.read());n.useBias&&(S=p_(S,n.bias.read())),0<n.dropout&&n.dropout<1&&(o=Object(Hv.Wa)(o,l[0]));var T=l_(o,r_(n.recurrentKernel.read(),0,2*n.units)),k=(b=r_(S,0,n.units),_=r_(S,n.units,n.units),r_(T,0,n.units)),A=r_(T,n.units,n.units);i=n.recurrentActivation.apply(Object(Hv.f)(b,k)),a=n.recurrentActivation.apply(Object(Hv.f)(_,A)),w=r_(S,2*n.units,n.units);var P=l_(Object(Hv.Wa)(a,o),r_(n.recurrentKernel.read(),2*n.units,n.units));s=n.activation.apply(Object(Hv.f)(w,P))}var M=Object(Hv.f)(Object(Hv.Wa)(i,o),Object(Hv.Wa)(Object(Hv.f)(ib(1),Object(Hv.Ya)(i)),s));return[M,M]})},t.prototype.getConfig=function(){var t={units:this.units,activation:dx(this.activation),recurrentActivation:dx(this.recurrentActivation),useBias:this.useBias,kernelInitializer:M_(this.kernelInitializer),recurrentInitializer:M_(this.recurrentInitializer),biasInitializer:M_(this.biasInitializer),kernelRegularizer:Ex(this.kernelRegularizer),recurrentRegularizer:Ex(this.recurrentRegularizer),biasRegularizer:Ex(this.biasRegularizer),activityRegularizer:Ex(this.activityRegularizer),kernelConstraint:Pb(this.kernelConstraint),recurrentConstraint:Pb(this.recurrentConstraint),biasConstraint:Pb(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="GRUCell",t}(_N);Hv.rb.SerializationMap.register(NN);var EN=function(e){function t(t){return 0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new NN(t),e.call(this,t)||this}return Gv(t,e),t.prototype.call=function(t,n){var r=this;return Object(Hv.Tb)(function(){return null!=r.cell.dropoutMask&&(Object(Hv.J)(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Object(Hv.J)(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),e.prototype.call.call(r,t,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})})},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={units:this.units,activation:dx(this.activation),recurrentActivation:dx(this.recurrentActivation),useBias:this.useBias,kernelInitializer:M_(this.kernelInitializer),recurrentInitializer:M_(this.recurrentInitializer),biasInitializer:M_(this.biasInitializer),kernelRegularizer:Ex(this.kernelRegularizer),recurrentRegularizer:Ex(this.recurrentRegularizer),biasRegularizer:Ex(this.biasRegularizer),activityRegularizer:Ex(this.activityRegularizer),kernelConstraint:Pb(this.kernelConstraint),recurrentConstraint:Pb(this.recurrentConstraint),biasConstraint:Pb(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},t.fromConfig=function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)},t.className="GRU",t}(bN);Hv.rb.SerializationMap.register(EN);var ON=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,n.activation=gx(void 0===t.activation?n.DEFAULT_ACTIVATION:t.activation),n.recurrentActivation=gx(void 0===t.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=D_(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=D_(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=D_(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.unitForgetBias=t.unitForgetBias,n.kernelRegularizer=Cx(t.kernelRegularizer),n.recurrentRegularizer=Cx(t.recurrentRegularizer),n.biasRegularizer=Cx(t.biasRegularizer),n.kernelConstraint=Db(t.kernelConstraint),n.recurrentConstraint=Db(t.recurrentConstraint),n.biasConstraint=Db(t.biasConstraint),n.dropout=Yb([1,Qb([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=Yb([1,Qb([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.implementation=t.implementation,n.stateSize=[n.units,n.units],n.dropoutMask=null,n.recurrentDropoutMask=null,n}return Gv(t,e),t.prototype.build=function(e){var t,n,r=(e=V_(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var o=this.biasInitializer,i=this.units;t=new((n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gv(t,e),t.prototype.apply=function(e,t){var n=o.apply([i]),r=(new b_).apply([i]),a=o.apply([2*i]);return a_(a_(n,r),a)},t}(y_)).className="CustomInit",n)}else t=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,t,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){var r=null!=t.training&&t.training;if(3!==(e=e).length)throw new ub("LSTMCell expects 3 input Tensors (inputs, h, c), got "+e.length+".");var o=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=SN(function(){return Object(Hv.db)(e)},n.dropout,r,4)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=SN(function(){return Object(Hv.db)(o)},n.recurrentDropout,r,4));var a,s,u,l,c=n.dropoutMask,f=n.recurrentDropoutMask;if(1===n.implementation){var p=r_(n.kernel.read(),0,n.units),h=r_(n.kernel.read(),n.units,n.units),d=r_(n.kernel.read(),2*n.units,n.units),m=r_(n.kernel.read(),3*n.units,n.units),g=r_(n.recurrentKernel.read(),0,n.units),y=r_(n.recurrentKernel.read(),n.units,n.units),v=r_(n.recurrentKernel.read(),2*n.units,n.units),b=r_(n.recurrentKernel.read(),3*n.units,n.units),_=void 0,w=void 0,x=void 0,N=void 0;0<n.dropout&&n.dropout<1?(_=Object(Hv.Wa)(e,c[0]),w=Object(Hv.Wa)(e,c[1]),x=Object(Hv.Wa)(e,c[2]),N=Object(Hv.Wa)(e,c[3])):(_=e,w=e,x=e,N=e);var E=l_(_,p),O=l_(w,h),C=l_(x,d),I=l_(N,m);if(n.useBias){var S=n_(n.bias.read(),0,n.units),T=n_(n.bias.read(),n.units,n.units),k=n_(n.bias.read(),2*n.units,n.units),A=n_(n.bias.read(),3*n.units,n.units);E=p_(E,S),O=p_(O,T),C=p_(C,k),I=p_(I,A)}var P=void 0,M=void 0,D=void 0,R=void 0;0<n.recurrentDropout&&n.recurrentDropout<1?(P=Object(Hv.Wa)(o,f[0]),M=Object(Hv.Wa)(o,f[1]),D=Object(Hv.Wa)(o,f[2]),R=Object(Hv.Wa)(o,f[3])):(P=o,M=o,D=o,R=o),a=n.recurrentActivation.apply(Object(Hv.f)(E,l_(P,g))),s=n.recurrentActivation.apply(Object(Hv.f)(O,l_(M,y))),u=Object(Hv.f)(Object(Hv.Wa)(s,i),Object(Hv.Wa)(a,n.activation.apply(Object(Hv.f)(C,l_(D,v))))),l=n.recurrentActivation.apply(Object(Hv.f)(I,l_(R,b)))}else{0<n.dropout&&n.dropout<1&&(e=Object(Hv.Wa)(e,c[0]));var j=l_(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(o=Object(Hv.Wa)(o,f[0])),j=Object(Hv.f)(j,l_(o,n.recurrentKernel.read())),n.useBias&&(j=p_(j,n.bias.read()));var L=r_(j,0,n.units),V=r_(j,n.units,n.units),z=r_(j,2*n.units,n.units),F=r_(j,3*n.units,n.units);a=n.recurrentActivation.apply(L),s=n.recurrentActivation.apply(V),u=Object(Hv.f)(Object(Hv.Wa)(s,i),Object(Hv.Wa)(a,n.activation.apply(z))),l=n.recurrentActivation.apply(F)}var B=Object(Hv.Wa)(l,n.activation.apply(u));return[B,B,u]})},t.prototype.getConfig=function(){var t={units:this.units,activation:dx(this.activation),recurrentActivation:dx(this.recurrentActivation),useBias:this.useBias,kernelInitializer:M_(this.kernelInitializer),recurrentInitializer:M_(this.recurrentInitializer),biasInitializer:M_(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ex(this.kernelRegularizer),recurrentRegularizer:Ex(this.recurrentRegularizer),biasRegularizer:Ex(this.biasRegularizer),activityRegularizer:Ex(this.activityRegularizer),kernelConstraint:Pb(this.kernelConstraint),recurrentConstraint:Pb(this.recurrentConstraint),biasConstraint:Pb(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="LSTMCell",t}(_N);Hv.rb.SerializationMap.register(ON);var CN=function(e){function t(t){return 0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new ON(t),e.call(this,t)||this}return Gv(t,e),t.prototype.call=function(t,n){var r=this;return Object(Hv.Tb)(function(){return null!=r.cell.dropoutMask&&(Object(Hv.J)(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Object(Hv.J)(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),e.prototype.call.call(r,t,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})})},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={units:this.units,activation:dx(this.activation),recurrentActivation:dx(this.recurrentActivation),useBias:this.useBias,kernelInitializer:M_(this.kernelInitializer),recurrentInitializer:M_(this.recurrentInitializer),biasInitializer:M_(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ex(this.kernelRegularizer),recurrentRegularizer:Ex(this.recurrentRegularizer),biasRegularizer:Ex(this.biasRegularizer),activityRegularizer:Ex(this.activityRegularizer),kernelConstraint:Pb(this.kernelConstraint),recurrentConstraint:Pb(this.recurrentConstraint),biasConstraint:Pb(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},t.fromConfig=function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)},t.className="LSTM",t}(bN);Hv.rb.SerializationMap.register(CN);var IN=function(e){function t(t){var n=e.call(this,t)||this;return n.cells=t.cells,n}return Gv(t,e),Object.defineProperty(t.prototype,"stateSize",{get:function(){for(var e=[],t=0,n=this.cells.slice().reverse();t<n.length;t++){var r=n[t];Array.isArray(r.stateSize)?e.push.apply(e,r.stateSize):e.push(r.stateSize)}return e},enumerable:!0,configurable:!0}),t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){for(var r=(e=e).slice(1),o=[],i=0,a=n.cells.slice().reverse();i<a.length;i++){var s=a[i];Array.isArray(s.stateSize)?o.push(r.splice(0,s.stateSize.length)):o.push(r.splice(0,1))}o.reverse();for(var u,l=[],c=0;c<n.cells.length;++c)s=n.cells[c],r=o[c],u=0===c?[e[0]].concat(r):[u[0]].concat(r),u=s.call(u,t),l.push(u.slice(1));r=[];for(var f=0,p=l.slice().reverse();f<p.length;f++)r.push.apply(r,p[f]);return[u[0]].concat(r)})},t.prototype.build=function(e){var t;R_(e)&&(e=e[0]),e=e;for(var n=0,r=this.cells;n<r.length;n++){var o=r[n];o.build(e),t=Array.isArray(o.stateSize)?o.stateSize[0]:o.stateSize,e=[e[0],t]}this.built=!0},t.prototype.getConfig=function(){for(var t=[],n=0,r=this.cells;n<r.length;n++){var o=r[n];t.push({className:this.getClassName(),config:o.getConfig()})}var i={cells:t},a=e.prototype.getConfig.call(this);return Object.assign(i,a),i},t.fromConfig=function(e,t,n){void 0===n&&(n={});for(var r=[],o=0,i=t.cells;o<i.length;o++)r.push(Lw(i[o],n));return new e({cells:r})},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var e=[],t=0,n=this.cells;t<n.length;t++)e.push.apply(e,n[t].trainableWeights);return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){for(var e=[],t=0,n=this.cells;t<n.length;t++){var r=n[t];e.push.apply(e,r.nonTrainableWeights)}if(!this.trainable){for(var o=[],i=0,a=this.cells;i<a.length;i++)o.push.apply(o,(r=a[i]).trainableWeights);return o.concat(e)}return e},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){for(var e=[],t=0,n=this.cells;t<n.length;t++)e.push.apply(e,n[t].weights);return U_(e)},t.prototype.setWeights=function(e){for(var t=[],n=0,r=this.cells;n<r.length;n++)for(var o=r[n],i=e.splice(o.weights.length),a=0;a<o.weights.length;++a)t.push([o.weights[a],i[a]]);W_(t)},t.className="StackedRNNCells",t}(_N);function SN(e,t,n,r){function o(){return h_(e(),ib(t))}if(void 0===n&&(n=null),void 0===r&&(r=1),r>1){for(var i=[],a=0;a<r;a++)i.push(d_(o,e,n));return i.forEach(function(e){return Object(Hv.Aa)(e)}),i}return Object(Hv.Aa)(d_(o,e,n))}Hv.rb.SerializationMap.register(IN);var TN=function(e){function t(t){var n=e.call(this,t)||this;return n.layer=t.layer,n}return Gv(t,e),t.prototype.build=function(e){this.built=!0},Object.defineProperty(t.prototype,"trainable",{get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){return this.layer.getWeights()},t.prototype.setWeights=function(e){this.layer.setWeights(e)},t.prototype.getConfig=function(){var t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.fromConfig=function(e,t,n){void 0===n&&(n={});var r=Lw(t.layer,n);delete t.layer;var o={layer:r};return Object.assign(o,t),new e(o)},t}(X_),kN=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n}return Gv(t,e),t.prototype.build=function(t){if((t=V_(t)).length<3)throw new ub("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(t));this.inputSpec=[{shape:t}];var n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),e.prototype.build.call(this,t)},t.prototype.computeOutputShape=function(e){var t=[(e=V_(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t);return[n[0],e[1]].concat(n.slice(1))},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){return vN(function(e,r){return[n.layer.call(e,t),[]]},e=L_(e),[],!1,null,null,!1)[1]})},t.className="TimeDistributed",t}(TN);Hv.rb.SerializationMap.register(kN);var AN=["sum","mul","concat","ave"],PN=function(e){function t(t){var n=e.call(this,t)||this,r=t.layer.getConfig();if(n.forwardLayer=Lw({className:t.layer.getClassName(),config:r}),r.goBackwards=!0!==r.goBackwards,n.backwardLayer=Lw({className:t.layer.getClassName(),config:r}),n.forwardLayer.name="forward_"+n.forwardLayer.name,n.backwardLayer.name="backward_"+n.backwardLayer.name,Nb(AN,"BidirectionalMergeMode",t.mergeMode),n.mergeMode=t.mergeMode,t.weights)throw new lb("weights support is not implemented for Bidirectional layer yet.");return n._stateful=t.layer.stateful,n.returnSequences=t.layer.returnSequences,n.returnState=t.layer.returnState,n.supportsMasking=!0,n._trainable=!0,n.inputSpec=t.layer.inputSpec,n.numConstants=null,n}return Gv(t,e),Object.defineProperty(t.prototype,"trainable",{get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},t.prototype.setWeights=function(e){var t=Math.floor(e.length/2);this.forwardLayer.setWeights(e.slice(0,t)),this.backwardLayer.setWeights(e.slice(t))},t.prototype.computeOutputShape=function(e){var t,n,r,o=this.forwardLayer.computeOutputShape(e);return Array.isArray(o)&&Array.isArray(o[0])||(o=[o]),o=o,this.returnState?(r=o.slice(1),t=o[0]):t=o[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):db(n)},t.prototype.apply=function(t,n){var r=null==n?null:n.initialState,o=null==n?null:n.constants;null==n&&(n={});var i=yN(t,r,o,this.numConstants);if(t=i.inputs,r=i.initialState,o=i.constants,Array.isArray(t)&&(r=t.slice(1),t=t[0]),(null==r||0===r.length)&&null==o)return e.prototype.apply.call(this,t,n);var a=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new ub("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,a.push.apply(a,r);var l=r.map(function(e){return new $_({shape:e.shape})});this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,l)}if(null!=o)throw new lb("Support for constants in Bidirectional layers is not implemented yet.");for(var c=a[0]instanceof H_,f=0,p=a;f<p.length;f++)if(p[f]instanceof H_!==c)throw new ub("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){var h=[t].concat(a),d=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=d;var g=e.prototype.apply.call(this,h,n);return this.inputSpec=m,g}return e.prototype.apply.call(this,t,n)},t.prototype.call=function(e,t){var n=this;return Object(Hv.Tb)(function(){if(null!=t.mask)throw new lb("The support for masking is not implemented for Bidirectional layers yet.");var r,o,i,a,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),o=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),o=n.forwardLayer.call(e,Object.assign(t,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(o.slice(1))),r=r[0],o=o[0]),n.returnSequences&&(o=Object(Hv.mb)(o,1)),"concat"===n.mergeMode?a=i_([r,o]):"sum"===n.mergeMode?a=Object(Hv.f)(r,o):"ave"===n.mergeMode?a=Object(Hv.Wa)(ib(.5),Object(Hv.f)(r,o)):"mul"===n.mergeMode?a=Object(Hv.Wa)(r,o):null==n.mergeMode&&(a=[r,o]),n.returnState?null==n.mergeMode?a.concat(i):[a].concat(i):a})},t.prototype.resetStates=function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},t.prototype.build=function(e){var t=this;Wb(this.forwardLayer.name,function(){t.forwardLayer.build(e)}),Wb(this.backwardLayer.name,function(){t.backwardLayer.build(e)}),this.built=!0},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={mergeMode:this.mergeMode},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.fromConfig=function(e,t){var n=Lw(t.layer);if(delete t.layer,null!=t.numConstants)throw new lb("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)},t.className="Bidirectional",t}(TN);function MN(e){return new sN(e)}function DN(e){return new cN(e)}function RN(e){return new hN(e)}function jN(e){return new gN(e)}function LN(e){return new aN(e)}function VN(e){return new lN(e)}Hv.rb.SerializationMap.register(PN);var zN=Object.freeze({inputLayer:function(e){return new Z_(e)},elu:function(e){return new vx(e)},leakyReLU:function(e){return new yx(e)},softmax:function(e){return new _x(e)},thresholdedReLU:function(e){return new bx(e)},conv1d:function(e){return new jx(e)},conv2d:function(e){return new Mx(e)},conv2dTranspose:function(e){return new Dx(e)},separableConv2d:function(e){return new Rx(e)},cropping2D:function(e){return new Lx(e)},upSampling2d:function(e){return new Vx(e)},depthwiseConv2d:function(e){return new zx(e)},activation:function(e){return new Wx(e)},dense:function(e){return new Bx(e)},dropout:function(e){return new Fx(e)},flatten:function(e){return new Ux(e)},repeatVector:function(e){return new $x(e)},reshape:function(e){return new Hx(e)},permute:function(e){return new qx(e)},embedding:function(e){return new Gx(e)},add:function(e){return new Xx(e)},average:function(e){return new Yx(e)},concatenate:function(e){return new eN(e)},maximum:function(e){return new Qx(e)},minimum:function(e){return new Jx(e)},multiply:function(e){return new Zx(e)},batchNormalization:function(e){return new nN(e)},zeroPadding2d:function(e){return new rN(e)},averagePooling1d:MN,avgPool1d:function(e){return MN(e)},avgPooling1d:function(e){return MN(e)},averagePooling2d:DN,avgPool2d:function(e){return DN(e)},avgPooling2d:function(e){return DN(e)},globalAveragePooling1d:function(e){return new pN(e)},globalAveragePooling2d:function(e){return new mN(e)},globalMaxPooling1d:RN,globalMaxPooling2d:jN,maxPooling1d:LN,maxPooling2d:VN,gru:function(e){return new EN(e)},gruCell:function(e){return new NN(e)},lstm:function(e){return new CN(e)},lstmCell:function(e){return new ON(e)},simpleRNN:function(e){return new xN(e)},simpleRNNCell:function(e){return new wN(e)},rnn:function(e){return new bN(e)},stackedRNNCells:function(e){return new IN(e)},bidirectional:function(e){return new PN(e)},timeDistributed:function(e){return new kN(e)},globalMaxPool1d:RN,globalMaxPool2d:jN,maxPool1d:LN,maxPool2d:VN,Layer:X_,RNN:bN,RNNCell:_N,input:function(e){return Y_(e)}});Object.freeze({binaryAccuracy:function(e,t){return ww(e,t)},binaryCrossentropy:function(e,t){return Nw(e,t)},categoricalAccuracy:function(e,t){return xw(e,t)},categoricalCrossentropy:function(e,t){return Aw(e,t)},cosineProximity:function(e,t){return bw(e,t)},meanAbsoluteError:function(e,t){return sw(e,t)},meanAbsolutePercentageError:function(e,t){return uw(e,t)},MAPE:function(e,t){return uw(e,t)},mape:function(e,t){return uw(e,t)},meanSquaredError:function(e,t){return aw(e,t)},MSE:function(e,t){return aw(e,t)},mse:function(e,t){return aw(e,t)}}),Object.freeze({l1l2:function(e){return new xx(e)},l1:function(e){return function(e){return new xx({l1:null!=e?e.l1:null,l2:0})}(e)},l2:function(e){return function(e){return new xx({l2:null!=e?e.l2:null,l1:0})}(e)}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}Gv(t,e),t.prototype.setModel=function(e){if(!(e instanceof ex))throw new Error("model must be a Model, not some other Container");this.model=e}}(J_),n("tgWb");var FN=function(){function e(){this.prediction=0,this.loaded=!1}return e.prototype.ngOnChanges=function(){this.train()},e.prototype.train=function(){return e=this,void 0,n=function(){var e,t,n,r;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(o){switch(o.label){case 0:return this.loaded=!1,this.linearModel=new tx(void 0),this.linearModel.add(zN.dense({units:1,inputShape:[1]})),this.linearModel.compile({loss:"meanSquaredError",optimizer:"sgd"}),e=this.data.map(function(e){return e.x}),t=this.data.map(function(e){return e.y}),n=Hv.Sb(t,[this.data.length,1]),r=Hv.Sb(e,[this.data.length,1]),[4,this.linearModel.fit(n,r,{epochs:250})];case 1:return o.sent(),this.loaded=!0,[2]}})},new((t=void 0)||(t=Promise))(function(r,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?r(e.value):new t(function(t){t(e.value)}).then(i,a)}s((n=n.apply(e,[])).next())});var e,t,n},e.prototype.predict=function(){var e=this.linearModel.predict(Hv.Sb([this.inputValue],[1,1]));this.prediction=Array.from(e.dataSync())[0]},e}(),BN=Lr({encapsulation:2,styles:[],data:{}});function UN(e){return Ei(0,[(e()(),po(0,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(e()(),po(1,0,null,null,6,"input",[["class","predict-input"],["placeholder","ex. 5.9"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Bo(e,2)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Bo(e,2).onTouched()&&r),"compositionstart"===t&&(r=!1!==Bo(e,2)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Bo(e,2)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==Bo(e,3).onChange(n.target.value)&&r),"input"===t&&(r=!1!==Bo(e,3).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Bo(e,3).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.inputValue=n)&&r),"change"===t&&(r=!1!==o.predict()&&r),r},null,null)),ei(2,16384,null,0,Ql,[mn,gn,[2,Yl]],null,null),ei(3,16384,null,0,tc,[mn,gn],null,null),ti(1024,null,Xl,function(e,t){return[e,t]},[Ql,tc]),ei(5,671744,null,0,Tc,[[8,null],[8,null],[8,null],[6,Xl]],{model:[0,"model"]},{update:"ngModelChange"}),ti(2048,null,rc,null,[Tc]),ei(7,16384,null,0,gc,[[4,rc]],null,null)],function(e,t){e(t,5,0,t.component.inputValue)},function(e,t){e(t,1,0,Bo(t,7).ngClassUntouched,Bo(t,7).ngClassTouched,Bo(t,7).ngClassPristine,Bo(t,7).ngClassDirty,Bo(t,7).ngClassValid,Bo(t,7).ngClassInvalid,Bo(t,7).ngClassPending)})}function WN(e){return Ei(0,[(e()(),po(0,0,null,null,4,"div",[["class","row border"]],null,null,null,null,null)),(e()(),po(1,0,null,null,3,"div",[["class","center"]],null,null,null,null,null)),(e()(),po(2,0,null,null,1,"div",[["class","training-caption"]],null,null,null,null,null)),(e()(),wi(-1,null,["Training model..."])),(e()(),po(4,0,null,null,0,"div",[["class","loader"]],null,null,null,null,null))],null,null)}function $N(e){return Ei(0,[(e()(),po(0,0,null,null,12,"div",[["class","form-control"]],null,null,null,null,null)),(e()(),po(1,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),wi(-1,null,["Type "])),(e()(),po(3,0,null,null,1,"b",[],null,null,null,null,null)),(e()(),wi(-1,null,["Y"])),(e()(),wi(-1,null,[" value, to get predicted "])),(e()(),po(6,0,null,null,1,"b",[],null,null,null,null,null)),(e()(),wi(-1,null,["X"])),(e()(),wi(-1,null,[" by machine learning (in base example- type fuel usage, to get predicted speed):"])),(e()(),fo(16777216,null,null,1,null,UN)),ei(10,16384,null,0,Cu,[bn,vn],{ngIf:[0,"ngIf"]},null),(e()(),fo(16777216,null,null,1,null,WN)),ei(12,16384,null,0,Cu,[bn,vn],{ngIf:[0,"ngIf"]},null),(e()(),po(13,0,null,null,3,"p",[["class","alert alert-success"]],null,null,null,null,null)),(e()(),wi(-1,null,["Estimated X value is: "])),(e()(),po(15,0,null,null,1,"b",[],null,null,null,null,null)),(e()(),wi(16,null,["",""]))],function(e,t){var n=t.component;e(t,10,0,n.loaded),e(t,12,0,!n.loaded)},function(e,t){e(t,16,0,t.component.prediction)})}var HN=Lr({encapsulation:0,styles:[[""]],data:{}});function qN(e){return Ei(0,[(e()(),po(0,0,null,null,21,"div",[["class","container"]],null,null,null,null,null)),(e()(),po(1,0,null,null,6,"div",[["class","title"]],null,null,null,null,null)),(e()(),po(2,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(e()(),po(3,0,null,null,1,"h2",[["class","center"]],null,null,null,null,null)),(e()(),wi(-1,null,["Linear Regression Predictor"])),(e()(),po(5,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(e()(),po(6,0,null,null,1,"p",[["class","center"]],null,null,null,null,null)),(e()(),wi(-1,null,["A Machine Learning and TensorFlow solution for predicting linear values."])),(e()(),po(8,0,null,null,13,"div",[["class","row"]],null,null,null,null,null)),(e()(),po(9,0,null,null,4,"div",[["class","col-md-4"]],null,null,null,null,null)),(e()(),po(10,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(e()(),po(11,0,null,null,2,"div",[["class","table-container"]],null,null,null,null,null)),(e()(),po(12,0,null,null,1,"data-table",[],null,[[null,"onTitlesChange"],[null,"onValuesChange"]],function(e,t,n){var r=!0,o=e.component;return"onTitlesChange"===t&&(r=!1!==o.updateTitles(n)&&r),"onValuesChange"===t&&(r=!1!==o.updateDataset(n)&&r),r},Rc,Mc)),ei(13,49152,null,0,Pc,[],{data:[0,"data"],columnTitles:[1,"columnTitles"]},{onValuesChange:"onValuesChange",onTitlesChange:"onTitlesChange"}),(e()(),po(14,0,null,null,7,"div",[["class","col-md-8"]],null,null,null,null,null)),(e()(),po(15,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(e()(),po(16,0,null,null,1,"graph-data",[],null,null,null,$v,Wv)),ei(17,573440,null,0,Uv,[],{data:[0,"data"],columnTitles:[1,"columnTitles"]},null),(e()(),po(18,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(e()(),po(19,0,null,null,2,"div",[["class","center"]],null,null,null,null,null)),(e()(),po(20,0,null,null,1,"prediction",[],null,null,null,$N,BN)),ei(21,573440,null,0,FN,[],{data:[0,"data"]},null)],function(e,t){var n=t.component;e(t,13,0,n.data,n.columnTitles),e(t,17,0,n.data,n.columnTitles),e(t,21,0,n.data)},null)}var GN=function(e,t,n,r,o,i){return new Ao("app-root",hu,function(e){return Ei(0,[(e()(),po(0,0,null,null,1,"app-root",[],null,null,null,qN,HN)),ei(1,114688,null,0,hu,[],null,null)],function(e,t){e(t,1,0)},null)},{},{},[])}(),KN=function(e,t,n){return new Aa(pu,[hu],function(e){return function(e){for(var t={},n=[],r=!1,o=0;o<e.length;o++){var i=e[o];i.token===rt&&!0===i.value&&(r=!0),1073741824&i.flags&&n.push(i.token),i.index=o,t[Dr(i.token)]=i}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}([xo(512,Dt,Rt,[[8,[GN]],[3,Dt],Lt]),xo(5120,qn,Xn,[[3,qn]]),xo(4608,wu,xu,[qn,[2,_u]]),xo(4608,Ot,Ot,[]),xo(5120,yt,vt,[]),xo(5120,Fn,Gn,[]),xo(5120,Bn,Kn,[]),xo(4608,kl,Al,[ku]),xo(6144,_r,null,[kl]),xo(4608,Nl,Ol,[]),xo(5120,Zu,function(e,t,n,r,o,i,a,s){return[new wl(e,t,n),new Tl(r),new Cl(o,i,a,s)]},[ku,$t,wt,ku,ku,Nl,Nt,[2,El]]),xo(4608,Yu,Yu,[Zu,$t]),xo(135680,el,el,[ku]),xo(4608,sl,sl,[Yu,el]),xo(6144,hn,null,[sl]),xo(6144,Ju,null,[el]),xo(4608,Qt,Qt,[$t]),xo(4608,oc,oc,[]),xo(1073742336,Tu,Tu,[]),xo(1024,nt,zl,[]),xo(1024,mt,function(e){return[(t=e,Gu("probe",Xu),Gu("coreTokens",i({},Ku,(t||[]).reduce(function(e,t){return e[t.name]=t.token,e},{}))),function(){return Xu})];var t},[[2,an]]),xo(512,gt,gt,[[2,mt]]),xo(131584,fn,fn,[$t,Nt,ke,nt,Dt,gt]),xo(1073742336,Zn,Zn,[fn]),xo(1073742336,Fl,Fl,[[3,Fl]]),xo(1073742336,kc,kc,[]),xo(1073742336,Ac,Ac,[]),xo(1073742336,pu,pu,[]),xo(256,rt,!0,[])])})}();(function(){if(nn)throw new Error("Cannot enable prod mode after platform setup.");tn=!1})(),Vl().bootstrapModuleFactory(KN).catch(function(e){return console.log(e)})}},[[3,0]]]);